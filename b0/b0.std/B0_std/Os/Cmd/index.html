<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cmd (b0.b0.std.B0_std.Os.Cmd)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../';
let search_urls = ['../../../../sherlodoc_db.js','../../../../../sherlodoc.js'];
</script><script src="../../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../../index.html">üè†</a> &#x00BB; <a href="../../../../index.html">B0  <span class="version">v0.0.5</span></a> &#x00BB; Library <code>b0.std</code> &#x00BB; <a href="../../index.html">B0_std</a> &#x00BB; <a href="../index.html">Os</a> &#x00BB; Cmd</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Os.Cmd</span></code></h1><p>Executing commands.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#search">Tool search</a></li><li><a href="#statuses">Process completion statuses</a></li><li><a href="#stdis">Process standard inputs</a></li><li><a href="#stdos">Process standard outputs</a></li><li><a href="#run">Command execution</a><ul><li><a href="#run_block">Blocking</a></li><li><a href="#spawn">Non-blocking</a></li><li><a href="#tracing">Tracing</a></li></ul></li><li><a href="#exec">Executing files</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../../index.html">B0  <span class="version">v0.0.5</span></a><ul><li><a href="../../../../b00_manual.html">B00 manual</a></li><li><a href="../../../../cmdlet_manual.html">Cmdlet manual</a></li><li><a href="../../../../driver_dev.html">B0 driver development manual</a></li><li><a href="../../../../manual.html">B0 manual</a></li><li><a href="../../../../old_manual.html">B0 manual</a></li><li><a href="../../../../opam.html"><code>opam</code> support manual</a></li><li><a href="../../../../rationale.html">Why b0 ?</a></li><li><a href="../../../../release.html">B0 release support manual</a></li><li><a href="../../../../todo.html">Design considerations and todo</a></li><li><a href="../../../../unit_manual.html">Build unit manual</a></li><li>Library <code>b0</code><ul><li><a href="../../../../b0/B0_build/index.html">B0_build</a></li><li><a href="../../../../b0/B0_cli/index.html">B0_cli</a></li><li><a href="../../../../b0/B0_cmdlet/index.html">B0_cmdlet</a></li><li><a href="../../../../b0/B0_def/index.html">B0_def</a></li><li><a href="../../../../b0/B0_dir/index.html">B0_dir</a></li><li><a href="../../../../b0/B0_driver/index.html">B0_driver</a></li><li><a href="../../../../b0/B0_file/index.html">B0_file</a></li><li><a href="../../../../b0/B0_meta/index.html">B0_meta</a></li><li><a href="../../../../b0/B0_pack/index.html">B0_pack</a></li><li><a href="../../../../b0/B0_unit/index.html">B0_unit</a></li></ul></li><li>Library <code>b0.b0</code><ul><li><a href="../../../../b0.b0/B0_b0/index.html">B0_b0</a></li><li><a href="../../../../b0.b0/B0_cmd_build/index.html">B0_cmd_build</a></li><li><a href="../../../../b0.b0/B0_cmd_cmd/index.html">B0_cmd_cmd</a></li><li><a href="../../../../b0.b0/B0_cmd_cmdlet/index.html">B0_cmd_cmdlet</a></li><li><a href="../../../../b0.b0/B0_cmd_delete/index.html">B0_cmd_delete</a></li><li><a href="../../../../b0.b0/B0_cmd_file/index.html">B0_cmd_file</a></li><li><a href="../../../../b0.b0/B0_cmd_list/index.html">B0_cmd_list</a></li><li><a href="../../../../b0.b0/B0_cmd_log/index.html">B0_cmd_log</a></li><li><a href="../../../../b0.b0/B0_cmd_pack/index.html">B0_cmd_pack</a></li><li><a href="../../../../b0.b0/B0_cmd_root/index.html">B0_cmd_root</a></li><li><a href="../../../../b0.b0/B0_cmd_scope/index.html">B0_cmd_scope</a></li><li><a href="../../../../b0.b0/B0_cmd_unit/index.html">B0_cmd_unit</a></li><li><a href="../../../../b0.b0/B0_main/index.html">B0_main</a></li></ul></li><li>Library <code>b0.b00</code><ul><li><a href="../../../../b0.b00/B00/index.html">B00</a></li><li><a href="../../../../b0.b00/B000/index.html">B000</a></li><li><a href="../../../../b0.b00/B000_conv/index.html">B000_conv</a></li></ul></li><li>Library <code>b0.b00.kit</code><ul><li><a href="../../../../b0.b00.kit/B00_base64/index.html">B00_base64</a></li><li><a href="../../../../b0.b00.kit/B00_cli/index.html">B00_cli</a></li><li><a href="../../../../b0.b00.kit/B00_cmark/index.html">B00_cmark</a></li><li><a href="../../../../b0.b00.kit/B00_editor/index.html">B00_editor</a></li><li><a href="../../../../b0.b00.kit/B00_fexts/index.html">B00_fexts</a></li><li><a href="../../../../b0.b00.kit/B00_findex/index.html">B00_findex</a></li><li><a href="../../../../b0.b00.kit/B00_github/index.html">B00_github</a></li><li><a href="../../../../b0.b00.kit/B00_htmlg/index.html">B00_htmlg</a></li><li><a href="../../../../b0.b00.kit/B00_http/index.html">B00_http</a></li><li><a href="../../../../b0.b00.kit/B00_jsoo/index.html">B00_jsoo</a></li><li><a href="../../../../b0.b00.kit/B00_lines/index.html">B00_lines</a></li><li><a href="../../../../b0.b00.kit/B00_ocaml/index.html">B00_ocaml</a></li><li><a href="../../../../b0.b00.kit/B00_odoc/index.html">B00_odoc</a></li><li><a href="../../../../b0.b00.kit/B00_os/index.html">B00_os</a></li><li><a href="../../../../b0.b00.kit/B00_pager/index.html">B00_pager</a></li><li><a href="../../../../b0.b00.kit/B00_pdf_viewer/index.html">B00_pdf_viewer</a></li><li><a href="../../../../b0.b00.kit/B00_rsync/index.html">B00_rsync</a></li><li><a href="../../../../b0.b00.kit/B00_serialk_json/index.html">B00_serialk_json</a></li><li><a href="../../../../b0.b00.kit/B00_serialk_sexp/index.html">B00_serialk_sexp</a></li><li><a href="../../../../b0.b00.kit/B00_serialk_text/index.html">B00_serialk_text</a></li><li><a href="../../../../b0.b00.kit/B00_trace/index.html">B00_trace</a></li><li><a href="../../../../b0.b00.kit/B00_vcs/index.html">B00_vcs</a></li><li><a href="../../../../b0.b00.kit/B00_www_browser/index.html">B00_www_browser</a></li></ul></li><li>Library <code>b0.kit</code><ul><li><a href="../../../../b0.kit/B0_expect/index.html">B0_expect</a></li><li><a href="../../../../b0.kit/B0_jsoo/index.html">B0_jsoo</a></li><li><a href="../../../../b0.kit/B0_kit/index.html">B0_kit</a></li><li><a href="../../../../b0.kit/B0_ocaml/index.html">B0_ocaml</a></li><li><a href="../../../../b0.kit/B0_ocaml_eco/index.html">B0_ocaml_eco</a></li><li><a href="../../../../b0.kit/B0_opam/index.html">B0_opam</a></li><li><a href="../../../../b0.kit/B0_release/index.html">B0_release</a></li><li><a href="../../../../b0.kit/B0_srcs/index.html">B0_srcs</a></li></ul></li><li>Library <code>b0.std</code><ul><li><a href="../../index.html">B0_std</a><ul><li><a href="../../Type/index.html">Type</a></li><li><a href="../../Tty/index.html">Tty</a></li><li><a href="../../Fmt/index.html">Fmt</a></li><li><a href="../../Result/index.html">Result</a></li><li><a href="../../Char/index.html">Char</a></li><li><a href="../../String/index.html">String</a></li><li><a href="../../List/index.html">List</a></li><li><a href="../../Fpath/index.html">Fpath</a></li><li><a href="../../Hash/index.html">Hash</a></li><li><a href="../../Mtime/index.html">Mtime</a></li><li><a href="../../Cmd/index.html">Cmd</a></li><li><a href="../../Fut/index.html">Fut</a></li><li><a href="../index.html">Os</a><ul><li><a href="../Cpu/index.html">Cpu</a></li><li><a href="../Mtime/index.html">Mtime</a></li><li><a href="../Env/index.html">Env</a></li><li><a href="../Path/index.html">Path</a></li><li><a href="../File/index.html">File</a></li><li><a href="../Dir/index.html">Dir</a></li><li><a href="../Fd/index.html">Fd</a></li><li><a href="#" class="current_unit">Cmd</a></li><li><a href="../Exit/index.html">Exit</a></li></ul></li><li><a href="../../Log/index.html">Log</a></li><li><a href="../../Rqueue/index.html">Rqueue</a></li><li><a href="../../Bincode/index.html">Bincode</a></li></ul></li></ul></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="search"><a href="#search" class="anchor"></a>Tool search</h2><div class="odoc-spec"><div class="spec value anchored" id="val-find_tool"><a href="#val-find_tool" class="anchor"></a><code><span><span class="keyword">val</span> find_tool : 
  <span><span class="optlabel">?win_exe</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?search</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-tool">Cmd.tool</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> option</span>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>find_tool ~win_exe ~search tool</code> is the file path, if any, to the program executable for the tool specification <code>tool</code>. For portability do not add an <code>.exe</code> suffix to <code>tool</code> on Windows, see the <code>win_exe</code> argument.</p><ul><li>If <code>tool</code> has a single path segment: the <em>filename</em> <code>tool</code> is searched, in list order, for the first matching executable file in the directories of <code>search</code>. <code>search</code> defaults to the env var <code>PATH</code> parsed with <a href="../../Fpath/index.html#val-list_of_search_path"><code>Fpath.list_of_search_path</code></a>.</li><li>If <code>tool</code> has multiple path segments: the <em>file path</em> <code>tool</code> is simply tested for <a href="../File/index.html#val-is_executable" title="File.is_executable">existence and executability</a>. <code>Ok (Some tool)</code> is returned if that is case and <code>Ok None</code> otherwise.</li><li>If <code>win_exe</code> is <code>true</code> a <code>.exe</code> suffix is added to <code>tool</code> if it doesn't already have one. Defaults to <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-win32"><code>Stdlib.Sys.win32</code></a>.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_tool"><a href="#val-get_tool" class="anchor"></a><code><span><span class="keyword">val</span> get_tool : 
  <span><span class="optlabel">?win_exe</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?search</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-tool">Cmd.tool</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../Fpath/index.html#type-t">Fpath.t</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>get_tool</code> is like <a href="#val-find_tool"><code>find_tool</code></a> except it errors if <code>Ok None</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_first_tool"><a href="#val-get_first_tool" class="anchor"></a><code><span><span class="keyword">val</span> get_first_tool : 
  <span><span class="optlabel">?win_exe</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?search</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../Cmd/index.html#type-tool">Cmd.tool</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../Fpath/index.html#type-t">Fpath.t</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>get_first_tool tools</code> is the first tool that can be found in the list with <a href="#val-find_tool"><code>find_tool</code></a> or an error if none is found. <code>tools</code> must be non-empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : 
  <span><span class="optlabel">?win_exe</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?search</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../Cmd/index.html#type-t">Cmd.t</a> option</span>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>find cmd</code> is like <a href="#val-find_tool"><code>find_tool</code></a> but looks and replaces <code>cmd</code>'s <a href="../../Cmd/index.html#val-tool"><code>B0_std.Cmd.tool</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : 
  <span><span class="optlabel">?win_exe</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?search</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../Cmd/index.html#type-t">Cmd.t</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>get cmd</code> is like <a href="#val-get_tool"><code>get_tool</code></a> but looks and replaces <code>cmd</code>'s <a href="../../Cmd/index.html#val-tool"><code>B0_std.Cmd.tool</code></a>.</p></div></div><h2 id="statuses"><a href="#statuses" class="anchor"></a>Process completion statuses</h2><div class="odoc-spec"><div class="spec type anchored" id="type-status"><a href="#type-status" class="anchor"></a><code><span><span class="keyword">type</span> status</span><span> = </span><span>[ </span></code><ol><li id="type-status.Exited" class="def variant constructor anchored"><a href="#type-status.Exited" class="anchor"></a><code><span>| </span><span>`Exited <span class="keyword">of</span> int</span></code></li><li id="type-status.Signaled" class="def variant constructor anchored"><a href="#type-status.Signaled" class="anchor"></a><code><span>| </span><span>`Signaled <span class="keyword">of</span> int</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The type for process exit statuses.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_status"><a href="#val-pp_status" class="anchor"></a><code><span><span class="keyword">val</span> pp_status : <span><a href="#type-status">status</a> <a href="../../Fmt/index.html#type-t">Fmt.t</a></span></span></code></div><div class="spec-doc"><p><code>pp_status</code> is a formatter for process exit statuses of the form:</p><ul><li><code>&quot;exited %d&quot;</code> for <code>`Exited _</code> values</li><li><code>&quot;signaled %s&quot;</code> for <code>`Signaled _</code> value</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_cmd_status"><a href="#val-pp_cmd_status" class="anchor"></a><code><span><span class="keyword">val</span> pp_cmd_status : <span><span>(<a href="../../Cmd/index.html#type-t">Cmd.t</a> * <a href="#type-status">status</a>)</span> <a href="../../Fmt/index.html#type-t">Fmt.t</a></span></span></code></div><div class="spec-doc"><p><code>pp_cmd_status</code> is a formatter for command process exit statuses of the form: <code>&quot;cmd [%a]: %a&quot;</code>.</p></div></div><h2 id="stdis"><a href="#stdis" class="anchor"></a>Process standard inputs</h2><div class="odoc-spec"><div class="spec type anchored" id="type-stdi"><a href="#type-stdi" class="anchor"></a><code><span><span class="keyword">type</span> stdi</span></code></div><div class="spec-doc"><p>The type for representing the standard input of a process.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_string"><a href="#val-in_string" class="anchor"></a><code><span><span class="keyword">val</span> in_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stdi">stdi</a></span></code></div><div class="spec-doc"><p><code>in_string s</code> is a standard input that reads the string <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_file"><a href="#val-in_file" class="anchor"></a><code><span><span class="keyword">val</span> in_file : <span><a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stdi">stdi</a></span></code></div><div class="spec-doc"><p><code>in_file f</code> is a standard input that reads from file <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_fd"><a href="#val-in_fd" class="anchor"></a><code><span><span class="keyword">val</span> in_fd : <span><span class="label">close</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../ocaml-base-compiler/unix/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stdi">stdi</a></span></code></div><div class="spec-doc"><p><code>in_fd ~close fd</code> is a standard input that reads from file descriptor <code>fd</code>. If <code>close</code> is <code>true</code>, <code>fd</code> is closed after the process is spawn.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_stdin"><a href="#val-in_stdin" class="anchor"></a><code><span><span class="keyword">val</span> in_stdin : <a href="#type-stdi">stdi</a></span></code></div><div class="spec-doc"><p><code>in_stdin</code> is <code>in_fd ~close:false Unix.stdin</code>, a standard input that reads from the current process standard input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_null"><a href="#val-in_null" class="anchor"></a><code><span><span class="keyword">val</span> in_null : <a href="#type-stdi">stdi</a></span></code></div><div class="spec-doc"><p><code>in_null</code> is <code>in_file File.null</code>.</p></div></div><h2 id="stdos"><a href="#stdos" class="anchor"></a>Process standard outputs</h2><div class="odoc-spec"><div class="spec type anchored" id="type-stdo"><a href="#type-stdo" class="anchor"></a><code><span><span class="keyword">type</span> stdo</span></code></div><div class="spec-doc"><p>The type for representing the standard output of a process.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_file"><a href="#val-out_file" class="anchor"></a><code><span><span class="keyword">val</span> out_file : <span><span class="optlabel">?mode</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">force</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="label">make_path</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stdo">stdo</a></span></code></div><div class="spec-doc"><p><code>out_file ~force ~make_path file</code> is a standard output that writes to file <code>file</code>.</p><ul><li>If <code>make_path</code> is <code>true</code> and the parent directory of <code>file</code> does not exist the whole path to the parent is created as needed with permission <code>0o755</code> (readable and traversable by everyone, writable by the user).</li><li>If <code>force</code> is <code>true</code> and <code>file</code> exists at call time as a regular file it tries to overwrite it, in all other cases the function errors if <code>file</code> exists.</li><li><code>mode</code> are the permissions of the written file; they default to <code>0o644</code>, readable by everyone, writable by the user.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_fd"><a href="#val-out_fd" class="anchor"></a><code><span><span class="keyword">val</span> out_fd : <span><span class="label">close</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../ocaml-base-compiler/unix/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-stdo">stdo</a></span></code></div><div class="spec-doc"><p><code>out_fd ~close fd</code> is a standard output that writes to file descriptor <code>fd</code>. If <code>close</code> is <code>true</code>, <code>fd</code> is closed after the process spawn.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_stdout"><a href="#val-out_stdout" class="anchor"></a><code><span><span class="keyword">val</span> out_stdout : <a href="#type-stdo">stdo</a></span></code></div><div class="spec-doc"><p><code>out_stdout</code> is <code>out_fd ~close:false Unix.stdout</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_stderr"><a href="#val-out_stderr" class="anchor"></a><code><span><span class="keyword">val</span> out_stderr : <a href="#type-stdo">stdo</a></span></code></div><div class="spec-doc"><p><code>out_stderr</code> is <code>out_fd ~close:false Unix.stderr</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-out_null"><a href="#val-out_null" class="anchor"></a><code><span><span class="keyword">val</span> out_null : <a href="#type-stdo">stdo</a></span></code></div><div class="spec-doc"><p><code>out_null</code> is <code>out_file File.null</code></p></div></div><h2 id="run"><a href="#run" class="anchor"></a>Command execution</h2><h3 id="run_block"><a href="#run_block" class="anchor"></a>Blocking</h3><p>These functions wait for the command to complete before proceeding.</p><div class="odoc-spec"><div class="spec value anchored" id="val-run_status"><a href="#val-run_status" class="anchor"></a><code><span><span class="keyword">val</span> run_status : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdin</span>:<a href="#type-stdi">stdi</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdout</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stderr</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-status">status</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>run_status ~env ~cwd ~stdin ~stdout ~stderr cmd</code> runs and waits for the completion of <code>cmd</code> in environment <code>env</code> with current directory <code>cwd</code> and standard IO connections <code>stdin</code>, <code>stdout</code> and <code>stderr</code>.</p><ul><li><code>env</code> defaults to <a href="../Env/index.html#val-current_assignments"><code>Env.current_assignments</code></a><code> ()</code></li><li><code>cwd</code> defaults to <a href="../Dir/index.html#val-cwd"><code>Dir.cwd</code></a><code> ()</code></li><li><code>stdin</code> defaults to <a href="#val-in_stdin"><code>in_stdin</code></a></li><li><code>stdout</code> defaults to <a href="#val-out_stdout"><code>out_stdout</code></a></li><li><code>stderr</code> defaults to <a href="#val-out_stderr"><code>out_stderr</code></a></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_status_out"><a href="#val-run_status_out" class="anchor"></a><code><span><span class="keyword">val</span> run_status_out : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdin</span>:<a href="#type-stdi">stdi</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stderr</span>:<span>[ <span>`Stdo of <a href="#type-stdo">stdo</a></span> <span>| `Out</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">trim</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-status">status</a> * string, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>run_status_out</code> is like <a href="#val-run_status"><code>run_status</code></a> except <code>stdout</code> is read from the process to a string. The string is <a href="../../String/index.html#val-trim"><code>String.trim</code></a>ed if <code>trim</code> is <code>true</code> (default). If <code>stderr</code> is <code>`Out</code> the process' <code>stderr</code> is redirected to <code>stdout</code> and thus read back in the string aswell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdin</span>:<a href="#type-stdi">stdi</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdout</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stderr</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(unit, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>run</code> is <a href="#val-run_status"><code>run_status</code></a> with non-<code>`Exited 0</code> statuses turned into errors via <a href="#val-pp_cmd_status"><code>pp_cmd_status</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_out"><a href="#val-run_out" class="anchor"></a><code><span><span class="keyword">val</span> run_out : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdin</span>:<a href="#type-stdi">stdi</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stderr</span>:<span>[ <span>`Stdo of <a href="#type-stdo">stdo</a></span> <span>| `Out</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">trim</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>run_out</code> is <a href="#val-run_status_out"><code>run_status_out</code></a> with non-<code>`Exited 0</code> statuses reporting the captured output (if any) prefixed by <a href="#val-pp_cmd_status"><code>pp_cmd_status</code></a>.</p></div></div><h3 id="spawn"><a href="#spawn" class="anchor"></a>Non-blocking</h3><p><b>Note.</b> In contrast to <code>waitpid(2)</code> the following API does not allow to collect <em>any</em> child process completion. There are two reasons: first this is not supported on Windows, second this is anti-modular.</p><div class="odoc-spec"><div class="spec type anchored" id="type-pid"><a href="#type-pid" class="anchor"></a><code><span><span class="keyword">type</span> pid</span></code></div><div class="spec-doc"><p>The type for process identifiers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pid_to_int"><a href="#val-pid_to_int" class="anchor"></a><code><span><span class="keyword">val</span> pid_to_int : <span><a href="#type-pid">pid</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>pid_to_int pid</code> is the system identifier for process identifier <code>pid</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn"><a href="#val-spawn" class="anchor"></a><code><span><span class="keyword">val</span> spawn : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdin</span>:<a href="#type-stdi">stdi</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stdout</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stderr</span>:<a href="#type-stdo">stdo</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-pid">pid</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>spawn ~env ~cwd ~stdin ~stdout ~stderr cmd</code> spawns command <code>cmd</code> in environment <code>env</code> with current directory <code>cwd</code> and standard IO connections <code>stdin</code>, <code>stdout</code> and <code>stderr</code>. <code>env</code> defaults to <a href="../Env/index.html#val-current_assignments"><code>Env.current_assignments</code></a><code> ()</code>, <code>cwd</code> to <a href="../Dir/index.html#val-cwd"><code>Dir.cwd</code></a><code> ()</code>, <code>stdin</code> to <a href="#val-in_stdin"><code>in_stdin</code></a>, <code>stdout</code> to <a href="#val-out_stdout"><code>out_stdout</code></a> and <code>stderr</code> to <a href="#val-out_stderr"><code>out_stderr</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_poll_status"><a href="#val-spawn_poll_status" class="anchor"></a><code><span><span class="keyword">val</span> spawn_poll_status : <span><a href="#type-pid">pid</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-status">status</a> option</span>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>spawn_poll_status pid</code> tries to collect the exit status of command spawn <code>pid</code>. If <code>block</code> is <code>false</code>, <code>Ok None</code> is immediately returned if <code>pid</code> has not terinated yet.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_wait_status"><a href="#val-spawn_wait_status" class="anchor"></a><code><span><span class="keyword">val</span> spawn_wait_status : <span><a href="#type-pid">pid</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-status">status</a>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>spawn_wait_status</code> blocks and waits for <code>pid</code>'s termination status to become available.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kill"><a href="#val-kill" class="anchor"></a><code><span><span class="keyword">val</span> kill : <span><a href="#type-pid">pid</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>kill pid signal</code> sends signal <code>signal</code> to the process <code>pid</code>.</p><p><b>Windows.</b> Only the <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-sigkill"><code>Sys.sigkill</code></a> signal is emulated.</p></div></div><h3 id="tracing"><a href="#tracing" class="anchor"></a>Tracing</h3><div class="odoc-spec"><div class="spec type anchored" id="type-spawn_tracer"><a href="#type-spawn_tracer" class="anchor"></a><code><span><span class="keyword">type</span> spawn_tracer</span><span> =
  <span><span><a href="#type-pid">pid</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Env/index.html#type-assignments">Env.assignments</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">cwd</span>:<span><a href="../../Fpath/index.html#type-t">Fpath.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>The type for spawn tracers. Called with each blocking and non-blocking spawned command aswell as <a href="#val-execv"><code>execv</code></a>. The function is given the process identifier of the spawn (or <code>None</code> in case of <a href="#val-execv"><code>execv</code></a>), the environment if different from the program's one, the current working directory if different from the program's one and the actual command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_tracer_nop"><a href="#val-spawn_tracer_nop" class="anchor"></a><code><span><span class="keyword">val</span> spawn_tracer_nop : <a href="#type-spawn_tracer">spawn_tracer</a></span></code></div><div class="spec-doc"><p><code>spawn_tracer_nop</code> is a spawn tracer that does nothing. This is the initial spawn tracer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_tracer"><a href="#val-spawn_tracer" class="anchor"></a><code><span><span class="keyword">val</span> spawn_tracer : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-spawn_tracer">spawn_tracer</a></span></code></div><div class="spec-doc"><p><code>tracer ()</code> is the current spawn tracer. Initially this is <a href="#val-spawn_tracer_nop"><code>spawn_tracer_nop</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_spawn_tracer"><a href="#val-set_spawn_tracer" class="anchor"></a><code><span><span class="keyword">val</span> set_spawn_tracer : <span><a href="#type-spawn_tracer">spawn_tracer</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_tracer t</code> sets the current spawn tracer to <code>t</code>.</p></div></div><h2 id="exec"><a href="#exec" class="anchor"></a>Executing files</h2><p><b>Windows.</b> On Windows a program executing an <code>execv*</code> function yields back control to the terminal as soon as the child starts (vs. ends on POSIX). This entails all sorts of unwanted behaviours. To workaround this, the following function executes, on Windows, the file as a spawned child process which is waited on for completion via <code>waitpid(2)</code>. Once the child process has terminated the calling process is immediately <code>exit</code>ed with the status of the child.</p><div class="odoc-spec"><div class="spec value anchored" id="val-execv"><a href="#val-execv" class="anchor"></a><code><span><span class="keyword">val</span> execv : 
  <span><span class="optlabel">?env</span>:<a href="../Env/index.html#type-assignments">Env.assignments</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cwd</span>:<a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Fpath/index.html#type-t">Fpath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Cmd/index.html#type-t">Cmd.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, string)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>execv ~env ~cwd file argv</code> executes file <code>file</code> as a new process in environment <code>env</code> with <code>args</code> as the <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-argv"><code>Sys.argv</code></a> of this process (in particular <code>Sys.argv.(0)</code> is the name of the program not the first argument to the program). The function only recturns in case of error. <code>env</code> defaults to <a href="../Env/index.html#val-current_assignments"><code>B0_std.Os.Env.current_assignments</code></a><code> ()</code>, <code>cwd</code> to <code>B0_std.Dir.cwd</code><code> ()</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../../Cmd/index.html#type-t">Cmd.t</a></span></code></div><div class="spec-doc"><p><a href="../Exit/index.html"><code>Exit</code></a> needs that alias to refer to <a href="../../Cmd/index.html#type-t"><code>B0_std.Cmd.t</code></a>.</p></div></div></div></body></html>
