<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tloc (b0.b0.b00.kit.B00_serialk_text.Tloc)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../sherlodoc_db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../index.html">üè†</a> &#x00BB; <a href="../../../index.html">B0  <span class="version">v0.0.5</span></a> &#x00BB; Library <code>b0.b00.kit</code> &#x00BB; <a href="../index.html">B00_serialk_text</a> &#x00BB; Tloc</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>B00_serialk_text.Tloc</span></code></h1><p>Text locations.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#tloc">Text locations</a></li><li><a href="#text">Substitutions and insertions</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../index.html">B0  <span class="version">v0.0.5</span></a><ul><li><a href="../../../b00_manual.html">B00 manual</a></li><li><a href="../../../cmdlet_manual.html">Cmdlet manual</a></li><li><a href="../../../driver_dev.html">B0 driver development manual</a></li><li><a href="../../../manual.html">B0 manual</a></li><li><a href="../../../old_manual.html">B0 manual</a></li><li><a href="../../../opam.html"><code>opam</code> support manual</a></li><li><a href="../../../rationale.html">Why b0 ?</a></li><li><a href="../../../release.html">B0 release support manual</a></li><li><a href="../../../todo.html">Design considerations and todo</a></li><li><a href="../../../unit_manual.html">Build unit manual</a></li><li>Library <code>b0</code><ul><li><a href="../../../b0/B0_build/index.html">B0_build</a></li><li><a href="../../../b0/B0_cli/index.html">B0_cli</a></li><li><a href="../../../b0/B0_cmdlet/index.html">B0_cmdlet</a></li><li><a href="../../../b0/B0_def/index.html">B0_def</a></li><li><a href="../../../b0/B0_dir/index.html">B0_dir</a></li><li><a href="../../../b0/B0_driver/index.html">B0_driver</a></li><li><a href="../../../b0/B0_file/index.html">B0_file</a></li><li><a href="../../../b0/B0_meta/index.html">B0_meta</a></li><li><a href="../../../b0/B0_pack/index.html">B0_pack</a></li><li><a href="../../../b0/B0_unit/index.html">B0_unit</a></li></ul></li><li>Library <code>b0.b0</code><ul><li><a href="../../../b0.b0/B0_b0/index.html">B0_b0</a></li><li><a href="../../../b0.b0/B0_cmd_build/index.html">B0_cmd_build</a></li><li><a href="../../../b0.b0/B0_cmd_cmd/index.html">B0_cmd_cmd</a></li><li><a href="../../../b0.b0/B0_cmd_cmdlet/index.html">B0_cmd_cmdlet</a></li><li><a href="../../../b0.b0/B0_cmd_delete/index.html">B0_cmd_delete</a></li><li><a href="../../../b0.b0/B0_cmd_file/index.html">B0_cmd_file</a></li><li><a href="../../../b0.b0/B0_cmd_list/index.html">B0_cmd_list</a></li><li><a href="../../../b0.b0/B0_cmd_log/index.html">B0_cmd_log</a></li><li><a href="../../../b0.b0/B0_cmd_pack/index.html">B0_cmd_pack</a></li><li><a href="../../../b0.b0/B0_cmd_root/index.html">B0_cmd_root</a></li><li><a href="../../../b0.b0/B0_cmd_scope/index.html">B0_cmd_scope</a></li><li><a href="../../../b0.b0/B0_cmd_unit/index.html">B0_cmd_unit</a></li><li><a href="../../../b0.b0/B0_main/index.html">B0_main</a></li></ul></li><li>Library <code>b0.b00</code><ul><li><a href="../../../b0.b00/B00/index.html">B00</a></li><li><a href="../../../b0.b00/B000/index.html">B000</a></li><li><a href="../../../b0.b00/B000_conv/index.html">B000_conv</a></li></ul></li><li>Library <code>b0.b00.kit</code><ul><li><a href="../../B00_base64/index.html">B00_base64</a></li><li><a href="../../B00_cli/index.html">B00_cli</a></li><li><a href="../../B00_cmark/index.html">B00_cmark</a></li><li><a href="../../B00_editor/index.html">B00_editor</a></li><li><a href="../../B00_fexts/index.html">B00_fexts</a></li><li><a href="../../B00_findex/index.html">B00_findex</a></li><li><a href="../../B00_github/index.html">B00_github</a></li><li><a href="../../B00_htmlg/index.html">B00_htmlg</a></li><li><a href="../../B00_http/index.html">B00_http</a></li><li><a href="../../B00_jsoo/index.html">B00_jsoo</a></li><li><a href="../../B00_lines/index.html">B00_lines</a></li><li><a href="../../B00_ocaml/index.html">B00_ocaml</a></li><li><a href="../../B00_odoc/index.html">B00_odoc</a></li><li><a href="../../B00_os/index.html">B00_os</a></li><li><a href="../../B00_pager/index.html">B00_pager</a></li><li><a href="../../B00_pdf_viewer/index.html">B00_pdf_viewer</a></li><li><a href="../../B00_rsync/index.html">B00_rsync</a></li><li><a href="../../B00_serialk_json/index.html">B00_serialk_json</a></li><li><a href="../../B00_serialk_sexp/index.html">B00_serialk_sexp</a></li><li><a href="../index.html">B00_serialk_text</a><ul><li><a href="#" class="current_unit">Tloc</a></li><li><a href="../Tdec/index.html">Tdec</a></li></ul></li><li><a href="../../B00_trace/index.html">B00_trace</a></li><li><a href="../../B00_vcs/index.html">B00_vcs</a></li><li><a href="../../B00_www_browser/index.html">B00_www_browser</a></li></ul></li><li>Library <code>b0.kit</code><ul><li><a href="../../../b0.kit/B0_expect/index.html">B0_expect</a></li><li><a href="../../../b0.kit/B0_jsoo/index.html">B0_jsoo</a></li><li><a href="../../../b0.kit/B0_kit/index.html">B0_kit</a></li><li><a href="../../../b0.kit/B0_ocaml/index.html">B0_ocaml</a></li><li><a href="../../../b0.kit/B0_ocaml_eco/index.html">B0_ocaml_eco</a></li><li><a href="../../../b0.kit/B0_opam/index.html">B0_opam</a></li><li><a href="../../../b0.kit/B0_release/index.html">B0_release</a></li><li><a href="../../../b0.kit/B0_srcs/index.html">B0_srcs</a></li></ul></li><li>Library <code>b0.std</code><ul><li><a href="../../../b0.std/B0_std/index.html">B0_std</a></li></ul></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="tloc"><a href="#tloc" class="anchor"></a>Text locations</h2><div class="odoc-spec"><div class="spec type anchored" id="type-fpath"><a href="#type-fpath" class="anchor"></a><code><span><span class="keyword">type</span> fpath</span><span> = string</span></code></div><div class="spec-doc"><p>The type for file paths.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_file"><a href="#val-no_file" class="anchor"></a><code><span><span class="keyword">val</span> no_file : <a href="#type-fpath">fpath</a></span></code></div><div class="spec-doc"><p><code>no_file</code> is <code>Fpath.t &quot;-&quot;</code>, a path used when no file is specified.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-pos"><a href="#type-pos" class="anchor"></a><code><span><span class="keyword">type</span> pos</span><span> = int</span></code></div><div class="spec-doc"><p>The type for zero-based, absolute, byte positions in text.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-line"><a href="#type-line" class="anchor"></a><code><span><span class="keyword">type</span> line</span><span> = int</span></code></div><div class="spec-doc"><p>The type for one-based, line numbers in the text. Lines increment after a line feed <code>'\n'</code> (U+000A), a carriage return <code>'\r'</code> (U+000D) or a carriage return and a line feed <code>&quot;\r\n&quot;</code> (&lt;U+000D,U+000A&gt;).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-line_pos"><a href="#type-line_pos" class="anchor"></a><code><span><span class="keyword">type</span> line_pos</span><span> = <a href="#type-line">line</a> * <a href="#type-pos">pos</a></span></code></div><div class="spec-doc"><p>The type for line positions. The line number and the byte position of the first element on the line. The later is the byte position after the newline which may not exist (at the end of file).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for text locations. A text location is a range of byte positions and the lines on which they occur in the UTF-8 encoded text of a particular file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : 
  <span><span class="label">file</span>:<a href="#type-fpath">fpath</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sbyte</span>:<a href="#type-pos">pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ebyte</span>:<a href="#type-pos">pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sline</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">eline</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>v ~file ~sbyte ~ebyte ~sline ~eline</code> is a contructor for text locations. See corresponding accessors for the semantics. If you don't have a file use <a href="#val-no_file"><code>no_file</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file"><a href="#val-file" class="anchor"></a><code><span><span class="keyword">val</span> file : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-fpath">fpath</a></span></code></div><div class="spec-doc"><p><code>file l</code> is <code>l</code>'s file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sbyte"><a href="#val-sbyte" class="anchor"></a><code><span><span class="keyword">val</span> sbyte : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-pos">pos</a></span></code></div><div class="spec-doc"><p><code>sbyte l</code> is <code>l</code>'s start position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ebyte"><a href="#val-ebyte" class="anchor"></a><code><span><span class="keyword">val</span> ebyte : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-pos">pos</a></span></code></div><div class="spec-doc"><p><code>ebyte l</code> is <code>l</code>'s end position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sline"><a href="#val-sline" class="anchor"></a><code><span><span class="keyword">val</span> sline : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>sline l</code> is the line position on which <code>sbyte l</code> lies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eline"><a href="#val-eline" class="anchor"></a><code><span><span class="keyword">val</span> eline : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>elin l</code> is the line position on which <code>ebyte l</code> lies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nil"><a href="#val-nil" class="anchor"></a><code><span><span class="keyword">val</span> nil : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>loc_nil</code> is an invalid location.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span><span class="keyword">val</span> merge : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>merge l0 l1</code> merges the location <code>l0</code> and <code>l1</code> to the smallest location that spans both location. The file path taken from <code>l0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_start"><a href="#val-to_start" class="anchor"></a><code><span><span class="keyword">val</span> to_start : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>to_start l</code> has both start and end positions at <code>l</code>'s start.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_end"><a href="#val-to_end" class="anchor"></a><code><span><span class="keyword">val</span> to_end : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>to_end l</code> has both start and end positions at <code>l</code>'s end.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-restart"><a href="#val-restart" class="anchor"></a><code><span><span class="keyword">val</span> restart : <span><span class="label">at</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>restart ~at l</code> is <code>l</code> with the start position of <code>at</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_ocaml"><a href="#val-pp_ocaml" class="anchor"></a><code><span><span class="keyword">val</span> pp_ocaml : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_ocaml</code> formats location like the OCaml compiler.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_gnu"><a href="#val-pp_gnu" class="anchor"></a><code><span><span class="keyword">val</span> pp_gnu : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_gnu</code> formats location according to the <a href="https://www.gnu.org/prep/standards/standards.html#Errors">GNU convention</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp</code> is <a href="#val-pp_gnu"><code>pp_gnu</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_dump"><a href="#val-pp_dump" class="anchor"></a><code><span><span class="keyword">val</span> pp_dump : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_dump</code> formats raw data for debugging.</p></div></div><h2 id="text"><a href="#text" class="anchor"></a>Substitutions and insertions</h2><p>Strictly speaking this doesn't belong here but here you go.</p><div class="odoc-spec"><div class="spec value anchored" id="val-string_subrange"><a href="#val-string_subrange" class="anchor"></a><code><span><span class="keyword">val</span> string_subrange : <span><span class="optlabel">?first</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?last</span>:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_subrange ~first ~last s</code> are the consecutive bytes of <code>s</code> whose indices exist in the range [<code>first</code>;<code>last</code>].</p><p><code>first</code> defaults to <code>0</code> and last to <code>String.length s - 1</code>.</p><p>Note that both <code>first</code> and <code>last</code> can be any integer. If <code>first &gt; last</code> the interval is empty and the empty string is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_replace"><a href="#val-string_replace" class="anchor"></a><code><span><span class="keyword">val</span> string_replace : <span><span class="label">start</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">stop</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">rep</span>:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_replace ~start ~stop ~rep s</code> replaces the index range [<code>start</code>;stop-1] of <code>s</code> with <code>rep</code> as follows. If <code>start = stop</code> the <code>rep</code> is inserted before <code>start</code>. <code>start</code> and <code>stop</code> must be in range [<code>0</code>;<code>String.length s</code>] and <code>start &lt;= stop</code> or <code>Invalid_argument</code> is raised.</p></div></div></div></body></html>
