<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Textloc (cmarkit.cmarkit.Cmarkit.Textloc)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../sherlodoc_db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../index.html">üè†</a> &#x00BB; <a href="../../../index.html">Cmarkit  <span class="version">v0.3.0</span></a> &#x00BB; Library <code>cmarkit</code> &#x00BB; <a href="../index.html">Cmarkit</a> &#x00BB; Textloc</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Cmarkit.Textloc</span></code></h1><p>Text locations.</p><p>A text location identifies a text span in a given UTF-8 encoded file by an inclusive range of absolute <a href="#type-byte_pos" title="Textloc.byte_pos">byte</a> positions and the <a href="#type-line_pos" title="Textloc.line_pos">line positions</a> on which those occur.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#fpath">File paths</a></li><li><a href="#pos">Positions</a><ul><li><a href="#byte_pos">Byte positions</a></li><li><a href="#lines">Lines</a></li><li><a href="#line_pos">Line positions</a></li></ul></li><li><a href="#tloc">Text locations</a><ul><li><a href="#preds">Predicates and comparisons</a></li><li><a href="#shrink_and_stretch">Shrink and stretch</a></li><li><a href="#fmt">Formatting</a></li></ul></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../index.html">Cmarkit  <span class="version">v0.3.0</span></a><ul><li>Library <code>cmarkit</code><ul><li><a href="../index.html">Cmarkit</a><ul><li><a href="#" class="current_unit">Textloc</a></li><li><a href="../Meta/index.html">Meta</a></li><li><a href="../Layout/index.html">Layout</a></li><li><a href="../Block_line/index.html">Block_line</a></li><li><a href="../Label/index.html">Label</a></li><li><a href="../Link_definition/index.html">Link_definition</a></li><li><a href="../Inline/index.html">Inline</a></li><li><a href="../Block/index.html">Block</a></li><li><a href="../Doc/index.html">Doc</a></li><li><a href="../Mapper/index.html">Mapper</a></li><li><a href="../Folder/index.html">Folder</a></li></ul></li><li><a href="../../Cmarkit_commonmark/index.html">Cmarkit_commonmark</a></li><li><a href="../../Cmarkit_html/index.html">Cmarkit_html</a></li><li><a href="../../Cmarkit_latex/index.html">Cmarkit_latex</a></li><li><a href="../../Cmarkit_renderer/index.html">Cmarkit_renderer</a></li></ul></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="fpath"><a href="#fpath" class="anchor"></a>File paths</h2><div class="odoc-spec"><div class="spec type anchored" id="type-fpath"><a href="#type-fpath" class="anchor"></a><code><span><span class="keyword">type</span> fpath</span><span> = string</span></code></div><div class="spec-doc"><p>The type for file paths.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file_none"><a href="#val-file_none" class="anchor"></a><code><span><span class="keyword">val</span> file_none : <a href="#type-fpath">fpath</a></span></code></div><div class="spec-doc"><p><code>file_none</code> is <code>&quot;-&quot;</code>. A file path to use when there is none.</p></div></div><h2 id="pos"><a href="#pos" class="anchor"></a>Positions</h2><h3 id="byte_pos"><a href="#byte_pos" class="anchor"></a>Byte positions</h3><div class="odoc-spec"><div class="spec type anchored" id="type-byte_pos"><a href="#type-byte_pos" class="anchor"></a><code><span><span class="keyword">type</span> byte_pos</span><span> = int</span></code></div><div class="spec-doc"><p>The type for zero-based, absolute, byte positions in text. If the text has <code>n</code> bytes, <code>0</code> is the first position and <code>n-1</code> is the last position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-byte_pos_none"><a href="#val-byte_pos_none" class="anchor"></a><code><span><span class="keyword">val</span> byte_pos_none : <a href="#type-byte_pos">byte_pos</a></span></code></div><div class="spec-doc"><p><code>byte_pos_none</code> is <code>-1</code>. A position to use when there is none.</p></div></div><h3 id="lines"><a href="#lines" class="anchor"></a>Lines</h3><div class="odoc-spec"><div class="spec type anchored" id="type-line_num"><a href="#type-line_num" class="anchor"></a><code><span><span class="keyword">type</span> line_num</span><span> = int</span></code></div><div class="spec-doc"><p>The type for one-based, line numbers in the text. Lines increment after a <em>newline</em> which is either a line feed <code>'\n'</code> (U+000A), a carriage return <code>'\r'</code> (U+000D) or a carriage return and a line feed <code>&quot;\r\n&quot;</code> (&lt;U+000D,U+000A&gt;).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line_num_none"><a href="#val-line_num_none" class="anchor"></a><code><span><span class="keyword">val</span> line_num_none : <a href="#type-line_num">line_num</a></span></code></div><div class="spec-doc"><p><code>line_num_none</code> is <code>-1</code>. A line number to use when there is none.</p></div></div><h3 id="line_pos"><a href="#line_pos" class="anchor"></a>Line positions</h3><div class="odoc-spec"><div class="spec type anchored" id="type-line_pos"><a href="#type-line_pos" class="anchor"></a><code><span><span class="keyword">type</span> line_pos</span><span> = <a href="#type-line_num">line_num</a> * <a href="#type-byte_pos">byte_pos</a></span></code></div><div class="spec-doc"><p>The type for line positions. This identifies a line by its line number and the absolute byte position following its newline (or the start of text for the first line). That byte position:</p><ul><li>Indexes the first byte of text of the line if the line is non-empty.</li><li>Indexes the first byte of the next newline if the line is empty.</li><li>Is out of bounds and equal to the text's length for a last empty line (this includes when the text is empty).</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line_pos_first"><a href="#val-line_pos_first" class="anchor"></a><code><span><span class="keyword">val</span> line_pos_first : <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>line_pos_first</code> is <code>1, 0</code>. Note that this is the only line position of the empty text.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-line_pos_none"><a href="#val-line_pos_none" class="anchor"></a><code><span><span class="keyword">val</span> line_pos_none : <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>line_pos_none</code> is <code>(line_none, pos_none)</code>.</p></div></div><h2 id="tloc"><a href="#tloc" class="anchor"></a>Text locations</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for text locations. A text location identifies a text span in an UTF-8 encoded file by an inclusive range of absolute <a href="#type-byte_pos" title="byte_pos">byte positions</a> and the <a href="#type-line_pos" title="line_pos">line positions</a> on which they occur.</p><p>If the first byte equals the last byte the range contains exactly that byte. If the first byte is greater than the last byte this represents an insertion point before the first byte. In this case information about the last position should be ignored: it can contain anything.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-none"><a href="#val-none" class="anchor"></a><code><span><span class="keyword">val</span> none : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>none</code> is a position to use when there is none.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : 
  <span><span class="label">file</span>:<a href="#type-fpath">fpath</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">first_byte</span>:<a href="#type-byte_pos">byte_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">last_byte</span>:<a href="#type-byte_pos">byte_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">first_line</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">last_line</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>v ~file ~first_byte ~last_byte ~first_line ~last_line</code> is a text location with the given arguments, see corresponding accessors for the semantics. If you don't have a file use <a href="#val-file_none"><code>file_none</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-file"><a href="#val-file" class="anchor"></a><code><span><span class="keyword">val</span> file : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-fpath">fpath</a></span></code></div><div class="spec-doc"><p><code>file l</code> is <code>l</code>'s file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-first_byte"><a href="#val-first_byte" class="anchor"></a><code><span><span class="keyword">val</span> first_byte : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-byte_pos">byte_pos</a></span></code></div><div class="spec-doc"><p><code>first_byte l</code> is <code>l</code>'s first byte. Irrelevant if <a href="#val-is_none"><code>is_none</code></a> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-last_byte"><a href="#val-last_byte" class="anchor"></a><code><span><span class="keyword">val</span> last_byte : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-byte_pos">byte_pos</a></span></code></div><div class="spec-doc"><p><code>last_byte l</code> is <code>l</code>'s last byte. Irrelevant if <a href="#val-is_none"><code>is_none</code></a> or <a href="#val-is_empty"><code>is_empty</code></a> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-first_line"><a href="#val-first_line" class="anchor"></a><code><span><span class="keyword">val</span> first_line : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>first_line l</code> is the line position on which <code>first_byte l</code> lies. Irrelevant if <a href="#val-is_none"><code>is_none</code></a> is <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-last_line"><a href="#val-last_line" class="anchor"></a><code><span><span class="keyword">val</span> last_line : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-line_pos">line_pos</a></span></code></div><div class="spec-doc"><p><code>last_line l</code> is the line position on which <code>last_byte l</code> lies. Irrelevant if <a href="#val-is_none"><code>is_none</code></a> or <a href="#val-is_empty"><code>is_empty</code></a> is <code>true</code>.</p></div></div><h3 id="preds"><a href="#preds" class="anchor"></a>Predicates and comparisons</h3><div class="odoc-spec"><div class="spec value anchored" id="val-is_none"><a href="#val-is_none" class="anchor"></a><code><span><span class="keyword">val</span> is_none : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_none t</code> is <code>true</code> iff <code>first_byte &lt; 0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_empty t</code> is <code>true</code> iff <code>first_byte t &gt; last_byte t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal t0 t1</code> is <code>true</code> iff <code>t0</code> and <code>t1</code> are equal. This checks that <a href="#val-file"><code>file</code></a>, <a href="#val-first_byte"><code>first_byte</code></a> and <a href="#val-last_byte"><code>last_byte</code></a> are equal. Line information is ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare t0 t1</code> orders <code>t0</code> and <code>t1</code>. The order is compatible with <a href="#val-equal"><code>equal</code></a>. Comparison starts with <a href="#val-file"><code>file</code></a>, follows with <a href="#val-first_byte"><code>first_byte</code></a> and ends, if needed, with <a href="#val-last_byte"><code>last_byte</code></a>. Line information is ignored.</p></div></div><h3 id="shrink_and_stretch"><a href="#shrink_and_stretch" class="anchor"></a>Shrink and stretch</h3><div class="odoc-spec"><div class="spec value anchored" id="val-set_first"><a href="#val-set_first" class="anchor"></a><code><span><span class="keyword">val</span> set_first : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">first_byte</span>:<a href="#type-byte_pos">byte_pos</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">first_line</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>set_first l ~first_byte ~first_line</code> sets the the first position of <code>l</code> to given values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_last"><a href="#val-set_last" class="anchor"></a><code><span><span class="keyword">val</span> set_last : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">last_byte</span>:<a href="#type-byte_pos">byte_pos</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">last_line</span>:<a href="#type-line_pos">line_pos</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>set_last l ~last_byte ~last_line</code> sets the last position of <code>l</code> to given values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_first"><a href="#val-to_first" class="anchor"></a><code><span><span class="keyword">val</span> to_first : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>to_first l</code> has both first and last positions set to <code>l</code>'s first position. The range spans <a href="#val-first_byte"><code>first_byte</code></a>. See also <a href="#val-before"><code>before</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_last"><a href="#val-to_last" class="anchor"></a><code><span><span class="keyword">val</span> to_last : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>to_last l</code> has both first and last positions set to <code>l</code>'s last position. The range spans <a href="#val-last_byte"><code>last_byte</code></a>. See also <a href="#val-after"><code>after</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-before"><a href="#val-before" class="anchor"></a><code><span><span class="keyword">val</span> before : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>before t</code> is the <a href="#val-is_empty" title="is_empty">empty</a> text location starting at <a href="#val-first_byte"><code>first_byte</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-after"><a href="#val-after" class="anchor"></a><code><span><span class="keyword">val</span> after : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>after t</code> is the empty <a href="#val-is_empty" title="is_empty">empty</a> location starting at <code>last_byte t + 1</code>; note that at the end of input this may be an invalid byte <em>index</em>. The <a href="#val-first_line"><code>first_line</code></a> and <a href="#val-last_line"><code>last_line</code></a> of the result is <code>last_line t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-span"><a href="#val-span" class="anchor"></a><code><span><span class="keyword">val</span> span : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>span l0 l1</code> is the span from the smallest byte position of <code>l0</code> and <code>l1</code> to the largest byte position of <code>l0</code> and <code>l1</code>. The file path is taken from the greatest byte position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reloc"><a href="#val-reloc" class="anchor"></a><code><span><span class="keyword">val</span> reloc : <span><span class="label">first</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">last</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>reloc ~first ~last</code> uses the first position of <code>first</code>, the last position of <code>last</code> and the file of <code>last</code>.</p></div></div><h3 id="fmt"><a href="#fmt" class="anchor"></a>Formatting</h3><div class="odoc-spec"><div class="spec value anchored" id="val-pp_ocaml"><a href="#val-pp_ocaml" class="anchor"></a><code><span><span class="keyword">val</span> pp_ocaml : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_ocaml</code> formats text locations like the OCaml compiler.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_gnu"><a href="#val-pp_gnu" class="anchor"></a><code><span><span class="keyword">val</span> pp_gnu : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_gnu</code> formats text locations according to the <a href="https://www.gnu.org/prep/standards/standards.html#Errors">GNU convention</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp</code> is <a href="#val-pp_gnu"><code>pp_gnu</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_dump"><a href="#val-pp_dump" class="anchor"></a><code><span><span class="keyword">val</span> pp_dump : <span><a href="../../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_dump</code> formats raw data for debugging.</p></div></div></div></body></html>
