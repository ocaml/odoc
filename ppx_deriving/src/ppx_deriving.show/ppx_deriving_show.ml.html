<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: ppx_deriving_show.ml (ppx_deriving.src.ppx_deriving.show)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ppx_deriving</a> &#x00BB; <a href="../index.html">Sources</a> &#x00BB; ppx_deriving.show &#x00BB; ppx_deriving_show.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>ppx_deriving_show.ml</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">ppx_deriving</a><ul><li>Library <code>ppx_deriving.api</code><ul><li><a href="../../ppx_deriving.api/Ppx_deriving/index.html">Ppx_deriving</a></li></ul></li><li>Library <code>ppx_deriving.create</code><ul><li><a href="../../ppx_deriving.create/Ppx_deriving_create/index.html">Ppx_deriving_create</a></li></ul></li><li>Library <code>ppx_deriving.enum</code><ul><li><a href="../../ppx_deriving.enum/Ppx_deriving_enum/index.html">Ppx_deriving_enum</a></li></ul></li><li>Library <code>ppx_deriving.eq</code><ul><li><a href="../../ppx_deriving.eq/Ppx_deriving_eq/index.html">Ppx_deriving_eq</a></li></ul></li><li>Library <code>ppx_deriving.fold</code><ul><li><a href="../../ppx_deriving.fold/Ppx_deriving_fold/index.html">Ppx_deriving_fold</a></li></ul></li><li>Library <code>ppx_deriving.iter</code><ul><li><a href="../../ppx_deriving.iter/Ppx_deriving_iter/index.html">Ppx_deriving_iter</a></li></ul></li><li>Library <code>ppx_deriving.make</code><ul><li><a href="../../ppx_deriving.make/Ppx_deriving_make/index.html">Ppx_deriving_make</a></li></ul></li><li>Library <code>ppx_deriving.map</code><ul><li><a href="../../ppx_deriving.map/Ppx_deriving_map/index.html">Ppx_deriving_map</a></li></ul></li><li>Library <code>ppx_deriving.ord</code><ul><li><a href="../../ppx_deriving.ord/Ppx_deriving_ord/index.html">Ppx_deriving_ord</a></li></ul></li><li>Library <code>ppx_deriving.runtime</code><ul><li><a href="../../ppx_deriving.runtime/Ppx_deriving_runtime/index.html">Ppx_deriving_runtime</a></li></ul></li><li>Library <code>ppx_deriving.show</code><ul><li><a href="../../ppx_deriving.show/Ppx_deriving_show/index.html">Ppx_deriving_show</a></li></ul></li><li>Library <code>ppx_deriving.std</code><ul><li><a href="../../ppx_deriving.std/Ppx_deriving_std/index.html">Ppx_deriving_std</a></li></ul></li><li><a href="../index.html">Sources</a><ul><li>ppx_deriving.api<ul><li><a href="../ppx_deriving.api/ppx_deriving.ml.html">ppx_deriving.ml</a></li></ul></li><li>ppx_deriving.create<ul><li><a href="../ppx_deriving.create/ppx_deriving_create.ml.html">ppx_deriving_create.ml</a></li></ul></li><li>ppx_deriving.enum<ul><li><a href="../ppx_deriving.enum/ppx_deriving_enum.ml.html">ppx_deriving_enum.ml</a></li></ul></li><li>ppx_deriving.eq<ul><li><a href="../ppx_deriving.eq/ppx_deriving_eq.ml.html">ppx_deriving_eq.ml</a></li></ul></li><li>ppx_deriving.fold<ul><li><a href="../ppx_deriving.fold/ppx_deriving_fold.ml.html">ppx_deriving_fold.ml</a></li></ul></li><li>ppx_deriving.iter<ul><li><a href="../ppx_deriving.iter/ppx_deriving_iter.ml.html">ppx_deriving_iter.ml</a></li></ul></li><li>ppx_deriving.make<ul><li><a href="../ppx_deriving.make/ppx_deriving_make.ml.html">ppx_deriving_make.ml</a></li></ul></li><li>ppx_deriving.map<ul><li><a href="../ppx_deriving.map/ppx_deriving_map.ml.html">ppx_deriving_map.ml</a></li></ul></li><li>ppx_deriving.ord<ul><li><a href="../ppx_deriving.ord/ppx_deriving_ord.ml.html">ppx_deriving_ord.ml</a></li></ul></li><li>ppx_deriving.runtime<ul><li><a href="../ppx_deriving.runtime/ppx_deriving_runtime.ml.html">ppx_deriving_runtime.ml</a></li></ul></li><li>ppx_deriving.show<ul><li><a href="#" class="current_unit">ppx_deriving_show.ml</a></li></ul></li><li>ppx_deriving.std<ul><li><a href="../ppx_deriving.std/ppx_deriving_std.ml.html">ppx_deriving_std.ml</a></li></ul></li></ul></li></ul></li></ul></nav></div><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
<a id="L179" class="source_line" href="#L179">179</a>
<a id="L180" class="source_line" href="#L180">180</a>
<a id="L181" class="source_line" href="#L181">181</a>
<a id="L182" class="source_line" href="#L182">182</a>
<a id="L183" class="source_line" href="#L183">183</a>
<a id="L184" class="source_line" href="#L184">184</a>
<a id="L185" class="source_line" href="#L185">185</a>
<a id="L186" class="source_line" href="#L186">186</a>
<a id="L187" class="source_line" href="#L187">187</a>
<a id="L188" class="source_line" href="#L188">188</a>
<a id="L189" class="source_line" href="#L189">189</a>
<a id="L190" class="source_line" href="#L190">190</a>
<a id="L191" class="source_line" href="#L191">191</a>
<a id="L192" class="source_line" href="#L192">192</a>
<a id="L193" class="source_line" href="#L193">193</a>
<a id="L194" class="source_line" href="#L194">194</a>
<a id="L195" class="source_line" href="#L195">195</a>
<a id="L196" class="source_line" href="#L196">196</a>
<a id="L197" class="source_line" href="#L197">197</a>
<a id="L198" class="source_line" href="#L198">198</a>
<a id="L199" class="source_line" href="#L199">199</a>
<a id="L200" class="source_line" href="#L200">200</a>
<a id="L201" class="source_line" href="#L201">201</a>
<a id="L202" class="source_line" href="#L202">202</a>
<a id="L203" class="source_line" href="#L203">203</a>
<a id="L204" class="source_line" href="#L204">204</a>
<a id="L205" class="source_line" href="#L205">205</a>
<a id="L206" class="source_line" href="#L206">206</a>
<a id="L207" class="source_line" href="#L207">207</a>
<a id="L208" class="source_line" href="#L208">208</a>
<a id="L209" class="source_line" href="#L209">209</a>
<a id="L210" class="source_line" href="#L210">210</a>
<a id="L211" class="source_line" href="#L211">211</a>
<a id="L212" class="source_line" href="#L212">212</a>
<a id="L213" class="source_line" href="#L213">213</a>
<a id="L214" class="source_line" href="#L214">214</a>
<a id="L215" class="source_line" href="#L215">215</a>
<a id="L216" class="source_line" href="#L216">216</a>
<a id="L217" class="source_line" href="#L217">217</a>
<a id="L218" class="source_line" href="#L218">218</a>
<a id="L219" class="source_line" href="#L219">219</a>
<a id="L220" class="source_line" href="#L220">220</a>
<a id="L221" class="source_line" href="#L221">221</a>
<a id="L222" class="source_line" href="#L222">222</a>
<a id="L223" class="source_line" href="#L223">223</a>
<a id="L224" class="source_line" href="#L224">224</a>
<a id="L225" class="source_line" href="#L225">225</a>
<a id="L226" class="source_line" href="#L226">226</a>
<a id="L227" class="source_line" href="#L227">227</a>
<a id="L228" class="source_line" href="#L228">228</a>
<a id="L229" class="source_line" href="#L229">229</a>
<a id="L230" class="source_line" href="#L230">230</a>
<a id="L231" class="source_line" href="#L231">231</a>
<a id="L232" class="source_line" href="#L232">232</a>
<a id="L233" class="source_line" href="#L233">233</a>
<a id="L234" class="source_line" href="#L234">234</a>
<a id="L235" class="source_line" href="#L235">235</a>
<a id="L236" class="source_line" href="#L236">236</a>
<a id="L237" class="source_line" href="#L237">237</a>
<a id="L238" class="source_line" href="#L238">238</a>
<a id="L239" class="source_line" href="#L239">239</a>
<a id="L240" class="source_line" href="#L240">240</a>
<a id="L241" class="source_line" href="#L241">241</a>
<a id="L242" class="source_line" href="#L242">242</a>
<a id="L243" class="source_line" href="#L243">243</a>
<a id="L244" class="source_line" href="#L244">244</a>
<a id="L245" class="source_line" href="#L245">245</a>
<a id="L246" class="source_line" href="#L246">246</a>
<a id="L247" class="source_line" href="#L247">247</a>
<a id="L248" class="source_line" href="#L248">248</a>
<a id="L249" class="source_line" href="#L249">249</a>
<a id="L250" class="source_line" href="#L250">250</a>
<a id="L251" class="source_line" href="#L251">251</a>
<a id="L252" class="source_line" href="#L252">252</a>
<a id="L253" class="source_line" href="#L253">253</a>
<a id="L254" class="source_line" href="#L254">254</a>
<a id="L255" class="source_line" href="#L255">255</a>
<a id="L256" class="source_line" href="#L256">256</a>
<a id="L257" class="source_line" href="#L257">257</a>
<a id="L258" class="source_line" href="#L258">258</a>
<a id="L259" class="source_line" href="#L259">259</a>
<a id="L260" class="source_line" href="#L260">260</a>
<a id="L261" class="source_line" href="#L261">261</a>
<a id="L262" class="source_line" href="#L262">262</a>
<a id="L263" class="source_line" href="#L263">263</a>
<a id="L264" class="source_line" href="#L264">264</a>
<a id="L265" class="source_line" href="#L265">265</a>
<a id="L266" class="source_line" href="#L266">266</a>
<a id="L267" class="source_line" href="#L267">267</a>
<a id="L268" class="source_line" href="#L268">268</a>
<a id="L269" class="source_line" href="#L269">269</a>
<a id="L270" class="source_line" href="#L270">270</a>
<a id="L271" class="source_line" href="#L271">271</a>
<a id="L272" class="source_line" href="#L272">272</a>
<a id="L273" class="source_line" href="#L273">273</a>
<a id="L274" class="source_line" href="#L274">274</a>
<a id="L275" class="source_line" href="#L275">275</a>
<a id="L276" class="source_line" href="#L276">276</a>
<a id="L277" class="source_line" href="#L277">277</a>
<a id="L278" class="source_line" href="#L278">278</a>
<a id="L279" class="source_line" href="#L279">279</a>
<a id="L280" class="source_line" href="#L280">280</a>
<a id="L281" class="source_line" href="#L281">281</a>
<a id="L282" class="source_line" href="#L282">282</a>
<a id="L283" class="source_line" href="#L283">283</a>
<a id="L284" class="source_line" href="#L284">284</a>
<a id="L285" class="source_line" href="#L285">285</a>
<a id="L286" class="source_line" href="#L286">286</a>
<a id="L287" class="source_line" href="#L287">287</a>
<a id="L288" class="source_line" href="#L288">288</a>
<a id="L289" class="source_line" href="#L289">289</a>
<a id="L290" class="source_line" href="#L290">290</a>
<a id="L291" class="source_line" href="#L291">291</a>
<a id="L292" class="source_line" href="#L292">292</a>
<a id="L293" class="source_line" href="#L293">293</a>
<a id="L294" class="source_line" href="#L294">294</a>
<a id="L295" class="source_line" href="#L295">295</a>
<a id="L296" class="source_line" href="#L296">296</a>
<a id="L297" class="source_line" href="#L297">297</a>
<a id="L298" class="source_line" href="#L298">298</a>
<a id="L299" class="source_line" href="#L299">299</a>
<a id="L300" class="source_line" href="#L300">300</a>
<a id="L301" class="source_line" href="#L301">301</a>
<a id="L302" class="source_line" href="#L302">302</a>
<a id="L303" class="source_line" href="#L303">303</a>
<a id="L304" class="source_line" href="#L304">304</a>
<a id="L305" class="source_line" href="#L305">305</a>
<a id="L306" class="source_line" href="#L306">306</a>
<a id="L307" class="source_line" href="#L307">307</a>
<a id="L308" class="source_line" href="#L308">308</a>
<a id="L309" class="source_line" href="#L309">309</a>
<a id="L310" class="source_line" href="#L310">310</a>
<a id="L311" class="source_line" href="#L311">311</a>
<a id="L312" class="source_line" href="#L312">312</a>
<a id="L313" class="source_line" href="#L313">313</a>
<a id="L314" class="source_line" href="#L314">314</a>
<a id="L315" class="source_line" href="#L315">315</a>
<a id="L316" class="source_line" href="#L316">316</a>
<a id="L317" class="source_line" href="#L317">317</a>
<a id="L318" class="source_line" href="#L318">318</a>
<a id="L319" class="source_line" href="#L319">319</a>
<a id="L320" class="source_line" href="#L320">320</a>
<a id="L321" class="source_line" href="#L321">321</a>
<a id="L322" class="source_line" href="#L322">322</a>
<a id="L323" class="source_line" href="#L323">323</a>
<a id="L324" class="source_line" href="#L324">324</a>
<a id="L325" class="source_line" href="#L325">325</a>
<a id="L326" class="source_line" href="#L326">326</a>
<a id="L327" class="source_line" href="#L327">327</a>
<a id="L328" class="source_line" href="#L328">328</a>
<a id="L329" class="source_line" href="#L329">329</a>
<a id="L330" class="source_line" href="#L330">330</a>
<a id="L331" class="source_line" href="#L331">331</a>
<a id="L332" class="source_line" href="#L332">332</a>
<a id="L333" class="source_line" href="#L333">333</a>
<a id="L334" class="source_line" href="#L334">334</a>
<a id="L335" class="source_line" href="#L335">335</a>
<a id="L336" class="source_line" href="#L336">336</a>
<a id="L337" class="source_line" href="#L337">337</a>
<a id="L338" class="source_line" href="#L338">338</a>
<a id="L339" class="source_line" href="#L339">339</a>
<a id="L340" class="source_line" href="#L340">340</a>
<a id="L341" class="source_line" href="#L341">341</a>
<a id="L342" class="source_line" href="#L342">342</a>
<a id="L343" class="source_line" href="#L343">343</a>
<a id="L344" class="source_line" href="#L344">344</a>
<a id="L345" class="source_line" href="#L345">345</a>
<a id="L346" class="source_line" href="#L346">346</a>
<a id="L347" class="source_line" href="#L347">347</a>
<a id="L348" class="source_line" href="#L348">348</a>
<a id="L349" class="source_line" href="#L349">349</a>
<a id="L350" class="source_line" href="#L350">350</a>
<a id="L351" class="source_line" href="#L351">351</a>
<a id="L352" class="source_line" href="#L352">352</a>
<a id="L353" class="source_line" href="#L353">353</a>
<a id="L354" class="source_line" href="#L354">354</a>
</code><code class="source_code"><span><span class="OPEN">open</span> <a href="../../../ppxlib/src/ppxlib/ppxlib.ml.html"><span class="UIDENT">Ppxlib</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ppxlib/src/ppxlib.astlib/ast_500.ml.html#module-Asttypes"><span class="UIDENT">Asttypes</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ppxlib/src/ppxlib.astlib/ast_500.ml.html#module-Parsetree"><span class="UIDENT">Parsetree</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html"><span class="UIDENT">Ast_helper</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="UIDENT">Ast_convenience</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-deriver"><span class="LIDENT">deriver</span></span> <span class="EQUAL">=</span> <span class="STRING">&quot;show&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-raise_errorf"><span class="LIDENT">raise_errorf</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-raise_errorf"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">raise_errorf</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The option [with_path] controls whether a full path should be displayed
   as part of data constructor names and record field names. (In the case
   of record fields, it is displayed only as part of the name of the first
   field.) By default, this option is [true], which means that full paths
   are shown. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-expand_path"><span class="LIDENT">expand_path</span></span> <span class="TILDE">~</span><span id="local_with_path_1"><span class="LIDENT">with_path</span></span> <span class="TILDE">~</span><span id="local_path_2"><span class="LIDENT">path</span></span> <span id="local_name_3"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_path_4"><span class="LIDENT">path</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="#local_with_path_1"><span class="LIDENT">with_path</span></a> <span class="THEN">then</span> <a href="#local_path_2"><span class="LIDENT">path</span></a> <span class="ELSE">else</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-expand_path"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">expand_path</span></a> <span class="TILDE">~</span><a href="#local_path_4"><span class="LIDENT">path</span></a> <a href="#local_name_3"><span class="LIDENT">name</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-ct_attr_nobuiltin"><span class="LIDENT">ct_attr_nobuiltin</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-declare_flag"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">declare_flag</span></a> <span class="STRING">&quot;deriving.show.nobuiltin&quot;</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#module-Context.val-core_type"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">core_type</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-attr_printer"><span class="LIDENT">attr_printer</span></span> <span id="local_context_5"><span class="LIDENT">context</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-declare"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">declare</span></a> <span class="STRING">&quot;deriving.show.printer&quot;</span> <a href="#local_context_5"><span class="LIDENT">context</span></a><span class="EOL">
</span>  <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html"><span class="UIDENT">Ast_pattern</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-single_expr_payload"><span class="LIDENT">single_expr_payload</span></a> <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-__"><span class="LIDENT">__</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_6"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_e_6"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-ct_attr_printer"><span class="LIDENT">ct_attr_printer</span></span> <span class="EQUAL">=</span> <span class="LIDENT">attr_printer</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#module-Context.val-core_type"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">core_type</span></a><span class="EOL">
</span><span class="LET">let</span> <span id="val-constr_attr_printer"><span class="LIDENT">constr_attr_printer</span></span> <span class="EQUAL">=</span> <span class="LIDENT">attr_printer</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#module-Context.val-constructor_declaration"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">constructor_declaration</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-ct_attr_polyprinter"><span class="LIDENT">ct_attr_polyprinter</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-declare"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">declare</span></a> <span class="STRING">&quot;deriving.show.polyprinter&quot;</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#module-Context.val-core_type"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">core_type</span></a><span class="EOL">
</span>  <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html"><span class="UIDENT">Ast_pattern</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-single_expr_payload"><span class="LIDENT">single_expr_payload</span></a> <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-__"><span class="LIDENT">__</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_7"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_e_7"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-ct_attr_opaque"><span class="LIDENT">ct_attr_opaque</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-declare_flag"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">declare_flag</span></a> <span class="STRING">&quot;deriving.show.opaque&quot;</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#module-Context.val-core_type"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">core_type</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-argn"><span class="LIDENT">argn</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;a%d&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-argl"><span class="LIDENT">argl</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;a%s&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-pattn"><span class="LIDENT">pattn</span></span> <span id="local_typs_8"><span class="LIDENT">typs</span></span>   <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-mapi"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_9"><span class="LIDENT">i</span></span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argn</span> <a href="#local_i_9"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_typs_8"><span class="LIDENT">typs</span></a><span class="EOL">
</span><span class="LET">let</span> <span id="val-pattl"><span class="LIDENT">pattl</span></span> <span id="local_labels_10"><span class="LIDENT">labels</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LBRACE">{</span> <span class="LIDENT">pld_name</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_n_11"><span class="LIDENT">n</span></span> <span class="RBRACE">}</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_n_11"><span class="LIDENT">n</span></a><span class="COMMA">,</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argl</span> <a href="#local_n_11"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_labels_10"><span class="LIDENT">labels</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-pconstrrec"><span class="LIDENT">pconstrrec</span></span> <span id="local_name_12"><span class="LIDENT">name</span></span> <span id="local_fields_13"><span class="LIDENT">fields</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pconstr"><span class="LIDENT">pconstr</span></a> <a href="#local_name_12"><span class="LIDENT">name</span></a> <span class="LBRACKET">[</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-precord"><span class="LIDENT">precord</span></a> <span class="LABEL">~closed:</span><span class="UIDENT">Closed</span> <a href="#local_fields_13"><span class="LIDENT">fields</span></a><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-wrap_printer"><span class="LIDENT">wrap_printer</span></span> <span id="local_quoter_14"><span class="LIDENT">quoter</span></span> <span id="local_printer_15"><span class="LIDENT">printer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_loc_16"><span class="LIDENT">loc</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#val-default_loc"><span class="UIDENT">Ast_helper</span><span class="DOT">.</span><span class="LIDENT">default_loc</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-quote"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">quote</span></a> <span class="TILDE">~</span><a href="#local_quoter_14"><span class="LIDENT">quoter</span></a><span class="EOL">
</span>    <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LPAREN">(</span><span class="LET">let</span> <span class="LIDENT">fprintf</span> <span class="EQUAL">=</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="IN">in</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_printer_15"><span class="LIDENT">printer</span></a><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="LBRACKETAT">[@</span><span class="LIDENT">ocaml</span><span class="DOT">.</span><span class="LIDENT">warning</span> <span class="STRING">&quot;-26&quot;</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-pp_type_of_decl"><span class="LIDENT">pp_type_of_decl</span></span> <span id="local_type_decl_17"><span class="LIDENT">type_decl</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_loc_18"><span class="LIDENT">loc</span></span> <span class="EQUAL">=</span> <a href="#local_type_decl_17"><span class="LIDENT">type_decl</span></a><span class="DOT">.</span><span class="LIDENT">ptype_loc</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_typ_19"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-core_type_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">core_type_of_type_decl</span></a> <a href="#local_type_decl_17"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-poly_arrow_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">poly_arrow_of_type_decl</span></a><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_var_20"><span class="LIDENT">var</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span> <a href="#local_var_20"><span class="LIDENT">var</span></a><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="LIDENT">unit</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="#local_type_decl_17"><span class="LIDENT">type_decl</span></a><span class="EOL">
</span>    <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span> <a href="#local_typ_19"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="LIDENT">unit</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-show_type_of_decl"><span class="LIDENT">show_type_of_decl</span></span> <span id="local_type_decl_21"><span class="LIDENT">type_decl</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_loc_22"><span class="LIDENT">loc</span></span> <span class="EQUAL">=</span> <a href="#local_type_decl_21"><span class="LIDENT">type_decl</span></a><span class="DOT">.</span><span class="LIDENT">ptype_loc</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_typ_23"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-core_type_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">core_type_of_type_decl</span></a> <a href="#local_type_decl_21"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-poly_arrow_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">poly_arrow_of_type_decl</span></a><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_var_24"><span class="LIDENT">var</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span> <a href="#local_var_24"><span class="LIDENT">var</span></a><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="LIDENT">unit</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="#local_type_decl_21"><span class="LIDENT">type_decl</span></a><span class="EOL">
</span>    <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span> <a href="#local_typ_23"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="LIDENT">string</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-sig_of_type"><span class="LIDENT">sig_of_type</span></span> <span id="local_type_decl_25"><span class="LIDENT">type_decl</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LBRACKET">[</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Sig.val-value"><span class="UIDENT">Sig</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Val.val-mk"><span class="UIDENT">Val</span><span class="DOT">.</span><span class="LIDENT">mk</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-mknoloc"><span class="LIDENT">mknoloc</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_type_decl</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;pp&quot;</span><span class="RPAREN">)</span> <a href="#local_type_decl_25"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="LIDENT">pp_type_of_decl</span> <a href="#local_type_decl_25"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>   <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Sig.val-value"><span class="UIDENT">Sig</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Val.val-mk"><span class="UIDENT">Val</span><span class="DOT">.</span><span class="LIDENT">mk</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-mknoloc"><span class="LIDENT">mknoloc</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_type_decl</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;show&quot;</span><span class="RPAREN">)</span> <a href="#local_type_decl_25"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="LIDENT">show_type_of_decl</span> <a href="#local_type_decl_25"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-expr_of_typ"><span class="LIDENT">expr_of_typ</span></span> <span id="local_quoter_26"><span class="LIDENT">quoter</span></span> <span id="local_typ_27"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_loc_28"><span class="LIDENT">loc</span></span> <span class="EQUAL">=</span> <a href="#local_typ_27"><span class="LIDENT">typ</span></a><span class="DOT">.</span><span class="LIDENT">ptyp_loc</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></span> <span class="EQUAL">=</span> <span class="LIDENT">expr_of_typ</span> <a href="#local_quoter_26"><span class="LIDENT">quoter</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-get"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <span class="LIDENT">ct_attr_printer</span> <a href="#local_typ_27"><span class="LIDENT">typ</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_printer_30"><span class="LIDENT">printer</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">wrap_printer</span> <a href="#local_quoter_26"><span class="LIDENT">quoter</span></a> <a href="#local_printer_30"><span class="LIDENT">printer</span></a><span class="RBRACKET">]</span> <span class="LIDENT">fmt</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-has_flag"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">has_flag</span></a> <span class="LIDENT">ct_attr_opaque</span> <a href="#local_typ_27"><span class="LIDENT">typ</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;&lt;opaque&gt;&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_format_31"><span class="LIDENT">format</span></span> <span id="local_x_32"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_x_32"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_seq_33"><span class="LIDENT">seq</span></span> <span id="local_start_34"><span class="LIDENT">start</span></span> <span id="local_finish_35"><span class="LIDENT">finish</span></span> <span id="local_fold_36"><span class="LIDENT">fold</span></span> <span id="local_typ_37"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_start_34"><span class="LIDENT">start</span></a><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">ignore</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_fold_36"><span class="LIDENT">fold</span></a><span class="RBRACKET">]</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LIDENT">sep</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="IF">if</span> <span class="LIDENT">sep</span> <span class="THEN">then</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;;@ &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_37"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="LIDENT">x</span><span class="SEMI">;</span> <span class="TRUE">true</span><span class="RPAREN">)</span> <span class="FALSE">false</span> <span class="LIDENT">x</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_finish_35"><span class="LIDENT">finish</span></a><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_typ_38"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-remove_pervasives"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">remove_pervasives</span></a> <span class="TILDE">~</span><span class="LIDENT">deriver</span> <a href="#local_typ_27"><span class="LIDENT">typ</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_typ_38"><span class="LIDENT">typ</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;_&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_arrow</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;&lt;fun&gt;&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_constr</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_builtin_39"><span class="LIDENT">builtin</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-not"><span class="LIDENT">not</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-has_flag"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">has_flag</span></a> <span class="LIDENT">ct_attr_nobuiltin</span> <a href="#local_typ_38"><span class="LIDENT">typ</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_builtin_39"><span class="LIDENT">builtin</span></a><span class="COMMA">,</span> <a href="#local_typ_38"><span class="LIDENT">typ</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">unit</span><span class="RBRACKET">]</span>        <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;()&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">int</span><span class="RBRACKET">]</span>         <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%d&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">int32</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Int32</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span>     <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%ldl&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">int64</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Int64</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span>     <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%LdL&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">nativeint</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Nativeint</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%ndn&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">float</span><span class="RBRACKET">]</span>       <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%F&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">bool</span><span class="RBRACKET">]</span>        <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%B&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">char</span><span class="RBRACKET">]</span>        <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%C&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">string</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span>    <span class="MINUSGREATER">-&gt;</span> <a href="#local_format_31"><span class="LIDENT">format</span></a> <span class="STRING">&quot;%S&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LIDENT">bytes</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;%S&quot;</span> <span class="LPAREN">(</span><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">to_string</span> <span class="LIDENT">x</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_40"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="LIDENT">ref</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;ref (&quot;</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_40"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="BANG">!</span><span class="LIDENT">x</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;)&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_41"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="LIDENT">list</span><span class="RBRACKET">]</span>  <span class="MINUSGREATER">-&gt;</span> <a href="#local_seq_33"><span class="LIDENT">seq</span></a> <span class="STRING">&quot;@[&lt;2&gt;[&quot;</span>   <span class="STRING">&quot;@,]@]&quot;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_left</span><span class="RBRACKET">]</span>  <a href="#local_typ_41"><span class="LIDENT">typ</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_42"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="LIDENT">array</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_seq_33"><span class="LIDENT">seq</span></a> <span class="STRING">&quot;@[&lt;2&gt;[|&quot;</span> <span class="STRING">&quot;@,|]@]&quot;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">fold_left</span><span class="RBRACKET">]</span> <a href="#local_typ_42"><span class="LIDENT">typ</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_43"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="LIDENT">option</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>          <span class="FUNCTION">function</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;None&quot;</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;(Some &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_43"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="LIDENT">x</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;)&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_ok_t_44"><span class="LIDENT">ok_t</span></span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_err_t_45"><span class="LIDENT">err_t</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="LIDENT">result</span><span class="RBRACKET">]</span> <span class="BAR">|</span><span class="EOL">
</span>               <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_ok_t_46"><span class="LIDENT">ok_t</span></span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_err_t_47"><span class="LIDENT">err_t</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>          <span class="FUNCTION">function</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LIDENT">ok</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;(Ok &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_ok_t_46"><span class="LIDENT">ok_t</span></a><span class="RBRACKET">]</span> <span class="LIDENT">ok</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;)&quot;</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LIDENT">e</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;(Error &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_err_t_47"><span class="LIDENT">err_t</span></a><span class="RBRACKET">]</span> <span class="LIDENT">e</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;)&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="TRUE">true</span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_48"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="LIDENT">lazy_t</span><span class="RBRACKET">]</span> <span class="BAR">|</span> <span class="LBRACKETPERCENT">[%</span><span class="TYPE">type</span><span class="COLON">:</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">t</span><span class="QUESTION">?</span> <span id="local_typ_49"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span> <span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="IF">if</span> <span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">is_val</span> <span class="LIDENT">x</span> <span class="THEN">then</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_49"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="LPAREN">(</span><span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">force</span> <span class="LIDENT">x</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;&lt;not evaluated&gt;&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_constr</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_lid_50"><span class="LIDENT">lid</span></span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_args_51"><span class="LIDENT">args</span></span><span class="RPAREN">)</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_args_pp_52"><span class="LIDENT">args_pp</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_typ_53"><span class="LIDENT">typ</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">fmt</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_53"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <a href="#local_args_51"><span class="LIDENT">args</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_printer_54"><span class="LIDENT">printer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-get"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <span class="LIDENT">ct_attr_polyprinter</span> <a href="#local_typ_38"><span class="LIDENT">typ</span></a> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_printer_55"><span class="LIDENT">printer</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">wrap_printer</span> <a href="#local_quoter_26"><span class="LIDENT">quoter</span></a> <a href="#local_printer_55"><span class="LIDENT">printer</span></a><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_printer_56"><span class="LIDENT">printer</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-ident"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">ident</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-mknoloc"><span class="LIDENT">mknoloc</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_lid"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_lid</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;pp&quot;</span><span class="RPAREN">)</span> <a href="#local_lid_50"><span class="LIDENT">lid</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-quote"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">quote</span></a> <span class="TILDE">~</span><a href="#local_quoter_26"><span class="LIDENT">quoter</span></a> <a href="#local_printer_56"><span class="LIDENT">printer</span></a><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-app"><span class="LIDENT">app</span></a> <a href="#local_printer_54"><span class="LIDENT">printer</span></a> <span class="LPAREN">(</span><a href="#local_args_pp_52"><span class="LIDENT">args_pp</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LBRACKET">[</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LIDENT">fmt</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span>      <span class="END">end</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_tuple</span> <span id="local_typs_57"><span class="LIDENT">typs</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_args_58"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-mapi"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_59"><span class="LIDENT">i</span></span> <span id="local_typ_60"><span class="LIDENT">typ</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-app"><span class="LIDENT">app</span></a> <span class="LPAREN">(</span><a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_60"><span class="LIDENT">typ</span></a><span class="RPAREN">)</span> <span class="LBRACKET">[</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argn</span> <a href="#local_i_59"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <a href="#local_typs_57"><span class="LIDENT">typs</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>        <span class="FUN">fun</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">p</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-ptuple"><span class="LIDENT">ptuple</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-mapi"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_61"><span class="LIDENT">i</span></span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argn</span> <a href="#local_i_61"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_typs_57"><span class="LIDENT">typs</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;(@[&quot;</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_args_58"><span class="LIDENT">args</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html"><span class="UIDENT">Ppx_deriving</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-fold_exprs"><span class="LIDENT">fold_exprs</span></a><span class="EOL">
</span>                <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-seq_reduce"><span class="LIDENT">seq_reduce</span></a> <span class="LABEL">~sep:</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;,@ &quot;</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@])&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_variant</span> <span class="LPAREN">(</span><span id="local_fields_62"><span class="LIDENT">fields</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="SEMI">;</span> <span id="local_ptyp_loc_63"><span class="LIDENT">ptyp_loc</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cases_64"><span class="LIDENT">cases</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <a href="#local_fields_62"><span class="LIDENT">fields</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_field_65"><span class="LIDENT">field</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="#local_field_65"><span class="LIDENT">field</span></a><span class="DOT">.</span><span class="LIDENT">prf_desc</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Rtag</span><span class="LPAREN">(</span><span id="local_label_66"><span class="LIDENT">label</span></span><span class="COMMA">,</span> <span class="TRUE">true</span> <span class="COMMENT">(*empty*)</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_label_67"><span class="LIDENT">label</span></span> <span class="EQUAL">=</span> <a href="#local_label_66"><span class="LIDENT">label</span></a><span class="DOT">.</span><span class="LIDENT">txt</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Pat.val-variant"><span class="UIDENT">Pat</span><span class="DOT">.</span><span class="LIDENT">variant</span></a> <a href="#local_label_67"><span class="LIDENT">label</span></a> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>                     <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;`&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <a href="#local_label_67"><span class="LIDENT">label</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Rtag</span><span class="LPAREN">(</span><span id="local_label_68"><span class="LIDENT">label</span></span><span class="COMMA">,</span> <span class="FALSE">false</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span id="local_typ_69"><span class="LIDENT">typ</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_label_70"><span class="LIDENT">label</span></span> <span class="EQUAL">=</span> <a href="#local_label_68"><span class="LIDENT">label</span></a><span class="DOT">.</span><span class="LIDENT">txt</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Pat.val-variant"><span class="UIDENT">Pat</span><span class="DOT">.</span><span class="LIDENT">variant</span></a> <a href="#local_label_70"><span class="LIDENT">label</span></a> <span class="LPAREN">(</span><span class="UIDENT">Some</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">pat</span><span class="QUESTION">?</span> <span class="LIDENT">x</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                     <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;`&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <a href="#local_label_70"><span class="LIDENT">label</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <span class="STRING">&quot; (@[&lt;hov&gt;&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                            <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_69"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="LIDENT">x</span><span class="SEMI">;</span><span class="EOL">
</span>                            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@])&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Rinherit</span><span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_constr</span> <span class="LPAREN">(</span><span id="local_tname_72"><span class="LIDENT">tname</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_typ_71"><span class="LIDENT">typ</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">pat</span><span class="QUESTION">?</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">p</span> <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Pat.val-type_"><span class="UIDENT">Pat</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_tname_72"><span class="LIDENT">tname</span></a><span class="RBRACKET">]</span> <span class="AS">as</span> <span class="LIDENT">x</span><span class="RBRACKET">]</span><span class="EOL">
</span>                     <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_71"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span> <span class="LIDENT">x</span><span class="RBRACKET">]</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LIDENT">raise_errorf</span> <span class="LABEL">~loc:</span><a href="#local_ptyp_loc_63"><span class="LIDENT">ptyp_loc</span></a> <span class="STRING">&quot;%s cannot be derived for %s&quot;</span><span class="EOL">
</span>                         <span class="LIDENT">deriver</span> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-string_of_core_type"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">string_of_core_type</span></a> <a href="#local_typ_38"><span class="LIDENT">typ</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-function_"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">function_</span></a> <a href="#local_cases_64"><span class="LIDENT">cases</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_var</span> <span id="local_name_73"><span class="LIDENT">name</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;poly_&quot;</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a><a href="#local_name_73"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span> <span class="LIDENT">fmt</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">ptyp_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">Ptyp_alias</span> <span class="LPAREN">(</span><span id="local_typ_74"><span class="LIDENT">typ</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_expr_of_typ_29"><span class="LIDENT">expr_of_typ</span></a> <a href="#local_typ_74"><span class="LIDENT">typ</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span id="local_ptyp_loc_75"><span class="LIDENT">ptyp_loc</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">raise_errorf</span> <span class="LABEL">~loc:</span><a href="#local_ptyp_loc_75"><span class="LIDENT">ptyp_loc</span></a> <span class="STRING">&quot;%s cannot be derived for %s&quot;</span><span class="EOL">
</span>                   <span class="LIDENT">deriver</span> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-string_of_core_type"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">string_of_core_type</span></a> <a href="#local_typ_38"><span class="LIDENT">typ</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expr_of_label_decl"><span class="LIDENT">expr_of_label_decl</span></span> <span id="local_quoter_76"><span class="LIDENT">quoter</span></span> <span class="LBRACE">{</span> <span id="local_pld_type_77"><span class="LIDENT">pld_type</span></span><span class="SEMI">;</span> <span id="local_pld_attributes_78"><span class="LIDENT">pld_attributes</span></span> <span class="RBRACE">}</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_attrs_79"><span class="LIDENT">attrs</span></span> <span class="EQUAL">=</span> <a href="#local_pld_type_77"><span class="LIDENT">pld_type</span></a><span class="DOT">.</span><span class="LIDENT">ptyp_attributes</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <a href="#local_pld_attributes_78"><span class="LIDENT">pld_attributes</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LIDENT">expr_of_typ</span> <a href="#local_quoter_76"><span class="LIDENT">quoter</span></a> <span class="LBRACE">{</span> <a href="#local_pld_type_77"><span class="LIDENT">pld_type</span></a> <span class="WITH">with</span> <span class="LIDENT">ptyp_attributes</span> <span class="EQUAL">=</span> <a href="#local_attrs_79"><span class="LIDENT">attrs</span></a> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-str_of_type"><span class="LIDENT">str_of_type</span></span> <span class="TILDE">~</span><span id="local_with_path_80"><span class="LIDENT">with_path</span></span> <span class="TILDE">~</span><span id="local_path_81"><span class="LIDENT">path</span></span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">ptype_loc</span> <span class="EQUAL">=</span> <span id="local_loc_83"><span class="LIDENT">loc</span></span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_type_decl_82"><span class="LIDENT">type_decl</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_quoter_84"><span class="LIDENT">quoter</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-create_quoter"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">create_quoter</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_path_85"><span class="LIDENT">path</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-path_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">path_of_type_decl</span></a> <span class="TILDE">~</span><a href="#local_path_81"><span class="LIDENT">path</span></a> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_prettyprinter_86"><span class="LIDENT">prettyprinter</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a><span class="DOT">.</span><span class="LIDENT">ptype_kind</span><span class="COMMA">,</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a><span class="DOT">.</span><span class="LIDENT">ptype_manifest</span> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ptype_abstract</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_manifest_87"><span class="LIDENT">manifest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">fmt</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">expr_of_typ</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_manifest_87"><span class="LIDENT">manifest</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ptype_variant</span> <span id="local_constrs_88"><span class="LIDENT">constrs</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cases_89"><span class="LIDENT">cases</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <a href="#local_constrs_88"><span class="LIDENT">constrs</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">pcd_name</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_name'_91"><span class="LIDENT">name'</span></span> <span class="RBRACE">}</span><span class="SEMI">;</span> <span id="local_pcd_args_92"><span class="LIDENT">pcd_args</span></span><span class="SEMI">;</span> <span id="local_pcd_attributes_93"><span class="LIDENT">pcd_attributes</span></span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_constr_90"><span class="LIDENT">constr</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_constr_name_94"><span class="LIDENT">constr_name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>            <span class="LIDENT">expand_path</span> <span class="TILDE">~</span><a href="#local_with_path_80"><span class="LIDENT">with_path</span></a> <span class="TILDE">~</span><a href="#local_path_85"><span class="LIDENT">path</span></a> <a href="#local_name'_91"><span class="LIDENT">name'</span></a><span class="EOL">
</span>          <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="../../../ppxlib/src/ppxlib/attribute.ml.html#val-get"><span class="UIDENT">Attribute</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <span class="LIDENT">constr_attr_printer</span> <a href="#local_constr_90"><span class="LIDENT">constr</span></a><span class="COMMA">,</span> <a href="#local_pcd_args_92"><span class="LIDENT">pcd_args</span></a> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_printer_95"><span class="LIDENT">printer</span></span><span class="COMMA">,</span> <span class="UIDENT">Pcstr_tuple</span><span class="LPAREN">(</span><span id="local_args_96"><span class="LIDENT">args</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span class="REC">rec</span> <span id="local_range_97"><span class="LIDENT">range</span></span> <span id="local_from_idx_98"><span class="LIDENT">from_idx</span></span> <span id="local_to_idx_99"><span class="LIDENT">to_idx</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="IF">if</span> <a href="#local_from_idx_98"><span class="LIDENT">from_idx</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_to_idx_99"><span class="LIDENT">to_idx</span></a><span class="EOL">
</span>              <span class="THEN">then</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>              <span class="ELSE">else</span> <a href="#local_from_idx_98"><span class="LIDENT">from_idx</span></a><span class="COLONCOLON">::</span><span class="LPAREN">(</span><a href="#local_range_97"><span class="LIDENT">range</span></a> <span class="LPAREN">(</span><a href="#local_from_idx_98"><span class="LIDENT">from_idx</span></a><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a><span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_to_idx_99"><span class="LIDENT">to_idx</span></a><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_indices_100"><span class="LIDENT">indices</span></span> <span class="EQUAL">=</span> <a href="#local_range_97"><span class="LIDENT">range</span></a> <span class="INT">0</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-length"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_args_96"><span class="LIDENT">args</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_pattern_vars_101"><span class="LIDENT">pattern_vars</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_102"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;a&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-string_of_int"><span class="LIDENT">string_of_int</span></a> <a href="#local_i_102"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_indices_100"><span class="LIDENT">indices</span></a><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_expr_vars_103"><span class="LIDENT">expr_vars</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_104"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;a&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-string_of_int"><span class="LIDENT">string_of_int</span></a> <a href="#local_i_104"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_indices_100"><span class="LIDENT">indices</span></a><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pconstr"><span class="LIDENT">pconstr</span></a> <a href="#local_name'_91"><span class="LIDENT">name'</span></a> <a href="#local_pattern_vars_101"><span class="LIDENT">pattern_vars</span></a><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">wrap_printer</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_printer_95"><span class="LIDENT">printer</span></a><span class="RBRACKET">]</span> <span class="LIDENT">fmt</span><span class="EOL">
</span>                        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-tuple"><span class="LIDENT">tuple</span></a> <a href="#local_expr_vars_103"><span class="LIDENT">expr_vars</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_printer_105"><span class="LIDENT">printer</span></span><span class="COMMA">,</span> <span class="UIDENT">Pcstr_record</span><span class="LPAREN">(</span><span id="local_labels_106"><span class="LIDENT">labels</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_args_107"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span> <a href="#local_labels_106"><span class="LIDENT">labels</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LBRACE">{</span> <span class="LIDENT">pld_name</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_n_108"><span class="LIDENT">n</span></span> <span class="RBRACE">}</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argl</span> <a href="#local_n_108"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><span class="LIDENT">pconstrrec</span> <a href="#local_name'_91"><span class="LIDENT">name'</span></a> <span class="LPAREN">(</span><span class="LIDENT">pattl</span> <a href="#local_labels_106"><span class="LIDENT">labels</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                     <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-app"><span class="LIDENT">app</span></a> <span class="LPAREN">(</span><span class="LIDENT">wrap_printer</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_printer_105"><span class="LIDENT">printer</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="LIDENT">fmt</span><span class="RBRACKET">]</span> <span class="COLONCOLON">::</span> <a href="#local_args_107"><span class="LIDENT">args</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span class="UIDENT">Pcstr_tuple</span><span class="LPAREN">(</span><span id="local_typs_109"><span class="LIDENT">typs</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_args_110"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-mapi"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_111"><span class="LIDENT">i</span></span> <span id="local_typ_112"><span class="LIDENT">typ</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-app"><span class="LIDENT">app</span></a> <span class="LPAREN">(</span><span class="LIDENT">expr_of_typ</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_typ_112"><span class="LIDENT">typ</span></a><span class="RPAREN">)</span> <span class="LBRACKET">[</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argn</span> <a href="#local_i_111"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <a href="#local_typs_109"><span class="LIDENT">typs</span></a> <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_printer_113"><span class="LIDENT">printer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="MATCH">match</span> <a href="#local_args_110"><span class="LIDENT">args</span></a> <span class="WITH">with</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span>   <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">pp_print_string</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_constr_name_94"><span class="LIDENT">constr_name</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="LBRACKET">[</span><span id="local_arg_114"><span class="LIDENT">arg</span></span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;(@[&lt;2&gt;&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a>  <a href="#local_constr_name_94"><span class="LIDENT">constr_name</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <span class="STRING">&quot;@ &quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_arg_114"><span class="LIDENT">arg</span></a><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@])&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>              <span class="BAR">|</span> <span id="local_args_115"><span class="LIDENT">args</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;(@[&lt;2&gt;&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a>  <a href="#local_constr_name_94"><span class="LIDENT">constr_name</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <span class="STRING">&quot; (@,&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_args_115"><span class="LIDENT">args</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html"><span class="UIDENT">Ppx_deriving</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-fold_exprs"><span class="LIDENT">fold_exprs</span></a><span class="EOL">
</span>                        <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-seq_reduce"><span class="LIDENT">seq_reduce</span></a> <span class="LABEL">~sep:</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;,@ &quot;</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@,))@]&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pconstr"><span class="LIDENT">pconstr</span></a> <a href="#local_name'_91"><span class="LIDENT">name'</span></a> <span class="LPAREN">(</span><span class="LIDENT">pattn</span> <a href="#local_typs_109"><span class="LIDENT">typs</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_printer_113"><span class="LIDENT">printer</span></a><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span class="UIDENT">Pcstr_record</span><span class="LPAREN">(</span><span id="local_labels_116"><span class="LIDENT">labels</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_args_117"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <a href="#local_labels_116"><span class="LIDENT">labels</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">pld_name</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_n_119"><span class="LIDENT">n</span></span> <span class="RBRACE">}</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_pld_118"><span class="LIDENT">pld</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@[%s =@ &quot;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_n_119"><span class="LIDENT">n</span></a><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">expr_of_label_decl</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_pld_118"><span class="LIDENT">pld</span></a><span class="RBRACKET">]</span><span class="EOL">
</span>                    <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="LPAREN">(</span><span class="LIDENT">argl</span> <a href="#local_n_119"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@]&quot;</span><span class="EOL">
</span>                <span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_printer_120"><span class="LIDENT">printer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>                <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;@[&lt;2&gt;&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a>  <a href="#local_constr_name_94"><span class="LIDENT">constr_name</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <span class="STRING">&quot; {@,&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_args_117"><span class="LIDENT">args</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html"><span class="UIDENT">Ppx_deriving</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-fold_exprs"><span class="LIDENT">fold_exprs</span></a><span class="EOL">
</span>                      <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-seq_reduce"><span class="LIDENT">seq_reduce</span></a> <span class="LABEL">~sep:</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;;@ &quot;</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@]}&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-case"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">case</span></a> <span class="LPAREN">(</span><span class="LIDENT">pconstrrec</span> <a href="#local_name'_91"><span class="LIDENT">name'</span></a> <span class="LPAREN">(</span><span class="LIDENT">pattl</span> <a href="#local_labels_116"><span class="LIDENT">labels</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_printer_120"><span class="LIDENT">printer</span></a><span class="EOL">
</span>          <span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">fmt</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-function_"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">function_</span></a> <a href="#local_cases_89"><span class="LIDENT">cases</span></a><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ptype_record</span> <span id="local_labels_121"><span class="LIDENT">labels</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_fields_122"><span class="LIDENT">fields</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <a href="#local_labels_121"><span class="LIDENT">labels</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-mapi"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_123"><span class="LIDENT">i</span></span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">pld_name</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">txt</span> <span class="EQUAL">=</span> <span id="local_name_125"><span class="LIDENT">name</span></span> <span class="RBRACE">}</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span><span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_pld_124"><span class="LIDENT">pld</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_field_name_126"><span class="LIDENT">field_name</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="#local_i_123"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span> <span class="LIDENT">expand_path</span> <span class="TILDE">~</span><a href="#local_with_path_80"><span class="LIDENT">with_path</span></a> <span class="TILDE">~</span><a href="#local_path_85"><span class="LIDENT">path</span></a> <a href="#local_name_125"><span class="LIDENT">name</span></a> <span class="ELSE">else</span> <a href="#local_name_125"><span class="LIDENT">name</span></a> <span class="IN">in</span><span class="EOL">
</span>          <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@[%s =@ &quot;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-str"><span class="LIDENT">str</span></a> <a href="#local_field_name_126"><span class="LIDENT">field_name</span></a><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">expr_of_label_decl</span> <a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <a href="#local_pld_124"><span class="LIDENT">pld</span></a><span class="RBRACKET">]</span><span class="EOL">
</span>              <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Exp.val-field"><span class="UIDENT">Exp</span><span class="DOT">.</span><span class="LIDENT">field</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a> <span class="STRING">&quot;x&quot;</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-mknoloc"><span class="LIDENT">mknoloc</span></a> <span class="LPAREN">(</span><span class="UIDENT">Lident</span> <a href="#local_name_125"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>            <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@]&quot;</span><span class="EOL">
</span>          <span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">fmt</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@[&lt;2&gt;{ &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_fields_122"><span class="LIDENT">fields</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html"><span class="UIDENT">Ppx_deriving</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-fold_exprs"><span class="LIDENT">fold_exprs</span></a><span class="EOL">
</span>              <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-seq_reduce"><span class="LIDENT">seq_reduce</span></a> <span class="LABEL">~sep:</span><span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;;@ &quot;</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span> <span class="LIDENT">fmt</span> <span class="STRING">&quot;@ }@]&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ptype_abstract</span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">raise_errorf</span> <span class="TILDE">~</span><a href="#local_loc_83"><span class="LIDENT">loc</span></a> <span class="STRING">&quot;%s cannot be derived for fully abstract types&quot;</span> <span class="LIDENT">deriver</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ptype_open</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span>        <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">raise_errorf</span> <span class="TILDE">~</span><a href="#local_loc_83"><span class="LIDENT">loc</span></a> <span class="STRING">&quot;%s cannot be derived for open types&quot;</span> <span class="LIDENT">deriver</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_pp_poly_apply_127"><span class="LIDENT">pp_poly_apply</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-poly_apply_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">poly_apply_of_type_decl</span></a> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-evar"><span class="LIDENT">evar</span></a><span class="EOL">
</span>                        <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_type_decl</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;pp&quot;</span><span class="RPAREN">)</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_stringprinter_128"><span class="LIDENT">stringprinter</span></span> <span class="EQUAL">=</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">asprintf</span> <span class="STRING">&quot;%a&quot;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <a href="#local_pp_poly_apply_127"><span class="LIDENT">pp_poly_apply</span></a><span class="RBRACKET">]</span> <span class="LIDENT">x</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_polymorphize_129"><span class="LIDENT">polymorphize</span></span>  <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-poly_fun_of_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">poly_fun_of_type_decl</span></a> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_pp_type_130"><span class="LIDENT">pp_type</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-strong_type_of_type"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">strong_type_of_type</span></a> <span class="INFIXOP1">@@</span> <span class="LIDENT">pp_type_of_decl</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_show_type_131"><span class="LIDENT">show_type</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-strong_type_of_type"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">strong_type_of_type</span></a> <span class="INFIXOP1">@@</span><span class="EOL">
</span>      <span class="LIDENT">show_type_of_decl</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_pp_var_132"><span class="LIDENT">pp_var</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_type_decl</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;pp&quot;</span><span class="RPAREN">)</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_show_var_133"><span class="LIDENT">show_var</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../ppx_deriving.api/ppx_deriving.ml.html#module-Ast_convenience.val-pvar"><span class="LIDENT">pvar</span></a> <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-mangle_type_decl"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">mangle_type_decl</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prefix</span> <span class="STRING">&quot;show&quot;</span><span class="RPAREN">)</span> <a href="#local_type_decl_82"><span class="LIDENT">type_decl</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_no_warn_32_134"><span class="LIDENT">no_warn_32</span></span> <span class="EQUAL">=</span> <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-attr_warning"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">attr_warning</span></a> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="STRING">&quot;-32&quot;</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LBRACKET">[</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Vb.val-mk"><span class="UIDENT">Vb</span><span class="DOT">.</span><span class="LIDENT">mk</span></a> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Pat.val-constraint_"><span class="UIDENT">Pat</span><span class="DOT">.</span><span class="LIDENT">constraint_</span></a> <a href="#local_pp_var_132"><span class="LIDENT">pp_var</span></a> <a href="#local_pp_type_130"><span class="LIDENT">pp_type</span></a><span class="RPAREN">)</span><span class="EOL">
</span>         <span class="LPAREN">(</span><a href="../ppx_deriving.api/ppx_deriving.ml.html#val-sanitize"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">sanitize</span></a> <span class="TILDE">~</span><a href="#local_quoter_84"><span class="LIDENT">quoter</span></a> <span class="LPAREN">(</span><a href="#local_polymorphize_129"><span class="LIDENT">polymorphize</span></a> <a href="#local_prettyprinter_86"><span class="LIDENT">prettyprinter</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>   <a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Vb.val-mk"><span class="UIDENT">Vb</span><span class="DOT">.</span><span class="LIDENT">mk</span></a> <span class="LABEL">~attrs:</span><span class="LBRACKET">[</span><a href="#local_no_warn_32_134"><span class="LIDENT">no_warn_32</span></a><span class="RBRACKET">]</span> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Pat.val-constraint_"><span class="UIDENT">Pat</span><span class="DOT">.</span><span class="LIDENT">constraint_</span></a> <a href="#local_show_var_133"><span class="LIDENT">show_var</span></a> <a href="#local_show_type_131"><span class="LIDENT">show_type</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="#local_polymorphize_129"><span class="LIDENT">polymorphize</span></a> <a href="#local_stringprinter_128"><span class="LIDENT">stringprinter</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-impl_args"><span class="LIDENT">impl_args</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="UIDENT">Args</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-empty"><span class="LIDENT">empty</span></a> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-(+&gt;)"><span class="INFIXOP2">+&gt;</span></a> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-arg"><span class="LIDENT">arg</span></a> <span class="STRING">&quot;with_path&quot;</span> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-ebool"><span class="UIDENT">Ast_pattern</span><span class="DOT">.</span><span class="LIDENT">ebool</span></a> <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-__"><span class="LIDENT">__</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="COMMENT">(* TODO: add arg_default to ppxlib? *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-impl_generator"><span class="LIDENT">impl_generator</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Generator.module-V2.val-make"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="UIDENT">Generator</span><span class="DOT">.</span><span class="UIDENT">V2</span><span class="DOT">.</span><span class="LIDENT">make</span></a> <span class="LIDENT">impl_args</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_ctxt_135"><span class="LIDENT">ctxt</span></span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_type_decls_136"><span class="LIDENT">type_decls</span></span><span class="RPAREN">)</span> <span id="local_with_path_137"><span class="LIDENT">with_path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_path_138"><span class="LIDENT">path</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_code_path_139"><span class="LIDENT">code_path</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/expansion_context.ml.html#module-Deriver.val-code_path"><span class="UIDENT">Expansion_context</span><span class="DOT">.</span><span class="UIDENT">Deriver</span><span class="DOT">.</span><span class="LIDENT">code_path</span></a> <a href="#local_ctxt_135"><span class="LIDENT">ctxt</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* Cannot use main_module_name from code_path because that contains .cppo suffix (via line directives), so it's actually not the module name. *)</span><span class="EOL">
</span>    <span class="COMMENT">(* Ppx_deriving.module_from_input_name ported to ppxlib. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_main_module_path_140"><span class="LIDENT">main_module_path</span></span> <span class="EQUAL">=</span> <span class="MATCH">match</span> <a href="../../../ppxlib/src/ppxlib/expansion_context.ml.html#module-Deriver.val-input_name"><span class="UIDENT">Expansion_context</span><span class="DOT">.</span><span class="UIDENT">Deriver</span><span class="DOT">.</span><span class="LIDENT">input_name</span></a> <a href="#local_ctxt_135"><span class="LIDENT">ctxt</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="STRING">&quot;&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="STRING">&quot;_none_&quot;</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_input_name_141"><span class="LIDENT">input_name</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/filename.ml.html#val-chop_suffix"><span class="UIDENT">Filename</span><span class="DOT">.</span><span class="LIDENT">chop_suffix</span></a> <a href="#local_input_name_141"><span class="LIDENT">input_name</span></a> <span class="STRING">&quot;.ml&quot;</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="EXCEPTION">exception</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="COMMENT">(* see https://github.com/ocaml-ppx/ppx_deriving/pull/196 *)</span><span class="EOL">
</span>          <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_path_142"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LBRACKET">[</span><a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-capitalize_ascii"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">capitalize_ascii</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/filename.ml.html#module-Sysdeps"><span class="UIDENT">Filename</span><span class="DOT">.</span><span class="LIDENT">basename</span></a> <a href="#local_path_142"><span class="LIDENT">path</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_main_module_path_140"><span class="LIDENT">main_module_path</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <a href="../../../ppxlib/src/ppxlib/code_path.ml.html#val-submodule_path"><span class="UIDENT">Code_path</span><span class="DOT">.</span><span class="LIDENT">submodule_path</span></a> <a href="#local_code_path_139"><span class="LIDENT">code_path</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_with_path_143"><span class="LIDENT">with_path</span></span> <span class="EQUAL">=</span> <span class="MATCH">match</span> <a href="#local_with_path_137"><span class="LIDENT">with_path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_with_path_144"><span class="LIDENT">with_path</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_with_path_144"><span class="LIDENT">with_path</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span> <span class="COMMENT">(* true by default *)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LBRACKET">[</span><a href="../../../ppxlib/src/ppxlib.ast/ast_helper_lite.ml.html#module-Str.val-value"><span class="UIDENT">Str</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <span class="UIDENT">Recursive</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-concat"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">concat</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="LIDENT">str_of_type</span> <span class="TILDE">~</span><a href="#local_with_path_143"><span class="LIDENT">with_path</span></a> <span class="TILDE">~</span><a href="#local_path_138"><span class="LIDENT">path</span></a><span class="RPAREN">)</span> <a href="#local_type_decls_136"><span class="LIDENT">type_decls</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-intf_args"><span class="LIDENT">intf_args</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="UIDENT">Args</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-empty"><span class="LIDENT">empty</span></a> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-(+&gt;)"><span class="INFIXOP2">+&gt;</span></a> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Args.val-arg"><span class="LIDENT">arg</span></a> <span class="STRING">&quot;with_path&quot;</span> <span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-ebool"><span class="UIDENT">Ast_pattern</span><span class="DOT">.</span><span class="LIDENT">ebool</span></a> <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-__"><span class="LIDENT">__</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-intf_generator"><span class="LIDENT">intf_generator</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#module-Generator.module-V2.val-make"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="UIDENT">Generator</span><span class="DOT">.</span><span class="UIDENT">V2</span><span class="DOT">.</span><span class="LIDENT">make</span></a> <span class="LIDENT">intf_args</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LABEL">~ctxt:</span><span class="UNDERSCORE">_</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_type_decls_145"><span class="LIDENT">type_decls</span></span><span class="RPAREN">)</span> <span id="local__with_path_146"><span class="LIDENT">_with_path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-concat"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">concat</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LIDENT">sig_of_type</span> <a href="#local_type_decls_145"><span class="LIDENT">type_decls</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-deriving"><span class="LIDENT">deriving</span></span><span class="COLON">:</span> <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#type-t"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ppxlib/src/ppxlib/deriving.ml.html#val-add"><span class="UIDENT">Deriving</span><span class="DOT">.</span><span class="LIDENT">add</span></a><span class="EOL">
</span>    <span class="LIDENT">deriver</span><span class="EOL">
</span>    <span class="LABEL">~str_type_decl:</span><span class="LIDENT">impl_generator</span><span class="EOL">
</span>    <span class="LABEL">~sig_type_decl:</span><span class="LIDENT">intf_generator</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* custom extension such that &quot;derive&quot;-prefixed also works *)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-derive_extension"><span class="LIDENT">derive_extension</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ppxlib/src/ppxlib/extension.ml.html#module-V3.val-declare"><span class="UIDENT">Extension</span><span class="DOT">.</span><span class="UIDENT">V3</span><span class="DOT">.</span><span class="LIDENT">declare</span></a> <span class="STRING">&quot;derive.show&quot;</span> <a href="../../../ppxlib/src/ppxlib/extension.ml.html#module-Context.val-expression"><span class="UIDENT">Extension</span><span class="DOT">.</span><span class="UIDENT">Context</span><span class="DOT">.</span><span class="LIDENT">expression</span></a><span class="EOL">
</span>    <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html"><span class="UIDENT">Ast_pattern</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ppxlib/src/ppxlib/ast_pattern_generated.ml.html#val-ptyp"><span class="LIDENT">ptyp</span></a> <a href="../../../ppxlib/src/ppxlib/ast_pattern.ml.html#val-__"><span class="LIDENT">__</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_ctxt_147"><span class="LIDENT">ctxt</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_loc_148"><span class="LIDENT">loc</span></span> <span class="EQUAL">=</span> <a href="../../../ppxlib/src/ppxlib/expansion_context.ml.html#module-Extension.val-extension_point_loc"><span class="UIDENT">Expansion_context</span><span class="DOT">.</span><span class="UIDENT">Extension</span><span class="DOT">.</span><span class="LIDENT">extension_point_loc</span></a> <a href="#local_ctxt_147"><span class="LIDENT">ctxt</span></a> <span class="IN">in</span><span class="EOL">
</span>      <a href="../ppx_deriving.api/ppx_deriving.ml.html#val-with_quoter"><span class="UIDENT">Ppx_deriving</span><span class="DOT">.</span><span class="LIDENT">with_quoter</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_quoter_149"><span class="LIDENT">quoter</span></span> <span id="local_typ_150"><span class="LIDENT">typ</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">expr</span> <span class="FUN">fun</span> <span class="LIDENT">x</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ppx_deriving_runtime</span><span class="DOT">.</span><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">asprintf</span> <span class="STRING">&quot;%a&quot;</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LIDENT">fmt</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKETPERCENT">[%</span><span class="LIDENT">e</span> <span class="LIDENT">expr_of_typ</span> <a href="#local_quoter_149"><span class="LIDENT">quoter</span></a> <a href="#local_typ_150"><span class="LIDENT">typ</span></a><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="LIDENT">x</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-derive_transformation"><span class="LIDENT">derive_transformation</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ppxlib/src/ppxlib/driver.ml.html#val-register_transformation"><span class="UIDENT">Driver</span><span class="DOT">.</span><span class="LIDENT">register_transformation</span></a><span class="EOL">
</span>    <span class="LIDENT">deriver</span><span class="EOL">
</span>    <span class="LABEL">~rules:</span><span class="LBRACKET">[</span><a href="../../../ppxlib/src/ppxlib/context_free.ml.html#module-Rule.val-extension"><span class="UIDENT">Context_free</span><span class="DOT">.</span><span class="UIDENT">Rule</span><span class="DOT">.</span><span class="LIDENT">extension</span></a> <span class="LIDENT">derive_extension</span><span class="RBRACKET">]</span><span class="EOL">
</span></span></code></pre></body></html>
