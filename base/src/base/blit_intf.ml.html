<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: blit_intf.ml (base.src.base)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Base</a> &#x00BB; <a href="../index.html">Sources</a> &#x00BB; base &#x00BB; blit_intf.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>blit_intf.ml</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">Base</a><ul><li>Library <code>base</code><ul><li><a href="../../base/Base/index.html">Base</a></li></ul></li><li>Library <code>base.base_internalhash_types</code><ul><li><a href="../../base.base_internalhash_types/Base_internalhash_types/index.html">Base_internalhash_types</a></li></ul></li><li>Library <code>base.caml</code><ul><li><a href="../../base.caml/Caml/index.html">Caml</a></li></ul></li><li>Library <code>base.md5</code><ul><li><a href="../../base.md5/Md5_lib/index.html">Md5_lib</a></li></ul></li><li>Library <code>base.shadow_stdlib</code><ul><li><a href="../../base.shadow_stdlib/Shadow_stdlib/index.html">Shadow_stdlib</a></li></ul></li><li><a href="../index.html">Sources</a><ul><li>base<ul><li><a href="applicative.ml.html">applicative.ml</a></li><li><a href="applicative_intf.ml.html">applicative_intf.ml</a></li><li><a href="array.ml.html">array.ml</a></li><li><a href="array0.ml.html">array0.ml</a></li><li><a href="array_permute.ml.html">array_permute.ml</a></li><li><a href="avltree.ml.html">avltree.ml</a></li><li><a href="backtrace.ml.html">backtrace.ml</a></li><li><a href="base.ml.html">base.ml</a></li><li><a href="base__.ml.html">base__.ml</a></li><li><a href="binary_search.ml.html">binary_search.ml</a></li><li><a href="binary_searchable.ml.html">binary_searchable.ml</a></li><li><a href="binary_searchable_intf.ml.html">binary_searchable_intf.ml</a></li><li><a href="blit.ml.html">blit.ml</a></li><li><a href="#" class="current_unit">blit_intf.ml</a></li><li><a href="bool.ml.html">bool.ml</a></li><li><a href="bool0.ml.html">bool0.ml</a></li><li><a href="buffer.ml.html">buffer.ml</a></li><li><a href="buffer_intf.ml.html">buffer_intf.ml</a></li><li><a href="bytes.ml.html">bytes.ml</a></li><li><a href="bytes0.ml.html">bytes0.ml</a></li><li><a href="bytes_tr.ml.html">bytes_tr.ml</a></li><li><a href="char.ml.html">char.ml</a></li><li><a href="char0.ml.html">char0.ml</a></li><li><a href="comparable.ml.html">comparable.ml</a></li><li><a href="comparable_intf.ml.html">comparable_intf.ml</a></li><li><a href="comparator.ml.html">comparator.ml</a></li><li><a href="comparisons.ml.html">comparisons.ml</a></li><li><a href="container.ml.html">container.ml</a></li><li><a href="container_intf.ml.html">container_intf.ml</a></li><li><a href="either.ml.html">either.ml</a></li><li><a href="either0.ml.html">either0.ml</a></li><li><a href="either_intf.ml.html">either_intf.ml</a></li><li><a href="equal.ml.html">equal.ml</a></li><li><a href="error.ml.html">error.ml</a></li><li><a href="exn.ml.html">exn.ml</a></li><li><a href="field.ml.html">field.ml</a></li><li><a href="fieldslib.ml.html">fieldslib.ml</a></li><li><a href="float.ml.html">float.ml</a></li><li><a href="float0.ml.html">float0.ml</a></li><li><a href="floatable.ml.html">floatable.ml</a></li><li><a href="fn.ml.html">fn.ml</a></li><li><a href="formatter.ml.html">formatter.ml</a></li><li><a href="globalize.ml.html">globalize.ml</a></li><li><a href="hash.ml.html">hash.ml</a></li><li><a href="hash_intf.ml.html">hash_intf.ml</a></li><li><a href="hash_set.ml.html">hash_set.ml</a></li><li><a href="hash_set_intf.ml.html">hash_set_intf.ml</a></li><li><a href="hashable.ml.html">hashable.ml</a></li><li><a href="hashable_intf.ml.html">hashable_intf.ml</a></li><li><a href="hasher.ml.html">hasher.ml</a></li><li><a href="hashtbl.ml.html">hashtbl.ml</a></li><li><a href="hashtbl_intf.ml.html">hashtbl_intf.ml</a></li><li><a href="hex_lexer.ml.html">hex_lexer.ml</a></li><li><a href="identifiable.ml.html">identifiable.ml</a></li><li><a href="identifiable_intf.ml.html">identifiable_intf.ml</a></li><li><a href="import.ml.html">import.ml</a></li><li><a href="import0.ml.html">import0.ml</a></li><li><a href="indexed_container.ml.html">indexed_container.ml</a></li><li><a href="indexed_container_intf.ml.html">indexed_container_intf.ml</a></li><li><a href="info.ml.html">info.ml</a></li><li><a href="info_intf.ml.html">info_intf.ml</a></li><li><a href="int.ml.html">int.ml</a></li><li><a href="int0.ml.html">int0.ml</a></li><li><a href="int32.ml.html">int32.ml</a></li><li><a href="int63.ml.html">int63.ml</a></li><li><a href="int63_emul.ml.html">int63_emul.ml</a></li><li><a href="int64.ml.html">int64.ml</a></li><li><a href="int_conversions.ml.html">int_conversions.ml</a></li><li><a href="int_intf.ml.html">int_intf.ml</a></li><li><a href="int_math.ml.html">int_math.ml</a></li><li><a href="intable.ml.html">intable.ml</a></li><li><a href="invariant.ml.html">invariant.ml</a></li><li><a href="invariant_intf.ml.html">invariant_intf.ml</a></li><li><a href="lazy.ml.html">lazy.ml</a></li><li><a href="linked_queue.ml.html">linked_queue.ml</a></li><li><a href="linked_queue0.ml.html">linked_queue0.ml</a></li><li><a href="list.ml.html">list.ml</a></li><li><a href="list0.ml.html">list0.ml</a></li><li><a href="list1.ml.html">list1.ml</a></li><li><a href="map.ml.html">map.ml</a></li><li><a href="map_intf.ml.html">map_intf.ml</a></li><li><a href="maybe_bound.ml.html">maybe_bound.ml</a></li><li><a href="monad.ml.html">monad.ml</a></li><li><a href="monad_intf.ml.html">monad_intf.ml</a></li><li><a href="nativeint.ml.html">nativeint.ml</a></li><li><a href="nothing.ml.html">nothing.ml</a></li><li><a href="obj_array.ml.html">obj_array.ml</a></li><li><a href="obj_local.ml.html">obj_local.ml</a></li><li><a href="option.ml.html">option.ml</a></li><li><a href="option_array.ml.html">option_array.ml</a></li><li><a href="or_error.ml.html">or_error.ml</a></li><li><a href="ordered_collection_common.ml.html">ordered_collection_common.ml</a></li><li><a href="ordered_collection_common0.ml.html">ordered_collection_common0.ml</a></li><li><a href="ordering.ml.html">ordering.ml</a></li><li><a href="poly0.ml.html">poly0.ml</a></li><li><a href="popcount.ml.html">popcount.ml</a></li><li><a href="pow_overflow_bounds.ml.html">pow_overflow_bounds.ml</a></li><li><a href="ppx_compare_lib.ml.html">ppx_compare_lib.ml</a></li><li><a href="ppx_enumerate_lib.ml.html">ppx_enumerate_lib.ml</a></li><li><a href="ppx_hash_lib.ml.html">ppx_hash_lib.ml</a></li><li><a href="pretty_printer.ml.html">pretty_printer.ml</a></li><li><a href="printf.ml.html">printf.ml</a></li><li><a href="queue.ml.html">queue.ml</a></li><li><a href="queue_intf.ml.html">queue_intf.ml</a></li><li><a href="random.ml.html">random.ml</a></li><li><a href="random_repr.ml.html">random_repr.ml</a></li><li><a href="ref.ml.html">ref.ml</a></li><li><a href="result.ml.html">result.ml</a></li><li><a href="sequence.ml.html">sequence.ml</a></li><li><a href="set.ml.html">set.ml</a></li><li><a href="set_intf.ml.html">set_intf.ml</a></li><li><a href="sexp.ml.html">sexp.ml</a></li><li><a href="sexp_with_comparable.ml.html">sexp_with_comparable.ml</a></li><li><a href="sexpable.ml.html">sexpable.ml</a></li><li><a href="sign.ml.html">sign.ml</a></li><li><a href="sign0.ml.html">sign0.ml</a></li><li><a href="sign_or_nan.ml.html">sign_or_nan.ml</a></li><li><a href="source_code_position.ml.html">source_code_position.ml</a></li><li><a href="source_code_position0.ml.html">source_code_position0.ml</a></li><li><a href="stack.ml.html">stack.ml</a></li><li><a href="stack_intf.ml.html">stack_intf.ml</a></li><li><a href="staged.ml.html">staged.ml</a></li><li><a href="string.ml.html">string.ml</a></li><li><a href="string0.ml.html">string0.ml</a></li><li><a href="stringable.ml.html">stringable.ml</a></li><li><a href="sys.ml.html">sys.ml</a></li><li><a href="sys0.ml.html">sys0.ml</a></li><li><a href="t.ml.html">t.ml</a></li><li><a href="type_equal.ml.html">type_equal.ml</a></li><li><a href="uchar.ml.html">uchar.ml</a></li><li><a href="uchar0.ml.html">uchar0.ml</a></li><li><a href="uniform_array.ml.html">uniform_array.ml</a></li><li><a href="unit.ml.html">unit.ml</a></li><li><a href="variant.ml.html">variant.ml</a></li><li><a href="variantslib.ml.html">variantslib.ml</a></li><li><a href="with_return.ml.html">with_return.ml</a></li><li><a href="word_size.ml.html">word_size.ml</a></li></ul></li><li>base.base_internalhash_types<ul><li><a href="../base.base_internalhash_types/base_internalhash_types.ml.html">base_internalhash_types.ml</a></li></ul></li><li>base.caml<ul><li><a href="../base.caml/caml.ml.html">caml.ml</a></li></ul></li><li>base.md5<ul><li><a href="../base.md5/md5_lib.ml.html">md5_lib.ml</a></li></ul></li><li>base.shadow_stdlib<ul><li><a href="../base.shadow_stdlib/shadow_stdlib.ml.html">shadow_stdlib.ml</a></li></ul></li></ul></li></ul></li></ul></nav></div><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
</code><code class="source_code"><span><span class="DOCSTRING">(** Standard type for [blit] functions, and reusable code for validating [blit]
    arguments. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span><span class="BANG">!</span> <a href="import.ml.html"><span class="UIDENT">Import</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** If [blit : (src, dst) blit], then [blit ~src ~src_pos ~len ~dst ~dst_pos] blits [len]
    values from [src] starting at position [src_pos] to [dst] at position [dst_pos].
    Furthermore, [blit] raises if [src_pos], [len], and [dst_pos] don't specify valid
    slices of [src] and [dst]. *)</span><span class="EOL">
</span><span id="type-blit"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">src</span><span class="COLON">:</span><span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">src_pos</span><span class="COLON">:</span><span class="LIDENT">int</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">dst</span><span class="COLON">:</span><span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">dst_pos</span><span class="COLON">:</span><span class="LIDENT">int</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">len</span><span class="COLON">:</span><span class="LIDENT">int</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** [blito] is like [blit], except that the [src_pos], [src_len], and [dst_pos] are
    optional (hence the &quot;o&quot; in &quot;blito&quot;).  Also, we use [src_len] rather than [len] as a
    reminder that if [src_len] isn't supplied, then the default is to take the slice
    running from [src_pos] to the end of [src]. *)</span><span class="EOL">
</span><span id="type-blito"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">src</span><span class="COLON">:</span><span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="OPTLABEL">?src_pos:</span><span class="LIDENT">int</span> <span class="DOCSTRING">(** default is [0] *)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="OPTLABEL">?src_len:</span><span class="LIDENT">int</span> <span class="DOCSTRING">(** default is [length src - src_pos] *)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">dst</span><span class="COLON">:</span><span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="OPTLABEL">?dst_pos:</span><span class="LIDENT">int</span> <span class="DOCSTRING">(** default is [0] *)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** If [sub : (src, dst) sub], then [sub ~src ~pos ~len] returns a sequence of type [dst]
    containing [len] characters of [src] starting at [pos].

    [subo] is like [sub], except [pos] and [len] are optional. *)</span><span class="EOL">
</span><span id="type-sub"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span> <span class="EQUAL">=</span> <span class="QUOTE">'</span><span class="LIDENT">src</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pos</span><span class="COLON">:</span><span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">len</span><span class="COLON">:</span><span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-subo"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="OPTLABEL">?pos:</span><span class="LIDENT">int</span> <span class="DOCSTRING">(** default is [0] *)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="OPTLABEL">?len:</span><span class="LIDENT">int</span> <span class="DOCSTRING">(** default is [length src - pos] *)</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">src</span><span class="EOL">
</span>  <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(*_ These are not implemented less-general-in-terms-of-more-general because odoc produces
  unreadable documentation in that case, with or without [inline] on [include]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-S"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-S.type-t"><span class="TYPE">type</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-S.val-blit"><span class="VAL">val</span> <span class="LIDENT">blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S.val-blito"><span class="VAL">val</span> <span class="LIDENT">blito</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span></span><span class="EOL">
</span>  <span id="module-type-S.val-unsafe_blit"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S.val-sub"><span class="VAL">val</span> <span class="LIDENT">sub</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-S.val-subo"><span class="VAL">val</span> <span class="LIDENT">subo</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-S1"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S1</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-S1.type-t"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-S1.val-blit"><span class="VAL">val</span> <span class="LIDENT">blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S1.val-blito"><span class="VAL">val</span> <span class="LIDENT">blito</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span></span><span class="EOL">
</span>  <span id="module-type-S1.val-unsafe_blit"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S1.val-sub"><span class="VAL">val</span> <span class="LIDENT">sub</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-S1.val-subo"><span class="VAL">val</span> <span class="LIDENT">subo</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-S_distinct"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S_distinct</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-S_distinct.type-src"><span class="TYPE">type</span> <span class="LIDENT">src</span></span><span class="EOL">
</span>  <span id="module-type-S_distinct.type-dst"><span class="TYPE">type</span> <span class="LIDENT">dst</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-S_distinct.val-blit"><span class="VAL">val</span> <span class="LIDENT">blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S_distinct.val-blito"><span class="VAL">val</span> <span class="LIDENT">blito</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span></span><span class="EOL">
</span>  <span id="module-type-S_distinct.val-unsafe_blit"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S_distinct.val-sub"><span class="VAL">val</span> <span class="LIDENT">sub</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-S_distinct.val-subo"><span class="VAL">val</span> <span class="LIDENT">subo</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-S1_distinct"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S1_distinct</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-S1_distinct.type-src"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">src</span></span><span class="EOL">
</span>  <span id="module-type-S1_distinct.type-dst"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">dst</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-S1_distinct.val-blit"><span class="VAL">val</span> <span class="LIDENT">blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">src</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S1_distinct.val-blito"><span class="VAL">val</span> <span class="LIDENT">blito</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">src</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span></span><span class="EOL">
</span>  <span id="module-type-S1_distinct.val-unsafe_blit"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">src</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-S1_distinct.val-sub"><span class="VAL">val</span> <span class="LIDENT">sub</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">src</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-S1_distinct.val-subo"><span class="VAL">val</span> <span class="LIDENT">subo</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">src</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-S_to_string"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S_to_string</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-S_to_string.type-t"><span class="TYPE">type</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-S_to_string.val-sub"><span class="VAL">val</span> <span class="LIDENT">sub</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">string</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-S_to_string.val-subo"><span class="VAL">val</span> <span class="LIDENT">subo</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">string</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** Users of modules matching the blit signatures [S], [S1], and [S1_distinct] only need
    to understand the code above.  The code below is only for those that need to implement
    modules that match those signatures. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-Sequence"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">Sequence</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-Sequence.type-t"><span class="TYPE">type</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-Sequence.val-length"><span class="VAL">val</span> <span class="LIDENT">length</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-poly"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">poly</span> <span class="EQUAL">=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-Sequence1"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">Sequence1</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-Sequence1.type-t"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** [Make1*] guarantees to only call [create_like ~len t] with [len &gt; 0] if [length t &gt;
      0]. *)</span><span class="EOL">
</span>  <span id="module-type-Sequence1.val-create_like"><span class="VAL">val</span> <span class="LIDENT">create_like</span> <span class="COLON">:</span> <span class="LIDENT">len</span><span class="COLON">:</span><span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-Sequence1.val-length"><span class="VAL">val</span> <span class="LIDENT">length</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span> <span class="LIDENT">t</span><span class="LBRACKETAT">[@</span><span class="LIDENT">local</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-type-Sequence1.val-unsafe_blit"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-Blit"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">Blit</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-Blit.type-blit"><span class="TYPE">type</span> <span class="NONREC">nonrec</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>  <span id="module-type-Blit.type-blito"><span class="TYPE">type</span> <span class="NONREC">nonrec</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">blito</span></span><span class="EOL">
</span>  <span id="module-type-Blit.type-sub"><span class="TYPE">type</span> <span class="NONREC">nonrec</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">sub</span></span><span class="EOL">
</span>  <span id="module-type-Blit.type-subo"><span class="TYPE">type</span> <span class="NONREC">nonrec</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">src</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">dst</span><span class="RPAREN">)</span> <span class="LIDENT">subo</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-S"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S</span> <span class="EQUAL">=</span> <span class="UIDENT">S</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-S1"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S1</span> <span class="EQUAL">=</span> <span class="UIDENT">S1</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-S_distinct"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S_distinct</span> <span class="EQUAL">=</span> <span class="UIDENT">S_distinct</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-S1_distinct"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S1_distinct</span> <span class="EQUAL">=</span> <span class="UIDENT">S1_distinct</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-S_to_string"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">S_to_string</span> <span class="EQUAL">=</span> <span class="UIDENT">S_to_string</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-Sequence"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">Sequence</span> <span class="EQUAL">=</span> <span class="UIDENT">Sequence</span></span><span class="EOL">
</span>  <span id="module-type-Blit.module-type-Sequence1"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">Sequence1</span> <span class="EQUAL">=</span> <span class="UIDENT">Sequence1</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** There are various [Make*] functors that turn an [unsafe_blit] function into a [blit]
      function.  The functors differ in whether the sequence type is monomorphic or
      polymorphic, and whether the src and dst types are distinct or are the same.

      The blit functions make sure the slices are valid and then call [unsafe_blit].  They
      guarantee at a call [unsafe_blit ~src ~src_pos ~dst ~dst_pos ~len] that:

      {[
        len &gt; 0
        &amp;&amp; src_pos &gt;= 0
        &amp;&amp; src_pos + len &lt;= get_src_len src
        &amp;&amp; dst_pos &gt;= 0
        &amp;&amp; dst_pos + len &lt;= get_dst_len dst
      ]}

      The [Make*] functors also automatically create unit tests. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** [Make] is for blitting between two values of the same monomorphic type. *)</span><span class="EOL">
</span>  <span id="module-type-Blit.module-Make"><span class="MODULE">module</span> <span class="UIDENT">Make</span> <span class="LPAREN">(</span><span class="UIDENT">Sequence</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span>      <span class="INCLUDE">include</span> <span class="UIDENT">Sequence</span><span class="EOL">
</span><span class="EOL">
</span>      <span id="def_11"><span class="VAL">val</span> <span class="LIDENT">create</span> <span class="COLON">:</span> <span class="LIDENT">len</span><span class="COLON">:</span><span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">t</span></span><span class="EOL">
</span>      <span id="def_4"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>    <span class="END">end</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="UIDENT">S</span> <span class="WITH">with</span> <span id="def_2"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="COLONEQUAL">:=</span> <span class="UIDENT">Sequence</span><span class="DOT">.</span><span class="LIDENT">t</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** [Make_distinct] is for blitting between values of distinct monomorphic types. *)</span><span class="EOL">
</span>  <span id="module-type-Blit.module-Make_distinct"><span class="MODULE">module</span> <span class="UIDENT">Make_distinct</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="UIDENT">Src</span> <span class="COLON">:</span> <span class="UIDENT">Sequence</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="UIDENT">Dst</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span>                          <span class="INCLUDE">include</span> <span class="UIDENT">Sequence</span><span class="EOL">
</span><span class="EOL">
</span>                          <span id="def_6"><span class="VAL">val</span> <span class="LIDENT">create</span> <span class="COLON">:</span> <span class="LIDENT">len</span><span class="COLON">:</span><span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">t</span></span><span class="EOL">
</span>                          <span id="def_13"><span class="VAL">val</span> <span class="LIDENT">unsafe_blit</span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UIDENT">Src</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LIDENT">blit</span></span><span class="EOL">
</span>                        <span class="END">end</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="UIDENT">S_distinct</span> <span class="WITH">with</span> <span id="def_1"><span class="TYPE">type</span> <span class="LIDENT">src</span> <span class="COLONEQUAL">:=</span> <span class="UIDENT">Src</span><span class="DOT">.</span><span class="LIDENT">t</span></span> <span class="WITH">with</span> <span id="def_10"><span class="TYPE">type</span> <span class="LIDENT">dst</span> <span class="COLONEQUAL">:=</span> <span class="UIDENT">Dst</span><span class="DOT">.</span><span class="LIDENT">t</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-type-Blit.module-Make_to_string"><span class="MODULE">module</span> <span class="UIDENT">Make_to_string</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span>      <span id="def_12"><span class="TYPE">type</span> <span class="LIDENT">t</span></span><span class="EOL">
</span>    <span class="END">end</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="UIDENT">To_bytes</span> <span class="COLON">:</span> <span class="UIDENT">S_distinct</span> <span class="WITH">with</span> <span id="def_8"><span class="TYPE">type</span> <span class="LIDENT">src</span> <span class="COLONEQUAL">:=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">t</span></span> <span class="WITH">with</span> <span id="def_9"><span class="TYPE">type</span> <span class="LIDENT">dst</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">bytes</span></span><span class="RPAREN">)</span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">S_to_string</span> <span class="WITH">with</span> <span id="def_3"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="COLONEQUAL">:=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">t</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** [Make1] is for blitting between two values of the same polymorphic type. *)</span><span class="EOL">
</span>  <span id="module-type-Blit.module-Make1"><span class="MODULE">module</span> <span class="UIDENT">Make1</span> <span class="LPAREN">(</span><span class="UIDENT">Sequence</span> <span class="COLON">:</span> <span class="UIDENT">Sequence1</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="UIDENT">S1</span> <span class="WITH">with</span> <span id="def_7"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="COLONEQUAL">:=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">Sequence</span><span class="DOT">.</span><span class="LIDENT">t</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(** [Make1_generic] is for blitting between two values of the same container type that's
      not fully polymorphic (in the sense of Container.Generic). *)</span><span class="EOL">
</span>  <span id="module-type-Blit.module-Make1_generic"><span class="MODULE">module</span> <span class="UIDENT">Make1_generic</span> <span class="LPAREN">(</span><span class="UIDENT">Sequence</span> <span class="COLON">:</span> <span class="UIDENT">Sequence1</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="UIDENT">S1</span> <span class="WITH">with</span> <span id="def_5"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="COLONEQUAL">:=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">Sequence</span><span class="DOT">.</span><span class="LIDENT">t</span></span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span></span></code></pre></body></html>
