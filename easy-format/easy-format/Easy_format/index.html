<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Easy_format (easy-format.easy-format.Easy_format)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../sherlodoc_db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../../index.html">Up</a> ‚Äì <a href="../../../index.html">üè†</a> &#x00BB; <a href="../../index.html">easy-format</a> &#x00BB; Library <code>easy-format</code> &#x00BB; Easy_format</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Easy_format</span></code><a href="../../src/easy-format/easy_format.ml.html" class="source_link">Source</a></h1><p>Easy_format: indentation made easy.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">easy-format</a><ul><li>Library <code>easy-format</code><ul><li><a href="#" class="current_unit">Easy_format</a><ul><li><a href="Pretty/index.html">Pretty</a></li><li><a href="Compact/index.html">Compact</a></li></ul></li></ul></li><li><a href="../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><p>This module provides a functional, simplified layer over the Format module of the standard library.</p><p>Input data must be first modelled as a tree using 3 kinds of nodes:</p><ul><li>atoms</li><li>lists</li><li>labelled nodes</li></ul><p>Atoms represent any text that is guaranteed to be printed as-is. Lists can model any sequence of items such as arrays of data or lists of definitions that are labelled with something like &quot;int main&quot;, &quot;let x =&quot; or &quot;x:&quot;.</p><div class="odoc-spec"><div class="spec type anchored" id="type-wrap"><a href="#type-wrap" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-wrap" class="source_link">Source</a><code><span><span class="keyword">type</span> wrap</span><span> = </span><span>[ </span></code><ol><li id="type-wrap.Wrap_atoms" class="def variant constructor anchored"><a href="#type-wrap.Wrap_atoms" class="anchor"></a><code><span>| </span><span>`Wrap_atoms</span></code></li><li id="type-wrap.Always_wrap" class="def variant constructor anchored"><a href="#type-wrap.Always_wrap" class="anchor"></a><code><span>| </span><span>`Always_wrap</span></code></li><li id="type-wrap.Never_wrap" class="def variant constructor anchored"><a href="#type-wrap.Never_wrap" class="anchor"></a><code><span>| </span><span>`Never_wrap</span></code></li><li id="type-wrap.Force_breaks" class="def variant constructor anchored"><a href="#type-wrap.Force_breaks" class="anchor"></a><code><span>| </span><span>`Force_breaks</span></code></li><li id="type-wrap.Force_breaks_rec" class="def variant constructor anchored"><a href="#type-wrap.Force_breaks_rec" class="anchor"></a><code><span>| </span><span>`Force_breaks_rec</span></code></li><li id="type-wrap.No_breaks" class="def variant constructor anchored"><a href="#type-wrap.No_breaks" class="anchor"></a><code><span>| </span><span>`No_breaks</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>List wrapping conditions:</p><ul><li><code>`Wrap_atoms</code>: wrap if the list contains only atoms</li><li><code>`Always_wrap</code>: always wrap when needed</li><li><code>`Never_wrap</code>: never wrap, i.e. the list is either horizontal or vertical</li><li><code>`Force_breaks</code>: align vertically, i.e. always break line between list items and align the left edge of each item.</li><li><code>`Force_breaks_rec</code>: same as <code>`Force_breaks</code> but turns any wrappable ancestor node's wrap property (<code>`Wrap_atoms</code> or <code>`Always_wrap</code>) into <code>`Force_breaks</code>.</li><li><code>`No_breaks</code>: align horizontally, i.e. never break line between list items</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-label_break"><a href="#type-label_break" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-label_break" class="source_link">Source</a><code><span><span class="keyword">type</span> label_break</span><span> = </span><span>[ </span></code><ol><li id="type-label_break.Auto" class="def variant constructor anchored"><a href="#type-label_break.Auto" class="anchor"></a><code><span>| </span><span>`Auto</span></code></li><li id="type-label_break.Always" class="def variant constructor anchored"><a href="#type-label_break.Always" class="anchor"></a><code><span>| </span><span>`Always</span></code></li><li id="type-label_break.Always_rec" class="def variant constructor anchored"><a href="#type-label_break.Always_rec" class="anchor"></a><code><span>| </span><span>`Always_rec</span></code></li><li id="type-label_break.Never" class="def variant constructor anchored"><a href="#type-label_break.Never" class="anchor"></a><code><span>| </span><span>`Never</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>When to break the line after a <code>Label</code>:</p><ul><li><code>Auto</code>: break after the label if there's not enough room</li><li><code>Always</code>: always break after the label</li><li><code>Always_rec</code>: always break after the label and force breaks in all parent lists and labels, similarly to <code>`Force_breaks_rec</code> for lists.</li><li><code>Never</code>: never break after the label</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-style_name"><a href="#type-style_name" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-style_name" class="source_link">Source</a><code><span><span class="keyword">type</span> style_name</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-style"><a href="#type-style" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-style" class="source_link">Source</a><code><span><span class="keyword">type</span> style</span><span> = </span><span>{</span></code><ol><li id="type-style.tag_open" class="def record field anchored"><a href="#type-style.tag_open" class="anchor"></a><code><span>tag_open : string;</span></code></li><li id="type-style.tag_close" class="def record field anchored"><a href="#type-style.tag_close" class="anchor"></a><code><span>tag_close : string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Pair of opening and closing tags that are inserted around text after pretty-printing.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-atom_param"><a href="#type-atom_param" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-atom_param" class="source_link">Source</a><code><span><span class="keyword">type</span> atom_param</span><span> = </span><span>{</span></code><ol><li id="type-atom_param.atom_style" class="def record field anchored"><a href="#type-atom_param.atom_style" class="anchor"></a><code><span>atom_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-atom"><a href="#val-atom" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#val-atom" class="source_link">Source</a><code><span><span class="keyword">val</span> atom : <a href="#type-atom_param">atom_param</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-list_param"><a href="#type-list_param" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-list_param" class="source_link">Source</a><code><span><span class="keyword">type</span> list_param</span><span> = </span><span>{</span></code><ol><li id="type-list_param.space_after_opening" class="def record field anchored"><a href="#type-list_param.space_after_opening" class="anchor"></a><code><span>space_after_opening : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether there must be some whitespace after the opening string. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.space_after_separator" class="def record field anchored"><a href="#type-list_param.space_after_separator" class="anchor"></a><code><span>space_after_separator : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether there must be some whitespace after the item separators. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.space_before_separator" class="def record field anchored"><a href="#type-list_param.space_before_separator" class="anchor"></a><code><span>space_before_separator : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether there must be some whitespace before the item separators. Default: <code>false</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.separators_stick_left" class="def record field anchored"><a href="#type-list_param.separators_stick_left" class="anchor"></a><code><span>separators_stick_left : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether the separators must stick to the item on the left. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.space_before_closing" class="def record field anchored"><a href="#type-list_param.space_before_closing" class="anchor"></a><code><span>space_before_closing : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether there must be some whitespace before the closing string. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.stick_to_label" class="def record field anchored"><a href="#type-list_param.stick_to_label" class="anchor"></a><code><span>stick_to_label : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether the opening string should be fused with the preceding label. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.align_closing" class="def record field anchored"><a href="#type-list_param.align_closing" class="anchor"></a><code><span>align_closing : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether the beginning of the closing string must be aligned with the beginning of the opening string (stick_to_label = false) or with the beginning of the label if any (stick_to_label = true). Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.wrap_body" class="def record field anchored"><a href="#type-list_param.wrap_body" class="anchor"></a><code><span>wrap_body : <a href="#type-wrap">wrap</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Defines under which conditions the list body may be wrapped, i.e. allow several lines and several list items per line. Default: <code>`Wrap_atoms</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.indent_body" class="def record field anchored"><a href="#type-list_param.indent_body" class="anchor"></a><code><span>indent_body : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Extra indentation of the list body. Default: <code>2</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.list_style" class="def record field anchored"><a href="#type-list_param.list_style" class="anchor"></a><code><span>list_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.opening_style" class="def record field anchored"><a href="#type-list_param.opening_style" class="anchor"></a><code><span>opening_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.body_style" class="def record field anchored"><a href="#type-list_param.body_style" class="anchor"></a><code><span>body_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.separator_style" class="def record field anchored"><a href="#type-list_param.separator_style" class="anchor"></a><code><span>separator_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li><li id="type-list_param.closing_style" class="def record field anchored"><a href="#type-list_param.closing_style" class="anchor"></a><code><span>closing_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>List-formatting parameters. Always derive a new set of parameters from an existing record. See <a href="#val-list"><code>Easy_format.list</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#val-list" class="source_link">Source</a><code><span><span class="keyword">val</span> list : <a href="#type-list_param">list_param</a></span></code></div><div class="spec-doc"><p>Default list-formatting parameters, using the default values described in the type definition above.</p><p>In order to make code compatible with future versions of the library, the record inheritance syntax should be used, e.g. <code> { list with align_closing = false } </code>. If new record fields are added, the program would still compile and work as before.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-label_param"><a href="#type-label_param" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-label_param" class="source_link">Source</a><code><span><span class="keyword">type</span> label_param</span><span> = </span><span>{</span></code><ol><li id="type-label_param.label_break" class="def record field anchored"><a href="#type-label_param.label_break" class="anchor"></a><code><span>label_break : <a href="#type-label_break">label_break</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether to break the line after the label. Introduced in version 1.2.0. Default: <code>`Auto</code></p><span class="comment-delim">*)</span></div></li><li id="type-label_param.space_after_label" class="def record field anchored"><a href="#type-label_param.space_after_label" class="anchor"></a><code><span>space_after_label : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Whether there must be some whitespace after the label. Default: <code>true</code></p><span class="comment-delim">*)</span></div></li><li id="type-label_param.indent_after_label" class="def record field anchored"><a href="#type-label_param.indent_after_label" class="anchor"></a><code><span>indent_after_label : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Extra indentation before the item that comes after a label. Default: <code>2</code></p><span class="comment-delim">*)</span></div></li><li id="type-label_param.label_style" class="def record field anchored"><a href="#type-label_param.label_style" class="anchor"></a><code><span>label_style : <span><a href="#type-style_name">style_name</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default: <code>None</code></p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Label-formatting parameters. Always derive a new set of parameters from an existing record. See <a href="#val-label"><code>Easy_format.label</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-label"><a href="#val-label" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#val-label" class="source_link">Source</a><code><span><span class="keyword">val</span> label : <a href="#type-label_param">label_param</a></span></code></div><div class="spec-doc"><p>Default label-formatting parameters, using the default values described in the type definition above.</p><p>In order to make code compatible with future versions of the library, the record inheritance syntax should be used, e.g. <code> { label with indent_after_label = 0 } </code>. If new record fields are added, the program would still compile and work as before.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-t" class="source_link">Source</a><code><span><span class="keyword">type</span> t</span><span> = </span></code><ol><li id="type-t.Atom" class="def variant constructor anchored"><a href="#type-t.Atom" class="anchor"></a><code><span>| </span><span><span class="constructor">Atom</span> <span class="keyword">of</span> string * <a href="#type-atom_param">atom_param</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Plain string normally without line breaks.</p><span class="comment-delim">*)</span></div></li><li id="type-t.List" class="def variant constructor anchored"><a href="#type-t.List" class="anchor"></a><code><span>| </span><span><span class="constructor">List</span> <span class="keyword">of</span> string * string * string * <a href="#type-list_param">list_param</a> * <span><a href="#type-t">t</a> list</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>List ((opening, separator, closing, param), nodes)</code></p><span class="comment-delim">*)</span></div></li><li id="type-t.Label" class="def variant constructor anchored"><a href="#type-t.Label" class="anchor"></a><code><span>| </span><span><span class="constructor">Label</span> <span class="keyword">of</span> <a href="#type-t">t</a> * <a href="#type-label_param">label_param</a> * <a href="#type-t">t</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>Label ((label, param), node)</code>: labelled node.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Custom" class="def variant constructor anchored"><a href="#type-t.Custom" class="anchor"></a><code><span>| </span><span><span class="constructor">Custom</span> <span class="keyword">of</span> <span><a href="../../../ocaml-base-compiler/stdlib/Stdlib/Format/index.html#type-formatter">Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>User-defined printing function that allows to use the Format module directly if necessary. It is responsible for leaving the formatter in a clean state.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>The type of the tree to be pretty-printed. Each node contains its own formatting parameters.</p><p>Detail of a list node <code>List ((opening, separator, closing, param), nodes)</code>:</p><ul><li><code>opening</code>: opening string such as <code>&quot;\{&quot;</code> <code>&quot;[&quot;</code> <code>&quot;(&quot;</code> <code>&quot;begin&quot;</code> <code>&quot;&quot;</code> etc.</li><li><code>separator</code>: node separator such as <code>&quot;;&quot;</code> <code>&quot;,&quot;</code> <code>&quot;&quot;</code> <code>&quot;+&quot;</code> <code>&quot;|&quot;</code> etc.</li><li><code>closing</code>: closing string such as <code>&quot;\}&quot;</code> <code>&quot;]&quot;</code> <code>&quot;)&quot;</code> <code>&quot;end&quot;</code> <code>&quot;&quot;</code> etc.</li><li><code>nodes</code>: elements of the list.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-escape"><a href="#type-escape" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-escape" class="source_link">Source</a><code><span><span class="keyword">type</span> escape</span><span> = </span><span>[ </span></code><ol><li id="type-escape.None" class="def variant constructor anchored"><a href="#type-escape.None" class="anchor"></a><code><span>| </span><span>`None</span></code></li><li id="type-escape.Escape" class="def variant constructor anchored"><a href="#type-escape.Escape" class="anchor"></a><code><span>| </span><span>`Escape <span class="keyword">of</span> <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></li><li id="type-escape.Escape_string" class="def variant constructor anchored"><a href="#type-escape.Escape_string" class="anchor"></a><code><span>| </span><span>`Escape_string <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-styles"><a href="#type-styles" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#type-styles" class="source_link">Source</a><code><span><span class="keyword">type</span> styles</span><span> = <span><span>(<a href="#type-style_name">style_name</a> * <a href="#type-style">style</a>)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Pretty"><a href="#module-Pretty" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#module-Pretty" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Pretty/index.html">Pretty</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The regular pretty-printing functions</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Compact"><a href="#module-Compact" class="anchor"></a><a href="../../src/easy-format/easy_format.ml.html#module-Compact" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Compact/index.html">Compact</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>No spacing or newlines other than those in the input data or those produced by <code>Custom</code> printing.</p></div></div></div></body></html>
