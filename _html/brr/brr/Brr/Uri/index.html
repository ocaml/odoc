<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Uri (brr.brr.Brr.Uri)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../sherlodoc_db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../index.html">üè†</a> &#x00BB; <a href="../../../index.html">Brr  <span class="version">v0.0.7</span></a> &#x00BB; Library <code>brr</code> &#x00BB; <a href="../index.html">Brr</a> &#x00BB; Uri</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Brr.Uri</span></code></h1><p>URIs and URI parameters.</p><p><a href="#type-t"><code>Uri.t</code></a> values are <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL">URL</a> objects but we tweak the API to use <a href="http://tools.ietf.org/html/rfc3986">RFC 3986</a> terminology and in contrast to the URL API we return component data without including separators like <code>':'</code>, <code>'?'</code> and <code>'#'</code> in the results.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#uris">URIs</a></li><li><a href="#path_segs">Path segments</a></li><li><a href="#params">Fragment or query parameters</a></li><li><a href="#conv">Converting</a></li><li><a href="#encoding">Percent encoding</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../index.html">Brr  <span class="version">v0.0.7</span></a><ul><li><a href="../../../ffi_cookbook.html">Brr FFI cookbook</a></li><li><a href="../../../ffi_manual.html">Brr FFI manual</a></li><li><a href="../../../ocaml_console.html">OCaml console</a></li><li><a href="../../../web_page_howto.html">Web page howto</a></li><li>Library <code>brr</code><ul><li><a href="../index.html">Brr</a><ul><li><a href="../Tarray/index.html">Tarray</a></li><li><a href="../Blob/index.html">Blob</a></li><li><a href="../File/index.html">File</a></li><li><a href="../Base64/index.html">Base64</a></li><li><a href="../Json/index.html">Json</a></li><li><a href="#" class="current_unit">Uri</a><ul><li><a href="Params/index.html">Params</a></li></ul></li><li><a href="../Ev/index.html">Ev</a></li><li><a href="../At/index.html">At</a></li><li><a href="../El/index.html">El</a></li><li><a href="../Document/index.html">Document</a></li><li><a href="../Abort/index.html">Abort</a></li><li><a href="../Console/index.html">Console</a></li><li><a href="../Window/index.html">Window</a></li><li><a href="../Navigator/index.html">Navigator</a></li><li><a href="../Performance/index.html">Performance</a></li><li><a href="../G/index.html">G</a></li></ul></li><li><a href="../../Brr_canvas/index.html">Brr_canvas</a></li><li><a href="../../Brr_io/index.html">Brr_io</a></li><li><a href="../../Brr_webaudio/index.html">Brr_webaudio</a></li><li><a href="../../Brr_webcrypto/index.html">Brr_webcrypto</a></li><li><a href="../../Brr_webgpu/index.html">Brr_webgpu</a></li><li><a href="../../Brr_webmidi/index.html">Brr_webmidi</a></li><li><a href="../../Brr_webworkers/index.html">Brr_webworkers</a></li><li><a href="../../Fut/index.html">Fut</a></li><li><a href="../../Jstr/index.html">Jstr</a></li><li><a href="../../Jv/index.html">Jv</a></li></ul></li><li>Library <code>brr.ocaml_poke</code><ul><li><a href="../../../brr.ocaml_poke/Brr_ocaml_poke/index.html">Brr_ocaml_poke</a></li></ul></li><li>Library <code>brr.ocaml_poke_ui</code><ul><li><a href="../../../brr.ocaml_poke_ui/Brr_ocaml_poke_ui/index.html">Brr_ocaml_poke_ui</a></li></ul></li><li>Library <code>brr.poke</code><ul><li><a href="../../../brr.poke/Brr_poke/index.html">Brr_poke</a></li></ul></li><li>Library <code>brr.poked</code><ul><li><a href="../../../brr.poked/Brr_poked/index.html">Brr_poked</a></li></ul></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="uris"><a href="#uris" class="anchor"></a>URIs</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL"><code>URL</code></a> objects.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : <span><span class="optlabel">?base</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>v ?base s</code> is a URI from <code>s</code> relative to <code>base</code> (if specified). Raises in in case of error, use <a href="#val-of_jstr"><code>of_jstr</code></a> if you need to deal with user input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scheme"><a href="#val-scheme" class="anchor"></a><code><span><span class="keyword">val</span> scheme : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>scheme u</code> is the scheme of <code>u</code>. This is what the URL API calls the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/protocol"><code>protocol</code></a> but without including the trailing <code>':'</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-host"><a href="#val-host" class="anchor"></a><code><span><span class="keyword">val</span> host : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>host u</code> is the host of <code>u</code>. This is not percent-decoded and what the URL API calls the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/hostname"><code>hostname</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-port"><a href="#val-port" class="anchor"></a><code><span><span class="keyword">val</span> port : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>port u</code> is the port of <code>u</code>, if any. Parsed from the URL API's <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/port">port</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-path"><a href="#val-path" class="anchor"></a><code><span><span class="keyword">val</span> path : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>path u</code> is the path of <code>u</code>. This is not percent-decoded and what the URL API calls <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname"><code>pathname</code></a>. Use <a href="#val-path_segments"><code>path_segments</code></a> for decoding the path.</p><p><b>Note.</b> In hierarchical URI schemes like <code>http</code> this is <code>&quot;/&quot;</code> even if there is no path in <code>u</code>: no distinction is made between <code>http://example.org</code> and <code>http://example.org/</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-query"><a href="#val-query" class="anchor"></a><code><span><span class="keyword">val</span> query : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>query u</code> is the query of <code>u</code>. This not percent-decoded and what the URL API calls the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/search"><code>search</code></a> but without including the leading <code>'?'</code>. Use <a href="#val-query_params"><code>query_params</code></a> to decode key-value parameters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fragment"><a href="#val-fragment" class="anchor"></a><code><span><span class="keyword">val</span> fragment : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>fragment u</code> is fragment of <code>u</code>. This is not percent-decoded and what the URL API calls the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/hash"><code>hash</code></a> but without including the leading <code>'#'</code>. Use <a href="#val-fragment_params"><code>fragment_params</code></a> to decode key-value parameters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_uri"><a href="#val-with_uri" class="anchor"></a><code><span><span class="keyword">val</span> with_uri : 
  <span><span class="optlabel">?scheme</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?host</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?port</span>:<span>int option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?path</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?query</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fragment</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-t">t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>with_uri u</code> is <code>u</code> with the specified components updated. The components are assumed to be appropriately <a href="#val-encode_component" title="encode_component">percent-encoded</a>. See also <a href="#val-with_path_segments"><code>with_path_segments</code></a>, <a href="#val-with_query_params"><code>with_query_params</code></a> and <a href="#val-with_fragment_params"><code>with_fragment_params</code></a>.</p></div></div><h2 id="path_segs"><a href="#path_segs" class="anchor"></a>Path segments</h2><div class="odoc-spec"><div class="spec type anchored" id="type-path"><a href="#type-path" class="anchor"></a><code><span><span class="keyword">type</span> path</span><span> = <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> list</span></span></code></div><div class="spec-doc"><p>The type for absolute URI paths represented as <em>non-empty</em> lists of <em>percent-decoded</em> path segments. The empty list denotes the absence of a path.</p><p>Path segments can be <a href="../../Jstr/index.html#val-empty"><code>Jstr.empty</code></a>. The root path <code>/</code> is represented by the list <code>[Jstr.empty]</code> and <code>/a</code> by <code>[Jstr.v &quot;a&quot;]</code>.</p><p><b>Warning.</b> You should never concatenate these segments with a directory separator to get a file path because path segments may contain stray, percent-decoded, directory separators.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-path_segments"><a href="#val-path_segments" class="anchor"></a><code><span><span class="keyword">val</span> path_segments : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-path">path</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>path_segments u</code> determines the segments of the <a href="#val-path"><code>path</code></a> of <code>u</code> and <a href="#val-decode_component" title="decode_component">percent-decodes</a> them. This is the empty list if the path is empty. The root path is <code>[Jstr.empty]</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_path_segments"><a href="#val-with_path_segments" class="anchor"></a><code><span><span class="keyword">val</span> with_path_segments : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-path">path</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>with_path_segments u segs</code> is <code>u</code> with a <a href="#type-path"><code>path</code></a> made by <a href="#val-encode_component" title="encode_component">percent-encoding</a> the segments, prepending a <code>'/'</code> to each segment and concatenating the result.</p><p><b>Note.</b> In hierarchical URI schemes like <code>http</code> an empty <code>segs</code> is mapped to the root path, see <a href="#type-path"><code>path</code></a>.</p></div></div><h2 id="params"><a href="#params" class="anchor"></a>Fragment or query parameters</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Params"><a href="#module-Params" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Params/index.html">Params</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>URI fragment or query parameters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-query_params"><a href="#val-query_params" class="anchor"></a><code><span><span class="keyword">val</span> query_params : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Params/index.html#type-t">Params.t</a></span></code></div><div class="spec-doc"><p><code>query_params u</code> is <a href="Params/index.html#val-of_jstr"><code>Params.of_jstr</code></a><code> (query u)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_query_params"><a href="#val-with_query_params" class="anchor"></a><code><span><span class="keyword">val</span> with_query_params : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Params/index.html#type-t">Params.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>with_query_params u ps</code> is <code>u</code> with a <a href="#val-query"><code>query</code></a> defined by parameters <code>ps</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fragment_params"><a href="#val-fragment_params" class="anchor"></a><code><span><span class="keyword">val</span> fragment_params : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Params/index.html#type-t">Params.t</a></span></code></div><div class="spec-doc"><p><code>fragment_params u</code> is <a href="Params/index.html#val-of_jstr"><code>Params.of_jstr</code></a><code> (fragment u)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_fragment_params"><a href="#val-with_fragment_params" class="anchor"></a><code><span><span class="keyword">val</span> with_fragment_params : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Params/index.html#type-t">Params.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>with_fragment_params u ps</code> is <code>u</code> with a <a href="#val-fragment"><code>fragment</code></a> defined by parameters <code>ps</code>.</p></div></div><h2 id="conv"><a href="#conv" class="anchor"></a>Converting</h2><div class="odoc-spec"><div class="spec value anchored" id="val-of_jstr"><a href="#val-of_jstr" class="anchor"></a><code><span><span class="keyword">val</span> of_jstr : <span><span class="optlabel">?base</span>:<a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>of_jstr ~base s</code> is a URL from <code>s</code> relative to <code>base</code> (if specified). Note that if <code>s</code> is relative and <code>base</code> is unspecified the function errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_jstr"><a href="#val-to_jstr" class="anchor"></a><code><span><span class="keyword">val</span> to_jstr : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Jstr/index.html#type-t">Jstr.t</a></span></code></div><div class="spec-doc"><p><code>to_jstr u</code> is <code>u</code> as a JavaScript string. The result is <a href="#val-encode" title="encode">percent-encoded</a>.</p></div></div><h2 id="encoding"><a href="#encoding" class="anchor"></a>Percent encoding</h2><div class="odoc-spec"><div class="spec value anchored" id="val-encode"><a href="#val-encode" class="anchor"></a><code><span><span class="keyword">val</span> encode : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../Jstr/index.html#type-t">Jstr.t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>encode s</code> percent-encodes an UTF-8 representation of <code>s</code>. See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI">encodeURI</a>.</p><p><b>Warning.</b> This encodes according to RFC2396 not according to RFC3986 which reserves a few more characters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span><span class="keyword">val</span> decode : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../Jstr/index.html#type-t">Jstr.t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>decode s</code> percent-decodes a UTF-8 representation of <code>s</code>. See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI">decodeURI</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encode_component"><a href="#val-encode_component" class="anchor"></a><code><span><span class="keyword">val</span> encode_component : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../Jstr/index.html#type-t">Jstr.t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>encode s</code> percent-encodes a UTF-8 representation of <code>s</code>. See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent">encodeURIComponent</a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_component"><a href="#val-decode_component" class="anchor"></a><code><span><span class="keyword">val</span> decode_component : <span><a href="../../Jstr/index.html#type-t">Jstr.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../Jstr/index.html#type-t">Jstr.t</a>, <a href="../../Jv/Error/index.html#type-t">Jv.Error.t</a>)</span> <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-result">result</a></span></span></code></div><div class="spec-doc"><p><code>decode s</code> percent-descodes a UTF-8 representation of <code>s</code>. See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent">decodeURIComponent</a>. Note that this has the same effect as <a href="#val-decode"><code>decode</code></a>.</p></div></div></div></body></html>
