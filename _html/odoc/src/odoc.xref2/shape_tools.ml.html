<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: shape_tools.ml (odoc.src.odoc.xref2)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">The odoc documentation generator</a> &#x00BB; <a href="../index.html">Sources</a> &#x00BB; odoc.xref2 &#x00BB; shape_tools.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>shape_tools.ml</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">The odoc documentation generator</a><ul><li><a href="../../odoc_for_authors.html"><code>odoc</code> for Authors</a></li><li><a href="../../cheatsheet.html">Cheatsheet</a></li><li><a href="../../dune.html">Dune and odoc</a></li><li><a href="../../features.html">Language Features</a></li><li><a href="../../ocamldoc_differences.html">Markup Differences From OCamldoc</a></li><li><a href="../../interface.html"><code>odoc</code> Interface Guarantees</a></li><li><a href="../../driver.html">How to Drive <code>odoc</code></a></li><li><a href="../../json.html">JSON output</a></li><li><a href="../../deprecated/index.html">Deprecated features</a></li><li>Library <code>odoc.document</code><ul><li><a href="../../odoc.document/Odoc_document/index.html">Odoc_document</a></li></ul></li><li>Library <code>odoc.examples</code><ul><li><a href="../../odoc.examples/Odoc_examples/index.html">Odoc_examples</a></li></ul></li><li>Library <code>odoc.html</code><ul><li><a href="../../odoc.html/Odoc_html/index.html">Odoc_html</a></li></ul></li><li>Library <code>odoc.html_support_files</code><ul><li><a href="../../odoc.html_support_files/Odoc_html_support_files/index.html">Odoc_html_support_files</a></li></ul></li><li>Library <code>odoc.index</code><ul><li><a href="../../odoc.index/Odoc_index/index.html">Odoc_index</a></li></ul></li><li>Library <code>odoc.json_index</code><ul><li><a href="../../odoc.json_index/Odoc_json_index/index.html">Odoc_json_index</a></li></ul></li><li>Library <code>odoc.latex</code><ul><li><a href="../../odoc.latex/Odoc_latex/index.html">Odoc_latex</a></li></ul></li><li>Library <code>odoc.loader</code><ul><li><a href="../../odoc.loader/Odoc_loader/index.html">Odoc_loader</a></li></ul></li><li>Library <code>odoc.manpage</code><ul><li><a href="../../odoc.manpage/Odoc_manpage/index.html">Odoc_manpage</a></li></ul></li><li>Library <code>odoc.model</code><ul><li><a href="../../odoc.model/Odoc_model/index.html">Odoc_model</a></li></ul></li><li>Library <code>odoc.model_desc</code><ul><li><a href="../../odoc.model_desc/Odoc_model_desc/index.html">Odoc_model_desc</a></li></ul></li><li>Library <code>odoc.ocamlary</code><ul><li><a href="../../odoc.ocamlary/Ocamlary/index.html">Ocamlary</a></li></ul></li><li>Library <code>odoc.occurrences</code><ul><li><a href="../../odoc.occurrences/Odoc_occurrences/index.html">Odoc_occurrences</a></li></ul></li><li>Library <code>odoc.odoc</code><ul><li><a href="../../odoc.odoc/Odoc_odoc/index.html">Odoc_odoc</a></li></ul></li><li>Library <code>odoc.odoc_utils</code><ul><li><a href="../../odoc.odoc_utils/Odoc_utils/index.html">Odoc_utils</a></li></ul></li><li>Library <code>odoc.search</code><ul><li><a href="../../odoc.search/Odoc_search/index.html">Odoc_search</a></li></ul></li><li>Library <code>odoc.search_html_frontend</code><ul><li><a href="../../odoc.search_html_frontend/Odoc_html_frontend/index.html">Odoc_html_frontend</a></li></ul></li><li>Library <code>odoc.syntax_highlighter</code><ul><li><a href="../../odoc.syntax_highlighter/Syntax_highlighter/index.html">Syntax_highlighter</a></li></ul></li><li>Library <code>odoc.xref2</code><ul><li><a href="../../odoc.xref2/Odoc_xref2/index.html">Odoc_xref2</a></li></ul></li><li>Library <code>odoc.xref_test</code><ul><li><a href="../../odoc.xref_test/Odoc_xref_test/index.html">Odoc_xref_test</a></li></ul></li><li><a href="../index.html">Sources</a><ul><li>odoc.document<ul><li><a href="../odoc.document/ML.ml.html">ML.ml</a></li><li><a href="../odoc.document/codefmt.ml.html">codefmt.ml</a></li><li><a href="../odoc.document/comment.ml.html">comment.ml</a></li><li><a href="../odoc.document/compat.ml.html">compat.ml</a></li><li><a href="../odoc.document/doctree.ml.html">doctree.ml</a></li><li><a href="../odoc.document/generator.ml.html">generator.ml</a></li><li><a href="../odoc.document/generator_signatures.ml.html">generator_signatures.ml</a></li><li><a href="../odoc.document/odoc_document.ml.html">odoc_document.ml</a></li><li><a href="../odoc.document/reason.ml.html">reason.ml</a></li><li><a href="../odoc.document/renderer.ml.html">renderer.ml</a></li><li><a href="../odoc.document/sidebar.ml.html">sidebar.ml</a></li><li><a href="../odoc.document/targets.ml.html">targets.ml</a></li><li><a href="../odoc.document/types.ml.html">types.ml</a></li><li><a href="../odoc.document/url.ml.html">url.ml</a></li><li><a href="../odoc.document/utils.ml.html">utils.ml</a></li></ul></li><li>odoc.examples<ul><li><a href="../odoc.examples/odoc_examples.ml.html">odoc_examples.ml</a></li><li><a href="../odoc.examples/odoc_examples__.ml.html">odoc_examples__.ml</a></li></ul></li><li>odoc.html<ul><li><a href="../odoc.html/config.ml.html">config.ml</a></li><li><a href="../odoc.html/generator.ml.html">generator.ml</a></li><li><a href="../odoc.html/html_fragment_json.ml.html">html_fragment_json.ml</a></li><li><a href="../odoc.html/html_page.ml.html">html_page.ml</a></li><li><a href="../odoc.html/html_source.ml.html">html_source.ml</a></li><li><a href="../odoc.html/link.ml.html">link.ml</a></li><li><a href="../odoc.html/odoc_html.ml.html">odoc_html.ml</a></li><li><a href="../odoc.html/odoc_html__.ml.html">odoc_html__.ml</a></li><li><a href="../odoc.html/sidebar.ml.html">sidebar.ml</a></li><li><a href="../odoc.html/types.ml.html">types.ml</a></li></ul></li><li>odoc.html_support_files<ul><li><a href="../odoc.html_support_files/odoc_html_support_files.ml.html">odoc_html_support_files.ml</a></li></ul></li><li>odoc.index<ul><li><a href="../odoc.index/entry.ml.html">entry.ml</a></li><li><a href="../odoc.index/in_progress.ml.html">in_progress.ml</a></li><li><a href="../odoc.index/odoc_index.ml.html">odoc_index.ml</a></li><li><a href="../odoc.index/odoc_index__.ml.html">odoc_index__.ml</a></li><li><a href="../odoc.index/skeleton.ml.html">skeleton.ml</a></li><li><a href="../odoc.index/skeleton_of.ml.html">skeleton_of.ml</a></li></ul></li><li>odoc.json_index<ul><li><a href="../odoc.json_index/json_display.ml.html">json_display.ml</a></li><li><a href="../odoc.json_index/json_search.ml.html">json_search.ml</a></li><li><a href="../odoc.json_index/odoc_json_index.ml.html">odoc_json_index.ml</a></li></ul></li><li>odoc.latex<ul><li><a href="../odoc.latex/generator.ml.html">generator.ml</a></li><li><a href="../odoc.latex/odoc_latex.ml.html">odoc_latex.ml</a></li><li><a href="../odoc.latex/raw.ml.html">raw.ml</a></li><li><a href="../odoc.latex/types.ml.html">types.ml</a></li></ul></li><li>odoc.loader<ul><li><a href="../odoc.loader/cmi.ml.html">cmi.ml</a></li><li><a href="../odoc.loader/cmt.ml.html">cmt.ml</a></li><li><a href="../odoc.loader/cmti.ml.html">cmti.ml</a></li><li><a href="../odoc.loader/doc_attr.ml.html">doc_attr.ml</a></li><li><a href="../odoc.loader/ident_env.ml.html">ident_env.ml</a></li><li><a href="../odoc.loader/implementation.ml.html">implementation.ml</a></li><li><a href="../odoc.loader/odoc_loader.ml.html">odoc_loader.ml</a></li><li><a href="../odoc.loader/odoc_loader__.ml.html">odoc_loader__.ml</a></li><li><a href="../odoc.loader/typedtree_traverse.ml.html">typedtree_traverse.ml</a></li></ul></li><li>odoc.manpage<ul><li><a href="../odoc.manpage/generator.ml.html">generator.ml</a></li><li><a href="../odoc.manpage/link.ml.html">link.ml</a></li><li><a href="../odoc.manpage/odoc_manpage.ml.html">odoc_manpage.ml</a></li></ul></li><li>odoc.model<ul><li><a href="../odoc.model/comment.ml.html">comment.ml</a></li><li><a href="../odoc.model/compat.ml.html">compat.ml</a></li><li><a href="../odoc.model/error.ml.html">error.ml</a></li><li><a href="../odoc.model/frontmatter.ml.html">frontmatter.ml</a></li><li><a href="../odoc.model/lang.ml.html">lang.ml</a></li><li><a href="../odoc.model/location_.ml.html">location_.ml</a></li><li><a href="../odoc.model/names.ml.html">names.ml</a></li><li><a href="../odoc.model/odoc_model.ml.html">odoc_model.ml</a></li><li><a href="../odoc.model/odoc_model__.ml.html">odoc_model__.ml</a></li><li><a href="../odoc.model/paths.ml.html">paths.ml</a></li><li><a href="../odoc.model/paths_types.ml.html">paths_types.ml</a></li><li><a href="../odoc.model/reference.ml.html">reference.ml</a></li><li><a href="../odoc.model/root.ml.html">root.ml</a></li><li><a href="../odoc.model/semantics.ml.html">semantics.ml</a></li></ul></li><li>odoc.model_desc<ul><li><a href="../odoc.model_desc/comment_desc.ml.html">comment_desc.ml</a></li><li><a href="../odoc.model_desc/lang_desc.ml.html">lang_desc.ml</a></li><li><a href="../odoc.model_desc/odoc_model_desc.ml.html">odoc_model_desc.ml</a></li><li><a href="../odoc.model_desc/paths_desc.ml.html">paths_desc.ml</a></li><li><a href="../odoc.model_desc/type_desc.ml.html">type_desc.ml</a></li></ul></li><li>odoc.occurrences<ul><li><a href="../odoc.occurrences/odoc_occurrences.ml.html">odoc_occurrences.ml</a></li><li><a href="../odoc.occurrences/odoc_occurrences__.ml.html">odoc_occurrences__.ml</a></li><li><a href="../odoc.occurrences/table.ml.html">table.ml</a></li></ul></li><li>odoc.odoc<ul><li><a href="../odoc.odoc/asset.ml.html">asset.ml</a></li><li><a href="../odoc.odoc/classify.ml.html">classify.ml</a></li><li><a href="../odoc.odoc/compile.ml.html">compile.ml</a></li><li><a href="../odoc.odoc/depends.ml.html">depends.ml</a></li><li><a href="../odoc.odoc/fs.ml.html">fs.ml</a></li><li><a href="../odoc.odoc/html_fragment.ml.html">html_fragment.ml</a></li><li><a href="../odoc.odoc/html_page.ml.html">html_page.ml</a></li><li><a href="../odoc.odoc/indexing.ml.html">indexing.ml</a></li><li><a href="../odoc.odoc/latex.ml.html">latex.ml</a></li><li><a href="../odoc.odoc/man_page.ml.html">man_page.ml</a></li><li><a href="../odoc.odoc/occurrences.ml.html">occurrences.ml</a></li><li><a href="../odoc.odoc/odoc_file.ml.html">odoc_file.ml</a></li><li><a href="../odoc.odoc/odoc_link.ml.html">odoc_link.ml</a></li><li><a href="../odoc.odoc/odoc_odoc.ml.html">odoc_odoc.ml</a></li><li><a href="../odoc.odoc/or_error.ml.html">or_error.ml</a></li><li><a href="../odoc.odoc/rendering.ml.html">rendering.ml</a></li><li><a href="../odoc.odoc/resolver.ml.html">resolver.ml</a></li><li><a href="../odoc.odoc/sidebar.ml.html">sidebar.ml</a></li><li><a href="../odoc.odoc/source.ml.html">source.ml</a></li><li><a href="../odoc.odoc/support_files.ml.html">support_files.ml</a></li><li><a href="../odoc.odoc/url.ml.html">url.ml</a></li></ul></li><li>odoc.odoc_utils<ul><li><a href="../odoc.odoc_utils/json.ml.html">json.ml</a></li><li><a href="../odoc.odoc_utils/odoc_list.ml.html">odoc_list.ml</a></li><li><a href="../odoc.odoc_utils/odoc_utils.ml.html">odoc_utils.ml</a></li><li><a href="../odoc.odoc_utils/odoc_utils__.ml.html">odoc_utils__.ml</a></li><li><a href="../odoc.odoc_utils/tree.ml.html">tree.ml</a></li></ul></li><li>odoc.search<ul><li><a href="../odoc.search/html.ml.html">html.ml</a></li><li><a href="../odoc.search/odoc_search.ml.html">odoc_search.ml</a></li><li><a href="../odoc.search/text.ml.html">text.ml</a></li></ul></li><li>odoc.search_html_frontend<ul><li><a href="../odoc.search_html_frontend/odoc_html_frontend.ml.html">odoc_html_frontend.ml</a></li></ul></li><li>odoc.syntax_highlighter<ul><li><a href="../odoc.syntax_highlighter/syntax_highlighter.ml.html">syntax_highlighter.ml</a></li></ul></li><li>odoc.xref2<ul><li><a href="cfrag.ml.html">cfrag.ml</a></li><li><a href="compile.ml.html">compile.ml</a></li><li><a href="component.ml.html">component.ml</a></li><li><a href="cpath.ml.html">cpath.ml</a></li><li><a href="env.ml.html">env.ml</a></li><li><a href="errors.ml.html">errors.ml</a></li><li><a href="expand_tools.ml.html">expand_tools.ml</a></li><li><a href="find.ml.html">find.ml</a></li><li><a href="ident.ml.html">ident.ml</a></li><li><a href="lang_of.ml.html">lang_of.ml</a></li><li><a href="link.ml.html">link.ml</a></li><li><a href="lookup_failures.ml.html">lookup_failures.ml</a></li><li><a href="odoc_xref2.ml.html">odoc_xref2.ml</a></li><li><a href="ref_tools.ml.html">ref_tools.ml</a></li><li><a href="#" class="current_unit">shape_tools.ml</a></li><li><a href="strengthen.ml.html">strengthen.ml</a></li><li><a href="subst.ml.html">subst.ml</a></li><li><a href="tools.ml.html">tools.ml</a></li></ul></li><li>odoc.xref_test<ul><li><a href="../odoc.xref_test/common.ml.html">common.ml</a></li><li><a href="../odoc.xref_test/odoc_xref_test.ml.html">odoc_xref_test.ml</a></li></ul></li></ul></li></ul></li></ul></nav></div><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
<a id="L179" class="source_line" href="#L179">179</a>
<a id="L180" class="source_line" href="#L180">180</a>
<a id="L181" class="source_line" href="#L181">181</a>
<a id="L182" class="source_line" href="#L182">182</a>
<a id="L183" class="source_line" href="#L183">183</a>
<a id="L184" class="source_line" href="#L184">184</a>
<a id="L185" class="source_line" href="#L185">185</a>
<a id="L186" class="source_line" href="#L186">186</a>
</code><code class="source_code"><span><span class="EOL">
</span># 3 &quot;shape_tools.cppo.ml&quot;<span class="EOL">
</span><span class="OPEN">open</span> <a href="../odoc.model/paths.ml.html"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../odoc.model/names.ml.html"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Names</span></a><span class="EOL">
</span><span id="module-Kind"><span class="MODULE">module</span> <span class="UIDENT">Kind</span> <span class="EQUAL">=</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Sig_component_kind</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad"><span class="UIDENT">Odoc_utils</span><span class="DOT">.</span><span class="UIDENT">OptionMonad</span></a><span class="EOL">
</span><span class="EOL">
</span><span id="type-t"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-SourceLocation.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">SourceLocation</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Uid</span><span class="DOT">.</span><span class="UIDENT">Map</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** Project an identifier into a shape. *)</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-shape_of_id"><span class="LIDENT">shape_of_id</span></span> <span id="local_env_1"><span class="LIDENT">env</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="../odoc.model/paths.ml.html#module-Identifier.type-id"><span class="LBRACKETLESS">[&lt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t_pv"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t_pv</span></a> <span class="RBRACKET">]</span> <span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="LIDENT">id</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_proj_2"><span class="LIDENT">proj</span></span> <span id="local_parent_3"><span class="LIDENT">parent</span></span> <span id="local_kind_4"><span class="LIDENT">kind</span></span> <span id="local_name_5"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_item_6"><span class="LIDENT">item</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Item</span><span class="DOT">.</span><span class="LIDENT">make</span> <a href="#local_name_5"><span class="LIDENT">name</span></a> <a href="#local_kind_4"><span class="LIDENT">kind</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">shape_of_id</span> <a href="#local_env_1"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_parent_3"><span class="LIDENT">parent</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_shape_7"><span class="LIDENT">shape</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">proj</span> <a href="#local_shape_7"><span class="LIDENT">shape</span></a> <a href="#local_item_6"><span class="LIDENT">item</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_id_8"><span class="LIDENT">id</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="../odoc.model/paths.ml.html#module-Identifier.val-is_hidden"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="LIDENT">is_hidden</span></a> <a href="#local_id_8"><span class="LIDENT">id</span></a> <span class="THEN">then</span> <span class="UIDENT">None</span> <span class="ELSE">else</span> <span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_id_8"><span class="LIDENT">id</span></a><span class="DOT">.</span><span class="LIDENT">iv</span> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_9"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_impl"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_impl</span></a> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_9"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <a href="#local_env_1"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_impl_10"><span class="LIDENT">impl</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <span class="MATCH">match</span> <a href="#local_impl_10"><span class="LIDENT">impl</span></a><span class="DOT">.</span><span class="LIDENT">shape_info</span> <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_shape_11"><span class="LIDENT">shape</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_shape_11"><span class="LIDENT">shape</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_12"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_13"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_12"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_13"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Result</span> <span id="local_parent_14"><span class="LIDENT">parent</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Apply the functor to an empty signature. This doesn't seem to cause
           any problem, as the shape would stop resolve on an item inside the
           result of the function, which is what we want. *)</span><span class="EOL">
</span>        <span class="LIDENT">shape_of_id</span> <a href="#local_env_1"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_parent_14"><span class="LIDENT">parent</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_parent_15"><span class="LIDENT">parent</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">app</span> <a href="#local_parent_15"><span class="LIDENT">parent</span></a> <span class="LABEL">~arg:</span><span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">str</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Item</span><span class="DOT">.</span><span class="UIDENT">Map</span><span class="DOT">.</span><span class="LIDENT">empty</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_16"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_17"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_16"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Module_type</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_17"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_parent_18"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_19"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_18"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_19"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_parent_20"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_21"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_20"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ValueName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_21"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Extension</span> <span class="LPAREN">(</span><span id="local_parent_22"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_23"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_22"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Extension_constructor</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-SimpleName.val-to_string"><span class="UIDENT">ExtensionName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_23"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ExtensionDecl</span> <span class="LPAREN">(</span><span id="local_parent_24"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_25"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_24"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Extension_constructor</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-SimpleName.val-to_string"><span class="UIDENT">ExtensionName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_25"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Exception</span> <span class="LPAREN">(</span><span id="local_parent_26"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_27"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_26"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Extension_constructor</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-SimpleName.val-to_string"><span class="UIDENT">ExceptionName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_27"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_parent_28"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_29"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_28"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_29"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_parent_30"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_31"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_2"><span class="LIDENT">proj</span></a> <a href="#local_parent_30"><span class="LIDENT">parent</span></a> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Class_type</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_31"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Page</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">LeafPage</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Label</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Constructor</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Field</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Method</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">InstanceVariable</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parameter</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>      <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Not represented in shapes. *)</span><span class="EOL">
</span>        <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-shape_of_module_path"><span class="LIDENT">shape_of_module_path</span></span> <span id="local_env_32"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_proj_33"><span class="LIDENT">proj</span></span> <span id="local_parent_34"><span class="LIDENT">parent</span></span> <span id="local_kind_35"><span class="LIDENT">kind</span></span> <span id="local_name_36"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_item_37"><span class="LIDENT">item</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Item</span><span class="DOT">.</span><span class="LIDENT">make</span> <a href="#local_name_36"><span class="LIDENT">name</span></a> <a href="#local_kind_35"><span class="LIDENT">kind</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span><span class="EOL">
</span>      <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_parent_34"><span class="LIDENT">parent</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_shape_38"><span class="LIDENT">shape</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">proj</span> <a href="#local_shape_38"><span class="LIDENT">shape</span></a> <a href="#local_item_37"><span class="LIDENT">item</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_path_39"><span class="LIDENT">path</span></span> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_39"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span id="local_name_40"><span class="LIDENT">name</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_impl"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_impl</span></a> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_40"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_impl_41"><span class="LIDENT">impl</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <span class="MATCH">match</span> <a href="#local_impl_41"><span class="LIDENT">impl</span></a><span class="DOT">.</span><span class="LIDENT">shape_info</span> <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_shape_42"><span class="LIDENT">shape</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_shape_42"><span class="LIDENT">shape</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Forward</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_43"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_44"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_proj_33"><span class="LIDENT">proj</span></a> <span class="LPAREN">(</span><a href="#local_parent_43"><span class="LIDENT">parent</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_44"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_parent_45"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_arg_46"><span class="LIDENT">arg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_parent_45"><span class="LIDENT">parent</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_parent_47"><span class="LIDENT">parent</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_arg_46"><span class="LIDENT">arg</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_arg_48"><span class="LIDENT">arg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">app</span> <a href="#local_parent_47"><span class="LIDENT">parent</span></a> <span class="TILDE">~</span><a href="#local_arg_48"><span class="LIDENT">arg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_id_49"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">shape_of_id</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_id_49"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_m_50"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_32"><span class="LIDENT">env</span></a> <a href="#local_m_50"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-shape_of_kind_path"><span class="LIDENT">shape_of_kind_path</span></span> <span id="local_env_51"><span class="LIDENT">env</span></span> <span id="local_kind_52"><span class="LIDENT">kind</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_proj_53"><span class="LIDENT">proj</span></span> <span id="local_parent_54"><span class="LIDENT">parent</span></span> <span id="local_kind_55"><span class="LIDENT">kind</span></span> <span id="local_name_56"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_item_57"><span class="LIDENT">item</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Item</span><span class="DOT">.</span><span class="LIDENT">make</span> <a href="#local_name_56"><span class="LIDENT">name</span></a> <a href="#local_kind_55"><span class="LIDENT">kind</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <a href="#local_parent_54"><span class="LIDENT">parent</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_shape_58"><span class="LIDENT">shape</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">proj</span> <a href="#local_shape_58"><span class="LIDENT">shape</span></a> <a href="#local_item_57"><span class="LIDENT">item</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_path_59"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_59"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">DotT</span> <span class="LPAREN">(</span><span id="local_parent_60"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_61"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_53"><span class="LIDENT">proj</span></a> <a href="#local_parent_60"><span class="LIDENT">parent</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_61"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">DotMT</span> <span class="LPAREN">(</span><span id="local_parent_62"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_63"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_53"><span class="LIDENT">proj</span></a> <a href="#local_parent_62"><span class="LIDENT">parent</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_63"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">DotV</span> <span class="LPAREN">(</span><span id="local_parent_64"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_65"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_proj_53"><span class="LIDENT">proj</span></a> <a href="#local_parent_64"><span class="LIDENT">parent</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="../odoc.model/names.ml.html#module-Name.val-to_string_unsafe"><span class="UIDENT">ValueName</span><span class="DOT">.</span><span class="LIDENT">to_string_unsafe</span></a> <a href="#local_name_65"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstitutedT</span> <span id="local_t_66"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">shape_of_kind_path</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="#local_t_66"><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstitutedMT</span> <span id="local_t_67"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">shape_of_kind_path</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="#local_t_67"><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstitutedCT</span> <span id="local_t_68"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">shape_of_kind_path</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="#local_t_68"><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_id_69"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">shape_of_id</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_id_69"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_t_70"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">shape_of_kind_path</span> <a href="#local_env_51"><span class="LIDENT">env</span></a> <a href="#local_kind_52"><span class="LIDENT">kind</span></a> <span class="LPAREN">(</span><a href="#local_t_70"><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Forward</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="EOL">
</span><span id="module-MkId"><span class="MODULE">module</span> <span class="UIDENT">MkId</span> <span class="EQUAL">=</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-Mk"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">Mk</span></a></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-unit_of_uid"><span class="LIDENT">unit_of_uid</span></span> <span id="local_uid_71"><span class="LIDENT">uid</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_uid_71"><span class="LIDENT">uid</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Uid</span><span class="DOT">.</span><span class="UIDENT">Compilation_unit</span> <span id="local_s_72"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_s_72"><span class="LIDENT">s</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Item</span> <span class="LBRACE">{</span> <span id="local_comp_unit_73"><span class="LIDENT">comp_unit</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_comp_unit_73"><span class="LIDENT">comp_unit</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Predef</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Internal</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span># 123 &quot;shape_tools.cppo.ml&quot;<span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-traverse_aliases"><span class="LIDENT">traverse_aliases</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>   <span class="BAR">|</span> <span class="UIDENT">Shape_reduce</span><span class="DOT">.</span><span class="UIDENT">Resolved</span> <span id="local_uid_74"><span class="LIDENT">uid</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_uid_74"><span class="LIDENT">uid</span></a><span class="EOL">
</span>   <span class="BAR">|</span> <span class="UIDENT">Approximated</span> <span id="local_id_75"><span class="LIDENT">id</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_id_75"><span class="LIDENT">id</span></a><span class="EOL">
</span>   <span class="BAR">|</span> <span class="UIDENT">Resolved_alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span><span id="local_x_76"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">traverse_aliases</span> <a href="#local_x_76"><span class="LIDENT">x</span></a><span class="EOL">
</span>   <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span># 130 &quot;shape_tools.cppo.ml&quot;<span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_shape"><span class="LIDENT">lookup_shape</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-SourceLocation.type-t"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">SourceLocation</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_77"><span class="LIDENT">env</span></span> <span id="local_query_78"><span class="LIDENT">query</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="EOL">
</span># 149 &quot;shape_tools.cppo.ml&quot;<span class="EOL">
</span>  <span class="LET">let</span> <span class="MODULE">module</span> <span class="UIDENT">Reduce</span> <span class="EQUAL">=</span> <span class="UIDENT">Shape_reduce</span><span class="DOT">.</span><span class="UIDENT">Make</span><span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_fuel_79"><span class="LIDENT">fuel</span></span> <span class="EQUAL">=</span> <span class="INT">10</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_read_unit_shape_80"><span class="LIDENT">read_unit_shape</span></span> <span class="TILDE">~</span><span id="local_unit_name_81"><span class="LIDENT">unit_name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_impl"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_impl</span></a> <a href="#local_unit_name_81"><span class="LIDENT">unit_name</span></a> <a href="#local_env_77"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_impl_82"><span class="LIDENT">impl</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="#local_impl_82"><span class="LIDENT">impl</span></a><span class="DOT">.</span><span class="LIDENT">shape_info</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_shape_83"><span class="LIDENT">shape</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_shape_83"><span class="LIDENT">shape</span></a><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>       <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="END">end</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_result_84"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span> <span class="TRY">try</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Reduce</span><span class="DOT">.</span><span class="LIDENT">reduce_for_uid</span> <span class="UIDENT">Ocaml_env</span><span class="DOT">.</span><span class="LIDENT">empty</span> <a href="#local_query_78"><span class="LIDENT">query</span></a><span class="RPAREN">)</span> <span class="WITH">with</span> <span class="UIDENT">Not_found</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_result_84"><span class="LIDENT">result</span></a> <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">traverse_aliases</span> <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_uid_85"><span class="LIDENT">uid</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="EOL">
</span># 162 &quot;shape_tools.cppo.ml&quot;<span class="EOL">
</span>  <span class="LIDENT">unit_of_uid</span> <a href="#local_uid_85"><span class="LIDENT">uid</span></a> <a href="../odoc.odoc_utils/odoc_utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_unit_name_86"><span class="LIDENT">unit_name</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_impl"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_impl</span></a> <a href="#local_unit_name_86"><span class="LIDENT">unit_name</span></a> <a href="#local_env_77"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LBRACE">{</span> <span id="local_shape_info_88"><span class="LIDENT">shape_info</span></span> <span class="SEMI">;</span> <span class="LIDENT">id</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span id="local_id_87"><span class="LIDENT">id</span></span> <span class="SEMI">;</span> <span class="UNDERSCORE">_</span><span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_uid_to_id_89"><span class="LIDENT">uid_to_id</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_shape_info_88"><span class="LIDENT">shape_info</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_uid_to_id_90"><span class="LIDENT">uid_to_id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_uid_to_id_90"><span class="LIDENT">uid_to_id</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="../odoc.model/compat.ml.html#val-empty_map"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Compat</span><span class="DOT">.</span><span class="LIDENT">empty_map</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">Shape</span><span class="DOT">.</span><span class="UIDENT">Uid</span><span class="DOT">.</span><span class="UIDENT">Map</span><span class="DOT">.</span><span class="LIDENT">find_opt</span> <a href="#local_uid_85"><span class="LIDENT">uid</span></a> <a href="#local_uid_to_id_89"><span class="LIDENT">uid_to_id</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_x_91"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_x_91"><span class="LIDENT">x</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span>  <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">MkId</span><span class="DOT">.</span><span class="LIDENT">source_location_mod</span> <a href="#local_id_87"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LBRACE">{</span> <span class="LIDENT">id</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span> <span class="SEMI">;</span> <span class="UNDERSCORE">_</span><span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_def"><span class="LIDENT">lookup_def</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-NonSrc.type-t"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">NonSrc</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../odoc.model/paths.ml.html#module-Identifier.module-SourceLocation.type-t"><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">SourceLocation</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_92"><span class="LIDENT">env</span></span> <span id="local_id_93"><span class="LIDENT">id</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">shape_of_id</span> <a href="#local_env_92"><span class="LIDENT">env</span></a> <a href="#local_id_93"><span class="LIDENT">id</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_query_94"><span class="LIDENT">query</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_shape</span> <a href="#local_env_92"><span class="LIDENT">env</span></a> <a href="#local_query_94"><span class="LIDENT">query</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_module_path"><span class="LIDENT">lookup_module_path</span></span> <span id="local_env_95"><span class="LIDENT">env</span></span> <span id="local_path_96"><span class="LIDENT">path</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">shape_of_module_path</span> <a href="#local_env_95"><span class="LIDENT">env</span></a> <a href="#local_path_96"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_query_97"><span class="LIDENT">query</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_shape</span> <a href="#local_env_95"><span class="LIDENT">env</span></a> <a href="#local_query_97"><span class="LIDENT">query</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_kind_path"><span class="LIDENT">lookup_kind_path</span></span> <span id="local_kind_98"><span class="LIDENT">kind</span></span> <span id="local_env_99"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_path_100"><span class="LIDENT">path</span></span> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">shape_of_kind_path</span> <a href="#local_env_99"><span class="LIDENT">env</span></a> <a href="#local_kind_98"><span class="LIDENT">kind</span></a> <a href="#local_path_100"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_query_101"><span class="LIDENT">query</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_shape</span> <a href="#local_env_99"><span class="LIDENT">env</span></a> <a href="#local_query_101"><span class="LIDENT">query</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_value_path"><span class="LIDENT">lookup_value_path</span></span> <span id="local_env_102"><span class="LIDENT">env</span></span> <span id="local_p_103"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">lookup_kind_path</span> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Value</span> <a href="#local_env_102"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_103"><span class="LIDENT">p</span></a> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Value.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Value</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_type_path"><span class="LIDENT">lookup_type_path</span></span> <span id="local_env_104"><span class="LIDENT">env</span></span> <span id="local_p_105"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">lookup_kind_path</span> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Type</span> <a href="#local_env_104"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_105"><span class="LIDENT">p</span></a> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.module-Type.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_module_type_path"><span class="LIDENT">lookup_module_type_path</span></span> <span id="local_env_106"><span class="LIDENT">env</span></span> <span id="local_p_107"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">lookup_kind_path</span> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Module_type</span> <a href="#local_env_106"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_107"><span class="LIDENT">p</span></a> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.module-ModuleType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lookup_class_type_path"><span class="LIDENT">lookup_class_type_path</span></span> <span id="local_env_108"><span class="LIDENT">env</span></span> <span id="local_p_109"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">lookup_kind_path</span> <span class="UIDENT">Kind</span><span class="DOT">.</span><span class="UIDENT">Class_type</span> <a href="#local_env_108"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_109"><span class="LIDENT">p</span></a> <span class="COLON">:</span> <a href="../odoc.model/paths.ml.html#module-Path.module-ClassType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">ClassType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../odoc.model/paths.ml.html#module-Path.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span></span></code></pre></body></html>
