<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>N_ary_functions (ppxlib_jane.ppxlib_jane.Ppxlib_jane.Jane_syntax.N_ary_functions)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../';
let search_urls = ['../../../../sherlodoc_db.js','../../../../../sherlodoc.js'];
</script><script src="../../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../../index.html">üè†</a> &#x00BB; <a href="../../../../index.html">ppxlib_jane</a> &#x00BB; Library <code>ppxlib_jane</code> &#x00BB; <a href="../../index.html">Ppxlib_jane</a> &#x00BB; <a href="../index.html">Jane_syntax</a> &#x00BB; N_ary_functions</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Jane_syntax.N_ary_functions</span></code><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions" class="source_link">Source</a></h1><p>These types use the <code>P</code> prefix to match how they are represented in the upstream compiler</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../../index.html">ppxlib_jane</a><ul><li>Library <code>ppxlib_jane</code><ul><li><a href="../../index.html">Ppxlib_jane</a><ul><li><a href="../../Ast_builder/index.html">Ast_builder</a></li><li><a href="../index.html">Jane_syntax</a><ul><li><a href="../Comprehensions/index.html">Comprehensions</a></li><li><a href="../Immutable_arrays/index.html">Immutable_arrays</a></li><li><a href="../Mode_expr/index.html">Mode_expr</a></li><li><a href="#" class="current_unit">N_ary_functions</a></li><li><a href="../Labeled_tuples/index.html">Labeled_tuples</a></li><li><a href="../Include_functor/index.html">Include_functor</a></li><li><a href="../Strengthen/index.html">Strengthen</a></li><li><a href="../Layouts/index.html">Layouts</a></li><li><a href="../module-type-AST/index.html">AST</a></li><li><a href="../Core_type/index.html">Core_type</a></li><li><a href="../Constructor_argument/index.html">Constructor_argument</a></li><li><a href="../Expression/index.html">Expression</a></li><li><a href="../Pattern/index.html">Pattern</a></li><li><a href="../Module_type/index.html">Module_type</a></li><li><a href="../Signature_item/index.html">Signature_item</a></li><li><a href="../Structure_item/index.html">Structure_item</a></li><li><a href="../Extension_constructor/index.html">Extension_constructor</a></li></ul></li><li><a href="../../For_testing/index.html">For_testing</a></li></ul></li></ul></li><li><a href="../../../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-function_body"><a href="#type-function_body" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-function_body" class="source_link">Source</a><code><span><span class="keyword">type</span> function_body</span><span> = </span></code><ol><li id="type-function_body.Pfunction_body" class="def variant constructor anchored"><a href="#type-function_body.Pfunction_body" class="anchor"></a><code><span>| </span><span><span class="constructor">Pfunction_body</span> <span class="keyword">of</span> <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-expression">Ppxlib_ast.Parsetree.expression</a></span></code></li><li id="type-function_body.Pfunction_cases" class="def variant constructor anchored"><a href="#type-function_body.Pfunction_cases" class="anchor"></a><code><span>| </span><span><span class="constructor">Pfunction_cases</span> <span class="keyword">of</span> <span><a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-case">Ppxlib_ast.Parsetree.case</a> list</span>
  * <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Location/index.html#type-t">Location.t</a>
  * <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-attributes">Ppxlib_ast.Parsetree.attributes</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>In <code>Pfunction_cases (_, loc, attrs)</code>, the location extends from the start of the <code>function</code> keyword to the end of the last case. The compiler will only use typechecking-related attributes from <code>attrs</code>, e.g. enabling or disabling a warning.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>See the comment on <code>expression</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-function_param_desc"><a href="#type-function_param_desc" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-function_param_desc" class="source_link">Source</a><code><span><span class="keyword">type</span> function_param_desc</span><span> = </span></code><ol><li id="type-function_param_desc.Pparam_val" class="def variant constructor anchored"><a href="#type-function_param_desc.Pparam_val" class="anchor"></a><code><span>| </span><span><span class="constructor">Pparam_val</span> <span class="keyword">of</span> <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Asttypes/index.html#type-arg_label">Ppxlib_ast.Asttypes.arg_label</a>
  * <span><a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-expression">Ppxlib_ast.Parsetree.expression</a> option</span>
  * <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-pattern">Ppxlib_ast.Parsetree.pattern</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>Pparam_val (lbl, exp0, P)</code> represents the parameter:</p><ul><li><code>P</code> when <code>lbl</code> is <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Asttypes/index.html#type-arg_label.Nolabel" title="Asttypes.arg_label.Nolabel"><code>Nolabel</code></a> and <code>exp0</code> is <code>None</code></li><li><code>~l:P</code> when <code>lbl</code> is <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Asttypes/index.html#type-arg_label.Labelled" title="Asttypes.arg_label.Labelled"><code>Labelled l</code></a> and <code>exp0</code> is <code>None</code></li><li><code>?l:P</code> when <code>lbl</code> is <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Asttypes/index.html#type-arg_label.Optional" title="Asttypes.arg_label.Optional"><code>Optional l</code></a> and <code>exp0</code> is <code>None</code></li><li><code>?l:(P = E0)</code> when <code>lbl</code> is <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Asttypes/index.html#type-arg_label.Optional" title="Asttypes.arg_label.Optional"><code>Optional l</code></a> and <code>exp0</code> is <code>Some E0</code></li></ul><p>Note: If <code>E0</code> is provided, only <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Asttypes/index.html#type-arg_label.Optional" title="Asttypes.arg_label.Optional"><code>Optional</code></a> is allowed.</p><span class="comment-delim">*)</span></div></li><li id="type-function_param_desc.Pparam_newtype" class="def variant constructor anchored"><a href="#type-function_param_desc.Pparam_newtype" class="anchor"></a><code><span>| </span><span><span class="constructor">Pparam_newtype</span> <span class="keyword">of</span> <span>string <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Asttypes/index.html#type-loc">Ppxlib_ast.Asttypes.loc</a></span>
  * <span><span><span class="xref-unresolved">Ppxlib_jane__.Jane_asttypes.const_jkind</span> <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Location/index.html#type-loc">Location.loc</a></span> option</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>Pparam_newtype (x, jkind)</code> represents the parameter <code>(type x)</code>. <code>x</code> carries the location of the identifier, whereas <code>pparam_loc</code> is the location of the <code>(type x)</code> as a whole.</p><p><code>jkind</code> is the same as <code>Lexp_newtype</code>'s jkind.</p><p>Multiple parameters <code>(type a b c)</code> are represented as multiple <code>Pparam_newtype</code> nodes, let's say:</p><pre class="language-ocaml"><code>[ { pparam_desc = Pparam_newtype (a, _); pparam_loc = loc };
  { pparam_desc = Pparam_newtype (b, _); pparam_loc = loc };
  { pparam_desc = Pparam_newtype (c, _); pparam_loc = loc };
]</code></pre><p>Here, <code>loc</code> gives the location of <code>(type a b c)</code>, but is marked as a ghost location. The locations on <code>a</code>, <code>b</code>, <code>c</code>, correspond to the variables <code>a</code>, <code>b</code>, and <code>c</code> in the source code.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-function_param"><a href="#type-function_param" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-function_param" class="source_link">Source</a><code><span><span class="keyword">type</span> function_param</span><span> = </span><span>{</span></code><ol><li id="type-function_param.pparam_desc" class="def record field anchored"><a href="#type-function_param.pparam_desc" class="anchor"></a><code><span>pparam_desc : <a href="#type-function_param_desc">function_param_desc</a>;</span></code></li><li id="type-function_param.pparam_loc" class="def record field anchored"><a href="#type-function_param.pparam_loc" class="anchor"></a><code><span>pparam_loc : <a href="../../../../../ocaml-base-compiler/compiler-libs.common/Location/index.html#type-t">Location.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_constraint"><a href="#type-type_constraint" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-type_constraint" class="source_link">Source</a><code><span><span class="keyword">type</span> type_constraint</span><span> = </span></code><ol><li id="type-type_constraint.Pconstraint" class="def variant constructor anchored"><a href="#type-type_constraint.Pconstraint" class="anchor"></a><code><span>| </span><span><span class="constructor">Pconstraint</span> <span class="keyword">of</span> <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-core_type">Ppxlib_ast.Parsetree.core_type</a></span></code></li><li id="type-type_constraint.Pcoerce" class="def variant constructor anchored"><a href="#type-type_constraint.Pcoerce" class="anchor"></a><code><span>| </span><span><span class="constructor">Pcoerce</span> <span class="keyword">of</span> <span><a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-core_type">Ppxlib_ast.Parsetree.core_type</a> option</span>
  * <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-core_type">Ppxlib_ast.Parsetree.core_type</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-function_constraint"><a href="#type-function_constraint" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-function_constraint" class="source_link">Source</a><code><span><span class="keyword">type</span> function_constraint</span><span> = </span><span>{</span></code><ol><li id="type-function_constraint.mode_annotations" class="def record field anchored"><a href="#type-function_constraint.mode_annotations" class="anchor"></a><code><span>mode_annotations : <a href="../Mode_expr/index.html#type-t">Mode_expr.t</a>;</span></code></li><li id="type-function_constraint.type_constraint" class="def record field anchored"><a href="#type-function_constraint.type_constraint" class="anchor"></a><code><span>type_constraint : <a href="#type-type_constraint">type_constraint</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The mode annotation placed on a function let-binding when the function has a type constraint on the body, e.g. <code>let local_ f x : int -&gt; int = ...</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-expression"><a href="#type-expression" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.type-expression" class="source_link">Source</a><code><span><span class="keyword">type</span> expression</span><span> =
  <span><a href="#type-function_param">function_param</a> list</span> * <span><a href="#type-function_constraint">function_constraint</a> option</span> * <a href="#type-function_body">function_body</a></span></code></div><div class="spec-doc"><p><code>([P1; ...; Pn], C, body)</code> represents any construct involving <code>fun</code> or <code>function</code>, including:</p><ul><li><code>fun P1 ... Pn -&gt; E</code> when <code>body = Pfunction_body E</code></li><li><code>fun P1 ... Pn -&gt; function p1 -&gt; e1 | ... | pm -&gt; em</code> when <code>body = Pfunction_cases [ p1 -&gt; e1; ...; pm -&gt; em ]</code></li></ul><p><code>C</code> represents a type constraint or coercion placed immediately before the arrow, e.g. <code>fun P1 ... Pn : t1 :&gt; t2 -&gt; ...</code> when <code>C = Some (Pcoerce (Some t1, t2))</code>.</p><p>A function must have parameters. <code>Pexp_function (params, _, body)</code> must have non-empty <code>params</code> or a <code>Pfunction_cases _</code> body.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expr_of"><a href="#val-expr_of" class="anchor"></a><a href="../../../../src/ppxlib_jane/jane_syntax.ml.html#module-N_ary_functions.val-expr_of" class="source_link">Source</a><code><span><span class="keyword">val</span> expr_of : <span><span class="label">loc</span>:<a href="../../../../../ocaml-base-compiler/compiler-libs.common/Location/index.html#type-t">Location.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-expression">expression</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../../ppxlib/ppxlib.astlib/Astlib/Ast_500/Parsetree/index.html#type-expression">Ppxlib_ast.Parsetree.expression</a></span></code></div></div></div></body></html>
