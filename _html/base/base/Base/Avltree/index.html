<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Avltree (base.base.Base.Avltree)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../';
let search_urls = ['../../../sherlodoc_db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../index.html">üè†</a> &#x00BB; <a href="../../../index.html">Base</a> &#x00BB; Library <code>base</code> &#x00BB; <a href="../index.html">Base</a> &#x00BB; Avltree</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Base.Avltree</span></code><a href="../../../src/base/avltree.ml.html" class="source_link">Source</a></h1><p>A low-level, mutable AVL tree.</p><p>It is not intended to be used directly by casual users. It is used for implementing other data structures. The interface is somewhat ugly, and it's that way for a reason: the goal of this module is minimum memory overhead and maximum performance.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#caveats">Caveats</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../index.html">Base</a><ul><li>Library <code>base</code><ul><li><a href="../index.html">Base</a><ul><li><a href="../Applicative/index.html">Applicative</a></li><li><a href="../Array/index.html">Array</a></li><li><a href="#" class="current_unit">Avltree</a></li><li><a href="../Backtrace/index.html">Backtrace</a></li><li><a href="../Binary_search/index.html">Binary_search</a></li><li><a href="../Binary_searchable/index.html">Binary_searchable</a></li><li><a href="../Blit/index.html">Blit</a></li><li><a href="../Bool/index.html">Bool</a></li><li><a href="../Buffer/index.html">Buffer</a></li><li><a href="../Bytes/index.html">Bytes</a></li><li><a href="../Char/index.html">Char</a></li><li><a href="../Comparable/index.html">Comparable</a></li><li><a href="../Comparator/index.html">Comparator</a></li><li><a href="../Comparisons/index.html">Comparisons</a></li><li><a href="../Container/index.html">Container</a></li><li><a href="../Either/index.html">Either</a></li><li><a href="../Equal/index.html">Equal</a></li><li><a href="../Error/index.html">Error</a></li><li><a href="../Exn/index.html">Exn</a></li><li><a href="../Field/index.html">Field</a></li><li><a href="../Float/index.html">Float</a></li><li><a href="../Floatable/index.html">Floatable</a></li><li><a href="../Fn/index.html">Fn</a></li><li><a href="../Formatter/index.html">Formatter</a></li><li><a href="../Hash/index.html">Hash</a></li><li><a href="../Hash_set/index.html">Hash_set</a></li><li><a href="../Hashable/index.html">Hashable</a></li><li><a href="../Hasher/index.html">Hasher</a></li><li><a href="../Hashtbl/index.html">Hashtbl</a></li><li><a href="../Identifiable/index.html">Identifiable</a></li><li><a href="../Indexed_container/index.html">Indexed_container</a></li><li><a href="../Info/index.html">Info</a></li><li><a href="../Int/index.html">Int</a></li><li><a href="../Int_conversions/index.html">Int_conversions</a></li><li><a href="../Int32/index.html">Int32</a></li><li><a href="../Int63/index.html">Int63</a></li><li><a href="../Int64/index.html">Int64</a></li><li><a href="../Intable/index.html">Intable</a></li><li><a href="../Int_math/index.html">Int_math</a></li><li><a href="../Invariant/index.html">Invariant</a></li><li><a href="../Lazy/index.html">Lazy</a></li><li><a href="../List/index.html">List</a></li><li><a href="../Map/index.html">Map</a></li><li><a href="../Maybe_bound/index.html">Maybe_bound</a></li><li><a href="../Monad/index.html">Monad</a></li><li><a href="../Nativeint/index.html">Nativeint</a></li><li><a href="../Nothing/index.html">Nothing</a></li><li><a href="../Option/index.html">Option</a></li><li><a href="../Option_array/index.html">Option_array</a></li><li><a href="../Or_error/index.html">Or_error</a></li><li><a href="../Ordered_collection_common/index.html">Ordered_collection_common</a></li><li><a href="../Ordering/index.html">Ordering</a></li><li><a href="../Poly/index.html">Poly</a></li><li><a href="../Popcount/index.html">Popcount</a></li><li><a href="../Pretty_printer/index.html">Pretty_printer</a></li><li><a href="../Printf/index.html">Printf</a></li><li><a href="../Linked_queue/index.html">Linked_queue</a></li><li><a href="../Queue/index.html">Queue</a></li><li><a href="../Random/index.html">Random</a></li><li><a href="../Ref/index.html">Ref</a></li><li><a href="../Result/index.html">Result</a></li><li><a href="../Sequence/index.html">Sequence</a></li><li><a href="../Set/index.html">Set</a></li><li><a href="../Sexpable/index.html">Sexpable</a></li><li><a href="../Sign/index.html">Sign</a></li><li><a href="../Sign_or_nan/index.html">Sign_or_nan</a></li><li><a href="../Source_code_position/index.html">Source_code_position</a></li><li><a href="../Stack/index.html">Stack</a></li><li><a href="../Staged/index.html">Staged</a></li><li><a href="../String/index.html">String</a></li><li><a href="../Stringable/index.html">Stringable</a></li><li><a href="../Sys/index.html">Sys</a></li><li><a href="../T/index.html">T</a></li><li><a href="../Type_equal/index.html">Type_equal</a></li><li><a href="../Uniform_array/index.html">Uniform_array</a></li><li><a href="../Unit/index.html">Unit</a></li><li><a href="../Uchar/index.html">Uchar</a></li><li><a href="../Variant/index.html">Variant</a></li><li><a href="../With_return/index.html">With_return</a></li><li><a href="../Word_size/index.html">Word_size</a></li><li><a href="../index.html#module-type-T">T</a></li><li><a href="../index.html#module-type-T1">T1</a></li><li><a href="../index.html#module-type-T2">T2</a></li><li><a href="../index.html#module-type-T3">T3</a></li><li><a href="../Sexp/index.html">Sexp</a></li><li><a href="../Export/index.html">Export</a></li><li><a href="../index.html#module-Continue_or_stop">Continue_or_stop</a></li></ul></li></ul></li><li>Library <code>base.base_internalhash_types</code><ul><li><a href="../../../base.base_internalhash_types/Base_internalhash_types/index.html">Base_internalhash_types</a></li></ul></li><li>Library <code>base.caml</code><ul><li><a href="../../../base.caml/Caml/index.html">Caml</a></li></ul></li><li>Library <code>base.md5</code><ul><li><a href="../../../base.md5/Md5_lib/index.html">Md5_lib</a></li></ul></li><li>Library <code>base.shadow_stdlib</code><ul><li><a href="../../../base.shadow_stdlib/Shadow_stdlib/index.html">Shadow_stdlib</a></li></ul></li><li><a href="../../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><h3 id="caveats"><a href="#caveats" class="anchor"></a>Caveats</h3><p>1. <code>compare</code> is passed to every function where it is used. If you pass a different <code>compare</code> to functions on the same tree, then behavior is indeterminate. Why? Because otherwise we'd need a top-level record to store <code>compare</code>, and when building a hash table, or other structure, that little <code>t</code> is a block that increases memory overhead. However, if an empty tree is just a constructor <code>Empty</code>, then it's just a number, and uses no extra memory beyond the array bucket that holds it. That's the first secret of how Hashtbl's memory overhead isn't higher than INRIA's, even though it uses a tree instead of a list for buckets.</p><p>2. But if it's mutable, why do all the &quot;mutators&quot; return <code>t</code>? Answer: it is mutable, but the root node might change due to balancing. Since we have no top-level record to hold the current root node (see point 1), you have to do it. If you fail to do it, and use an old root node, you're responsible for the (sure to be nasty) consequences.</p><p>3. What on earth is up with the <code>~removed</code> argument to some functions? See point 1: since there is no top-level node, it isn't possible to keep track of how many nodes are in the tree unless each mutator tells you whether or not it added or removed a node (vs. replacing an existing one). If you intend to keep a count (as you must in a hash table), then you will need to pay attention to this flag.</p><p>After all this, you're probably asking yourself whether all these hacks are worth it. Yes! They are! With them, we built a hash table that is faster than INRIA's (no small feat) with the same memory overhead, sane add semantics (the add semantics they used were a performance hack), and worst-case log(N) insertion, lookup, and removal.</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><a href="../../../src/base/avltree.ml.html#type-t" class="source_link">Source</a><code><span><span class="keyword">type</span> <span>('k, 'v) t</span></span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-t.Empty" class="def variant constructor anchored"><a href="#type-t.Empty" class="anchor"></a><code><span>| </span><span><span class="constructor">Empty</span></span></code></li><li id="type-t.Node" class="def variant constructor anchored"><a href="#type-t.Node" class="anchor"></a><code><span>| </span><span><span class="constructor">Node</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-t.left" class="def record field anchored"><a href="#type-t.left" class="anchor"></a><code><span><span class="keyword">mutable</span> left : <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span>;</span></code></li><li id="type-t.key" class="def record field anchored"><a href="#type-t.key" class="anchor"></a><code><span>key : <span class="type-var">'k</span>;</span></code></li><li id="type-t.value" class="def record field anchored"><a href="#type-t.value" class="anchor"></a><code><span><span class="keyword">mutable</span> value : <span class="type-var">'v</span>;</span></code></li><li id="type-t.height" class="def record field anchored"><a href="#type-t.height" class="anchor"></a><code><span><span class="keyword">mutable</span> height : int;</span></code></li><li id="type-t.right" class="def record field anchored"><a href="#type-t.right" class="anchor"></a><code><span><span class="keyword">mutable</span> right : <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span>;</span></code></li></ol><code><span>}</span></code></li><li id="type-t.Leaf" class="def variant constructor anchored"><a href="#type-t.Leaf" class="anchor"></a><code><span>| </span><span><span class="constructor">Leaf</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-t.key" class="def record field anchored"><a href="#type-t.key" class="anchor"></a><code><span>key : <span class="type-var">'k</span>;</span></code></li><li id="type-t.value" class="def record field anchored"><a href="#type-t.value" class="anchor"></a><code><span><span class="keyword">mutable</span> value : <span class="type-var">'v</span>;</span></code></li></ol><code><span>}</span></code></li></ol></div><div class="spec-doc"><p>We expose <code>t</code> to allow an optimization in Hashtbl that makes iter and fold more than twice as fast. We keep the type private to reduce opportunities for external code to violate avltree invariants.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-empty" class="source_link">Source</a><code><span><span class="keyword">val</span> empty : <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-is_empty" class="source_link">Source</a><code><span><span class="keyword">val</span> is_empty : <span><span><span>(<span class="type-var">_</span>, <span class="type-var">_</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-invariant"><a href="#val-invariant" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-invariant" class="source_link">Source</a><code><span><span class="keyword">val</span> invariant : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Checks invariants, raising an exception if any invariants fail.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-add" class="source_link">Source</a><code><span><span class="keyword">val</span> add : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">replace</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">added</span>:<span>bool <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Adds the specified key and data to the tree destructively (previous <code>t</code>'s are no longer valid) using the specified comparison function. O(log(N)) time, O(1) space.</p><p>The returned <code>t</code> is the new root node of the tree, and should be used on all further calls to any other function in this module. The bool <code>ref</code>, added, will be set to <code>true</code> if a new node is added to the tree, or <code>false</code> if an existing node is replaced (in the case that the key already exists).</p><p>If <code>replace</code> (default true) is true then <code>add</code> will overwrite any existing mapping for <code>key</code>. If <code>replace</code> is false, and there is an existing mapping for key, then <code>add</code> has no effect.</p></div></div><p>Returns the first (leftmost) or last (rightmost) element in the tree.</p><div class="odoc-spec"><div class="spec value anchored" id="val-first"><a href="#val-first" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-first" class="source_link">Source</a><code><span><span class="keyword">val</span> first : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-last"><a href="#val-last" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-last" class="source_link">Source</a><code><span><span class="keyword">val</span> last : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-find" class="source_link">Source</a><code><span><span class="keyword">val</span> find : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> option</span></span></code></div><div class="spec-doc"><p>If the specified key exists in the tree, returns the corresponding value. O(log(N)) time and O(1) space.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_and_call"><a href="#val-find_and_call" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-find_and_call" class="source_link">Source</a><code><span><span class="keyword">val</span> find_and_call : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>find_and_call t ~compare k ~if_found ~if_not_found</code></p><p>is equivalent to:</p><p><code>match find t ~compare k with Some v -&gt; if_found v | None -&gt; if_not_found k</code></p><p>except that it doesn't allocate the option.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_and_call1"><a href="#val-find_and_call1" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-find_and_call1" class="source_link">Source</a><code><span><span class="keyword">val</span> find_and_call1 : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">a</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_and_call2"><a href="#val-find_and_call2" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-find_and_call2" class="source_link">Source</a><code><span><span class="keyword">val</span> find_and_call2 : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">a</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">b</span>:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'c</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-findi_and_call"><a href="#val-findi_and_call" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-findi_and_call" class="source_link">Source</a><code><span><span class="keyword">val</span> findi_and_call : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-findi_and_call1"><a href="#val-findi_and_call1" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-findi_and_call1" class="source_link">Source</a><code><span><span class="keyword">val</span> findi_and_call1 : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">a</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-findi_and_call2"><a href="#val-findi_and_call2" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-findi_and_call2" class="source_link">Source</a><code><span><span class="keyword">val</span> findi_and_call2 : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">a</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">b</span>:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_found</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_not_found</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'c</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-mem" class="source_link">Source</a><code><span><span class="keyword">val</span> mem : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true if key is present in the tree, and false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-remove" class="source_link">Source</a><code><span><span class="keyword">val</span> remove : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">removed</span>:<span>bool <a href="../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-ref">ref</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compare</span>:<span>(<span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Removes key destructively from the tree if it exists, returning the new root node. Previous root nodes are not usable anymore; do so at your peril. The <code>removed</code> ref will be set to true if a node was actually removed, and false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-fold" class="source_link">Source</a><code><span><span class="keyword">val</span> fold : 
  <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p>Folds over the tree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-iter" class="source_link">Source</a><code><span><span class="keyword">val</span> iter : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Iterates over the tree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapi_inplace"><a href="#val-mapi_inplace" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-mapi_inplace" class="source_link">Source</a><code><span><span class="keyword">val</span> mapi_inplace : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="label">key</span>:<span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:<span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Map over the the tree, changing the data in place.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-choose_exn"><a href="#val-choose_exn" class="anchor"></a><a href="../../../src/base/avltree.ml.html#val-choose_exn" class="source_link">Source</a><code><span><span class="keyword">val</span> choose_exn : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'k</span> * <span class="type-var">'v</span></span></code></div></div></div></body></html>
