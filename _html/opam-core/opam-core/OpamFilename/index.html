<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamFilename (opam-core.opam-core.OpamFilename)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../sherlodoc_db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../../index.html">Up</a> ‚Äì <a href="../../../index.html">üè†</a> &#x00BB; <a href="../../index.html">opam-core</a> &#x00BB; Library <code>opam-core</code> &#x00BB; OpamFilename</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>OpamFilename</span></code><a href="../../src/opam-core/opamFilename.ml.html" class="source_link">Source</a></h1><p>Higher level file and directory name manipulation AND file operations, wrappers on OpamSystem using the filename type</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#locking">Locking</a></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">opam-core</a><ul><li>Library <code>opam-core</code><ul><li><a href="../OpamACL/index.html">OpamACL</a></li><li><a href="../OpamCached/index.html">OpamCached</a></li><li><a href="../OpamCompat/index.html">OpamCompat</a></li><li><a href="../OpamConsole/index.html">OpamConsole</a></li><li><a href="../OpamCoreConfig/index.html">OpamCoreConfig</a></li><li><a href="../OpamCoreConfigDeveloper/index.html">OpamCoreConfigDeveloper</a></li><li><a href="../OpamDirTrack/index.html">OpamDirTrack</a></li><li><a href="#" class="current_unit">OpamFilename</a><ul><li><a href="Base/index.html">Base</a></li><li><a href="Dir/index.html">Dir</a></li><li><a href="Set/index.html">Set</a></li><li><a href="Map/index.html">Map</a></li><li><a href="Op/index.html">Op</a></li><li><a href="Attribute/index.html">Attribute</a></li><li><a href="SubPath/index.html">SubPath</a></li></ul></li><li><a href="../OpamHash/index.html">OpamHash</a></li><li><a href="../OpamJson/index.html">OpamJson</a></li><li><a href="../OpamParallel/index.html">OpamParallel</a></li><li><a href="../OpamProcess/index.html">OpamProcess</a></li><li><a href="../OpamSHA/index.html">OpamSHA</a></li><li><a href="../OpamSWHID/index.html">OpamSWHID</a></li><li><a href="../OpamStd/index.html">OpamStd</a></li><li><a href="../OpamStubs/index.html">OpamStubs</a></li><li><a href="../OpamStubsTypes/index.html">OpamStubsTypes</a></li><li><a href="../OpamSystem/index.html">OpamSystem</a></li><li><a href="../OpamUrl/index.html">OpamUrl</a></li><li><a href="../OpamVersion/index.html">OpamVersion</a></li><li><a href="../OpamVersionCompare/index.html">OpamVersionCompare</a></li><li><a href="../OpamVersionInfo/index.html">OpamVersionInfo</a></li></ul></li><li><a href="../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Base"><a href="#module-Base" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Base" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Base/index.html">Base</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Basenames</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Dir"><a href="#module-Dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Dir" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Dir/index.html">Dir</a></span><span> : <a href="../OpamStd/module-type-ABSTRACT/index.html">OpamStd.ABSTRACT</a></span></code></div><div class="spec-doc"><p>Directory names</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cwd"><a href="#val-cwd" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-cwd" class="source_link">Source</a><code><span><span class="keyword">val</span> cwd : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Return the current working directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rmdir"><a href="#val-rmdir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-rmdir" class="source_link">Source</a><code><span><span class="keyword">val</span> rmdir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove a directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cleandir"><a href="#val-cleandir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-cleandir" class="source_link">Source</a><code><span><span class="keyword">val</span> cleandir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Cleans the contents of a directory, but keeps the directory in place. Noop if directory doesn't exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rmdir_cleanup"><a href="#val-rmdir_cleanup" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-rmdir_cleanup" class="source_link">Source</a><code><span><span class="keyword">val</span> rmdir_cleanup : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Removes an empty directory, as well as any empty leading path components. Must be called only on a directory that is known to not have empty parents, only internal opam directory (and not tmp dir).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkdir"><a href="#val-mkdir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-mkdir" class="source_link">Source</a><code><span><span class="keyword">val</span> mkdir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Create a directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rec_dirs"><a href="#val-rec_dirs" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-rec_dirs" class="source_link">Source</a><code><span><span class="keyword">val</span> rec_dirs : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> list</span></span></code></div><div class="spec-doc"><p>List the sub-directory recursively</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dir_is_empty"><a href="#val-dir_is_empty" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dir_is_empty" class="source_link">Source</a><code><span><span class="keyword">val</span> dir_is_empty : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dirs"><a href="#val-dirs" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dirs" class="source_link">Source</a><code><span><span class="keyword">val</span> dirs : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> list</span></span></code></div><div class="spec-doc"><p>List the sub-directory (do not recurse)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_dir"><a href="#val-in_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-in_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> in_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Evaluate a function in a given directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-env_of_list"><a href="#val-env_of_list" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-env_of_list" class="source_link">Source</a><code><span><span class="keyword">val</span> env_of_list : <span><span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p>Turns an assoc list into an array suitable to be provided as environment</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec"><a href="#val-exec" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-exec" class="source_link">Source</a><code><span><span class="keyword">val</span> exec : 
  <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?env</span>:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?metadata</span>:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?keep_going</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>string list</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Execute a list of commands in a given directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-move_dir"><a href="#val-move_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-move_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> move_dir : <span><span class="label">src</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dst</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Move a directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy_dir"><a href="#val-copy_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-copy_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> copy_dir : <span><span class="label">src</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dst</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Copy directory <code>src</code> to <code>dst</code>, that is, recursively copy the contents of <code>src</code> into <code>dst</code>, overwriting any existing files.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-link_dir"><a href="#val-link_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-link_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> link_dir : <span><span class="label">target</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">link</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Link a directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists_dir"><a href="#val-exists_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-exists_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> exists_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Does the directory exist?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt_dir"><a href="#val-opt_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-opt_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> opt_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> option</span></span></code></div><div class="spec-doc"><p>Returns the argument as option, if the directory exists</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dirname_dir"><a href="#val-dirname_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dirname_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> dirname_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Return the parent directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basename_dir"><a href="#val-basename_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-basename_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> basename_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Base/index.html#type-t">Base.t</a></span></code></div><div class="spec-doc"><p>Return the deeper directory name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_list_dir"><a href="#val-to_list_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-to_list_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> to_list_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> list</span></span></code></div><div class="spec-doc"><p>Turn a full path into a list of directory names</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw_dir"><a href="#val-raw_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-raw_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> raw_dir : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Creation from a raw string, without resolving symlinks etc.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_tmp_dir"><a href="#val-with_tmp_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_tmp_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> with_tmp_dir : <span><span>(<span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Execute a function in a temp directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_tmp_dir_job"><a href="#val-with_tmp_dir_job" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_tmp_dir_job" class="source_link">Source</a><code><span><span class="keyword">val</span> with_tmp_dir_job : <span><span>(<span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span></span></code></div><div class="spec-doc"><p>Provide an automatically cleaned up temp directory to a job</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_tmp_dir"><a href="#val-mk_tmp_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-mk_tmp_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> mk_tmp_dir : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Raw function to create a temporary directory. No automatic cleanup</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat_and_resolve"><a href="#val-concat_and_resolve" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-concat_and_resolve" class="source_link">Source</a><code><span><span class="keyword">val</span> concat_and_resolve : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Create a new Dir.t and resolve symlinks</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../OpamStd/module-type-ABSTRACT/index.html">OpamStd.ABSTRACT</a></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#type-t" class="source_link">Source</a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-compare" class="source_link">Source</a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-equal" class="source_link">Source</a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-of_string" class="source_link">Source</a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-to_string" class="source_link">Source</a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_json"><a href="#val-to_json" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-to_json" class="source_link">Source</a><code><span><span class="keyword">val</span> to_json : <span><a href="#type-t">t</a> <a href="../OpamJson/index.html#type-encoder">OpamJson.encoder</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_json"><a href="#val-of_json" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-of_json" class="source_link">Source</a><code><span><span class="keyword">val</span> of_json : <span><a href="#type-t">t</a> <a href="../OpamJson/index.html#type-decoder">OpamJson.decoder</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Set"><a href="#module-Set" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Set" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Set/index.html">Set</a></span><span> : <a href="../OpamStd/module-type-SET/index.html">OpamStd.SET</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../OpamStd/module-type-SET/index.html#type-elt">elt</a> = <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Map"><a href="#module-Map" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Map" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Map/index.html">Map</a></span><span> : <a href="../OpamStd/module-type-MAP/index.html">OpamStd.MAP</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../OpamStd/module-type-MAP/index.html#type-key">key</a> = <a href="#type-t">t</a></span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec type anchored" id="type-generic_file"><a href="#type-generic_file" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#type-generic_file" class="source_link">Source</a><code><span><span class="keyword">type</span> generic_file</span><span> = </span></code><ol><li id="type-generic_file.D" class="def variant constructor anchored"><a href="#type-generic_file.D" class="anchor"></a><code><span>| </span><span><span class="constructor">D</span> <span class="keyword">of</span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></li><li id="type-generic_file.F" class="def variant constructor anchored"><a href="#type-generic_file.F" class="anchor"></a><code><span>| </span><span><span class="constructor">F</span> <span class="keyword">of</span> <a href="#type-t">t</a></span></code></li></ol></div><div class="spec-doc"><p>Generic filename</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-create" class="source_link">Source</a><code><span><span class="keyword">val</span> create : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Base/index.html#type-t">Base.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Create a filename from a Dir.t and a basename</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_basename"><a href="#val-of_basename" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-of_basename" class="source_link">Source</a><code><span><span class="keyword">val</span> of_basename : <span><a href="Base/index.html#type-t">Base.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Create a file from a basename and the current working directory as dirname</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw"><a href="#val-raw" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-raw" class="source_link">Source</a><code><span><span class="keyword">val</span> raw : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Creation from a raw string, without resolving symlinks, etc.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prettify"><a href="#val-prettify" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-prettify" class="source_link">Source</a><code><span><span class="keyword">val</span> prettify : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Prettify a filename:</p><ul><li>replace /path/to/opam/foo by &lt;opam&gt;/foo</li><li>replace /path/to/home/foo by ~/foo</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prettify_dir"><a href="#val-prettify_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-prettify_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> prettify_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Prettify a dirname.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dirname"><a href="#val-dirname" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dirname" class="source_link">Source</a><code><span><span class="keyword">val</span> dirname : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Dir/index.html#type-t">Dir.t</a></span></code></div><div class="spec-doc"><p>Return the directory name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basename"><a href="#val-basename" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-basename" class="source_link">Source</a><code><span><span class="keyword">val</span> basename : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Base/index.html#type-t">Base.t</a></span></code></div><div class="spec-doc"><p>Return the base name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-read" class="source_link">Source</a><code><span><span class="keyword">val</span> read : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Retrieves the contents from the hard disk.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_in"><a href="#val-open_in" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-open_in" class="source_link">Source</a><code><span><span class="keyword">val</span> open_in : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-in_channel">in_channel</a></span></code></div><div class="spec-doc"><p>Open a channel from a given file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_in_bin"><a href="#val-open_in_bin" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-open_in_bin" class="source_link">Source</a><code><span><span class="keyword">val</span> open_in_bin : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-in_channel">in_channel</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_out"><a href="#val-open_out" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-open_out" class="source_link">Source</a><code><span><span class="keyword">val</span> open_out : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-out_channel">out_channel</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_out_bin"><a href="#val-open_out_bin" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-open_out_bin" class="source_link">Source</a><code><span><span class="keyword">val</span> open_out_bin : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-out_channel">out_channel</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_open_out_bin"><a href="#val-with_open_out_bin" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_open_out_bin" class="source_link">Source</a><code><span><span class="keyword">val</span> with_open_out_bin : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>with_open_out_bin filename f</code> opens <code>f</code> and passes the out_channel to <code>f</code>. If <code>f</code> raises an exception, then <code>filename</code> is deleted and then exception is propagated. The out_channel does not have to be closed by <code>f</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_open_out_bin_atomic"><a href="#val-with_open_out_bin_atomic" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_open_out_bin_atomic" class="source_link">Source</a><code><span><span class="keyword">val</span> with_open_out_bin_atomic : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../../../ocaml-base-compiler/stdlib/Stdlib/index.html#type-out_channel">out_channel</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>As <a href="#val-with_open_out_bin"><code>with_open_out_bin</code></a> except that the file is written atomically. If <code>f</code> raises an exception, then <code>filename</code> will be unaltered.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-remove" class="source_link">Source</a><code><span><span class="keyword">val</span> remove : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Removes everything in <code>filename</code> if existed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write"><a href="#val-write" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-write" class="source_link">Source</a><code><span><span class="keyword">val</span> write : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Removes everything in <code>filename</code> if existed, then write <code>contents</code> instead.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-exists" class="source_link">Source</a><code><span><span class="keyword">val</span> exists : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true if the file exists and is a regular file or a symlink to one</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt_file"><a href="#val-opt_file" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-opt_file" class="source_link">Source</a><code><span><span class="keyword">val</span> opt_file : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p>Returns the argument as option if it exists and is either a regular file or a symlink to one</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_suffix"><a href="#val-check_suffix" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-check_suffix" class="source_link">Source</a><code><span><span class="keyword">val</span> check_suffix : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check whether a file has a given suffix</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_extension"><a href="#val-add_extension" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-add_extension" class="source_link">Source</a><code><span><span class="keyword">val</span> add_extension : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Adds a dot and the given file extension</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-chop_extension"><a href="#val-chop_extension" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-chop_extension" class="source_link">Source</a><code><span><span class="keyword">val</span> chop_extension : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Remove the file extension</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rec_files"><a href="#val-rec_files" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-rec_files" class="source_link">Source</a><code><span><span class="keyword">val</span> rec_files : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> list</span></span></code></div><div class="spec-doc"><p>List all the filenames, recursively</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-files"><a href="#val-files" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-files" class="source_link">Source</a><code><span><span class="keyword">val</span> files : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> list</span></span></code></div><div class="spec-doc"><p>List all the filename. Do not recurse.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-files_and_links"><a href="#val-files_and_links" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-files_and_links" class="source_link">Source</a><code><span><span class="keyword">val</span> files_and_links : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> list</span></span></code></div><div class="spec-doc"><p>Returns alll the files, including dangling symlinks (which means that not all entries will satisfy <a href="#val-exists"><code>exists</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_contents"><a href="#val-with_contents" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_contents" class="source_link">Source</a><code><span><span class="keyword">val</span> with_contents : <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Apply a function on the contents of a file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy_in"><a href="#val-copy_in" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-copy_in" class="source_link">Source</a><code><span><span class="keyword">val</span> copy_in : <span><span class="optlabel">?root</span>:<a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Copy a file in a directory. If <code>root</code> is set, copy also the sub-directories. For instance, <code>copy_in ~root:&quot;/foo&quot; &quot;/foo/bar/gni&quot; &quot;/toto&quot;</code> creates <code>&quot;/toto/bar/gni&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-move"><a href="#val-move" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-move" class="source_link">Source</a><code><span><span class="keyword">val</span> move : <span><span class="label">src</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dst</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Move a file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-readlink"><a href="#val-readlink" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-readlink" class="source_link">Source</a><code><span><span class="keyword">val</span> readlink : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Read a symlinked file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_symlink"><a href="#val-is_symlink" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-is_symlink" class="source_link">Source</a><code><span><span class="keyword">val</span> is_symlink : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is a symlink?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_symlink_dir"><a href="#val-is_symlink_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-is_symlink_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> is_symlink_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_exec"><a href="#val-is_exec" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-is_exec" class="source_link">Source</a><code><span><span class="keyword">val</span> is_exec : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is an executable?</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-copy" class="source_link">Source</a><code><span><span class="keyword">val</span> copy : <span><span class="label">src</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dst</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Copy a file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-install"><a href="#val-install" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-install" class="source_link">Source</a><code><span><span class="keyword">val</span> install : 
  <span><span class="optlabel">?warning</span>:<a href="../OpamSystem/index.html#type-install_warning_fn">OpamSystem.install_warning_fn</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?exec</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Installs a file to a destination. Optionally set if the destination should be set executable</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-link"><a href="#val-link" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-link" class="source_link">Source</a><code><span><span class="keyword">val</span> link : <span><span class="optlabel">?relative</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="label">target</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">link</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Symlink a file. If symlink is not possible on the system, use copy instead. With <code>relative</code>, creates a relative link through the closest common ancestor directory if possible. Otherwise, the symlink is absolute.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_archive"><a href="#val-is_archive" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-is_archive" class="source_link">Source</a><code><span><span class="keyword">val</span> is_archive : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true if the given file is an archive (zip or tar)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract"><a href="#val-extract" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-extract" class="source_link">Source</a><code><span><span class="keyword">val</span> extract : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Extract an archive in a given directory (it rewrites the root to match <code>Dir.t</code> dir if needed)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_job"><a href="#val-extract_job" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-extract_job" class="source_link">Source</a><code><span><span class="keyword">val</span> extract_job : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>exn option</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span></span></code></div><div class="spec-doc"><p>Same as <code>extract</code>, as an OpamProcess.job</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_in"><a href="#val-extract_in" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-extract_in" class="source_link">Source</a><code><span><span class="keyword">val</span> extract_in : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Extract an archive in a given directory</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_in_job"><a href="#val-extract_in_job" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-extract_in_job" class="source_link">Source</a><code><span><span class="keyword">val</span> extract_in_job : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>exn option</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_tar_gz_job"><a href="#val-make_tar_gz_job" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-make_tar_gz_job" class="source_link">Source</a><code><span><span class="keyword">val</span> make_tar_gz_job : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>exn option</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_generic_file"><a href="#val-extract_generic_file" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-extract_generic_file" class="source_link">Source</a><code><span><span class="keyword">val</span> extract_generic_file : <span><a href="#type-generic_file">generic_file</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Extract a generic file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-starts_with"><a href="#val-starts_with" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-starts_with" class="source_link">Source</a><code><span><span class="keyword">val</span> starts_with : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check whether a filename starts by a given Dir.t</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ends_with"><a href="#val-ends_with" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-ends_with" class="source_link">Source</a><code><span><span class="keyword">val</span> ends_with : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check whether a filename ends with a given suffix</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dir_starts_with"><a href="#val-dir_starts_with" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dir_starts_with" class="source_link">Source</a><code><span><span class="keyword">val</span> dir_starts_with : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>dir starts_with pfx dir</code> Check whether <code>dir</code> starts with <code>pfx</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dir_ends_with"><a href="#val-dir_ends_with" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-dir_ends_with" class="source_link">Source</a><code><span><span class="keyword">val</span> dir_ends_with : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check whether a dirname ends with a given suffix</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_prefix"><a href="#val-remove_prefix" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-remove_prefix" class="source_link">Source</a><code><span><span class="keyword">val</span> remove_prefix : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Remove a prefix from a file name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_prefix_dir"><a href="#val-remove_prefix_dir" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-remove_prefix_dir" class="source_link">Source</a><code><span><span class="keyword">val</span> remove_prefix_dir : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_suffix"><a href="#val-remove_suffix" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-remove_suffix" class="source_link">Source</a><code><span><span class="keyword">val</span> remove_suffix : <span><a href="Base/index.html#type-t">Base.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Remove a suffix from a filename</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch"><a href="#val-patch" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-patch" class="source_link">Source</a><code><span><span class="keyword">val</span> patch : <span><span class="optlabel">?preprocess</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>exn option</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span></span></code></div><div class="spec-doc"><p>Apply a patch in a directory. If <code>preprocess</code> is set to false, there is no CRLF translation. Returns <code>None</code> on success, the process error otherwise</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-touch"><a href="#val-touch" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-touch" class="source_link">Source</a><code><span><span class="keyword">val</span> touch : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Create an empty file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-chmod"><a href="#val-chmod" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-chmod" class="source_link">Source</a><code><span><span class="keyword">val</span> chmod : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Change file permissions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-written_since"><a href="#val-written_since" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-written_since" class="source_link">Source</a><code><span><span class="keyword">val</span> written_since : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Returns delay since last file update, based on mtime</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_in_parents"><a href="#val-find_in_parents" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-find_in_parents" class="source_link">Source</a><code><span><span class="keyword">val</span> find_in_parents : <span><span>(<span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Dir/index.html#type-t">Dir.t</a> option</span></span></code></div><div class="spec-doc"><p>Returns the closest parent of a directory (including itself) for which the predicate holds, if any</p></div></div><h3 id="locking"><a href="#locking" class="anchor"></a>Locking</h3><div class="odoc-spec"><div class="spec value anchored" id="val-flock"><a href="#val-flock" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-flock" class="source_link">Source</a><code><span><span class="keyword">val</span> flock : 
  <span><span>[&lt; <a href="../OpamSystem/index.html#type-lock_flag">OpamSystem.lock_flag</a> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dontblock</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../OpamSystem/index.html#type-lock">OpamSystem.lock</a></span></code></div><div class="spec-doc"><p>See <code>OpamSystem.flock</code>. Prefer the higher level <code>with_flock</code> functions when possible</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_flock"><a href="#val-with_flock" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_flock" class="source_link">Source</a><code><span><span class="keyword">val</span> with_flock : 
  <span><span>[&lt; <a href="../OpamSystem/index.html#type-lock_flag">OpamSystem.lock_flag</a> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dontblock</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../../ocaml-base-compiler/unix/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Calls <code>f</code> while holding a lock file. Ensures the lock is properly released on <code>f</code> exit. Raises <code>OpamSystem.Locked</code> if <code>dontblock</code> is set and the lock can't be acquired. <code>f</code> is passed the file_descr of the lock.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_flock_upgrade"><a href="#val-with_flock_upgrade" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_flock_upgrade" class="source_link">Source</a><code><span><span class="keyword">val</span> with_flock_upgrade : 
  <span><span>[&lt; <a href="../OpamSystem/index.html#type-actual_lock_flag">OpamSystem.actual_lock_flag</a> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dontblock</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../OpamSystem/index.html#type-lock">OpamSystem.lock</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../../ocaml-base-compiler/unix/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Calls <code>f</code> with the file lock upgraded to at least <code>flag</code>, then restores the previous lock level. Upgrade to <code>`Lock_write</code> should never be used in blocking mode as it would deadlock. Raises <code>OpamSystem.Locked</code> (but keeps the lock as is) if <code>dontblock</code> is set and the lock can't be upgraded.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_flock_write_then_read"><a href="#val-with_flock_write_then_read" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-with_flock_write_then_read" class="source_link">Source</a><code><span><span class="keyword">val</span> with_flock_write_then_read : 
  <span><span class="optlabel">?dontblock</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../../ocaml-base-compiler/unix/Unix/index.html#type-file_descr">Unix.file_descr</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Runs first function with a write lock on the given file, then releases it to a read lock and runs the second function.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Op"><a href="#module-Op" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Op" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Op/index.html">Op</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Attribute"><a href="#module-Attribute" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-Attribute" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Attribute/index.html">Attribute</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Simple structure to handle file attributes</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-SubPath"><a href="#module-SubPath" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#module-SubPath" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="SubPath/index.html">SubPath</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_attribute"><a href="#val-to_attribute" class="anchor"></a><a href="../../src/opam-core/opamFilename.ml.html#val-to_attribute" class="source_link">Source</a><code><span><span class="keyword">val</span> to_attribute : <span><a href="Dir/index.html#type-t">Dir.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Attribute/index.html#type-t">Attribute.t</a></span></code></div><div class="spec-doc"><p>Convert a filename to an attribute, relatively to a root</p></div></div></div></body></html>
