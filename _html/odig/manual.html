<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>manual (odig.manual)</title><meta charset="utf-8"/><link rel="stylesheet" href="../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../';
let search_urls = ['sherlodoc_db.js','../sherlodoc.js'];
</script><script src="../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> ‚Äì <a href="../index.html">üè†</a> &#x00BB; <a href="index.html">Odig  <span class="version">v0.0.9</span></a> &#x00BB; Odig manual</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1 id="manual"><a href="#manual" class="anchor"></a>Odig manual</h1><p><code>odig</code> helps you to access information about installed OCaml packages. The following shows basic <code>odig</code> usage, to understand how odig looks up that information see the <a href="packaging.html" title="packaging">packaging conventions</a>.</p><p>In this manual we use <code>odig</code> itself as the example package.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#meta">Package metadata</a></li><li><a href="#distrib">Package distribution documentation</a></li><li><a href="#odoc_docs">Package odoc API documentation and manuals</a></li><li><a href="#odoc_themes">odoc API documentation theme</a></li><li><a href="#publish">Publishing odoc documentation sets</a><ul><li><a href="#publish_github">Publishing on GitHub</a></li></ul></li></ul></nav><nav class="odoc-toc odoc-global-toc"><ul><li><a href="index.html">Odig  <span class="version">v0.0.9</span></a><ul><li><a href="#" class="current_unit">Odig manual</a></li><li><a href="packaging.html">Odig packaging conventions</a></li><li>Library <code>odig.support</code><ul><li><a href="odig.support/Odig_odoc/index.html">Odig_odoc</a></li><li><a href="odig.support/Odig_odoc_page/index.html">Odig_odoc_page</a></li><li><a href="odig.support/Odig_support/index.html">Odig_support</a></li></ul></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="meta"><a href="#meta" class="anchor"></a>Package metadata</h2><p>Basic information about packages and their metadata is available with the <code>pkg</code> command.</p><pre>odig pkg              # List recognized packages and their version
odig pkg odig --long  # Show odig's package full metadata</pre><p>Metadata fields of packages can be queried individually with the <code>show</code> command:</p><pre>odig show repo odig        # Show odig's repository address
odig show homepage odig    # Show odig's homepage address
odig show license odig     # Show odig's license(s) tags</pre><p>A few URI metadata fields can be opened directly in your browser with the <code>browse</code> command:</p><pre>odig browse homepage odig    # Open odig's homepage in your browser
odig browse issues odig      # Open odig's issue tracker in your browser
odig browse online-doc odig  # Open odig's online docs in your browser</pre><h2 id="distrib"><a href="#distrib" class="anchor"></a>Package distribution documentation</h2><p>If the package installed them <code>odig</code> provides instant access to the the readme, change log and license files of a package via:</p><pre>odig readme odig    # Show the readme of odig
odig changes odig   # Show the changes of odig
odig license odig   # Show the license of odig</pre><p>If you want to access the file paths rather than the content use <code>show</code>:</p><pre>odig show readme-files odig    # Show path to the readme of odig
odig show changes-files odig   # Show path the changes of odig
odig show license-files odig   # Show path the license of odig</pre><h2 id="odoc_docs"><a href="#odoc_docs" class="anchor"></a>Package odoc API documentation and manuals</h2><p>To open the HTML package list or the page of a package in your browser use:</p><pre>odig doc          # Package list
odig doc odig     # Doc for the odig package</pre><p>In general if <code>odig doc</code> can't satisfy your request it will try to generate documentation for it unless prevented by the <code>-n</code> option. If the documentation for your request was already generated it will open it without checking if it's up-to-date, use the option <code>-u</code> to guarantee it's fresh.</p><pre>odig doc -u       # Up-to-date package list and package docs
odig doc -u odig  # Up-to-date doc for the odig package</pre><p>If you only want to generate the documentation use the `odoc` command:</p><pre>odig odoc       # Generate API docs and manuals for all packages
odig odoc odig  # Generate API docs and manuals for the odig package</pre><p>If the OCaml manual is installed as the <code>ocaml-manual</code> package (e.g. via <code>opam install ocaml-manual</code>), the local copy gets linked from the package list page.</p><h2 id="odoc_themes"><a href="#odoc_themes" class="anchor"></a>odoc API documentation theme</h2><p>The way new themes can be installed is described <a href="packaging.html#theme_install" title="theme_install">here</a>.</p><p>The <code>odoc</code> theme used for odoc API documentation and manuals can be changed via the <code>odoc-theme</code> command:</p><pre>odig odoc-theme list            # List available themes
odig odoc-theme default         # Show the default theme name</pre><p>The default theme is used and restored whenever a documentation generation action occurs either through <code>odig doc</code> or <code>odig odoc</code>. It is defined in order:</p><ol><li>On the command line via the <code>--odoc-theme</code> option.</li><li>In the <code>ODIG_ODOC_THEME</code> environment variable.</li><li>In the <code>~/.config/odig/odoc-theme</code> file.</li><li>By <code>odoc.default</code></li></ol><p>The theme can be set on the current documentation set via the <code>set</code> action:</p><pre>odig odoc-theme set odig.dark   # Use the theme odig.dark
odig odoc-theme set             # Use the default theme</pre><p>However whenever a documentation generation action occurs this restores the default theme. If you want to persist your choice, use the <code>--default</code> option when you <code>set</code> the theme; this writes the theme name to <code>~/.config/odig/odoc-theme</code>.</p><pre>odig odoc-theme set --default odig.dark # Use theme and set as default</pre><h2 id="publish"><a href="#publish" class="anchor"></a>Publishing odoc documentation sets</h2><p>In general the self-contained bundle of generated HTML files is available in:</p><pre>$(odig cache path)/html</pre><p>It does however have a few absolute symlinks that point outside the hierarchy so if you want to archive or copy the documentation set over to another machine make sure you follow the symlinks.</p><p>To publish the documentation for a list of packages <code>$PKGS</code> write an <code>intro.mld</code> file that briefly documents the purpose of the documentation set, it will be used as a preamble on the package list page. You can also define your own table of contents on this page in a <code>toc.mld</code> file whose content will end up in the <code>nav.odoc-toc</code> element; otherwise a default table of content is generated. Continue with:</p><pre>export PKGS=...
opam switch create .
opam install odig $PKGS
odig odoc -v --odoc-theme=$MYTHEME \
             --index-title='My docset' --index-intro=intro.mld \
             --index-toc=toc.mld \
             --no-pkg-deps $PKGS</pre><p>If the tag index on the package list page is a bit overkill for your documentation set, use the <code>--no-tag-index</code> option to suppress it.</p><p>Provided our webserver follows symlinks, you are now ready to publish your documentation set:</p><pre>ln -s $(odig cache path)/html /var/www/my-docset</pre><h3 id="publish_github"><a href="#publish_github" class="anchor"></a>Publishing on GitHub</h3><p>To publish your documentation set on GitHub you can use the <code>gh-pages-amend</code> tool distributed with <code>odig</code>. In the git repository for which you want to publish the documentation set invoke:</p><pre>gh-pages-amend $(odig cache path)/html doc</pre><p>this fetches the <code>gh-pages</code> on the <code>origin</code> remote, replaces the directory <code>doc</code> with the contents of <code>$(odig cache path)/html</code> by amending the last commit and pushes it back on the remote. The <code>gh-pages</code> branch is created if it does not exist and your current working directory is left untouched by the procedure.</p><p>See <code>gh-pages-amend --help</code> for more information and options.</p></div></body></html>
