<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bytes (js_of_ocaml-compiler.js_of_ocaml-compiler.Js_of_ocaml_compiler.Stdlib.Bytes)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../';
let search_urls = ['../../../../sherlodoc_db.js','../../../../../sherlodoc.js'];
</script><script src="../../../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../../../index.html">üè†</a> &#x00BB; <a href="../../../../index.html">js_of_ocaml-compiler</a> &#x00BB; Library <code>js_of_ocaml-compiler</code> &#x00BB; <a href="../../index.html">Js_of_ocaml_compiler</a> &#x00BB; <a href="../index.html">Stdlib</a> &#x00BB; Bytes</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Stdlib.Bytes</span></code><a href="../../../../src/js_of_ocaml-compiler/stdlib.ml.html#module-Bytes" class="source_link">Source</a></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../../../index.html">js_of_ocaml-compiler</a><ul><li>Library <code>js_of_ocaml-compiler</code><ul><li><a href="../../index.html">Js_of_ocaml_compiler</a><ul><li><a href="../../Annot_lexer/index.html">Annot_lexer</a></li><li><a href="../../Annot_parser/index.html">Annot_parser</a></li><li><a href="../../Base64/index.html">Base64</a></li><li><a href="../../Build_info/index.html">Build_info</a></li><li><a href="../../Build_path_prefix_map/index.html">Build_path_prefix_map</a></li><li><a href="../../Builtins/index.html">Builtins</a></li><li><a href="../../Code/index.html">Code</a></li><li><a href="../../Compiler_version/index.html">Compiler_version</a></li><li><a href="../../Config/index.html">Config</a></li><li><a href="../../Constant/index.html">Constant</a></li><li><a href="../../Deadcode/index.html">Deadcode</a></li><li><a href="../../Debug/index.html">Debug</a></li><li><a href="../../Dgraph/index.html">Dgraph</a></li><li><a href="../../Driver/index.html">Driver</a></li><li><a href="../../Duplicate/index.html">Duplicate</a></li><li><a href="../../Effects/index.html">Effects</a></li><li><a href="../../Eval/index.html">Eval</a></li><li><a href="../../Findlib/index.html">Findlib</a></li><li><a href="../../Flow/index.html">Flow</a></li><li><a href="../../Flow_lexer/index.html">Flow_lexer</a></li><li><a href="../../Freevars/index.html">Freevars</a></li><li><a href="../../Fs/index.html">Fs</a></li><li><a href="../../Generate/index.html">Generate</a></li><li><a href="../../Generate_closure/index.html">Generate_closure</a></li><li><a href="../../Global_deadcode/index.html">Global_deadcode</a></li><li><a href="../../Global_flow/index.html">Global_flow</a></li><li><a href="../../Inline/index.html">Inline</a></li><li><a href="../../Instr/index.html">Instr</a></li><li><a href="../../Javascript/index.html">Javascript</a></li><li><a href="../../Js_assign/index.html">Js_assign</a></li><li><a href="../../Js_output/index.html">Js_output</a></li><li><a href="../../Js_parser/index.html">Js_parser</a></li><li><a href="../../Js_simpl/index.html">Js_simpl</a></li><li><a href="../../Js_token/index.html">Js_token</a></li><li><a href="../../Js_traverse/index.html">Js_traverse</a></li><li><a href="../../Lambda_lifting/index.html">Lambda_lifting</a></li><li><a href="../../Link_js/index.html">Link_js</a></li><li><a href="../../Linker/index.html">Linker</a></li><li><a href="../../Loc/index.html">Loc</a></li><li><a href="../../Macro/index.html">Macro</a></li><li><a href="../../Magic_number/index.html">Magic_number</a></li><li><a href="../../Mlvalue/index.html">Mlvalue</a></li><li><a href="../../Ocaml_compiler/index.html">Ocaml_compiler</a></li><li><a href="../../Ocaml_version/index.html">Ocaml_version</a></li><li><a href="../../Parse_bytecode/index.html">Parse_bytecode</a></li><li><a href="../../Parse_info/index.html">Parse_info</a></li><li><a href="../../Parse_js/index.html">Parse_js</a></li><li><a href="../../Partial_cps_analysis/index.html">Partial_cps_analysis</a></li><li><a href="../../Phisimpl/index.html">Phisimpl</a></li><li><a href="../../Pretty_print/index.html">Pretty_print</a></li><li><a href="../../Primitive/index.html">Primitive</a></li><li><a href="../../Pseudo_fs/index.html">Pseudo_fs</a></li><li><a href="../../Pure_fun/index.html">Pure_fun</a></li><li><a href="../../Reserved/index.html">Reserved</a></li><li><a href="../../Source_map/index.html">Source_map</a></li><li><a href="../../Source_map_io/index.html">Source_map_io</a></li><li><a href="../../Specialize/index.html">Specialize</a></li><li><a href="../../Specialize_js/index.html">Specialize_js</a></li><li><a href="../index.html">Stdlib</a><ul><li><a href="../Poly/index.html">Poly</a></li><li><a href="../Int_replace_polymorphic_compare/index.html">Int_replace_polymorphic_compare</a></li><li><a href="../List/index.html">List</a></li><li><a href="../Nativeint/index.html">Nativeint</a></li><li><a href="../Int32/index.html">Int32</a></li><li><a href="../Option/index.html">Option</a></li><li><a href="../Int64/index.html">Int64</a></li><li><a href="../Float/index.html">Float</a></li><li><a href="../Bool/index.html">Bool</a></li><li><a href="../Char/index.html">Char</a></li><li><a href="../Uchar/index.html">Uchar</a></li><li><a href="../Buffer/index.html">Buffer</a></li><li><a href="#" class="current_unit">Bytes</a></li><li><a href="../String/index.html">String</a></li><li><a href="../Utf8_string/index.html">Utf8_string</a></li><li><a href="../Int/index.html">Int</a></li><li><a href="../IntSet/index.html">IntSet</a></li><li><a href="../IntMap/index.html">IntMap</a></li><li><a href="../StringSet/index.html">StringSet</a></li><li><a href="../StringMap/index.html">StringMap</a></li><li><a href="../Utf8_string_set/index.html">Utf8_string_set</a></li><li><a href="../Utf8_string_map/index.html">Utf8_string_map</a></li><li><a href="../BitSet/index.html">BitSet</a></li><li><a href="../Array/index.html">Array</a></li><li><a href="../Filename/index.html">Filename</a></li><li><a href="../Fun/index.html">Fun</a></li></ul></li><li><a href="../../Strongly_connected_components/index.html">Strongly_connected_components</a></li><li><a href="../../Structure/index.html">Structure</a></li><li><a href="../../Subst/index.html">Subst</a></li><li><a href="../../Tailcall/index.html">Tailcall</a></li><li><a href="../../Target_env/index.html">Target_env</a></li><li><a href="../../Timer/index.html">Timer</a></li><li><a href="../../Unit_info/index.html">Unit_info</a></li><li><a href="../../Var_printer/index.html">Var_printer</a></li><li><a href="../../Vlq64/index.html">Vlq64</a></li></ul></li></ul></li><li>Library <code>js_of_ocaml-compiler.dynlink</code><ul><li><a href="../../../../js_of_ocaml-compiler.dynlink/Js_of_ocaml_compiler_dynlink/index.html">Js_of_ocaml_compiler_dynlink</a></li></ul></li><li>Library <code>js_of_ocaml-compiler.findlib-support</code><ul><li><a href="../../../../js_of_ocaml-compiler.findlib-support/Jsoo_findlib_support/index.html">Jsoo_findlib_support</a></li></ul></li><li>Library <code>js_of_ocaml-compiler.runtime</code><ul><li><a href="../../../../js_of_ocaml-compiler.runtime/Jsoo_runtime/index.html">Jsoo_runtime</a></li></ul></li><li>Library <code>js_of_ocaml-compiler.runtime-files</code><ul><li><a href="../../../../js_of_ocaml-compiler.runtime-files/Js_of_ocaml_compiler_runtime_files/index.html">Js_of_ocaml_compiler_runtime_files</a></li></ul></li><li><a href="../../../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/BytesLabels/index.html">BytesLabels</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec value external anchored" id="val-length"><a href="#val-length" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-length" class="source_link">Source</a><code><span><span class="keyword">val</span> length : <span>bytes <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Return the length (number of bytes) of the argument.</p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-get"><a href="#val-get" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get" class="source_link">Source</a><code><span><span class="keyword">val</span> get : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> char</span></code></div><div class="spec-doc"><p><code>get s n</code> returns the byte at index <code>n</code> in argument <code>s</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>n</code> is not a valid index in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-set"><a href="#val-set" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set" class="source_link">Source</a><code><span><span class="keyword">val</span> set : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set s n c</code> modifies <code>s</code> in place, replacing the byte at index <code>n</code> with <code>c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>n</code> is not a valid index in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-create"><a href="#val-create" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-create" class="source_link">Source</a><code><span><span class="keyword">val</span> create : <span>int <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>create n</code> returns a new byte sequence of length <code>n</code>. The sequence is uninitialized and contains arbitrary bytes.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>n &lt; 0</code> or <code>n &gt; </code><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-make" class="source_link">Source</a><code><span><span class="keyword">val</span> make : <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>make n c</code> returns a new byte sequence of length <code>n</code>, filled with the byte <code>c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>n &lt; 0</code> or <code>n &gt; </code><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-init" class="source_link">Source</a><code><span><span class="keyword">val</span> init : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> char)</span> <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>init n f</code> returns a fresh byte sequence of length <code>n</code>, with character <code>i</code> initialized to the result of <code>f i</code> (in increasing index order).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>n &lt; 0</code> or <code>n &gt; </code><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-empty" class="source_link">Source</a><code><span><span class="keyword">val</span> empty : bytes</span></code></div><div class="spec-doc"><p>A byte sequence of size 0.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-copy" class="source_link">Source</a><code><span><span class="keyword">val</span> copy : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a new byte sequence that contains the same bytes as the argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-of_string" class="source_link">Source</a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a new byte sequence that contains the same bytes as the given string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-to_string" class="source_link">Source</a><code><span><span class="keyword">val</span> to_string : <span>bytes <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return a new string that contains the same bytes as the given byte sequence.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub"><a href="#val-sub" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-sub" class="source_link">Source</a><code><span><span class="keyword">val</span> sub : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span class="label">pos</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>sub s ~pos ~len</code> returns a new byte sequence of length <code>len</code>, containing the subsequence of <code>s</code> that starts at position <code>pos</code> and has length <code>len</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>pos</code> and <code>len</code> do not designate a valid range of <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extend"><a href="#val-extend" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-extend" class="source_link">Source</a><code><span><span class="keyword">val</span> extend : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span class="label">left</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">right</span>:int <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>extend s ~left ~right</code> returns a new byte sequence that contains the bytes of <code>s</code>, with <code>left</code> uninitialized bytes prepended and <code>right</code> uninitialized bytes appended to it. If <code>left</code> or <code>right</code> is negative, then bytes are removed (instead of appended) from the corresponding side of <code>s</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if the result length is negative or longer than <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a> bytes.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05 in BytesLabels</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fill"><a href="#val-fill" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-fill" class="source_link">Source</a><code><span><span class="keyword">val</span> fill : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span class="label">pos</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>fill s ~pos ~len c</code> modifies <code>s</code> in place, replacing <code>len</code> characters with <code>c</code>, starting at <code>pos</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>pos</code> and <code>len</code> do not designate a valid range of <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blit"><a href="#val-blit" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-blit" class="source_link">Source</a><code><span><span class="keyword">val</span> blit : 
  <span><span class="label">src</span>:bytes <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src_pos</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst</span>:bytes <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst_pos</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>blit ~src ~src_pos ~dst ~dst_pos ~len</code> copies <code>len</code> bytes from byte sequence <code>src</code>, starting at index <code>src_pos</code>, to byte sequence <code>dst</code>, starting at index <code>dst_pos</code>. It works correctly even if <code>src</code> and <code>dst</code> are the same byte sequence, and the source and destination intervals overlap.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>src_pos</code> and <code>len</code> do not designate a valid range of <code>src</code>, or if <code>dst_pos</code> and <code>len</code> do not designate a valid range of <code>dst</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-blit_string"><a href="#val-blit_string" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-blit_string" class="source_link">Source</a><code><span><span class="keyword">val</span> blit_string : 
  <span><span class="label">src</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src_pos</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst</span>:bytes <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst_pos</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>blit_string ~src ~src_pos ~dst ~dst_pos ~len</code> copies <code>len</code> bytes from string <code>src</code>, starting at index <code>src_pos</code>, to byte sequence <code>dst</code>, starting at index <code>dst_pos</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>src_pos</code> and <code>len</code> do not designate a valid range of <code>src</code>, or if <code>dst_pos</code> and <code>len</code> do not designate a valid range of <code>dst</code>.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05 in BytesLabels</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-concat" class="source_link">Source</a><code><span><span class="keyword">val</span> concat : <span><span class="label">sep</span>:bytes <span class="arrow">&#45;&gt;</span></span> <span><span>bytes list</span> <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>concat ~sep sl</code> concatenates the list of byte sequences <code>sl</code>, inserting the separator byte sequence <code>sep</code> between each, and returns the result as a new byte sequence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if the result is longer than <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a> bytes.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cat"><a href="#val-cat" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-cat" class="source_link">Source</a><code><span><span class="keyword">val</span> cat : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>cat s1 s2</code> concatenates <code>s1</code> and <code>s2</code> and returns the result as a new byte sequence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if the result is longer than <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a> bytes.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05 in BytesLabels</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-iter" class="source_link">Source</a><code><span><span class="keyword">val</span> iter : <span><span class="label">f</span>:<span>(<span>char <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter ~f s</code> applies function <code>f</code> in turn to all the bytes of <code>s</code>. It is equivalent to <code>f (get s 0); f (get s 1); ...; f (get s (length s - 1)); ()</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iteri"><a href="#val-iteri" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-iteri" class="source_link">Source</a><code><span><span class="keyword">val</span> iteri : <span><span class="label">f</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-iter"><code>iter</code></a>, but the function is applied to the index of the byte as first argument and the byte itself as second argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-map" class="source_link">Source</a><code><span><span class="keyword">val</span> map : <span><span class="label">f</span>:<span>(<span>char <span class="arrow">&#45;&gt;</span></span> char)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>map ~f s</code> applies function <code>f</code> in turn to all the bytes of <code>s</code> (in increasing index order) and stores the resulting bytes in a new sequence that is returned as the result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapi"><a href="#val-mapi" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-mapi" class="source_link">Source</a><code><span><span class="keyword">val</span> mapi : <span><span class="label">f</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> char)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p><code>mapi ~f s</code> calls <code>f</code> with each character of <code>s</code> and its index (in increasing index order) and stores the resulting bytes in a new sequence that is returned as the result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_left"><a href="#val-fold_left" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-fold_left" class="source_link">Source</a><code><span><span class="keyword">val</span> fold_left : <span><span class="label">f</span>:<span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold_left f x s</code> computes <code>f (... (f (f x (get s 0)) (get s 1)) ...) (get s (n-1))</code>, where <code>n</code> is the length of <code>s</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_right"><a href="#val-fold_right" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-fold_right" class="source_link">Source</a><code><span><span class="keyword">val</span> fold_right : <span><span class="label">f</span>:<span>(<span>char <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span class="label">init</span>:<span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold_right f s x</code> computes <code>f (get s 0) (f (get s 1) ( ... (f (get s (n-1)) x) ...))</code>, where <code>n</code> is the length of <code>s</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-for_all"><a href="#val-for_all" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-for_all" class="source_link">Source</a><code><span><span class="keyword">val</span> for_all : <span><span class="label">f</span>:<span>(<span>char <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>for_all p s</code> checks if all characters in <code>s</code> satisfy the predicate <code>p</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-exists" class="source_link">Source</a><code><span><span class="keyword">val</span> exists : <span><span class="label">f</span>:<span>(<span>char <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>exists p s</code> checks if at least one character of <code>s</code> satisfies the predicate <code>p</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trim"><a href="#val-trim" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-trim" class="source_link">Source</a><code><span><span class="keyword">val</span> trim : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, without leading and trailing whitespace. The bytes regarded as whitespace are the ASCII characters <code>' '</code>, <code>'\012'</code>, <code>'\n'</code>, <code>'\r'</code>, and <code>'\t'</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-escaped"><a href="#val-escaped" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-escaped" class="source_link">Source</a><code><span><span class="keyword">val</span> escaped : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, with special characters represented by escape sequences, following the lexical conventions of OCaml. All characters outside the ASCII printable range (32..126) are escaped, as well as backslash and double-quote.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if the result is longer than <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-max_string_length"><code>Sys.max_string_length</code></a> bytes.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index"><a href="#val-index" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-index" class="source_link">Source</a><code><span><span class="keyword">val</span> index : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>index s c</code> returns the index of the first occurrence of byte <code>c</code> in <code>s</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Not_found"><code>Not_found</code></a> <p>if <code>c</code> does not occur in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index_opt"><a href="#val-index_opt" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-index_opt" class="source_link">Source</a><code><span><span class="keyword">val</span> index_opt : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>index_opt s c</code> returns the index of the first occurrence of byte <code>c</code> in <code>s</code> or <code>None</code> if <code>c</code> does not occur in <code>s</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rindex"><a href="#val-rindex" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-rindex" class="source_link">Source</a><code><span><span class="keyword">val</span> rindex : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>rindex s c</code> returns the index of the last occurrence of byte <code>c</code> in <code>s</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Not_found"><code>Not_found</code></a> <p>if <code>c</code> does not occur in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rindex_opt"><a href="#val-rindex_opt" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-rindex_opt" class="source_link">Source</a><code><span><span class="keyword">val</span> rindex_opt : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>rindex_opt s c</code> returns the index of the last occurrence of byte <code>c</code> in <code>s</code> or <code>None</code> if <code>c</code> does not occur in <code>s</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index_from"><a href="#val-index_from" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-index_from" class="source_link">Source</a><code><span><span class="keyword">val</span> index_from : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>index_from s i c</code> returns the index of the first occurrence of byte <code>c</code> in <code>s</code> after position <code>i</code>. <code>index s c</code> is equivalent to <code>index_from s 0 c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>i</code> is not a valid position in <code>s</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Not_found"><code>Not_found</code></a> <p>if <code>c</code> does not occur in <code>s</code> after position <code>i</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index_from_opt"><a href="#val-index_from_opt" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-index_from_opt" class="source_link">Source</a><code><span><span class="keyword">val</span> index_from_opt : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>index_from_opt s i c</code> returns the index of the first occurrence of byte <code>c</code> in <code>s</code> after position <code>i</code> or <code>None</code> if <code>c</code> does not occur in <code>s</code> after position <code>i</code>. <code>index_opt s c</code> is equivalent to <code>index_from_opt s 0 c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>i</code> is not a valid position in <code>s</code>.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rindex_from"><a href="#val-rindex_from" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-rindex_from" class="source_link">Source</a><code><span><span class="keyword">val</span> rindex_from : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>rindex_from s i c</code> returns the index of the last occurrence of byte <code>c</code> in <code>s</code> before position <code>i+1</code>. <code>rindex s c</code> is equivalent to <code>rindex_from s (length s - 1) c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>i+1</code> is not a valid position in <code>s</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Not_found"><code>Not_found</code></a> <p>if <code>c</code> does not occur in <code>s</code> before position <code>i+1</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rindex_from_opt"><a href="#val-rindex_from_opt" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-rindex_from_opt" class="source_link">Source</a><code><span><span class="keyword">val</span> rindex_from_opt : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>rindex_from_opt s i c</code> returns the index of the last occurrence of byte <code>c</code> in <code>s</code> before position <code>i+1</code> or <code>None</code> if <code>c</code> does not occur in <code>s</code> before position <code>i+1</code>. <code>rindex_opt s c</code> is equivalent to <code>rindex_from s (length s - 1) c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>i+1</code> is not a valid position in <code>s</code>.</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contains"><a href="#val-contains" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-contains" class="source_link">Source</a><code><span><span class="keyword">val</span> contains : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>contains s c</code> tests if byte <code>c</code> appears in <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contains_from"><a href="#val-contains_from" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-contains_from" class="source_link">Source</a><code><span><span class="keyword">val</span> contains_from : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>contains_from s start c</code> tests if byte <code>c</code> appears in <code>s</code> after position <code>start</code>. <code>contains s c</code> is equivalent to <code>contains_from s 0 c</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>start</code> is not a valid position in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rcontains_from"><a href="#val-rcontains_from" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-rcontains_from" class="source_link">Source</a><code><span><span class="keyword">val</span> rcontains_from : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>rcontains_from s stop c</code> tests if byte <code>c</code> appears in <code>s</code> before position <code>stop+1</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/index.html#exception-Invalid_argument"><code>Invalid_argument</code></a> <p>if <code>stop &lt; 0</code> or <code>stop+1</code> is not a valid position in <code>s</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uppercase_ascii"><a href="#val-uppercase_ascii" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-uppercase_ascii" class="source_link">Source</a><code><span><span class="keyword">val</span> uppercase_ascii : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, with all lowercase letters translated to uppercase, using the US-ASCII character set.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lowercase_ascii"><a href="#val-lowercase_ascii" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-lowercase_ascii" class="source_link">Source</a><code><span><span class="keyword">val</span> lowercase_ascii : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, with all uppercase letters translated to lowercase, using the US-ASCII character set.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-capitalize_ascii"><a href="#val-capitalize_ascii" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-capitalize_ascii" class="source_link">Source</a><code><span><span class="keyword">val</span> capitalize_ascii : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, with the first character set to uppercase, using the US-ASCII character set.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uncapitalize_ascii"><a href="#val-uncapitalize_ascii" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-uncapitalize_ascii" class="source_link">Source</a><code><span><span class="keyword">val</span> uncapitalize_ascii : <span>bytes <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Return a copy of the argument, with the first character set to lowercase, using the US-ASCII character set.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#type-t" class="source_link">Source</a><code><span><span class="keyword">type</span> t</span><span> = bytes</span></code></div><div class="spec-doc"><p>An alias for the type of byte sequences.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-compare" class="source_link">Source</a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>The comparison function for byte sequences, with the same specification as <a href="../index.html#val-compare"><code>Stdlib.compare</code></a>. Along with the type <code>t</code>, this function <code>compare</code> allows the module <code>Bytes</code> to be passed as argument to the functors <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Set/Make/index.html"><code>Set.Make</code></a> and <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Map/Make/index.html"><code>Map.Make</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-equal" class="source_link">Source</a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>The equality function for byte sequences.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.05</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-starts_with"><a href="#val-starts_with" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-starts_with" class="source_link">Source</a><code><span><span class="keyword">val</span> starts_with : <span><span class="label">prefix</span>:bytes <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>starts_with </code><code>~prefix s</code> is <code>true</code> if and only if <code>s</code> starts with <code>prefix</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ends_with"><a href="#val-ends_with" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-ends_with" class="source_link">Source</a><code><span><span class="keyword">val</span> ends_with : <span><span class="label">suffix</span>:bytes <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>ends_with </code><code>~suffix s</code> is <code>true</code> if and only if <code>s</code> ends with <code>suffix</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><h2 id="unsafe"><a href="#unsafe" class="anchor"></a>Unsafe conversions (for advanced users)</h2><p>This section describes unsafe, low-level conversion functions between <code>bytes</code> and <code>string</code>. They do not copy the internal data; used improperly, they can break the immutability invariant on strings provided by the <code>-safe-string</code> option. They are available for expert library authors, but for most purposes you should use the always-correct <a href="#val-to_string"><code>to_string</code></a> and <a href="#val-of_string"><code>of_string</code></a> instead.</p><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_to_string"><a href="#val-unsafe_to_string" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-unsafe_to_string" class="source_link">Source</a><code><span><span class="keyword">val</span> unsafe_to_string : <span>bytes <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Unsafely convert a byte sequence into a string.</p><p>To reason about the use of <code>unsafe_to_string</code>, it is convenient to consider an &quot;ownership&quot; discipline. A piece of code that manipulates some data &quot;owns&quot; it; there are several disjoint ownership modes, including:</p><ul><li>Unique ownership: the data may be accessed and mutated</li><li>Shared ownership: the data has several owners, that may only access it, not mutate it.</li></ul><p>Unique ownership is linear: passing the data to another piece of code means giving up ownership (we cannot write the data again). A unique owner may decide to make the data shared (giving up mutation rights on it), but shared data may not become uniquely-owned again.</p><p><code>unsafe_to_string s</code> can only be used when the caller owns the byte sequence <code>s</code> -- either uniquely or as shared immutable data. The caller gives up ownership of <code>s</code>, and gains ownership of the returned string.</p><p>There are two valid use-cases that respect this ownership discipline:</p><p>1. Creating a string by initializing and mutating a byte sequence that is never changed after initialization is performed.</p><pre class="language-ocaml"><code>let string_init len f : string =
  let s = Bytes.create len in
  for i = 0 to len - 1 do Bytes.set s i (f i) done;
  Bytes.unsafe_to_string s</code></pre><p>This function is safe because the byte sequence <code>s</code> will never be accessed or mutated after <code>unsafe_to_string</code> is called. The <code>string_init</code> code gives up ownership of <code>s</code>, and returns the ownership of the resulting string to its caller.</p><p>Note that it would be unsafe if <code>s</code> was passed as an additional parameter to the function <code>f</code> as it could escape this way and be mutated in the future -- <code>string_init</code> would give up ownership of <code>s</code> to pass it to <code>f</code>, and could not call <code>unsafe_to_string</code> safely.</p><p>We have provided the <a href="../String/index.html#val-init"><code>String.init</code></a>, <a href="../String/index.html#val-map"><code>String.map</code></a> and <a href="../String/index.html#val-mapi"><code>String.mapi</code></a> functions to cover most cases of building new strings. You should prefer those over <code>to_string</code> or <code>unsafe_to_string</code> whenever applicable.</p><p>2. Temporarily giving ownership of a byte sequence to a function that expects a uniquely owned string and returns ownership back, so that we can mutate the sequence again after the call ended.</p><pre class="language-ocaml"><code>let bytes_length (s : bytes) =
  String.length (Bytes.unsafe_to_string s)</code></pre><p>In this use-case, we do not promise that <code>s</code> will never be mutated after the call to <code>bytes_length s</code>. The <a href="../String/index.html#val-length"><code>String.length</code></a> function temporarily borrows unique ownership of the byte sequence (and sees it as a <code>string</code>), but returns this ownership back to the caller, which may assume that <code>s</code> is still a valid byte sequence after the call. Note that this is only correct because we know that <a href="../String/index.html#val-length"><code>String.length</code></a> does not capture its argument -- it could escape by a side-channel such as a memoization combinator.</p><p>The caller may not mutate <code>s</code> while the string is borrowed (it has temporarily given up ownership). This affects concurrent programs, but also higher-order functions: if <a href="../String/index.html#val-length"><code>String.length</code></a> returned a closure to be called later, <code>s</code> should not be mutated until this closure is fully applied and returns ownership.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_of_string"><a href="#val-unsafe_of_string" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-unsafe_of_string" class="source_link">Source</a><code><span><span class="keyword">val</span> unsafe_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> bytes</span></code></div><div class="spec-doc"><p>Unsafely convert a shared string to a byte sequence that should not be mutated.</p><p>The same ownership discipline that makes <code>unsafe_to_string</code> correct applies to <code>unsafe_of_string</code>: you may use it if you were the owner of the <code>string</code> value, and you will own the return <code>bytes</code> in the same mode.</p><p>In practice, unique ownership of string values is extremely difficult to reason about correctly. You should always assume strings are shared, never uniquely owned.</p><p>For example, string literals are implicitly shared by the compiler, so you never uniquely own them.</p><pre class="language-ocaml"><code>let incorrect = Bytes.unsafe_of_string &quot;hello&quot;
let s = Bytes.of_string &quot;hello&quot;</code></pre><p>The first declaration is incorrect, because the string literal <code>&quot;hello&quot;</code> could be shared by the compiler with other parts of the program, and mutating <code>incorrect</code> is a bug. You must always use the second version, which performs a copy and is thus correct.</p><p>Assuming unique ownership of strings that are not string literals, but are (partly) built from string literals, is also incorrect. For example, mutating <code>unsafe_of_string (&quot;foo&quot; ^ s)</code> could mutate the shared string <code>&quot;foo&quot;</code> -- assuming a rope-like representation of strings. More generally, functions operating on strings will assume shared ownership, they do not preserve unique ownership. It is thus incorrect to assume unique ownership of the result of <code>unsafe_of_string</code>.</p><p>The only case we have reasonable confidence is safe is if the produced <code>bytes</code> is shared -- used as an immutable byte sequence. This is possibly useful for incremental migration of low-level programs that manipulate immutable sequences of bytes (for example <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Marshal/index.html#val-from_bytes"><code>Marshal.from_bytes</code></a>) and previously used the <code>string</code> type for this purpose.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split_on_char"><a href="#val-split_on_char" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-split_on_char" class="source_link">Source</a><code><span><span class="keyword">val</span> split_on_char : <span><span class="label">sep</span>:char <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>bytes list</span></span></code></div><div class="spec-doc"><p><code>split_on_char sep s</code> returns the list of all (possibly empty) subsequences of <code>s</code> that are delimited by the <code>sep</code> character. If <code>s</code> is empty, the result is the singleton list <code>[empty]</code>.</p><p>The function's output is specified by the following invariants:</p><ul><li>The list is not empty.</li><li>Concatenating its elements using <code>sep</code> as a separator returns a byte sequence equal to the input (<code>Bytes.concat (Bytes.make 1 sep) (Bytes.split_on_char sep s) = s</code>).</li><li>No byte sequence in the result contains the <code>sep</code> character.</li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.13</li></ul></div></div><h2 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h2><div class="odoc-spec"><div class="spec value anchored" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-to_seq" class="source_link">Source</a><code><span><span class="keyword">val</span> to_seq : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>char <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Seq/index.html#type-t">Seq.t</a></span></span></code></div><div class="spec-doc"><p>Iterate on the string, in increasing index order. Modifications of the string during iteration will be reflected in the sequence.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.07</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_seqi"><a href="#val-to_seqi" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-to_seqi" class="source_link">Source</a><code><span><span class="keyword">val</span> to_seqi : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * char)</span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Seq/index.html#type-t">Seq.t</a></span></span></code></div><div class="spec-doc"><p>Iterate on the string, in increasing order, yielding indices along chars</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.07</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_seq"><a href="#val-of_seq" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-of_seq" class="source_link">Source</a><code><span><span class="keyword">val</span> of_seq : <span><span>char <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Seq/index.html#type-t">Seq.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Create a string from the generator</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.07</li></ul></div></div><h2 id="utf"><a href="#utf" class="anchor"></a>UTF codecs and validations</h2><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.14</li></ul><h3 id="utf_8"><a href="#utf_8" class="anchor"></a>UTF-8</h3><div class="odoc-spec"><div class="spec value anchored" id="val-get_utf_8_uchar"><a href="#val-get_utf_8_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_utf_8_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> get_utf_8_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-utf_decode">Uchar.utf_decode</a></span></code></div><div class="spec-doc"><p><code>get_utf_8_uchar b i</code> decodes an UTF-8 character at index <code>i</code> in <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_utf_8_uchar"><a href="#val-set_utf_8_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_utf_8_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> set_utf_8_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-t">Uchar.t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>set_utf_8_uchar b i u</code> UTF-8 encodes <code>u</code> at index <code>i</code> in <code>b</code> and returns the number of bytes <code>n</code> that were written starting at <code>i</code>. If <code>n</code> is <code>0</code> there was not enough space to encode <code>u</code> at <code>i</code> and <code>b</code> was left untouched. Otherwise a new character can be encoded at <code>i + n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_valid_utf_8"><a href="#val-is_valid_utf_8" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-is_valid_utf_8" class="source_link">Source</a><code><span><span class="keyword">val</span> is_valid_utf_8 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_valid_utf_8 b</code> is <code>true</code> if and only if <code>b</code> contains valid UTF-8 data.</p></div></div><h3 id="utf_16be"><a href="#utf_16be" class="anchor"></a>UTF-16BE</h3><div class="odoc-spec"><div class="spec value anchored" id="val-get_utf_16be_uchar"><a href="#val-get_utf_16be_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_utf_16be_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> get_utf_16be_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-utf_decode">Uchar.utf_decode</a></span></code></div><div class="spec-doc"><p><code>get_utf_16be_uchar b i</code> decodes an UTF-16BE character at index <code>i</code> in <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_utf_16be_uchar"><a href="#val-set_utf_16be_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_utf_16be_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> set_utf_16be_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-t">Uchar.t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>set_utf_16be_uchar b i u</code> UTF-16BE encodes <code>u</code> at index <code>i</code> in <code>b</code> and returns the number of bytes <code>n</code> that were written starting at <code>i</code>. If <code>n</code> is <code>0</code> there was not enough space to encode <code>u</code> at <code>i</code> and <code>b</code> was left untouched. Otherwise a new character can be encoded at <code>i + n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_valid_utf_16be"><a href="#val-is_valid_utf_16be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-is_valid_utf_16be" class="source_link">Source</a><code><span><span class="keyword">val</span> is_valid_utf_16be : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_valid_utf_16be b</code> is <code>true</code> if and only if <code>b</code> contains valid UTF-16BE data.</p></div></div><h3 id="utf_16le"><a href="#utf_16le" class="anchor"></a>UTF-16LE</h3><div class="odoc-spec"><div class="spec value anchored" id="val-get_utf_16le_uchar"><a href="#val-get_utf_16le_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_utf_16le_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> get_utf_16le_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-utf_decode">Uchar.utf_decode</a></span></code></div><div class="spec-doc"><p><code>get_utf_16le_uchar b i</code> decodes an UTF-16LE character at index <code>i</code> in <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_utf_16le_uchar"><a href="#val-set_utf_16le_uchar" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_utf_16le_uchar" class="source_link">Source</a><code><span><span class="keyword">val</span> set_utf_16le_uchar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Uchar/index.html#type-t">Uchar.t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>set_utf_16le_uchar b i u</code> UTF-16LE encodes <code>u</code> at index <code>i</code> in <code>b</code> and returns the number of bytes <code>n</code> that were written starting at <code>i</code>. If <code>n</code> is <code>0</code> there was not enough space to encode <code>u</code> at <code>i</code> and <code>b</code> was left untouched. Otherwise a new character can be encoded at <code>i + n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_valid_utf_16le"><a href="#val-is_valid_utf_16le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-is_valid_utf_16le" class="source_link">Source</a><code><span><span class="keyword">val</span> is_valid_utf_16le : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_valid_utf_16le b</code> is <code>true</code> if and only if <code>b</code> contains valid UTF-16LE data.</p></div></div><h2 id="binary-encoding/decoding-of-integers"><a href="#binary-encoding/decoding-of-integers" class="anchor"></a>Binary encoding/decoding of integers</h2><p>The functions in this section binary encode and decode integers to and from byte sequences.</p><p>All following functions raise <code>Invalid_argument</code> if the space needed at index <code>i</code> to decode or encode the integer is not available.</p><p>Little-endian (resp. big-endian) encoding means that least (resp. most) significant bytes are stored first. Big-endian is also known as network byte order. Native-endian encoding is either little-endian or big-endian depending on <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Sys/index.html#val-big_endian"><code>Sys.big_endian</code></a>.</p><p>32-bit and 64-bit integers are represented by the <code>int32</code> and <code>int64</code> types, which can be interpreted either as signed or unsigned numbers.</p><p>8-bit and 16-bit integers are represented by the <code>int</code> type, which has more bits than the binary encoding. These extra bits are handled as follows:</p><ul><li>Functions that decode signed (resp. unsigned) 8-bit or 16-bit integers represented by <code>int</code> values sign-extend (resp. zero-extend) their result.</li><li>Functions that encode 8-bit or 16-bit integers represented by <code>int</code> values truncate their input to their least significant bytes.</li></ul><div class="odoc-spec"><div class="spec value anchored" id="val-get_uint8"><a href="#val-get_uint8" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_uint8" class="source_link">Source</a><code><span><span class="keyword">val</span> get_uint8 : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_uint8 b i</code> is <code>b</code>'s unsigned 8-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int8"><a href="#val-get_int8" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int8" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int8 : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_int8 b i</code> is <code>b</code>'s signed 8-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_uint16_ne"><a href="#val-get_uint16_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_uint16_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> get_uint16_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_uint16_ne b i</code> is <code>b</code>'s native-endian unsigned 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_uint16_be"><a href="#val-get_uint16_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_uint16_be" class="source_link">Source</a><code><span><span class="keyword">val</span> get_uint16_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_uint16_be b i</code> is <code>b</code>'s big-endian unsigned 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_uint16_le"><a href="#val-get_uint16_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_uint16_le" class="source_link">Source</a><code><span><span class="keyword">val</span> get_uint16_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_uint16_le b i</code> is <code>b</code>'s little-endian unsigned 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int16_ne"><a href="#val-get_int16_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int16_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int16_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_int16_ne b i</code> is <code>b</code>'s native-endian signed 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int16_be"><a href="#val-get_int16_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int16_be" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int16_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_int16_be b i</code> is <code>b</code>'s big-endian signed 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int16_le"><a href="#val-get_int16_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int16_le" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int16_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_int16_le b i</code> is <code>b</code>'s little-endian signed 16-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int32_ne"><a href="#val-get_int32_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int32_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int32_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int32</span></code></div><div class="spec-doc"><p><code>get_int32_ne b i</code> is <code>b</code>'s native-endian 32-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int32_be"><a href="#val-get_int32_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int32_be" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int32_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int32</span></code></div><div class="spec-doc"><p><code>get_int32_be b i</code> is <code>b</code>'s big-endian 32-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int32_le"><a href="#val-get_int32_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int32_le" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int32_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int32</span></code></div><div class="spec-doc"><p><code>get_int32_le b i</code> is <code>b</code>'s little-endian 32-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int64_ne"><a href="#val-get_int64_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int64_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int64_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>get_int64_ne b i</code> is <code>b</code>'s native-endian 64-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int64_be"><a href="#val-get_int64_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int64_be" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int64_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>get_int64_be b i</code> is <code>b</code>'s big-endian 64-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_int64_le"><a href="#val-get_int64_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get_int64_le" class="source_link">Source</a><code><span><span class="keyword">val</span> get_int64_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>get_int64_le b i</code> is <code>b</code>'s little-endian 64-bit integer starting at byte index <code>i</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_uint8"><a href="#val-set_uint8" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_uint8" class="source_link">Source</a><code><span><span class="keyword">val</span> set_uint8 : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_uint8 b i v</code> sets <code>b</code>'s unsigned 8-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int8"><a href="#val-set_int8" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int8" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int8 : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int8 b i v</code> sets <code>b</code>'s signed 8-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_uint16_ne"><a href="#val-set_uint16_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_uint16_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> set_uint16_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_uint16_ne b i v</code> sets <code>b</code>'s native-endian unsigned 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_uint16_be"><a href="#val-set_uint16_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_uint16_be" class="source_link">Source</a><code><span><span class="keyword">val</span> set_uint16_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_uint16_be b i v</code> sets <code>b</code>'s big-endian unsigned 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_uint16_le"><a href="#val-set_uint16_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_uint16_le" class="source_link">Source</a><code><span><span class="keyword">val</span> set_uint16_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_uint16_le b i v</code> sets <code>b</code>'s little-endian unsigned 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int16_ne"><a href="#val-set_int16_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int16_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int16_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int16_ne b i v</code> sets <code>b</code>'s native-endian signed 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int16_be"><a href="#val-set_int16_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int16_be" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int16_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int16_be b i v</code> sets <code>b</code>'s big-endian signed 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int16_le"><a href="#val-set_int16_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int16_le" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int16_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int16_le b i v</code> sets <code>b</code>'s little-endian signed 16-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int32_ne"><a href="#val-set_int32_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int32_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int32_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int32_ne b i v</code> sets <code>b</code>'s native-endian 32-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int32_be"><a href="#val-set_int32_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int32_be" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int32_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int32_be b i v</code> sets <code>b</code>'s big-endian 32-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int32_le"><a href="#val-set_int32_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int32_le" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int32_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int32_le b i v</code> sets <code>b</code>'s little-endian 32-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int64_ne"><a href="#val-set_int64_ne" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int64_ne" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int64_ne : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int64_ne b i v</code> sets <code>b</code>'s native-endian 64-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int64_be"><a href="#val-set_int64_be" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int64_be" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int64_be : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int64_be b i v</code> sets <code>b</code>'s big-endian 64-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_int64_le"><a href="#val-set_int64_le" class="anchor"></a><a href="../../../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set_int64_le" class="source_link">Source</a><code><span><span class="keyword">val</span> set_int64_le : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_int64_le b i v</code> sets <code>b</code>'s little-endian 64-bit integer starting at byte index <code>i</code> to <code>v</code>.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 4.08</li></ul></div></div><h2 id="bytes_concurrency"><a href="#bytes_concurrency" class="anchor"></a>Byte sequences and concurrency safety</h2><p>Care must be taken when concurrently accessing byte sequences from multiple domains: accessing a byte sequence will never crash a program, but unsynchronized accesses might yield surprising (non-sequentially-consistent) results.</p><h3 id="byte_atomicity"><a href="#byte_atomicity" class="anchor"></a>Atomicity</h3><p>Every byte sequence operation that accesses more than one byte is not atomic. This includes iteration and scanning.</p><p>For example, consider the following program:</p><pre class="language-ocaml"><code>let size = 100_000_000
let b = Bytes.make size  ' '
let update b f ()  =
  Bytes.iteri (fun i x -&gt; Bytes.set b i (Char.chr (f (Char.code x)))) b
let d1 = Domain.spawn (update b (fun x -&gt; x + 1))
let d2 = Domain.spawn (update b (fun x -&gt; 2 * x + 1))
let () = Domain.join d1; Domain.join d2</code></pre><p>the bytes sequence <code>b</code> may contain a non-deterministic mixture of <code>'!'</code>, <code>'A'</code>, <code>'B'</code>, and <code>'C'</code> values.</p><p>After executing this code, each byte of the sequence <code>b</code> is either <code>'!'</code>, <code>'A'</code>, <code>'B'</code>, or <code>'C'</code>. If atomicity is required, then the user must implement their own synchronization (for example, using <a href="../../../../../ocaml-base-compiler/stdlib/Stdlib/Mutex/index.html#type-t"><code>Mutex.t</code></a>).</p><h3 id="bytes_data_race"><a href="#bytes_data_race" class="anchor"></a>Data races</h3><p>If two domains only access disjoint parts of a byte sequence, then the observed behaviour is the equivalent to some sequential interleaving of the operations from the two domains.</p><p>A data race is said to occur when two domains access the same byte without synchronization and at least one of the accesses is a write. In the absence of data races, the observed behaviour is equivalent to some sequential interleaving of the operations from different domains.</p><p>Whenever possible, data races should be avoided by using synchronization to mediate the accesses to the elements of the sequence.</p><p>Indeed, in the presence of data races, programs will not crash but the observed behaviour may not be equivalent to any sequential interleaving of operations from different domains. Nevertheless, even in the presence of data races, a read operation will return the value of some prior write to that location.</p><h3 id="bytes_mixed_access"><a href="#bytes_mixed_access" class="anchor"></a>Mixed-size accesses</h3><p>Another subtle point is that if a data race involves mixed-size writes and reads to the same location, the order in which those writes and reads are observed by domains is not specified. For instance, the following code write sequentially a 32-bit integer and a <code>char</code> to the same index</p><pre class="language-ocaml"><code>let b = Bytes.make 10 '\000'
let d1 = Domain.spawn (fun () -&gt; Bytes.set_int32_ne b 0 100; b.[0] &lt;- 'd' )</code></pre><p>In this situation, a domain that observes the write of 'd' to b.<code>0</code> is not guaranteed to also observe the write to indices <code>1</code>, <code>2</code>, or <code>3</code>.</p></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub_string"><a href="#val-sub_string" class="anchor"></a><a href="../../../../src/js_of_ocaml-compiler/stdlib.ml.html#module-Bytes.val-sub_string" class="source_link">Source</a><code><span><span class="keyword">val</span> sub_string : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span class="label">pos</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div></div></body></html>
