<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: cstubs_generate_ml.ml (ctypes.src.ctypes.stubs)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ctypes</a> &#x00BB; <a href="../index.html">Sources</a> &#x00BB; ctypes.stubs &#x00BB; cstubs_generate_ml.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>cstubs_generate_ml.ml</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">ctypes</a><ul><li>Library <code>ctypes</code><ul><li><a href="../../ctypes/ComplexL/index.html">ComplexL</a></li><li><a href="../../ctypes/Cstubs_internals/index.html">Cstubs_internals</a></li><li><a href="../../ctypes/Ctypes/index.html">Ctypes</a></li><li><a href="../../ctypes/Ctypes_bigarray/index.html">Ctypes_bigarray</a></li><li><a href="../../ctypes/Ctypes_bigarray_stubs/index.html">Ctypes_bigarray_stubs</a></li><li><a href="../../ctypes/Ctypes_coerce/index.html">Ctypes_coerce</a></li><li><a href="../../ctypes/Ctypes_memory/index.html">Ctypes_memory</a></li><li><a href="../../ctypes/Ctypes_memory_stubs/index.html">Ctypes_memory_stubs</a></li><li><a href="../../ctypes/Ctypes_primitive_types/index.html">Ctypes_primitive_types</a></li><li><a href="../../ctypes/Ctypes_primitives/index.html">Ctypes_primitives</a></li><li><a href="../../ctypes/Ctypes_ptr/index.html">Ctypes_ptr</a></li><li><a href="../../ctypes/Ctypes_roots_stubs/index.html">Ctypes_roots_stubs</a></li><li><a href="../../ctypes/Ctypes_static/index.html">Ctypes_static</a></li><li><a href="../../ctypes/Ctypes_std_view_stubs/index.html">Ctypes_std_view_stubs</a></li><li><a href="../../ctypes/Ctypes_std_views/index.html">Ctypes_std_views</a></li><li><a href="../../ctypes/Ctypes_structs/index.html">Ctypes_structs</a></li><li><a href="../../ctypes/Ctypes_structs_computed/index.html">Ctypes_structs_computed</a></li><li><a href="../../ctypes/Ctypes_type_printing/index.html">Ctypes_type_printing</a></li><li><a href="../../ctypes/Ctypes_types/index.html">Ctypes_types</a></li><li><a href="../../ctypes/Ctypes_value_printing/index.html">Ctypes_value_printing</a></li><li><a href="../../ctypes/Ctypes_value_printing_stubs/index.html">Ctypes_value_printing_stubs</a></li><li><a href="../../ctypes/LDouble/index.html">LDouble</a></li><li><a href="../../ctypes/PosixTypes/index.html">PosixTypes</a></li></ul></li><li>Library <code>ctypes.stubs</code><ul><li><a href="../../ctypes.stubs/Cstubs/index.html">Cstubs</a></li><li><a href="../../ctypes.stubs/Cstubs_analysis/index.html">Cstubs_analysis</a></li><li><a href="../../ctypes.stubs/Cstubs_c_language/index.html">Cstubs_c_language</a></li><li><a href="../../ctypes.stubs/Cstubs_emit_c/index.html">Cstubs_emit_c</a></li><li><a href="../../ctypes.stubs/Cstubs_errors/index.html">Cstubs_errors</a></li><li><a href="../../ctypes.stubs/Cstubs_generate_c/index.html">Cstubs_generate_c</a></li><li><a href="../../ctypes.stubs/Cstubs_generate_ml/index.html">Cstubs_generate_ml</a></li><li><a href="../../ctypes.stubs/Cstubs_inverted/index.html">Cstubs_inverted</a></li><li><a href="../../ctypes.stubs/Cstubs_public_name/index.html">Cstubs_public_name</a></li><li><a href="../../ctypes.stubs/Cstubs_structs/index.html">Cstubs_structs</a></li><li><a href="../../ctypes.stubs/Ctypes_path/index.html">Ctypes_path</a></li></ul></li><li>Library <code>ctypes.top</code><ul><li><a href="../../ctypes.top/Ctypes_top/index.html">Ctypes_top</a></li></ul></li><li><a href="../index.html">Sources</a><ul><li>ctypes<ul><li><a href="../ctypes/complexL.ml.html">complexL.ml</a></li><li><a href="../ctypes/cstubs_internals.ml.html">cstubs_internals.ml</a></li><li><a href="../ctypes/ctypes.ml.html">ctypes.ml</a></li><li><a href="../ctypes/ctypes_bigarray.ml.html">ctypes_bigarray.ml</a></li><li><a href="../ctypes/ctypes_bigarray_stubs.ml.html">ctypes_bigarray_stubs.ml</a></li><li><a href="../ctypes/ctypes_coerce.ml.html">ctypes_coerce.ml</a></li><li><a href="../ctypes/ctypes_memory.ml.html">ctypes_memory.ml</a></li><li><a href="../ctypes/ctypes_memory_stubs.ml.html">ctypes_memory_stubs.ml</a></li><li><a href="../ctypes/ctypes_primitive_types.ml.html">ctypes_primitive_types.ml</a></li><li><a href="../ctypes/ctypes_primitives.ml.html">ctypes_primitives.ml</a></li><li><a href="../ctypes/ctypes_ptr.ml.html">ctypes_ptr.ml</a></li><li><a href="../ctypes/ctypes_roots_stubs.ml.html">ctypes_roots_stubs.ml</a></li><li><a href="../ctypes/ctypes_static.ml.html">ctypes_static.ml</a></li><li><a href="../ctypes/ctypes_std_view_stubs.ml.html">ctypes_std_view_stubs.ml</a></li><li><a href="../ctypes/ctypes_std_views.ml.html">ctypes_std_views.ml</a></li><li><a href="../ctypes/ctypes_structs.ml.html">ctypes_structs.ml</a></li><li><a href="../ctypes/ctypes_structs_computed.ml.html">ctypes_structs_computed.ml</a></li><li><a href="../ctypes/ctypes_type_printing.ml.html">ctypes_type_printing.ml</a></li><li><a href="../ctypes/ctypes_value_printing.ml.html">ctypes_value_printing.ml</a></li><li><a href="../ctypes/ctypes_value_printing_stubs.ml.html">ctypes_value_printing_stubs.ml</a></li><li><a href="../ctypes/lDouble.ml.html">lDouble.ml</a></li><li><a href="../ctypes/posixTypes.ml.html">posixTypes.ml</a></li></ul></li><li>ctypes.stubs<ul><li><a href="cstubs.ml.html">cstubs.ml</a></li><li><a href="cstubs_analysis.ml.html">cstubs_analysis.ml</a></li><li><a href="cstubs_c_language.ml.html">cstubs_c_language.ml</a></li><li><a href="cstubs_emit_c.ml.html">cstubs_emit_c.ml</a></li><li><a href="cstubs_errors.ml.html">cstubs_errors.ml</a></li><li><a href="cstubs_generate_c.ml.html">cstubs_generate_c.ml</a></li><li><a href="#" class="current_unit">cstubs_generate_ml.ml</a></li><li><a href="cstubs_inverted.ml.html">cstubs_inverted.ml</a></li><li><a href="cstubs_public_name.ml.html">cstubs_public_name.ml</a></li><li><a href="cstubs_structs.ml.html">cstubs_structs.ml</a></li><li><a href="ctypes_path.ml.html">ctypes_path.ml</a></li></ul></li><li>ctypes.top<ul><li><a href="../ctypes.top/ctypes_top.ml.html">ctypes_top.ml</a></li><li><a href="../ctypes.top/install_ctypes_printers.ml.html">install_ctypes_printers.ml</a></li></ul></li></ul></li></ul></li></ul></nav></div><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
<a id="L179" class="source_line" href="#L179">179</a>
<a id="L180" class="source_line" href="#L180">180</a>
<a id="L181" class="source_line" href="#L181">181</a>
<a id="L182" class="source_line" href="#L182">182</a>
<a id="L183" class="source_line" href="#L183">183</a>
<a id="L184" class="source_line" href="#L184">184</a>
<a id="L185" class="source_line" href="#L185">185</a>
<a id="L186" class="source_line" href="#L186">186</a>
<a id="L187" class="source_line" href="#L187">187</a>
<a id="L188" class="source_line" href="#L188">188</a>
<a id="L189" class="source_line" href="#L189">189</a>
<a id="L190" class="source_line" href="#L190">190</a>
<a id="L191" class="source_line" href="#L191">191</a>
<a id="L192" class="source_line" href="#L192">192</a>
<a id="L193" class="source_line" href="#L193">193</a>
<a id="L194" class="source_line" href="#L194">194</a>
<a id="L195" class="source_line" href="#L195">195</a>
<a id="L196" class="source_line" href="#L196">196</a>
<a id="L197" class="source_line" href="#L197">197</a>
<a id="L198" class="source_line" href="#L198">198</a>
<a id="L199" class="source_line" href="#L199">199</a>
<a id="L200" class="source_line" href="#L200">200</a>
<a id="L201" class="source_line" href="#L201">201</a>
<a id="L202" class="source_line" href="#L202">202</a>
<a id="L203" class="source_line" href="#L203">203</a>
<a id="L204" class="source_line" href="#L204">204</a>
<a id="L205" class="source_line" href="#L205">205</a>
<a id="L206" class="source_line" href="#L206">206</a>
<a id="L207" class="source_line" href="#L207">207</a>
<a id="L208" class="source_line" href="#L208">208</a>
<a id="L209" class="source_line" href="#L209">209</a>
<a id="L210" class="source_line" href="#L210">210</a>
<a id="L211" class="source_line" href="#L211">211</a>
<a id="L212" class="source_line" href="#L212">212</a>
<a id="L213" class="source_line" href="#L213">213</a>
<a id="L214" class="source_line" href="#L214">214</a>
<a id="L215" class="source_line" href="#L215">215</a>
<a id="L216" class="source_line" href="#L216">216</a>
<a id="L217" class="source_line" href="#L217">217</a>
<a id="L218" class="source_line" href="#L218">218</a>
<a id="L219" class="source_line" href="#L219">219</a>
<a id="L220" class="source_line" href="#L220">220</a>
<a id="L221" class="source_line" href="#L221">221</a>
<a id="L222" class="source_line" href="#L222">222</a>
<a id="L223" class="source_line" href="#L223">223</a>
<a id="L224" class="source_line" href="#L224">224</a>
<a id="L225" class="source_line" href="#L225">225</a>
<a id="L226" class="source_line" href="#L226">226</a>
<a id="L227" class="source_line" href="#L227">227</a>
<a id="L228" class="source_line" href="#L228">228</a>
<a id="L229" class="source_line" href="#L229">229</a>
<a id="L230" class="source_line" href="#L230">230</a>
<a id="L231" class="source_line" href="#L231">231</a>
<a id="L232" class="source_line" href="#L232">232</a>
<a id="L233" class="source_line" href="#L233">233</a>
<a id="L234" class="source_line" href="#L234">234</a>
<a id="L235" class="source_line" href="#L235">235</a>
<a id="L236" class="source_line" href="#L236">236</a>
<a id="L237" class="source_line" href="#L237">237</a>
<a id="L238" class="source_line" href="#L238">238</a>
<a id="L239" class="source_line" href="#L239">239</a>
<a id="L240" class="source_line" href="#L240">240</a>
<a id="L241" class="source_line" href="#L241">241</a>
<a id="L242" class="source_line" href="#L242">242</a>
<a id="L243" class="source_line" href="#L243">243</a>
<a id="L244" class="source_line" href="#L244">244</a>
<a id="L245" class="source_line" href="#L245">245</a>
<a id="L246" class="source_line" href="#L246">246</a>
<a id="L247" class="source_line" href="#L247">247</a>
<a id="L248" class="source_line" href="#L248">248</a>
<a id="L249" class="source_line" href="#L249">249</a>
<a id="L250" class="source_line" href="#L250">250</a>
<a id="L251" class="source_line" href="#L251">251</a>
<a id="L252" class="source_line" href="#L252">252</a>
<a id="L253" class="source_line" href="#L253">253</a>
<a id="L254" class="source_line" href="#L254">254</a>
<a id="L255" class="source_line" href="#L255">255</a>
<a id="L256" class="source_line" href="#L256">256</a>
<a id="L257" class="source_line" href="#L257">257</a>
<a id="L258" class="source_line" href="#L258">258</a>
<a id="L259" class="source_line" href="#L259">259</a>
<a id="L260" class="source_line" href="#L260">260</a>
<a id="L261" class="source_line" href="#L261">261</a>
<a id="L262" class="source_line" href="#L262">262</a>
<a id="L263" class="source_line" href="#L263">263</a>
<a id="L264" class="source_line" href="#L264">264</a>
<a id="L265" class="source_line" href="#L265">265</a>
<a id="L266" class="source_line" href="#L266">266</a>
<a id="L267" class="source_line" href="#L267">267</a>
<a id="L268" class="source_line" href="#L268">268</a>
<a id="L269" class="source_line" href="#L269">269</a>
<a id="L270" class="source_line" href="#L270">270</a>
<a id="L271" class="source_line" href="#L271">271</a>
<a id="L272" class="source_line" href="#L272">272</a>
<a id="L273" class="source_line" href="#L273">273</a>
<a id="L274" class="source_line" href="#L274">274</a>
<a id="L275" class="source_line" href="#L275">275</a>
<a id="L276" class="source_line" href="#L276">276</a>
<a id="L277" class="source_line" href="#L277">277</a>
<a id="L278" class="source_line" href="#L278">278</a>
<a id="L279" class="source_line" href="#L279">279</a>
<a id="L280" class="source_line" href="#L280">280</a>
<a id="L281" class="source_line" href="#L281">281</a>
<a id="L282" class="source_line" href="#L282">282</a>
<a id="L283" class="source_line" href="#L283">283</a>
<a id="L284" class="source_line" href="#L284">284</a>
<a id="L285" class="source_line" href="#L285">285</a>
<a id="L286" class="source_line" href="#L286">286</a>
<a id="L287" class="source_line" href="#L287">287</a>
<a id="L288" class="source_line" href="#L288">288</a>
<a id="L289" class="source_line" href="#L289">289</a>
<a id="L290" class="source_line" href="#L290">290</a>
<a id="L291" class="source_line" href="#L291">291</a>
<a id="L292" class="source_line" href="#L292">292</a>
<a id="L293" class="source_line" href="#L293">293</a>
<a id="L294" class="source_line" href="#L294">294</a>
<a id="L295" class="source_line" href="#L295">295</a>
<a id="L296" class="source_line" href="#L296">296</a>
<a id="L297" class="source_line" href="#L297">297</a>
<a id="L298" class="source_line" href="#L298">298</a>
<a id="L299" class="source_line" href="#L299">299</a>
<a id="L300" class="source_line" href="#L300">300</a>
<a id="L301" class="source_line" href="#L301">301</a>
<a id="L302" class="source_line" href="#L302">302</a>
<a id="L303" class="source_line" href="#L303">303</a>
<a id="L304" class="source_line" href="#L304">304</a>
<a id="L305" class="source_line" href="#L305">305</a>
<a id="L306" class="source_line" href="#L306">306</a>
<a id="L307" class="source_line" href="#L307">307</a>
<a id="L308" class="source_line" href="#L308">308</a>
<a id="L309" class="source_line" href="#L309">309</a>
<a id="L310" class="source_line" href="#L310">310</a>
<a id="L311" class="source_line" href="#L311">311</a>
<a id="L312" class="source_line" href="#L312">312</a>
<a id="L313" class="source_line" href="#L313">313</a>
<a id="L314" class="source_line" href="#L314">314</a>
<a id="L315" class="source_line" href="#L315">315</a>
<a id="L316" class="source_line" href="#L316">316</a>
<a id="L317" class="source_line" href="#L317">317</a>
<a id="L318" class="source_line" href="#L318">318</a>
<a id="L319" class="source_line" href="#L319">319</a>
<a id="L320" class="source_line" href="#L320">320</a>
<a id="L321" class="source_line" href="#L321">321</a>
<a id="L322" class="source_line" href="#L322">322</a>
<a id="L323" class="source_line" href="#L323">323</a>
<a id="L324" class="source_line" href="#L324">324</a>
<a id="L325" class="source_line" href="#L325">325</a>
<a id="L326" class="source_line" href="#L326">326</a>
<a id="L327" class="source_line" href="#L327">327</a>
<a id="L328" class="source_line" href="#L328">328</a>
<a id="L329" class="source_line" href="#L329">329</a>
<a id="L330" class="source_line" href="#L330">330</a>
<a id="L331" class="source_line" href="#L331">331</a>
<a id="L332" class="source_line" href="#L332">332</a>
<a id="L333" class="source_line" href="#L333">333</a>
<a id="L334" class="source_line" href="#L334">334</a>
<a id="L335" class="source_line" href="#L335">335</a>
<a id="L336" class="source_line" href="#L336">336</a>
<a id="L337" class="source_line" href="#L337">337</a>
<a id="L338" class="source_line" href="#L338">338</a>
<a id="L339" class="source_line" href="#L339">339</a>
<a id="L340" class="source_line" href="#L340">340</a>
<a id="L341" class="source_line" href="#L341">341</a>
<a id="L342" class="source_line" href="#L342">342</a>
<a id="L343" class="source_line" href="#L343">343</a>
<a id="L344" class="source_line" href="#L344">344</a>
<a id="L345" class="source_line" href="#L345">345</a>
<a id="L346" class="source_line" href="#L346">346</a>
<a id="L347" class="source_line" href="#L347">347</a>
<a id="L348" class="source_line" href="#L348">348</a>
<a id="L349" class="source_line" href="#L349">349</a>
<a id="L350" class="source_line" href="#L350">350</a>
<a id="L351" class="source_line" href="#L351">351</a>
<a id="L352" class="source_line" href="#L352">352</a>
<a id="L353" class="source_line" href="#L353">353</a>
<a id="L354" class="source_line" href="#L354">354</a>
<a id="L355" class="source_line" href="#L355">355</a>
<a id="L356" class="source_line" href="#L356">356</a>
<a id="L357" class="source_line" href="#L357">357</a>
<a id="L358" class="source_line" href="#L358">358</a>
<a id="L359" class="source_line" href="#L359">359</a>
<a id="L360" class="source_line" href="#L360">360</a>
<a id="L361" class="source_line" href="#L361">361</a>
<a id="L362" class="source_line" href="#L362">362</a>
<a id="L363" class="source_line" href="#L363">363</a>
<a id="L364" class="source_line" href="#L364">364</a>
<a id="L365" class="source_line" href="#L365">365</a>
<a id="L366" class="source_line" href="#L366">366</a>
<a id="L367" class="source_line" href="#L367">367</a>
<a id="L368" class="source_line" href="#L368">368</a>
<a id="L369" class="source_line" href="#L369">369</a>
<a id="L370" class="source_line" href="#L370">370</a>
<a id="L371" class="source_line" href="#L371">371</a>
<a id="L372" class="source_line" href="#L372">372</a>
<a id="L373" class="source_line" href="#L373">373</a>
<a id="L374" class="source_line" href="#L374">374</a>
<a id="L375" class="source_line" href="#L375">375</a>
<a id="L376" class="source_line" href="#L376">376</a>
<a id="L377" class="source_line" href="#L377">377</a>
<a id="L378" class="source_line" href="#L378">378</a>
<a id="L379" class="source_line" href="#L379">379</a>
<a id="L380" class="source_line" href="#L380">380</a>
<a id="L381" class="source_line" href="#L381">381</a>
<a id="L382" class="source_line" href="#L382">382</a>
<a id="L383" class="source_line" href="#L383">383</a>
<a id="L384" class="source_line" href="#L384">384</a>
<a id="L385" class="source_line" href="#L385">385</a>
<a id="L386" class="source_line" href="#L386">386</a>
<a id="L387" class="source_line" href="#L387">387</a>
<a id="L388" class="source_line" href="#L388">388</a>
<a id="L389" class="source_line" href="#L389">389</a>
<a id="L390" class="source_line" href="#L390">390</a>
<a id="L391" class="source_line" href="#L391">391</a>
<a id="L392" class="source_line" href="#L392">392</a>
<a id="L393" class="source_line" href="#L393">393</a>
<a id="L394" class="source_line" href="#L394">394</a>
<a id="L395" class="source_line" href="#L395">395</a>
<a id="L396" class="source_line" href="#L396">396</a>
<a id="L397" class="source_line" href="#L397">397</a>
<a id="L398" class="source_line" href="#L398">398</a>
<a id="L399" class="source_line" href="#L399">399</a>
<a id="L400" class="source_line" href="#L400">400</a>
<a id="L401" class="source_line" href="#L401">401</a>
<a id="L402" class="source_line" href="#L402">402</a>
<a id="L403" class="source_line" href="#L403">403</a>
<a id="L404" class="source_line" href="#L404">404</a>
<a id="L405" class="source_line" href="#L405">405</a>
<a id="L406" class="source_line" href="#L406">406</a>
<a id="L407" class="source_line" href="#L407">407</a>
<a id="L408" class="source_line" href="#L408">408</a>
<a id="L409" class="source_line" href="#L409">409</a>
<a id="L410" class="source_line" href="#L410">410</a>
<a id="L411" class="source_line" href="#L411">411</a>
<a id="L412" class="source_line" href="#L412">412</a>
<a id="L413" class="source_line" href="#L413">413</a>
<a id="L414" class="source_line" href="#L414">414</a>
<a id="L415" class="source_line" href="#L415">415</a>
<a id="L416" class="source_line" href="#L416">416</a>
<a id="L417" class="source_line" href="#L417">417</a>
<a id="L418" class="source_line" href="#L418">418</a>
<a id="L419" class="source_line" href="#L419">419</a>
<a id="L420" class="source_line" href="#L420">420</a>
<a id="L421" class="source_line" href="#L421">421</a>
<a id="L422" class="source_line" href="#L422">422</a>
<a id="L423" class="source_line" href="#L423">423</a>
<a id="L424" class="source_line" href="#L424">424</a>
<a id="L425" class="source_line" href="#L425">425</a>
<a id="L426" class="source_line" href="#L426">426</a>
<a id="L427" class="source_line" href="#L427">427</a>
<a id="L428" class="source_line" href="#L428">428</a>
<a id="L429" class="source_line" href="#L429">429</a>
<a id="L430" class="source_line" href="#L430">430</a>
<a id="L431" class="source_line" href="#L431">431</a>
<a id="L432" class="source_line" href="#L432">432</a>
<a id="L433" class="source_line" href="#L433">433</a>
<a id="L434" class="source_line" href="#L434">434</a>
<a id="L435" class="source_line" href="#L435">435</a>
<a id="L436" class="source_line" href="#L436">436</a>
<a id="L437" class="source_line" href="#L437">437</a>
<a id="L438" class="source_line" href="#L438">438</a>
<a id="L439" class="source_line" href="#L439">439</a>
<a id="L440" class="source_line" href="#L440">440</a>
<a id="L441" class="source_line" href="#L441">441</a>
<a id="L442" class="source_line" href="#L442">442</a>
<a id="L443" class="source_line" href="#L443">443</a>
<a id="L444" class="source_line" href="#L444">444</a>
<a id="L445" class="source_line" href="#L445">445</a>
<a id="L446" class="source_line" href="#L446">446</a>
<a id="L447" class="source_line" href="#L447">447</a>
<a id="L448" class="source_line" href="#L448">448</a>
<a id="L449" class="source_line" href="#L449">449</a>
<a id="L450" class="source_line" href="#L450">450</a>
<a id="L451" class="source_line" href="#L451">451</a>
<a id="L452" class="source_line" href="#L452">452</a>
<a id="L453" class="source_line" href="#L453">453</a>
<a id="L454" class="source_line" href="#L454">454</a>
<a id="L455" class="source_line" href="#L455">455</a>
<a id="L456" class="source_line" href="#L456">456</a>
<a id="L457" class="source_line" href="#L457">457</a>
<a id="L458" class="source_line" href="#L458">458</a>
<a id="L459" class="source_line" href="#L459">459</a>
<a id="L460" class="source_line" href="#L460">460</a>
<a id="L461" class="source_line" href="#L461">461</a>
<a id="L462" class="source_line" href="#L462">462</a>
<a id="L463" class="source_line" href="#L463">463</a>
<a id="L464" class="source_line" href="#L464">464</a>
<a id="L465" class="source_line" href="#L465">465</a>
<a id="L466" class="source_line" href="#L466">466</a>
<a id="L467" class="source_line" href="#L467">467</a>
<a id="L468" class="source_line" href="#L468">468</a>
<a id="L469" class="source_line" href="#L469">469</a>
<a id="L470" class="source_line" href="#L470">470</a>
<a id="L471" class="source_line" href="#L471">471</a>
<a id="L472" class="source_line" href="#L472">472</a>
<a id="L473" class="source_line" href="#L473">473</a>
<a id="L474" class="source_line" href="#L474">474</a>
<a id="L475" class="source_line" href="#L475">475</a>
<a id="L476" class="source_line" href="#L476">476</a>
<a id="L477" class="source_line" href="#L477">477</a>
<a id="L478" class="source_line" href="#L478">478</a>
<a id="L479" class="source_line" href="#L479">479</a>
<a id="L480" class="source_line" href="#L480">480</a>
<a id="L481" class="source_line" href="#L481">481</a>
<a id="L482" class="source_line" href="#L482">482</a>
<a id="L483" class="source_line" href="#L483">483</a>
<a id="L484" class="source_line" href="#L484">484</a>
<a id="L485" class="source_line" href="#L485">485</a>
<a id="L486" class="source_line" href="#L486">486</a>
<a id="L487" class="source_line" href="#L487">487</a>
<a id="L488" class="source_line" href="#L488">488</a>
<a id="L489" class="source_line" href="#L489">489</a>
<a id="L490" class="source_line" href="#L490">490</a>
<a id="L491" class="source_line" href="#L491">491</a>
<a id="L492" class="source_line" href="#L492">492</a>
<a id="L493" class="source_line" href="#L493">493</a>
<a id="L494" class="source_line" href="#L494">494</a>
<a id="L495" class="source_line" href="#L495">495</a>
<a id="L496" class="source_line" href="#L496">496</a>
<a id="L497" class="source_line" href="#L497">497</a>
<a id="L498" class="source_line" href="#L498">498</a>
<a id="L499" class="source_line" href="#L499">499</a>
<a id="L500" class="source_line" href="#L500">500</a>
<a id="L501" class="source_line" href="#L501">501</a>
<a id="L502" class="source_line" href="#L502">502</a>
<a id="L503" class="source_line" href="#L503">503</a>
<a id="L504" class="source_line" href="#L504">504</a>
<a id="L505" class="source_line" href="#L505">505</a>
<a id="L506" class="source_line" href="#L506">506</a>
<a id="L507" class="source_line" href="#L507">507</a>
<a id="L508" class="source_line" href="#L508">508</a>
<a id="L509" class="source_line" href="#L509">509</a>
<a id="L510" class="source_line" href="#L510">510</a>
<a id="L511" class="source_line" href="#L511">511</a>
<a id="L512" class="source_line" href="#L512">512</a>
<a id="L513" class="source_line" href="#L513">513</a>
<a id="L514" class="source_line" href="#L514">514</a>
<a id="L515" class="source_line" href="#L515">515</a>
<a id="L516" class="source_line" href="#L516">516</a>
<a id="L517" class="source_line" href="#L517">517</a>
<a id="L518" class="source_line" href="#L518">518</a>
<a id="L519" class="source_line" href="#L519">519</a>
<a id="L520" class="source_line" href="#L520">520</a>
<a id="L521" class="source_line" href="#L521">521</a>
<a id="L522" class="source_line" href="#L522">522</a>
<a id="L523" class="source_line" href="#L523">523</a>
<a id="L524" class="source_line" href="#L524">524</a>
<a id="L525" class="source_line" href="#L525">525</a>
<a id="L526" class="source_line" href="#L526">526</a>
<a id="L527" class="source_line" href="#L527">527</a>
<a id="L528" class="source_line" href="#L528">528</a>
<a id="L529" class="source_line" href="#L529">529</a>
<a id="L530" class="source_line" href="#L530">530</a>
<a id="L531" class="source_line" href="#L531">531</a>
<a id="L532" class="source_line" href="#L532">532</a>
<a id="L533" class="source_line" href="#L533">533</a>
<a id="L534" class="source_line" href="#L534">534</a>
<a id="L535" class="source_line" href="#L535">535</a>
<a id="L536" class="source_line" href="#L536">536</a>
<a id="L537" class="source_line" href="#L537">537</a>
<a id="L538" class="source_line" href="#L538">538</a>
<a id="L539" class="source_line" href="#L539">539</a>
<a id="L540" class="source_line" href="#L540">540</a>
<a id="L541" class="source_line" href="#L541">541</a>
<a id="L542" class="source_line" href="#L542">542</a>
<a id="L543" class="source_line" href="#L543">543</a>
<a id="L544" class="source_line" href="#L544">544</a>
<a id="L545" class="source_line" href="#L545">545</a>
<a id="L546" class="source_line" href="#L546">546</a>
<a id="L547" class="source_line" href="#L547">547</a>
<a id="L548" class="source_line" href="#L548">548</a>
<a id="L549" class="source_line" href="#L549">549</a>
<a id="L550" class="source_line" href="#L550">550</a>
<a id="L551" class="source_line" href="#L551">551</a>
<a id="L552" class="source_line" href="#L552">552</a>
<a id="L553" class="source_line" href="#L553">553</a>
<a id="L554" class="source_line" href="#L554">554</a>
<a id="L555" class="source_line" href="#L555">555</a>
<a id="L556" class="source_line" href="#L556">556</a>
<a id="L557" class="source_line" href="#L557">557</a>
<a id="L558" class="source_line" href="#L558">558</a>
<a id="L559" class="source_line" href="#L559">559</a>
<a id="L560" class="source_line" href="#L560">560</a>
<a id="L561" class="source_line" href="#L561">561</a>
<a id="L562" class="source_line" href="#L562">562</a>
<a id="L563" class="source_line" href="#L563">563</a>
<a id="L564" class="source_line" href="#L564">564</a>
<a id="L565" class="source_line" href="#L565">565</a>
<a id="L566" class="source_line" href="#L566">566</a>
<a id="L567" class="source_line" href="#L567">567</a>
<a id="L568" class="source_line" href="#L568">568</a>
<a id="L569" class="source_line" href="#L569">569</a>
<a id="L570" class="source_line" href="#L570">570</a>
<a id="L571" class="source_line" href="#L571">571</a>
<a id="L572" class="source_line" href="#L572">572</a>
<a id="L573" class="source_line" href="#L573">573</a>
<a id="L574" class="source_line" href="#L574">574</a>
<a id="L575" class="source_line" href="#L575">575</a>
<a id="L576" class="source_line" href="#L576">576</a>
<a id="L577" class="source_line" href="#L577">577</a>
<a id="L578" class="source_line" href="#L578">578</a>
<a id="L579" class="source_line" href="#L579">579</a>
<a id="L580" class="source_line" href="#L580">580</a>
<a id="L581" class="source_line" href="#L581">581</a>
<a id="L582" class="source_line" href="#L582">582</a>
<a id="L583" class="source_line" href="#L583">583</a>
<a id="L584" class="source_line" href="#L584">584</a>
<a id="L585" class="source_line" href="#L585">585</a>
<a id="L586" class="source_line" href="#L586">586</a>
<a id="L587" class="source_line" href="#L587">587</a>
<a id="L588" class="source_line" href="#L588">588</a>
<a id="L589" class="source_line" href="#L589">589</a>
<a id="L590" class="source_line" href="#L590">590</a>
<a id="L591" class="source_line" href="#L591">591</a>
<a id="L592" class="source_line" href="#L592">592</a>
<a id="L593" class="source_line" href="#L593">593</a>
<a id="L594" class="source_line" href="#L594">594</a>
<a id="L595" class="source_line" href="#L595">595</a>
<a id="L596" class="source_line" href="#L596">596</a>
<a id="L597" class="source_line" href="#L597">597</a>
<a id="L598" class="source_line" href="#L598">598</a>
<a id="L599" class="source_line" href="#L599">599</a>
<a id="L600" class="source_line" href="#L600">600</a>
<a id="L601" class="source_line" href="#L601">601</a>
<a id="L602" class="source_line" href="#L602">602</a>
<a id="L603" class="source_line" href="#L603">603</a>
<a id="L604" class="source_line" href="#L604">604</a>
<a id="L605" class="source_line" href="#L605">605</a>
<a id="L606" class="source_line" href="#L606">606</a>
<a id="L607" class="source_line" href="#L607">607</a>
<a id="L608" class="source_line" href="#L608">608</a>
<a id="L609" class="source_line" href="#L609">609</a>
<a id="L610" class="source_line" href="#L610">610</a>
<a id="L611" class="source_line" href="#L611">611</a>
<a id="L612" class="source_line" href="#L612">612</a>
<a id="L613" class="source_line" href="#L613">613</a>
<a id="L614" class="source_line" href="#L614">614</a>
<a id="L615" class="source_line" href="#L615">615</a>
<a id="L616" class="source_line" href="#L616">616</a>
<a id="L617" class="source_line" href="#L617">617</a>
<a id="L618" class="source_line" href="#L618">618</a>
<a id="L619" class="source_line" href="#L619">619</a>
<a id="L620" class="source_line" href="#L620">620</a>
<a id="L621" class="source_line" href="#L621">621</a>
<a id="L622" class="source_line" href="#L622">622</a>
<a id="L623" class="source_line" href="#L623">623</a>
<a id="L624" class="source_line" href="#L624">624</a>
<a id="L625" class="source_line" href="#L625">625</a>
<a id="L626" class="source_line" href="#L626">626</a>
<a id="L627" class="source_line" href="#L627">627</a>
<a id="L628" class="source_line" href="#L628">628</a>
<a id="L629" class="source_line" href="#L629">629</a>
<a id="L630" class="source_line" href="#L630">630</a>
<a id="L631" class="source_line" href="#L631">631</a>
<a id="L632" class="source_line" href="#L632">632</a>
</code><code class="source_code"><span><span class="COMMENT">(*
 * Copyright (c) 2014 Jeremy Yallop.
 *
 * This file is distributed under the terms of the MIT License.
 * See the file LICENSE for details.
 *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* ML stub generation *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LBRACKETATATAT">[@@@</span><span class="LIDENT">warning</span> <span class="STRING">&quot;-9-27&quot;</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="../ctypes/ctypes_static.ml.html"><span class="UIDENT">Ctypes_static</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="ctypes_path.ml.html"><span class="UIDENT">Ctypes_path</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="cstubs_errors.ml.html"><span class="UIDENT">Cstubs_errors</span></a><span class="EOL">
</span><span class="EOL">
</span><span id="type-non_lwt"><span class="TYPE">type</span> <span class="LIDENT">non_lwt</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Sequential</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Unlocked</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span id="type-lwt"><span class="TYPE">type</span> <span class="LIDENT">lwt</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_jobs</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_preemptive</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span id="type-concurrency_policy"><span class="TYPE">type</span> <span class="LIDENT">concurrency_policy</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="LIDENT">non_lwt</span> <span class="BAR">|</span> <span class="LIDENT">lwt</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span id="type-errno_policy"><span class="TYPE">type</span> <span class="LIDENT">errno_policy</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Return_errno</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-lident"><span class="TYPE">type</span> <span class="LIDENT">lident</span> <span class="EQUAL">=</span> <span class="LIDENT">string</span></span><span class="EOL">
</span><span id="type-ml_type"><span class="TYPE">type</span> <span class="LIDENT">ml_type</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="OF">of</span> <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a><span class="EOL">
</span>               <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="OF">of</span> <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="STAR">*</span> <span class="LIDENT">ml_type</span> <span class="LIDENT">list</span><span class="EOL">
</span>               <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Pair</span> <span class="OF">of</span> <span class="LIDENT">ml_type</span> <span class="STAR">*</span> <span class="LIDENT">ml_type</span><span class="EOL">
</span>               <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fn</span> <span class="OF">of</span> <span class="LIDENT">ml_type</span> <span class="STAR">*</span> <span class="LIDENT">ml_type</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-ml_external_type"><span class="TYPE">type</span> <span class="LIDENT">ml_external_type</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="OF">of</span> <span class="LIDENT">ml_type</span> <span class="LIDENT">list</span> <span class="STAR">*</span> <span class="LIDENT">ml_type</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-ml_pat"><span class="TYPE">type</span> <span class="LIDENT">ml_pat</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <span class="OF">of</span> <span class="LIDENT">string</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="OF">of</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="STAR">*</span> <span class="LIDENT">ml_pat</span><span class="RPAREN">)</span> <span class="LIDENT">list</span> <span class="STAR">*</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Etc</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Complete</span><span class="RBRACKET">]</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="OF">of</span> <span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">string</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="OF">of</span> <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="STAR">*</span> <span class="LIDENT">ml_pat</span> <span class="LIDENT">list</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-ml_exp"><span class="TYPE">type</span> <span class="LIDENT">ml_exp</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="OF">of</span> <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Project</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Tuple</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="LIDENT">list</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Seq</span> <span class="OF">of</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Let</span> <span class="OF">of</span> <span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Unit</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="OF">of</span> <span class="LIDENT">lident</span> <span class="LIDENT">list</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-attributes"><span class="TYPE">type</span> <span class="LIDENT">attributes</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span id="def_314"><span class="LIDENT">float</span><span class="COLON">:</span> <span class="LIDENT">bool</span><span class="SEMI">;</span></span> <span id="def_319"><span class="LIDENT">noalloc</span><span class="COLON">:</span> <span class="LIDENT">bool</span></span> <span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-extern"><span class="TYPE">type</span> <span class="LIDENT">extern</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>  <span id="def_310"><span class="LIDENT">ident</span> <span class="COLON">:</span> <span class="LIDENT">string</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_315"><span class="LIDENT">typ</span><span class="COLON">:</span> <span class="LIDENT">ml_external_type</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_316"><span class="LIDENT">primname</span><span class="COLON">:</span> <span class="LIDENT">string</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_312"><span class="LIDENT">primname_byte</span><span class="COLON">:</span> <span class="LIDENT">string</span> <span class="LIDENT">option</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_318"><span class="LIDENT">attributes</span><span class="COLON">:</span> <span class="LIDENT">attributes</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Emit_ML"><span class="MODULE">module</span> <span class="UIDENT">Emit_ML</span> <span class="COLON">:</span> <span class="SIG">sig</span> <span class="EOL">
</span>  <span id="module-Emit_ML.type-appl_parens"><span class="TYPE">type</span> <span class="LIDENT">appl_parens</span> <span class="EQUAL">=</span> <span id="module-Emit_ML.type-appl_parens.constructor-ApplParens"><span class="UIDENT">ApplParens</span></span> <span id="module-Emit_ML.type-appl_parens.constructor-NoApplParens"><span class="BAR">|</span> <span class="UIDENT">NoApplParens</span></span></span><span class="EOL">
</span>  <span id="module-Emit_ML.val-ml_exp"><span class="VAL">val</span> <span class="LIDENT">ml_exp</span> <span class="COLON">:</span> <span class="LIDENT">appl_parens</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#type-formatter"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span>  <span id="module-Emit_ML.val-ml_pat"><span class="VAL">val</span> <span class="LIDENT">ml_pat</span> <span class="COLON">:</span> <span class="LIDENT">appl_parens</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#type-formatter"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_pat</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span>  <span id="module-Emit_ML.val-ml_external_type"><span class="VAL">val</span> <span class="LIDENT">ml_external_type</span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#type-formatter"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_external_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span>  <span id="module-Emit_ML.val-extern"><span class="VAL">val</span> <span class="LIDENT">extern</span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#type-formatter"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">extern</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="END">end</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-fprintf"><span class="LIDENT">fprintf</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* We (only) need to parenthesize function types in certain contexts 
        * on the lhs of a function type: - -&gt; t
        * as the argument to a single-argument type constructor: - t
  *)</span><span class="EOL">
</span>  <span id="module-Emit_ML.type-arrow_parens"><span class="TYPE">type</span> <span class="LIDENT">arrow_parens</span> <span class="EQUAL">=</span> <span id="module-Emit_ML.type-arrow_parens.constructor-ArrowParens"><span class="UIDENT">ArrowParens</span></span> <span id="module-Emit_ML.type-arrow_parens.constructor-NoArrowParens"><span class="BAR">|</span> <span class="UIDENT">NoArrowParens</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* We (only) need to parenthesize application expressions in certain contexts 
        * in a projection expression: -.l
        * in a dereference expression: !@ -
        * as an argument in an application: e -
  *)</span><span class="EOL">
</span>  <span id="module-Emit_ML.type-appl_parens"><span class="TYPE">type</span> <span class="LIDENT">appl_parens</span> <span class="EQUAL">=</span> <span id="module-Emit_ML.type-appl_parens.constructor-ApplParens"><span class="UIDENT">ApplParens</span></span> <span id="module-Emit_ML.type-appl_parens.constructor-NoApplParens"><span class="BAR">|</span> <span class="UIDENT">NoApplParens</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-ident"><span class="LIDENT">ident</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Emit_ML.val-ml_type"><span class="LIDENT">ml_type</span></span> <span id="local_arrow_parens_1"><span class="LIDENT">arrow_parens</span></span> <span id="local_fmt_2"><span class="LIDENT">fmt</span></span> <span id="local_t_3"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_arrow_parens_1"><span class="LIDENT">arrow_parens</span></a><span class="COMMA">,</span> <a href="#local_t_3"><span class="LIDENT">t</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span id="local_i_4"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ident</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <a href="#local_i_4"><span class="LIDENT">i</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span id="local_t_5"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ident</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <a href="#local_t_5"><span class="LIDENT">t</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span id="local_t_6"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span id="local_t'_7"><span class="LIDENT">t'</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[%a@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">ArrowParens</span><span class="RPAREN">)</span> <a href="#local_t'_7"><span class="LIDENT">t'</span></a> <span class="LIDENT">ident</span> <a href="#local_t_6"><span class="LIDENT">t</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span id="local_t_8"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_ts_9"><span class="LIDENT">ts</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_nargs_10"><span class="LIDENT">nargs</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-length"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_ts_9"><span class="LIDENT">ts</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(&quot;</span><span class="SEMI">;</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iteri"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iteri</span></a><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_11"><span class="LIDENT">i</span></span> <span id="local_arg_12"><span class="LIDENT">arg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_i_11"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_nargs_10"><span class="LIDENT">nargs</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="THEN">then</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <a href="#local_arg_12"><span class="LIDENT">arg</span></a><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a,@ &quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_arg_12"><span class="LIDENT">arg</span></a><span class="EOL">
</span>        <span class="RPAREN">)</span> <a href="#local_ts_9"><span class="LIDENT">ts</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;)@ %a&quot;</span> <span class="LIDENT">ident</span> <a href="#local_t_8"><span class="LIDENT">t</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ArrowParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fn</span> <span class="LPAREN">(</span><span id="local_t_13"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_t'_14"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[(%a@ -&gt;@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">ArrowParens</span><span class="RPAREN">)</span> <a href="#local_t_13"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_t'_14"><span class="LIDENT">t'</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoArrowParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fn</span> <span class="LPAREN">(</span><span id="local_t_15"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_t'_16"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[%a@ -&gt;@]@ %a&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">ArrowParens</span><span class="RPAREN">)</span> <a href="#local_t_15"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_t'_16"><span class="LIDENT">t'</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Pair</span> <span class="LPAREN">(</span><span id="local_t_17"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_t'_18"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_2"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[(%a@ *@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_t_17"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">NoArrowParens</span><span class="RPAREN">)</span> <a href="#local_t'_18"><span class="LIDENT">t'</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-ml_external_type"><span class="LIDENT">ml_external_type</span></span> <span id="local_fmt_19"><span class="LIDENT">fmt</span></span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span id="local_args_20"><span class="LIDENT">args</span></span><span class="COMMA">,</span> <span id="local_ret_21"><span class="LIDENT">ret</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">ml_external_type</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iter"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iter</span></a> <span class="LPAREN">(</span><span class="LIDENT">fprintf</span> <a href="#local_fmt_19"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[%a@ -&gt;@]@ &quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_type</span> <span class="UIDENT">ArrowParens</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_args_20"><span class="LIDENT">args</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">ml_type</span> <span class="UIDENT">ArrowParens</span> <a href="#local_fmt_19"><span class="LIDENT">fmt</span></a> <a href="#local_ret_21"><span class="LIDENT">ret</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-primname_opt"><span class="LIDENT">primname_opt</span></span> <span id="local_fmt_22"><span class="LIDENT">fmt</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_primname_23"><span class="LIDENT">primname</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_22"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%S@ &quot;</span> <a href="#local_primname_23"><span class="LIDENT">primname</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-attrs"><span class="LIDENT">attrs</span></span> <span id="local_fmt_24"><span class="LIDENT">fmt</span></span> <span class="LBRACE">{</span> <span id="local_float_25"><span class="LIDENT">float</span></span><span class="SEMI">;</span> <span id="local_noalloc_26"><span class="LIDENT">noalloc</span></span> <span class="RBRACE">}</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="EOL">
</span>    <span class="COMMENT">(* TODO: float support not yet implemented *)</span><span class="EOL">
</span>    <span class="COMMENT">(* if float then pp_print_string fmt &quot;\&quot;float\&quot;&quot;; *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* TODO: fix this.  The may_allocate function determines whether any of
       the functions in the generated C cause OCaml heap allocations.
       However, it doesn't currently account for callbacks: if we pass a
       handle to an OCaml function into C, calling the function can trigger an
       allocation.  We need some way in the interface of the library for the
       client to indicate whether it is safe to assume that a C function
       cannot call back into OCaml. *)</span><span class="EOL">
</span>    <span class="COMMENT">(* if noalloc then pp_print_string fmt &quot;\&quot;noalloc\&quot;&quot; *)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-args"><span class="LIDENT">args</span></span> <span id="local_fmt_27"><span class="LIDENT">fmt</span></span> <span id="local_xs_28"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iter"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iter</span></a> <span class="LPAREN">(</span><span class="LIDENT">fprintf</span> <a href="#local_fmt_27"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%s@ &quot;</span><span class="RPAREN">)</span> <a href="#local_xs_28"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Emit_ML.val-ml_exp"><span class="LIDENT">ml_exp</span></span> <span id="local_appl_parens_29"><span class="LIDENT">appl_parens</span></span> <span id="local_fmt_30"><span class="LIDENT">fmt</span></span> <span class="LPAREN">(</span><span id="local_e_31"><span class="LIDENT">e</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_appl_parens_29"><span class="LIDENT">appl_parens</span></a><span class="COMMA">,</span> <a href="#local_e_31"><span class="LIDENT">e</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;()&quot;</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span id="local_x_32"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ident</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <a href="#local_x_32"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Project</span> <span class="LPAREN">(</span><span id="local_e_33"><span class="LIDENT">e</span></span><span class="COMMA">,</span> <span id="local_l_34"><span class="LIDENT">l</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a.%a&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_33"><span class="LIDENT">e</span></a> <span class="LIDENT">ident</span> <a href="#local_l_34"><span class="LIDENT">l</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span id="local_f_35"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_p_36"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[(%a@;&lt;1 2&gt;%a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_f_35"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_p_36"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span id="local_f_37"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_p_38"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[%a@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_f_37"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_p_38"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span class="LPAREN">(</span><span id="local_t_39"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_40"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;(@[&lt;hov 2&gt;CI.make_ptr@ %a@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_39"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_40"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span class="LPAREN">(</span><span id="local_t_41"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_42"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;@[&lt;hov 2&gt;CI.make_ptr@ %a@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_41"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_42"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span class="LPAREN">(</span><span id="local_t_43"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_44"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;(@[&lt;hov 2&gt;CI.make_fun_ptr@ %a@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_43"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_44"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span class="LPAREN">(</span><span id="local_t_45"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_46"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;@[&lt;hov 2&gt;CI.make_fun_ptr@ %a@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_45"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_46"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span class="LPAREN">(</span><span id="local_t_47"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_48"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;(@[&lt;hov 2&gt;CI.make_structured@ %a@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_47"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_48"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span class="LPAREN">(</span><span id="local_t_49"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span id="local_e_50"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>        <span class="STRING">&quot;@[&lt;hov 2&gt;CI.make_structured@ %a@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_t_49"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_50"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><span id="local_xs_51"><span class="LIDENT">xs</span></span><span class="COMMA">,</span> <span id="local_e_52"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[&lt;1&gt;fun@ %a-&gt;@ %a)@]&quot;</span> <span class="LIDENT">args</span> <a href="#local_xs_51"><span class="LIDENT">xs</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e_52"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Tuple</span> <span id="local_es_53"><span class="LIDENT">es</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[%a)@]&quot;</span> <span class="LIDENT">tuple_elements</span> <a href="#local_es_53"><span class="LIDENT">es</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Seq</span> <span class="LPAREN">(</span><span id="local_e1_54"><span class="LIDENT">e1</span></span><span class="COMMA">,</span> <span id="local_e2_55"><span class="LIDENT">e2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[%a;@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e1_54"><span class="LIDENT">e1</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e2_55"><span class="LIDENT">e2</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Let</span> <span class="LPAREN">(</span><span id="local_p_56"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_e1_57"><span class="LIDENT">e1</span></span><span class="COMMA">,</span> <span id="local_e2_58"><span class="LIDENT">e2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[let@ %a@ = %a@ in@ %a)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_56"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e1_57"><span class="LIDENT">e1</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e2_58"><span class="LIDENT">e2</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Let</span> <span class="LPAREN">(</span><span id="local_p_59"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_e1_60"><span class="LIDENT">e1</span></span><span class="COMMA">,</span> <span id="local_e2_61"><span class="LIDENT">e2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_30"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[let@ %a@ = %a@ in@ %a@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_59"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e1_60"><span class="LIDENT">e1</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_e2_61"><span class="LIDENT">e2</span></a><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Emit_ML.val-tuple_elements"><span class="LIDENT">tuple_elements</span></span> <span id="local_fmt_62"><span class="LIDENT">fmt</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_exp</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="FUN">fun</span> <span id="local_xs_63"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_last_64"><span class="LIDENT">last</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-length"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_xs_63"><span class="LIDENT">xs</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iteri"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iteri</span></a><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_65"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_i_65"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;&gt;)"><span class="INFIXOP0">&lt;&gt;</span></a> <a href="#local_last_64"><span class="LIDENT">last</span></a> <span class="THEN">then</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_62"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a,@ &quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_62"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="#local_xs_63"><span class="LIDENT">xs</span></a><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Emit_ML.val-ml_pat"><span class="LIDENT">ml_pat</span></span> <span id="local_appl_parens_66"><span class="LIDENT">appl_parens</span></span> <span id="local_fmt_67"><span class="LIDENT">fmt</span></span> <span id="local_pat_68"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_appl_parens_66"><span class="LIDENT">appl_parens</span></a><span class="COMMA">,</span> <a href="#local_pat_68"><span class="LIDENT">pat</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <span id="local_x_69"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%s&quot;</span> <a href="#local_x_69"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span id="local_fs_70"><span class="LIDENT">fs</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Etc</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;{@[%a_}@]&quot;</span> <span class="LIDENT">pat_fields</span> <a href="#local_fs_70"><span class="LIDENT">fs</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span id="local_fs_71"><span class="LIDENT">fs</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Complete</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;{@[%a}@]&quot;</span> <span class="LIDENT">pat_fields</span> <a href="#local_fs_71"><span class="LIDENT">fs</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="LPAREN">(</span><span id="local_p_72"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_x_73"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[(%a@ as@ %s)@]&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_72"><span class="LIDENT">p</span></a> <a href="#local_x_73"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;_&quot;</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span id="local_c_74"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a&quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_c_74"><span class="LIDENT">c</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span id="local_c_75"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span id="local_p_76"><span class="LIDENT">p</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;2&gt;%a@ @[%a@]@]&quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_c_75"><span class="LIDENT">c</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_p_76"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span id="local_c_77"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span id="local_p_78"><span class="LIDENT">p</span></span><span class="RBRACKET">]</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[&lt;2&gt;%a@ @[%a@])@]&quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_c_77"><span class="LIDENT">c</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_p_78"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span id="local_c_79"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span id="local_ps_80"><span class="LIDENT">ps</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;(@[&lt;2&gt;%a@ (@[%a)@])@]&quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_c_79"><span class="LIDENT">c</span></a> <span class="LIDENT">pat_args</span> <a href="#local_ps_80"><span class="LIDENT">ps</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">NoApplParens</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span id="local_c_81"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span id="local_ps_82"><span class="LIDENT">ps</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">fprintf</span> <a href="#local_fmt_67"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;2&gt;%a@ (@[%a)@]@]&quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_c_81"><span class="LIDENT">c</span></a> <span class="LIDENT">pat_args</span> <a href="#local_ps_82"><span class="LIDENT">ps</span></a><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Emit_ML.val-pat_fields"><span class="LIDENT">pat_fields</span></span> <span id="local_fmt_83"><span class="LIDENT">fmt</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="STAR">*</span> <span class="LIDENT">ml_pat</span><span class="RPAREN">)</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iter"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iter</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_l_84"><span class="LIDENT">l</span></span><span class="COMMA">,</span> <span id="local_p_85"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">fprintf</span> <a href="#local_fmt_83"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[%a@ =@ %a;@]@ &quot;</span> <a href="ctypes_path.ml.html#val-format_path"><span class="LIDENT">format_path</span></a> <a href="#local_l_84"><span class="LIDENT">l</span></a> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_85"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Emit_ML.val-pat_args"><span class="LIDENT">pat_args</span></span> <span id="local_fmt_86"><span class="LIDENT">fmt</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_pat</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="FUN">fun</span> <span id="local_xs_87"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_last_88"><span class="LIDENT">last</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-length"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_xs_87"><span class="LIDENT">xs</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iteri"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iteri</span></a><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_89"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_i_89"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;&gt;)"><span class="INFIXOP0">&lt;&gt;</span></a> <a href="#local_last_88"><span class="LIDENT">last</span></a> <span class="THEN">then</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_86"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a,@ &quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="LIDENT">fprintf</span> <a href="#local_fmt_86"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a&quot;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="#local_xs_87"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Emit_ML.val-extern"><span class="LIDENT">extern</span></span> <span id="local_fmt_90"><span class="LIDENT">fmt</span></span> <span class="LBRACE">{</span> <span id="local_ident_91"><span class="LIDENT">ident</span></span><span class="SEMI">;</span> <span id="local_typ_92"><span class="LIDENT">typ</span></span><span class="SEMI">;</span> <span id="local_primname_93"><span class="LIDENT">primname</span></span><span class="SEMI">;</span> <span id="local_primname_byte_94"><span class="LIDENT">primname_byte</span></span><span class="SEMI">;</span> <span id="local_attributes_95"><span class="LIDENT">attributes</span></span> <span class="RBRACE">}</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">fprintf</span> <a href="#local_fmt_90"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>      <span class="STRING">&quot;@[&lt;hov 2&gt;@[external@ %s@]@ @[&lt;h 1&gt;:@ @[%a@]@]@ &quot;</span><span class="EOL">
</span>      <a href="#local_ident_91"><span class="LIDENT">ident</span></a> <span class="LIDENT">ml_external_type</span> <a href="#local_typ_92"><span class="LIDENT">typ</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">fprintf</span> <a href="#local_fmt_90"><span class="LIDENT">fmt</span></a><span class="EOL">
</span>      <span class="STRING">&quot;@[=@ @[@[%a@]@[%S@]@ %a@]@]@]@.&quot;</span><span class="EOL">
</span>      <span class="LIDENT">primname_opt</span> <a href="#local_primname_byte_94"><span class="LIDENT">primname_byte</span></a> <a href="#local_primname_93"><span class="LIDENT">primname</span></a> <span class="LIDENT">attrs</span> <a href="#local_attributes_95"><span class="LIDENT">attributes</span></a><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-arity"><span class="LIDENT">arity</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_external_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span id="local_args_96"><span class="LIDENT">args</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-length"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_args_96"><span class="LIDENT">args</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-max_byte_args"><span class="LIDENT">max_byte_args</span></span> <span class="EQUAL">=</span> <span class="INT">5</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-byte_stub_name"><span class="LIDENT">byte_stub_name</span></span> <span class="COLON">:</span> <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_external_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">string</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_name_97"><span class="LIDENT">name</span></span> <span id="local_t_98"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_arity_99"><span class="LIDENT">arity</span></span> <span class="EQUAL">=</span> <span class="LIDENT">arity</span> <a href="#local_t_98"><span class="LIDENT">t</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_arity_99"><span class="LIDENT">arity</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;)"><span class="GREATER">&gt;</span></a> <span class="LIDENT">max_byte_args</span><span class="EOL">
</span>    <span class="THEN">then</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;%s_byte%d&quot;</span> <a href="#local_name_97"><span class="LIDENT">name</span></a> <a href="#local_arity_99"><span class="LIDENT">arity</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="ELSE">else</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-attributes"><span class="LIDENT">attributes</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <a href="../ctypes/ctypes_static.ml.html#type-fn"><span class="LIDENT">a</span> <span class="LIDENT">fn</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">attributes</span> <span class="EQUAL">=</span><span class="EOL">
</span>   <span class="LET">let</span> <span class="OPEN">open</span> <a href="cstubs_analysis.ml.html"><span class="UIDENT">Cstubs_analysis</span></a> <span class="IN">in</span><span class="EOL">
</span>   <span class="FUN">fun</span> <span id="local_fn_100"><span class="LIDENT">fn</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACE">{</span> <span class="LIDENT">float</span> <span class="EQUAL">=</span> <a href="cstubs_analysis.ml.html#val-float"><span class="LIDENT">float</span></a> <a href="#local_fn_100"><span class="LIDENT">fn</span></a><span class="SEMI">;</span> <span class="LIDENT">noalloc</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-not"><span class="LIDENT">not</span></a> <span class="LPAREN">(</span><a href="cstubs_analysis.ml.html#val-may_allocate"><span class="LIDENT">may_allocate</span></a> <a href="#local_fn_100"><span class="LIDENT">fn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-managed_buffer"><span class="LIDENT">managed_buffer</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.managed_buffer&quot;</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-voidp"><span class="LIDENT">voidp</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.voidp&quot;</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-fatptr"><span class="LIDENT">fatptr</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.fatptr&quot;</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;_&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-fatfunptr"><span class="LIDENT">fatfunptr</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.fatfunptr&quot;</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;_&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* These functions determine the type that should appear in the extern
   signature *)</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-ml_typ_of_return_typ"><span class="LIDENT">ml_typ_of_return_typ</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <a href="../ctypes/ctypes_static.ml.html#type-typ"><span class="LIDENT">a</span> <span class="LIDENT">typ</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_type</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Void</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;unit&quot;</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Primitive</span> <span id="local_p_101"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="cstubs_public_name.ml.html#val-ident_of_ml_prim"><span class="UIDENT">Cstubs_public_name</span><span class="DOT">.</span><span class="LIDENT">ident_of_ml_prim</span></a> <span class="LPAREN">(</span><a href="../ctypes/ctypes_primitive_types.ml.html#val-ml_prim"><span class="UIDENT">Ctypes_primitive_types</span><span class="DOT">.</span><span class="LIDENT">ml_prim</span></a> <a href="#local_p_101"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Struct</span> <span class="UNDERSCORE">_</span>    <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">managed_buffer</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Union</span> <span class="UNDERSCORE">_</span>     <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">managed_buffer</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Abstract</span> <span class="UNDERSCORE">_</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">managed_buffer</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Pointer</span> <span class="UNDERSCORE">_</span>   <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">voidp</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Funptr</span> <span class="UNDERSCORE">_</span>    <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">voidp</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">View</span> <span class="LBRACE">{</span> <span id="local_ty_102"><span class="LIDENT">ty</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_return_typ</span> <a href="#local_ty_102"><span class="LIDENT">ty</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Qualified</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_ty_103"><span class="LIDENT">ty</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_return_typ</span> <a href="#local_ty_103"><span class="LIDENT">ty</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Array</span> <span class="UNDERSCORE">_</span>    <span class="AS">as</span> <span id="local_a_104"><span class="LIDENT">a</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected array type in the return type: %s&quot;</span> <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_a_104"><span class="LIDENT">a</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Bigarray</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_a_105"><span class="LIDENT">a</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected bigarray type in the return type: %s&quot;</span> <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_a_105"><span class="LIDENT">a</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">String</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>    <span class="STRING">&quot;cstubs does not support OCaml strings as return values&quot;</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">Bytes</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>    <span class="STRING">&quot;cstubs does not support OCaml bytes values as return values&quot;</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">FloatArray</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>    <span class="STRING">&quot;cstubs does not support OCaml float arrays as return values&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-ml_typ_of_arg_typ"><span class="LIDENT">ml_typ_of_arg_typ</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <a href="../ctypes/ctypes_static.ml.html#type-typ"><span class="LIDENT">a</span> <span class="LIDENT">typ</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_type</span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Void</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;unit&quot;</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Primitive</span> <span id="local_p_106"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="cstubs_public_name.ml.html#val-ident_of_ml_prim"><span class="UIDENT">Cstubs_public_name</span><span class="DOT">.</span><span class="LIDENT">ident_of_ml_prim</span></a> <span class="LPAREN">(</span><a href="../ctypes/ctypes_primitive_types.ml.html#val-ml_prim"><span class="UIDENT">Ctypes_primitive_types</span><span class="DOT">.</span><span class="LIDENT">ml_prim</span></a> <a href="#local_p_106"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Pointer</span> <span class="UNDERSCORE">_</span>   <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fatptr</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Funptr</span> <span class="UNDERSCORE">_</span>    <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fatfunptr</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Struct</span> <span class="UNDERSCORE">_</span>    <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fatptr</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Union</span> <span class="UNDERSCORE">_</span>     <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fatptr</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Abstract</span> <span class="UNDERSCORE">_</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fatptr</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">View</span> <span class="LBRACE">{</span> <span id="local_ty_107"><span class="LIDENT">ty</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_arg_typ</span> <a href="#local_ty_107"><span class="LIDENT">ty</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Qualified</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_ty_108"><span class="LIDENT">ty</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_arg_typ</span> <a href="#local_ty_108"><span class="LIDENT">ty</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Array</span> <span class="UNDERSCORE">_</span>    <span class="AS">as</span> <span id="local_a_109"><span class="LIDENT">a</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected array in an argument type: %s&quot;</span> <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_a_109"><span class="LIDENT">a</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Bigarray</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_a_110"><span class="LIDENT">a</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected bigarray in an argument type: %s&quot;</span> <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_a_110"><span class="LIDENT">a</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">String</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ocaml&quot;</span><span class="COMMA">,</span><span class="EOL">
</span>           <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;string&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">Bytes</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ocaml&quot;</span><span class="COMMA">,</span><span class="EOL">
</span>           <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;bytes&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">FloatArray</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ocaml&quot;</span><span class="COMMA">,</span><span class="EOL">
</span>           <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;array&quot;</span><span class="COMMA">,</span><span class="EOL">
</span>                   <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;float&quot;</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span id="type-polarity"><span class="TYPE">type</span> <span class="LIDENT">polarity</span> <span class="EQUAL">=</span> <span id="type-polarity.constructor-In"><span class="UIDENT">In</span></span> <span id="type-polarity.constructor-Out"><span class="BAR">|</span> <span class="UIDENT">Out</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-flip"><span class="LIDENT">flip</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Out</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">In</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-ml_typ_of_typ"><span class="LIDENT">ml_typ_of_typ</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_arg_typ</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_typ_of_return_typ</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lwt_job_type"><span class="LIDENT">lwt_job_type</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Lwt_unix.job&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-int_type"><span class="LIDENT">int_type</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Signed.sint&quot;</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-ml_external_type_of_fn"><span class="LIDENT">ml_external_type_of_fn</span></span> <span class="COLON">:</span><span class="EOL">
</span>  <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <span class="LIDENT">concurrency</span><span class="COLON">:</span><span class="LIDENT">concurrency_policy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">errno</span><span class="COLON">:</span><span class="LIDENT">errno_policy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="../ctypes/ctypes_static.ml.html#type-fn"><span class="LIDENT">a</span> <span class="LIDENT">fn</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">polarity</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_external_type</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_concurrency_111"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_112"><span class="LIDENT">errno</span></span> <span id="local_fn_113"><span class="LIDENT">fn</span></span> <span id="local_polarity_114"><span class="LIDENT">polarity</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="MATCH">match</span> <a href="#local_fn_113"><span class="LIDENT">fn</span></a><span class="COMMA">,</span> <a href="#local_concurrency_111"><span class="LIDENT">concurrency</span></a><span class="COMMA">,</span> <a href="#local_errno_112"><span class="LIDENT">errno</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Returns</span> <span id="local_t_115"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="BAR">|</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_preemptive</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="LIDENT">ml_typ_of_typ</span> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a> <a href="#local_t_115"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Returns</span> <span id="local_t_116"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="BAR">|</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_preemptive</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Return_errno</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Pair</span> <span class="LPAREN">(</span><span class="LIDENT">ml_typ_of_typ</span> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a> <a href="#local_t_116"><span class="LIDENT">t</span></a><span class="COMMA">,</span> <span class="LIDENT">int_type</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Returns</span> <span id="local_t_117"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_jobs</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="LIDENT">lwt_job_type</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="LIDENT">ml_typ_of_typ</span> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a> <a href="#local_t_117"><span class="LIDENT">t</span></a><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Returns</span> <span id="local_t_118"><span class="LIDENT">t</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_jobs</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Return_errno</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="LIDENT">lwt_job_type</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Pair</span> <span class="LPAREN">(</span><span class="LIDENT">ml_typ_of_typ</span> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a> <a href="#local_t_118"><span class="LIDENT">t</span></a><span class="COMMA">,</span> <span class="LIDENT">int_type</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Function</span> <span class="LPAREN">(</span><span id="local_f_119"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_t_120"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_304"><span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span id="local_l_121"><span class="LIDENT">l</span></span><span class="COMMA">,</span> <span id="local_t_122"><span class="LIDENT">t</span></span><span class="RPAREN">)</span></span> <span class="EQUAL">=</span> <span class="LIDENT">ml_external_type_of_fn</span> <span class="TILDE">~</span><a href="#local_concurrency_111"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_112"><span class="LIDENT">errno</span></a> <a href="#local_t_120"><span class="LIDENT">t</span></a> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Prim</span> <span class="LPAREN">(</span><span class="LIDENT">ml_typ_of_typ</span> <span class="LPAREN">(</span><span class="LIDENT">flip</span> <a href="#local_polarity_114"><span class="LIDENT">polarity</span></a><span class="RPAREN">)</span> <a href="#local_f_119"><span class="LIDENT">f</span></a> <span class="COLONCOLON">::</span> <a href="#local_l_121"><span class="LIDENT">l</span></a><span class="COMMA">,</span> <a href="#local_t_122"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-var_counter"><span class="LIDENT">var_counter</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-fresh_var"><span class="LIDENT">fresh_var</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-incr"><span class="LIDENT">incr</span></a> <span class="LIDENT">var_counter</span><span class="SEMI">;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;x%d&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><span class="LIDENT">var_counter</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-extern"><span class="LIDENT">extern</span></span> <span class="TILDE">~</span><span id="local_concurrency_123"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_124"><span class="LIDENT">errno</span></span> <span class="TILDE">~</span><span id="local_stub_name_125"><span class="LIDENT">stub_name</span></span> <span class="TILDE">~</span><span id="local_external_name_126"><span class="LIDENT">external_name</span></span> <span id="local_fmt_127"><span class="LIDENT">fmt</span></span> <span id="local_fn_128"><span class="LIDENT">fn</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_ext_129"><span class="LIDENT">ext</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_typ_130"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span> <span class="LIDENT">ml_external_type_of_fn</span> <span class="TILDE">~</span><a href="#local_concurrency_123"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_124"><span class="LIDENT">errno</span></a> <a href="#local_fn_128"><span class="LIDENT">fn</span></a> <span class="UIDENT">Out</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">ident</span> <span class="EQUAL">=</span> <a href="#local_external_name_126"><span class="LIDENT">external_name</span></a><span class="SEMI">;</span><span class="EOL">
</span>       <span class="LIDENT">typ</span> <span class="EQUAL">=</span> <a href="#local_typ_130"><span class="LIDENT">typ</span></a><span class="SEMI">;</span><span class="EOL">
</span>       <span class="LIDENT">primname</span> <span class="EQUAL">=</span> <a href="#local_stub_name_125"><span class="LIDENT">stub_name</span></a><span class="SEMI">;</span><span class="EOL">
</span>       <span class="LIDENT">primname_byte</span> <span class="EQUAL">=</span> <span class="LIDENT">byte_stub_name</span> <a href="#local_stub_name_125"><span class="LIDENT">stub_name</span></a> <a href="#local_typ_130"><span class="LIDENT">typ</span></a><span class="SEMI">;</span><span class="EOL">
</span>       <span class="LIDENT">attributes</span> <span class="EQUAL">=</span> <span class="LIDENT">attributes</span> <a href="#local_fn_128"><span class="LIDENT">fn</span></a><span class="SEMI">;</span> <span class="RBRACE">}</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_127"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;%a@.&quot;</span> <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LIDENT">extern</span> <a href="#local_ext_129"><span class="LIDENT">ext</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-static_con"><span class="LIDENT">static_con</span></span> <span id="local_c_131"><span class="LIDENT">c</span></span> <span id="local_args_132"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="LPAREN">(</span><span class="STRING">&quot;CI.&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a> <a href="#local_c_131"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_args_132"><span class="LIDENT">args</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-local_con"><span class="LIDENT">local_con</span></span> <span id="local_c_133"><span class="LIDENT">c</span></span> <span id="local_args_134"><span class="LIDENT">args</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <a href="#local_c_133"><span class="LIDENT">c</span></a><span class="COMMA">,</span> <a href="#local_args_134"><span class="LIDENT">args</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-map_result_id"><span class="LIDENT">map_result_id</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;map_result&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-make_ptr"><span class="LIDENT">make_ptr</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.make_ptr&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-make_fun_ptr"><span class="LIDENT">make_fun_ptr</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.make_fun_ptr&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-make_structured"><span class="LIDENT">make_structured</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.make_structured&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-map_result"><span class="LIDENT">map_result</span></span> <span class="TILDE">~</span><span id="local_concurrency_135"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_136"><span class="LIDENT">errno</span></span> <span id="local_f_137"><span class="LIDENT">f</span></span> <span id="local_e_138"><span class="LIDENT">e</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_map_result_139"><span class="LIDENT">map_result</span></span> <span id="local_f_140"><span class="LIDENT">f</span></span> <span id="local_x_141"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">map_result_id</span><span class="COMMA">,</span> <a href="#local_f_140"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_x_141"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_concurrency_135"><span class="LIDENT">concurrency</span></a><span class="COMMA">,</span> <a href="#local_errno_136"><span class="LIDENT">errno</span></a><span class="COMMA">,</span> <a href="#local_f_137"><span class="LIDENT">f</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span id="local_x_142"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_142"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span id="local_x_143"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_143"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span id="local_x_144"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_144"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="HASH">#</span><span class="LIDENT">non_lwt</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span id="local_x_145"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_145"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span id="local_x_146"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="#local_map_result_139"><span class="LIDENT">map_result</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">make_ptr</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_146"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <span id="local_x_147"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="#local_map_result_139"><span class="LIDENT">map_result</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">make_fun_ptr</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_147"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <span id="local_x_148"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="#local_map_result_139"><span class="LIDENT">map_result</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">make_structured</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_148"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_e_138"><span class="LIDENT">e</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span id="local_x_149"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="#local_map_result_139"><span class="LIDENT">map_result</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_149"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_e_138"><span class="LIDENT">e</span></a> <span class="EOL">
</span><span class="EOL">
</span><span id="type-pattern_exp_return"><span class="TYPE">type</span> <span class="LIDENT">pattern_exp_return</span> <span class="EQUAL">=</span> <span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span> <span class="LIDENT">option</span> <span class="STAR">*</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="LIDENT">list</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-pattern_and_exp_of_typ"><span class="LIDENT">pattern_and_exp_of_typ</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <span class="LIDENT">concurrency</span><span class="COLON">:</span><span class="LIDENT">concurrency_policy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">errno</span><span class="COLON">:</span><span class="LIDENT">errno_policy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="../ctypes/ctypes_static.ml.html#type-typ"><span class="LIDENT">a</span> <span class="LIDENT">typ</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">polarity</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pattern_exp_return</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_concurrency_150"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_151"><span class="LIDENT">errno</span></span> <span id="local_typ_152"><span class="LIDENT">typ</span></span> <span id="local_e_153"><span class="LIDENT">e</span></span> <span id="local_pol_154"><span class="LIDENT">pol</span></span> <span id="local_binds_155"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="MATCH">match</span> <a href="#local_typ_152"><span class="LIDENT">typ</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Void</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Void&quot;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Primitive</span> <span id="local_p_156"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_id_157"><span class="LIDENT">id</span></span> <span class="EQUAL">=</span> <a href="cstubs_public_name.ml.html#val-constructor_cident_of_prim"><span class="UIDENT">Cstubs_public_name</span><span class="DOT">.</span><span class="LIDENT">constructor_cident_of_prim</span></a> <span class="LABEL">~module_name:</span><span class="STRING">&quot;CI&quot;</span> <a href="#local_p_156"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Primitive&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><a href="#local_id_157"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Pointer</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_158"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Pointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_159"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_158"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_159"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;CPointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_159"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_160"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_161"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Pointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_160"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_161"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">map_result</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <a href="#local_x_160"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Funptr</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_162"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Funptr&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_163"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_162"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_163"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Static_funptr&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_163"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_164"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_165"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Funptr&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_164"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_165"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">map_result</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">MakeFunPtr</span> <a href="#local_x_164"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Struct</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_166"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Struct&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_167"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_166"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_167"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>       <a href="#local_binds_155"><span class="LIDENT">binds</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;CPointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_167"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span><span class="EOL">
</span>                <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Ctypes.addr&quot;</span><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_168"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_169"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Struct&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_x_168"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_169"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">map_result</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <a href="#local_x_168"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Union</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_170"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Union&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_171"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_170"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_171"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>       <a href="#local_binds_155"><span class="LIDENT">binds</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;CPointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_171"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span><span class="EOL">
</span>                <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Ctypes.addr&quot;</span><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_172"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_173"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Union&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_x_172"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_173"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">map_result</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">MakeStructured</span> <a href="#local_x_172"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">View</span> <span class="LBRACE">{</span> <span id="local_ty_174"><span class="LIDENT">ty</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a>  <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_175"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_y_176"><span class="LIDENT">y</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_e_177"><span class="LIDENT">e</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_175"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="LPAREN">(</span><span id="local_p_178"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span id="local_binds_179"><span class="LIDENT">binds</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_e_180"><span class="LIDENT">e</span></span> <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_p_181"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_e_182"><span class="LIDENT">e</span></span><span class="COMMA">,</span> <span id="local_binds_183"><span class="LIDENT">binds</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LIDENT">pattern_and_exp_of_typ</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <a href="#local_ty_174"><span class="LIDENT">ty</span></a> <a href="#local_e_177"><span class="LIDENT">e</span></a> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="COMMA">,</span> <a href="#local_e_177"><span class="LIDENT">e</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_184"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;View&quot;</span><span class="EOL">
</span>        <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ty&quot;</span><span class="COMMA">,</span> <a href="#local_p_181"><span class="LIDENT">p</span></a><span class="SEMI">;</span><span class="EOL">
</span>                   <a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;write&quot;</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_175"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Etc</span><span class="RPAREN">)</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_184"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <a href="#local_y_176"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_y_176"><span class="LIDENT">y</span></a><span class="COMMA">,</span> <a href="#local_e_182"><span class="LIDENT">e</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_binds_183"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="LPAREN">(</span><span id="local_p_185"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span id="local_binds_186"><span class="LIDENT">binds</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_e_187"><span class="LIDENT">e</span></span> <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_p_188"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_e_189"><span class="LIDENT">e</span></span><span class="COMMA">,</span> <span id="local_binds_190"><span class="LIDENT">binds</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LIDENT">pattern_and_exp_of_typ</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <a href="#local_ty_174"><span class="LIDENT">ty</span></a> <a href="#local_e_153"><span class="LIDENT">e</span></a> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="COMMA">,</span> <a href="#local_e_153"><span class="LIDENT">e</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_x_191"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_pat_192"><span class="LIDENT">pat</span></span> <span class="EQUAL">=</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;View&quot;</span><span class="EOL">
</span>        <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ty&quot;</span><span class="COMMA">,</span> <a href="#local_p_188"><span class="LIDENT">p</span></a><span class="SEMI">;</span><span class="EOL">
</span>                   <a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;read&quot;</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <a href="#local_x_191"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Etc</span><span class="RPAREN">)</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_192"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">map_result</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <a href="#local_x_191"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <a href="#local_e_189"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_binds_190"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Qualified</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_ty_193"><span class="LIDENT">ty</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pattern_and_exp_of_typ</span> <span class="TILDE">~</span><a href="#local_concurrency_150"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_151"><span class="LIDENT">errno</span></a> <a href="#local_ty_193"><span class="LIDENT">ty</span></a> <a href="#local_e_153"><span class="LIDENT">e</span></a> <a href="#local_pol_154"><span class="LIDENT">pol</span></a> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span id="local_ty_194"><span class="LIDENT">ty</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <a href="#local_pol_154"><span class="LIDENT">pol</span></a><span class="COMMA">,</span> <a href="#local_ty_194"><span class="LIDENT">ty</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span><span class="COMMA">,</span> <span class="UIDENT">String</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;OCaml&quot;</span> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;String&quot;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span><span class="COMMA">,</span> <span class="UIDENT">Bytes</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;OCaml&quot;</span> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;Bytes&quot;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">In</span><span class="COMMA">,</span> <span class="UIDENT">FloatArray</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;OCaml&quot;</span> <span class="LBRACKET">[</span><span class="LIDENT">static_con</span> <span class="STRING">&quot;FloatArray&quot;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <a href="#local_binds_155"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span><span class="COMMA">,</span> <span class="UIDENT">String</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml strings as return values&quot;</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span><span class="COMMA">,</span> <span class="UIDENT">Bytes</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml bytes values as return values&quot;</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Out</span><span class="COMMA">,</span> <span class="UIDENT">FloatArray</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml float arrays as return values&quot;</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Abstract</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_ty_195"><span class="LIDENT">ty</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected abstract type encountered during ML code generation: %s&quot;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_ty_195"><span class="LIDENT">ty</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Array</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_ty_196"><span class="LIDENT">ty</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected array type encountered during ML code generation: %s&quot;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_ty_196"><span class="LIDENT">ty</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Bigarray</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_ty_197"><span class="LIDENT">ty</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>    <span class="STRING">&quot;Unexpected bigarray type encountered during ML code generation: %s&quot;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_ty_197"><span class="LIDENT">ty</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Build a pattern (without variables) that matches the argument *)</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-pattern_of_typ"><span class="LIDENT">pattern_of_typ</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <a href="../ctypes/ctypes_static.ml.html#type-typ"><span class="LIDENT">a</span> <span class="LIDENT">typ</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_pat</span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="UIDENT">Void</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">static_con</span> <span class="STRING">&quot;Void&quot;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Primitive</span> <span id="local_p_198"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_id_199"><span class="LIDENT">id</span></span> <span class="EQUAL">=</span> <a href="cstubs_public_name.ml.html#val-constructor_cident_of_prim"><span class="UIDENT">Cstubs_public_name</span><span class="DOT">.</span><span class="LIDENT">constructor_cident_of_prim</span></a> <span class="LABEL">~module_name:</span><span class="STRING">&quot;CI&quot;</span> <a href="#local_p_198"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Primitive&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><a href="#local_id_199"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Pointer</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Pointer&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Funptr</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Funptr&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Struct</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Struct&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Union</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Union&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">View</span> <span class="LBRACE">{</span> <span id="local_ty_200"><span class="LIDENT">ty</span></span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;View&quot;</span><span class="EOL">
</span>      <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.ty&quot;</span><span class="COMMA">,</span> <span class="LIDENT">pattern_of_typ</span> <a href="#local_ty_200"><span class="LIDENT">ty</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Etc</span><span class="RPAREN">)</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Qualified</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_ty_201"><span class="LIDENT">ty</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">static_con</span> <span class="STRING">&quot;Qualified&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="SEMI">;</span> <span class="LIDENT">pattern_of_typ</span> <a href="#local_ty_201"><span class="LIDENT">ty</span></a><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Array</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>     <span class="LIDENT">static_con</span> <span class="STRING">&quot;Array&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="SEMI">;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Bigarray</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>     <span class="LIDENT">static_con</span> <span class="STRING">&quot;Bigarray&quot;</span> <span class="LBRACKET">[</span><span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">String</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml strings as global values&quot;</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">Bytes</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml bytes values as global values&quot;</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">OCaml</span> <span class="UIDENT">FloatArray</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../ctypes/ctypes_static.ml.html#val-unsupported"><span class="UIDENT">Ctypes_static</span><span class="DOT">.</span><span class="LIDENT">unsupported</span></a><span class="EOL">
</span>      <span class="STRING">&quot;cstubs does not support OCaml float arrays as global values&quot;</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Abstract</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_ty_202"><span class="LIDENT">ty</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cstubs_errors.ml.html#val-internal_error"><span class="LIDENT">internal_error</span></a><span class="EOL">
</span>      <span class="STRING">&quot;Unexpected abstract type encountered during ML code generation: %s&quot;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="../ctypes/ctypes_type_printing.ml.html#val-string_of_typ"><span class="UIDENT">Ctypes</span><span class="DOT">.</span><span class="LIDENT">string_of_typ</span></a> <a href="#local_ty_202"><span class="LIDENT">ty</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span id="type-wrapper_state"><span class="TYPE">type</span> <span class="LIDENT">wrapper_state</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>  <span id="def_313"><span class="LIDENT">pat</span><span class="COLON">:</span> <span class="LIDENT">ml_pat</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_307"><span class="LIDENT">exp</span><span class="COLON">:</span> <span class="LIDENT">ml_exp</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_311"><span class="LIDENT">args</span><span class="COLON">:</span> <span class="LIDENT">lident</span> <span class="LIDENT">list</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_309"><span class="LIDENT">trivial</span><span class="COLON">:</span> <span class="LIDENT">bool</span><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_317"><span class="LIDENT">binds</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="LIDENT">list</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lwt_unix_run_job"><span class="LIDENT">lwt_unix_run_job</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Lwt_unix.run_job&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lwt_preemptive_detach"><span class="LIDENT">lwt_preemptive_detach</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Lwt_preemptive.detach&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-run_exp"><span class="LIDENT">run_exp</span></span> <span class="TILDE">~</span><span id="local_concurrency_203"><span class="LIDENT">concurrency</span></span> <span id="local_exp_204"><span class="LIDENT">exp</span></span> <span class="EQUAL">=</span> <span class="MATCH">match</span> <a href="#local_concurrency_203"><span class="LIDENT">concurrency</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="HASH">#</span><span class="LIDENT">non_lwt</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_exp_204"><span class="LIDENT">exp</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_jobs</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">lwt_unix_run_job</span><span class="COMMA">,</span> <a href="#local_exp_204"><span class="LIDENT">exp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Lwt_preemptive</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span><span class="EOL">
</span>                         <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">lwt_preemptive_detach</span><span class="COMMA">,</span><span class="EOL">
</span>                                 <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="STRING">&quot;_&quot;</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_exp_204"><span class="LIDENT">exp</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>                          <span class="BACKQUOTE">`</span><span class="UIDENT">Unit</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-let_bind"><span class="LIDENT">let_bind</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_binds_205"><span class="LIDENT">binds</span></span> <span id="local_e_206"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-fold_left"><span class="UIDENT">ListLabels</span><span class="DOT">.</span><span class="LIDENT">fold_left</span></a> <span class="LABEL">~init:</span><a href="#local_e_206"><span class="LIDENT">e</span></a> <a href="#local_binds_205"><span class="LIDENT">binds</span></a><span class="EOL">
</span>      <span class="LABEL">~f:</span><span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e'_207"><span class="LIDENT">e'</span></span> <span class="LPAREN">(</span><span id="local_x_208"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_e_209"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Let</span> <span class="LPAREN">(</span><a href="#local_x_208"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_e_209"><span class="LIDENT">e</span></a><span class="COMMA">,</span> <a href="#local_e'_207"><span class="LIDENT">e'</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-wrapper_body"><span class="LIDENT">wrapper_body</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <span class="LIDENT">concurrency</span><span class="COLON">:</span><span class="LIDENT">concurrency_policy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">errno</span><span class="COLON">:</span><span class="LIDENT">errno_policy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="../ctypes/ctypes_static.ml.html#type-fn"><span class="LIDENT">a</span> <span class="LIDENT">fn</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">polarity</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span><span class="RPAREN">)</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">wrapper_state</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_concurrency_210"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_211"><span class="LIDENT">errno</span></span> <span id="local_fn_212"><span class="LIDENT">fn</span></span> <span id="local_exp_213"><span class="LIDENT">exp</span></span> <span id="local_pol_214"><span class="LIDENT">pol</span></span> <span id="local_binds_215"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="MATCH">match</span> <a href="#local_fn_212"><span class="LIDENT">fn</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Returns</span> <span id="local_t_216"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_exp_217"><span class="LIDENT">exp</span></span> <span class="EQUAL">=</span> <span class="LIDENT">run_exp</span> <span class="TILDE">~</span><a href="#local_concurrency_210"><span class="LIDENT">concurrency</span></a> <a href="#local_exp_213"><span class="LIDENT">exp</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <span class="LIDENT">pattern_and_exp_of_typ</span> <span class="TILDE">~</span><a href="#local_concurrency_210"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_211"><span class="LIDENT">errno</span></a> <a href="#local_t_216"><span class="LIDENT">t</span></a> <a href="#local_exp_217"><span class="LIDENT">exp</span></a> <span class="LPAREN">(</span><span class="LIDENT">flip</span> <a href="#local_pol_214"><span class="LIDENT">pol</span></a><span class="RPAREN">)</span> <a href="#local_binds_215"><span class="LIDENT">binds</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span id="local_pat_218"><span class="LIDENT">pat</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span id="local_binds_219"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACE">{</span> <a href="#local_exp_217"><span class="LIDENT">exp</span></a> <span class="SEMI">;</span> <span class="LIDENT">args</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="SEMI">;</span> <span class="LIDENT">trivial</span> <span class="EQUAL">=</span> <span class="TRUE">true</span><span class="SEMI">;</span> <a href="#local_binds_219"><span class="LIDENT">binds</span></a><span class="SEMI">;</span><span class="EOL">
</span>                            <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span class="LIDENT">local_con</span> <span class="STRING">&quot;Returns&quot;</span> <span class="LBRACKET">[</span><a href="#local_pat_218"><span class="LIDENT">pat</span></a><span class="RBRACKET">]</span> <span class="RBRACE">}</span><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_pat_220"><span class="LIDENT">pat</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_exp_221"><span class="LIDENT">exp</span></span><span class="COMMA">,</span> <span id="local_binds_222"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACE">{</span> <a href="#local_exp_221"><span class="LIDENT">exp</span></a><span class="SEMI">;</span> <span class="LIDENT">args</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="SEMI">;</span> <span class="LIDENT">trivial</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span> <a href="#local_binds_222"><span class="LIDENT">binds</span></a><span class="SEMI">;</span><span class="EOL">
</span>                                <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span class="LIDENT">local_con</span> <span class="STRING">&quot;Returns&quot;</span> <span class="LBRACKET">[</span><a href="#local_pat_220"><span class="LIDENT">pat</span></a><span class="RBRACKET">]</span> <span class="RBRACE">}</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Function</span> <span class="LPAREN">(</span><span id="local_f_223"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_t_224"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_x_225"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="BEGIN">begin</span> <span class="MATCH">match</span> <span class="LIDENT">pattern_and_exp_of_typ</span> <span class="TILDE">~</span><a href="#local_concurrency_210"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_211"><span class="LIDENT">errno</span></a><span class="EOL">
</span>                  <a href="#local_f_223"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_225"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_pol_214"><span class="LIDENT">pol</span></a> <a href="#local_binds_215"><span class="LIDENT">binds</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_fpat_226"><span class="LIDENT">fpat</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span id="local_binds_227"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_306"><span class="LBRACE">{</span> <span id="local_exp_229"><span class="LIDENT">exp</span></span><span class="SEMI">;</span> <span id="local_args_230"><span class="LIDENT">args</span></span><span class="SEMI">;</span> <span id="local_trivial_231"><span class="LIDENT">trivial</span></span><span class="SEMI">;</span> <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span id="local_tpat_228"><span class="LIDENT">tpat</span></span><span class="SEMI">;</span> <span id="local_binds_232"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LIDENT">wrapper_body</span> <span class="TILDE">~</span><a href="#local_concurrency_210"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_211"><span class="LIDENT">errno</span></a><span class="EOL">
</span>          <a href="#local_t_224"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="#local_exp_213"><span class="LIDENT">exp</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_225"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_pol_214"><span class="LIDENT">pol</span></a> <a href="#local_binds_227"><span class="LIDENT">binds</span></a>  <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACE">{</span> <a href="#local_exp_229"><span class="LIDENT">exp</span></a><span class="SEMI">;</span> <span class="LIDENT">args</span> <span class="EQUAL">=</span> <a href="#local_x_225"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <a href="#local_args_230"><span class="LIDENT">args</span></a><span class="SEMI">;</span> <a href="#local_trivial_231"><span class="LIDENT">trivial</span></a><span class="SEMI">;</span> <a href="#local_binds_232"><span class="LIDENT">binds</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span class="LIDENT">local_con</span> <span class="STRING">&quot;Function&quot;</span> <span class="LBRACKET">[</span><a href="#local_fpat_226"><span class="LIDENT">fpat</span></a><span class="SEMI">;</span> <a href="#local_tpat_228"><span class="LIDENT">tpat</span></a><span class="RBRACKET">]</span> <span class="RBRACE">}</span><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_fpat_233"><span class="LIDENT">fpat</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_exp'_234"><span class="LIDENT">exp'</span></span><span class="COMMA">,</span> <span id="local_binds_235"><span class="LIDENT">binds</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_303"><span class="LBRACE">{</span> <span id="local_exp_237"><span class="LIDENT">exp</span></span><span class="SEMI">;</span> <span class="LIDENT">args</span> <span class="EQUAL">=</span> <span id="local_xs_238"><span class="LIDENT">xs</span></span><span class="SEMI">;</span> <span id="local_trivial_239"><span class="LIDENT">trivial</span></span><span class="SEMI">;</span> <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span id="local_tpat_236"><span class="LIDENT">tpat</span></span><span class="SEMI">;</span> <span id="local_binds_240"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LIDENT">wrapper_body</span> <span class="TILDE">~</span><a href="#local_concurrency_210"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_211"><span class="LIDENT">errno</span></a><span class="EOL">
</span>          <a href="#local_t_224"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="#local_exp_213"><span class="LIDENT">exp</span></a><span class="COMMA">,</span> <a href="#local_exp'_234"><span class="LIDENT">exp'</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_pol_214"><span class="LIDENT">pol</span></a> <a href="#local_binds_235"><span class="LIDENT">binds</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACE">{</span> <a href="#local_exp_237"><span class="LIDENT">exp</span></a><span class="SEMI">;</span> <span class="LIDENT">args</span> <span class="EQUAL">=</span> <a href="#local_x_225"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <a href="#local_xs_238"><span class="LIDENT">xs</span></a><span class="SEMI">;</span> <span class="LIDENT">trivial</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span> <a href="#local_binds_240"><span class="LIDENT">binds</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">pat</span> <span class="EQUAL">=</span> <span class="LIDENT">local_con</span> <span class="STRING">&quot;Function&quot;</span> <span class="LBRACKET">[</span><a href="#local_fpat_233"><span class="LIDENT">fpat</span></a><span class="SEMI">;</span> <a href="#local_tpat_236"><span class="LIDENT">tpat</span></a><span class="RBRACKET">]</span> <span class="RBRACE">}</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lwt_bind"><span class="LIDENT">lwt_bind</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Lwt.bind&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-lwt_return"><span class="LIDENT">lwt_return</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;Lwt.return&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-box_lwt"><span class="LIDENT">box_lwt</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;box_lwt&quot;</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-use_value"><span class="LIDENT">use_value</span></span> <span class="EQUAL">=</span> <a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;CI.use_value&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-return_result"><span class="LIDENT">return_result</span></span> <span class="COLON">:</span> <span class="LIDENT">args</span><span class="COLON">:</span><span class="LIDENT">lident</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_exp</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_args_241"><span class="LIDENT">args</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_x_242"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* fun v -&gt; CI.use_value (x1,x2,....xn); Lwt.return v *)</span><span class="EOL">
</span>    <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><a href="#local_x_242"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span><span class="EOL">
</span>          <span class="BACKQUOTE">`</span><span class="UIDENT">Seq</span><span class="EOL">
</span>            <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">use_value</span><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="BACKQUOTE">`</span><span class="UIDENT">Tuple</span><span class="EOL">
</span>                      <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">ListLabels</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <a href="#local_args_241"><span class="LIDENT">args</span></a><span class="EOL">
</span>                         <span class="LABEL">~f:</span><span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_x_243"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <a href="#local_x_243"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>             <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">lwt_return</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="UIDENT">Ctypes_path</span><span class="DOT">.</span><span class="LIDENT">path_of_string</span></a> <a href="#local_x_242"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** Returns the variables bound in a pattern, in no particular order *)</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-pat_bound_vars"><span class="LIDENT">pat_bound_vars</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_pat</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lident</span> <span class="LIDENT">list</span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Var</span> <span id="local_x_244"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span><a href="#local_x_244"><span class="LIDENT">x</span></a><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Record</span> <span class="LPAREN">(</span><span id="local_args_245"><span class="LIDENT">args</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pats_bound_vars</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-snd"><span class="LIDENT">snd</span></a> <a href="#local_args_245"><span class="LIDENT">args</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="LPAREN">(</span><span id="local_p_246"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_x_247"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_247"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <span class="LIDENT">pat_bound_vars</span> <a href="#local_p_246"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Underscore</span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Con</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_ps_248"><span class="LIDENT">ps</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pats_bound_vars</span> <a href="#local_ps_248"><span class="LIDENT">ps</span></a><span class="EOL">
</span><span class="AND">and</span> <span id="val-pats_bound_vars"><span class="LIDENT">pats_bound_vars</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_pat</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lident</span> <span class="LIDENT">list</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_ps_249"><span class="LIDENT">ps</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-fold_left"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_left</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_xs_250"><span class="LIDENT">xs</span></span> <span id="local_p_251"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">pat_bound_vars</span> <a href="#local_p_251"><span class="LIDENT">p</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <a href="#local_xs_250"><span class="LIDENT">xs</span></a><span class="RPAREN">)</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <a href="#local_ps_249"><span class="LIDENT">ps</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-wrapper"><span class="LIDENT">wrapper</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <span class="LIDENT">concurrency</span><span class="COLON">:</span><span class="LIDENT">concurrency_policy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">errno</span><span class="COLON">:</span><span class="LIDENT">errno_policy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="ctypes_path.ml.html#type-path"><span class="LIDENT">path</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#type-fn"><span class="LIDENT">a</span> <span class="LIDENT">fn</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">polarity</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">ml_pat</span> <span class="STAR">*</span> <span class="LIDENT">ml_exp</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_concurrency_252"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_253"><span class="LIDENT">errno</span></span> <span id="local_id_254"><span class="LIDENT">id</span></span> <span id="local_fn_255"><span class="LIDENT">fn</span></span> <span id="local_f_256"><span class="LIDENT">f</span></span> <span id="local_pol_257"><span class="LIDENT">pol</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_p_258"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">wrapper_body</span> <span class="TILDE">~</span><a href="#local_concurrency_252"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_253"><span class="LIDENT">errno</span></a> <a href="#local_fn_255"><span class="LIDENT">fn</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_f_256"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_pol_257"><span class="LIDENT">pol</span></a> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_258"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_concurrency_252"><span class="LIDENT">concurrency</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="LBRACE">{</span> <span class="LIDENT">trivial</span> <span class="EQUAL">=</span> <span class="TRUE">true</span><span class="SEMI">;</span> <span id="local_pat_259"><span class="LIDENT">pat</span></span><span class="SEMI">;</span> <span id="local_binds_260"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span class="HASH">#</span><span class="LIDENT">non_lwt</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_259"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="LIDENT">let_bind</span> <a href="#local_binds_260"><span class="LIDENT">binds</span></a> <span class="LPAREN">(</span><span class="LIDENT">run_exp</span> <span class="TILDE">~</span><a href="#local_concurrency_252"><span class="LIDENT">concurrency</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <a href="#local_id_254"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span id="local_exp_262"><span class="LIDENT">exp</span></span><span class="SEMI">;</span> <span id="local_args_263"><span class="LIDENT">args</span></span><span class="SEMI">;</span> <span id="local_pat_261"><span class="LIDENT">pat</span></span><span class="SEMI">;</span> <span id="local_binds_264"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span class="HASH">#</span><span class="LIDENT">non_lwt</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_261"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><a href="#local_args_263"><span class="LIDENT">args</span></a><span class="COMMA">,</span> <span class="LIDENT">let_bind</span> <a href="#local_binds_264"><span class="LIDENT">binds</span></a> <a href="#local_exp_262"><span class="LIDENT">exp</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span class="LIDENT">trivial</span> <span class="EQUAL">=</span> <span class="TRUE">true</span><span class="SEMI">;</span> <span id="local_pat_265"><span class="LIDENT">pat</span></span><span class="SEMI">;</span> <span id="local_args_266"><span class="LIDENT">args</span></span><span class="SEMI">;</span> <span id="local_binds_267"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span class="HASH">#</span><span class="LIDENT">lwt</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_exp_268"><span class="LIDENT">exp</span></span> <span class="COLON">:</span> <span class="LIDENT">ml_exp</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-fold_left"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_left</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_f_269"><span class="LIDENT">f</span></span> <span id="local_p_270"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><a href="#local_f_269"><span class="LIDENT">f</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_p_270"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <a href="#local_id_254"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <a href="#local_args_266"><span class="LIDENT">args</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_265"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><a href="#local_args_266"><span class="LIDENT">args</span></a><span class="COMMA">,</span><span class="EOL">
</span>                  <span class="LIDENT">let_bind</span> <a href="#local_binds_267"><span class="LIDENT">binds</span></a><span class="EOL">
</span>                    <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">box_lwt</span><span class="COMMA">,</span><span class="EOL">
</span>                            <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">lwt_bind</span><span class="COMMA">,</span><span class="EOL">
</span>                                          <span class="LIDENT">run_exp</span> <span class="TILDE">~</span><a href="#local_concurrency_252"><span class="LIDENT">concurrency</span></a> <a href="#local_exp_268"><span class="LIDENT">exp</span></a><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>                                   <span class="LIDENT">return_result</span> <span class="LABEL">~args:</span><span class="LPAREN">(</span><a href="#local_args_266"><span class="LIDENT">args</span></a><span class="EOL">
</span>                                                        <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a> <span class="LIDENT">pats_bound_vars</span><span class="EOL">
</span>                                                            <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-fst"><span class="LIDENT">fst</span></a> <a href="#local_binds_267"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACE">{</span> <span id="local_exp_272"><span class="LIDENT">exp</span></span><span class="SEMI">;</span> <span id="local_args_273"><span class="LIDENT">args</span></span><span class="SEMI">;</span> <span id="local_pat_271"><span class="LIDENT">pat</span></span><span class="SEMI">;</span> <span id="local_binds_274"><span class="LIDENT">binds</span></span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span class="HASH">#</span><span class="LIDENT">lwt</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_pat_271"><span class="LIDENT">pat</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fun</span> <span class="LPAREN">(</span><a href="#local_args_273"><span class="LIDENT">args</span></a><span class="COMMA">,</span><span class="EOL">
</span>                  <span class="LIDENT">let_bind</span> <a href="#local_binds_274"><span class="LIDENT">binds</span></a><span class="EOL">
</span>                    <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">box_lwt</span><span class="COMMA">,</span><span class="EOL">
</span>                            <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LIDENT">lwt_bind</span><span class="COMMA">,</span> <a href="#local_exp_272"><span class="LIDENT">exp</span></a><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>                                   <span class="LIDENT">return_result</span> <span class="LABEL">~args:</span><span class="LPAREN">(</span><a href="#local_args_273"><span class="LIDENT">args</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(@)"><span class="INFIXOP1">@</span></a><span class="EOL">
</span>                                                          <span class="LIDENT">pats_bound_vars</span><span class="EOL">
</span>                                                            <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-fst"><span class="LIDENT">fst</span></a> <a href="#local_binds_274"><span class="LIDENT">binds</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-case"><span class="LIDENT">case</span></span> <span class="TILDE">~</span><span id="local_concurrency_275"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_276"><span class="LIDENT">errno</span></span> <span class="TILDE">~</span><span id="local_stub_name_277"><span class="LIDENT">stub_name</span></span> <span class="TILDE">~</span><span id="local_external_name_278"><span class="LIDENT">external_name</span></span> <span id="local_fmt_279"><span class="LIDENT">fmt</span></span> <span id="local_fn_280"><span class="LIDENT">fn</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="def_308"><span id="local_p_281"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_e_282"><span class="LIDENT">e</span></span></span> <span class="EQUAL">=</span> <span class="LIDENT">wrapper</span> <span class="TILDE">~</span><a href="#local_concurrency_275"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_276"><span class="LIDENT">errno</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_external_name_278"><span class="LIDENT">external_name</span></a><span class="RPAREN">)</span> <a href="#local_fn_280"><span class="LIDENT">fn</span></a> <a href="#local_external_name_278"><span class="LIDENT">external_name</span></a> <span class="UIDENT">In</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_279"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;hov 2&gt;@[&lt;h 2&gt;|@ @[@[%a@],@ %S@]@ -&gt;@]@ &quot;</span><span class="EOL">
</span>    <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_281"><span class="LIDENT">p</span></a> <a href="#local_stub_name_277"><span class="LIDENT">stub_name</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_279"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;hov 2&gt;@[%a@]@]@]@.&quot;</span> <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <a href="#local_e_282"><span class="LIDENT">e</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-val_case"><span class="LIDENT">val_case</span></span> <span class="TILDE">~</span><span id="local_stub_name_283"><span class="LIDENT">stub_name</span></span> <span class="TILDE">~</span><span id="local_external_name_284"><span class="LIDENT">external_name</span></span> <span id="local_fmt_285"><span class="LIDENT">fmt</span></span> <span id="local_typ_286"><span class="LIDENT">typ</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_x_287"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fresh_var</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p_288"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">As</span> <span class="LPAREN">(</span><span class="LIDENT">pattern_of_typ</span> <a href="#local_typ_286"><span class="LIDENT">typ</span></a><span class="COMMA">,</span> <a href="#local_x_287"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_app_289"><span class="LIDENT">app</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Appl</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_external_name_284"><span class="LIDENT">external_name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Unit</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_rhs_290"><span class="LIDENT">rhs</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">MakePtr</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ident</span> <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <a href="#local_x_287"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_app_289"><span class="LIDENT">app</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_285"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;hov 2&gt;@[&lt;h 2&gt;|@ @[@[%a@],@ %S@]@ -&gt;@]@ &quot;</span><span class="EOL">
</span>    <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_288"><span class="LIDENT">p</span></a> <a href="#local_stub_name_283"><span class="LIDENT">stub_name</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_285"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[&lt;hov 2&gt;@[%a@]@]@]@.&quot;</span><span class="EOL">
</span>    <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="LPAREN">(</span><span class="UIDENT">ApplParens</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_rhs_290"><span class="LIDENT">rhs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-constructor_decl"><span class="LIDENT">constructor_decl</span></span> <span class="COLON">:</span> <span class="TYPE">type</span> <span class="LIDENT">a</span><span class="DOT">.</span> <span class="LIDENT">concurrency</span><span class="COLON">:</span><span class="LIDENT">concurrency_policy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LIDENT">errno</span><span class="COLON">:</span><span class="LIDENT">errno_policy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span> <a href="../ctypes/ctypes_static.ml.html#type-fn"><span class="LIDENT">a</span> <span class="LIDENT">fn</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#type-formatter"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">formatter</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_concurrency_291"><span class="LIDENT">concurrency</span></span> <span class="TILDE">~</span><span id="local_errno_292"><span class="LIDENT">errno</span></span> <span id="local_name_293"><span class="LIDENT">name</span></span> <span id="local_fn_294"><span class="LIDENT">fn</span></span> <span id="local_fmt_295"><span class="LIDENT">fmt</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_295"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;@[|@ %s@ : (@[%a@])@ name@]@\n&quot;</span> <a href="#local_name_293"><span class="LIDENT">name</span></a><span class="EOL">
</span>      <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LIDENT">ml_external_type</span> <span class="LPAREN">(</span><span class="LIDENT">ml_external_type_of_fn</span> <span class="TILDE">~</span><a href="#local_concurrency_291"><span class="LIDENT">concurrency</span></a> <span class="TILDE">~</span><a href="#local_errno_292"><span class="LIDENT">errno</span></a> <a href="#local_fn_294"><span class="LIDENT">fn</span></a> <span class="UIDENT">In</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-inverse_case"><span class="LIDENT">inverse_case</span></span> <span class="TILDE">~</span><span id="local_register_name_296"><span class="LIDENT">register_name</span></span> <span class="TILDE">~</span><span id="local_constructor_297"><span class="LIDENT">constructor</span></span> <span id="local_name_298"><span class="LIDENT">name</span></span> <span id="local_fmt_299"><span class="LIDENT">fmt</span></span> <span id="local_fn_300"><span class="LIDENT">fn</span></span> <span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="def_305"><span id="local_p_301"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_e_302"><span class="LIDENT">e</span></span></span> <span class="EQUAL">=</span> <span class="LIDENT">wrapper</span> <span class="LABEL">~concurrency:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Sequential</span> <span class="LABEL">~errno:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Ignore_errno</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="ctypes_path.ml.html#val-path_of_string"><span class="LIDENT">path_of_string</span></a> <span class="STRING">&quot;f&quot;</span><span class="RPAREN">)</span> <a href="#local_fn_300"><span class="LIDENT">fn</span></a> <span class="STRING">&quot;f&quot;</span> <span class="UIDENT">Out</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/format.ml.html#val-fprintf"><span class="UIDENT">Format</span><span class="DOT">.</span><span class="LIDENT">fprintf</span></a> <a href="#local_fmt_299"><span class="LIDENT">fmt</span></a> <span class="STRING">&quot;|@[ @[%a, %S@] -&gt; %s %s (%a)@]@\n&quot;</span><span class="EOL">
</span>    <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_pat</span> <span class="UIDENT">NoApplParens</span><span class="RPAREN">)</span> <a href="#local_p_301"><span class="LIDENT">p</span></a> <a href="#local_name_298"><span class="LIDENT">name</span></a> <a href="#local_register_name_296"><span class="LIDENT">register_name</span></a> <a href="#local_constructor_297"><span class="LIDENT">constructor</span></a><span class="EOL">
</span>    <span class="UIDENT">Emit_ML</span><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">ml_exp</span> <span class="UIDENT">ApplParens</span><span class="RPAREN">)</span> <span class="EOL">
</span>    <a href="#local_e_302"><span class="LIDENT">e</span></a><span class="EOL">
</span></span></code></pre></body></html>
