<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamParallel (opam-core.opam-core.OpamParallel)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../sherlodoc_db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../../index.html">Up</a> ‚Äì <a href="../../../index.html">üè†</a> &#x00BB; <a href="../../index.html">opam-core</a> &#x00BB; Library <code>opam-core</code> &#x00BB; OpamParallel</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>OpamParallel</span></code><a href="../../src/opam-core/opamParallel.ml.html" class="source_link">Source</a></h1><p>Parallel execution of jobs following a directed graph</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">opam-core</a><ul><li>Library <code>opam-core</code><ul><li><a href="../OpamACL/index.html">OpamACL</a></li><li><a href="../OpamCached/index.html">OpamCached</a></li><li><a href="../OpamCompat/index.html">OpamCompat</a></li><li><a href="../OpamConsole/index.html">OpamConsole</a></li><li><a href="../OpamCoreConfig/index.html">OpamCoreConfig</a></li><li><a href="../OpamCoreConfigDeveloper/index.html">OpamCoreConfigDeveloper</a></li><li><a href="../OpamDirTrack/index.html">OpamDirTrack</a></li><li><a href="../OpamFilename/index.html">OpamFilename</a></li><li><a href="../OpamHash/index.html">OpamHash</a></li><li><a href="../OpamJson/index.html">OpamJson</a></li><li><a href="#" class="current_unit">OpamParallel</a><ul><li><a href="module-type-VERTEX/index.html">VERTEX</a></li><li><a href="module-type-G/index.html">G</a></li><li><a href="module-type-SIG/index.html">SIG</a></li><li><a href="Make/index.html">Make</a></li><li><a href="module-type-GRAPH/index.html">GRAPH</a></li><li><a href="MakeGraph/index.html">MakeGraph</a></li></ul></li><li><a href="../OpamProcess/index.html">OpamProcess</a></li><li><a href="../OpamSHA/index.html">OpamSHA</a></li><li><a href="../OpamSWHID/index.html">OpamSWHID</a></li><li><a href="../OpamStd/index.html">OpamStd</a></li><li><a href="../OpamStubs/index.html">OpamStubs</a></li><li><a href="../OpamStubsTypes/index.html">OpamStubsTypes</a></li><li><a href="../OpamSystem/index.html">OpamSystem</a></li><li><a href="../OpamUrl/index.html">OpamUrl</a></li><li><a href="../OpamVersion/index.html">OpamVersion</a></li><li><a href="../OpamVersionCompare/index.html">OpamVersionCompare</a></li><li><a href="../OpamVersionInfo/index.html">OpamVersionInfo</a></li></ul></li><li><a href="../../src/index.html">Sources</a></li></ul></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-VERTEX"><a href="#module-type-VERTEX" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-type-VERTEX" class="source_link">Source</a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-VERTEX/index.html">VERTEX</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dependency_label"><a href="#type-dependency_label" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#type-dependency_label" class="source_link">Source</a><code><span><span class="keyword">type</span> dependency_label</span><span> = unit</span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-G"><a href="#module-type-G" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-type-G" class="source_link">Source</a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-G/index.html">G</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Aborted"><a href="#exception-Aborted" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#exception-Aborted" class="source_link">Source</a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Aborted</span></span></code></div><div class="spec-doc"><p>When one job fails due to an exception, other running jobs are interrupted and reported with this sub-exception in the Errors list</p></div></div><p>Simply parallel execution of tasks</p><div class="odoc-spec"><div class="spec exception anchored" id="exception-Errors"><a href="#exception-Errors" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#exception-Errors" class="source_link">Source</a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Errors</span> <span class="keyword">of</span> <span>int list</span> * <span><span>(int * exn)</span> list</span> * <span>int list</span></span></code></div><div class="spec-doc"><p>In the simple iter, map and reduce cases, ints are the indexes of the jobs in the list. First list is return code of sucessfull commands, second those which raised expcetions, and third one those which were canceled.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#val-iter" class="source_link">Source</a><code><span><span class="keyword">val</span> iter : 
  <span><span class="label">jobs</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">command</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dry_run</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#val-map" class="source_link">Source</a><code><span><span class="keyword">val</span> map : 
  <span><span class="label">jobs</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">command</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dry_run</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reduce"><a href="#val-reduce" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#val-reduce" class="source_link">Source</a><code><span><span class="keyword">val</span> reduce : 
  <span><span class="label">jobs</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">command</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../OpamProcess/index.html#type-job">OpamProcess.job</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">merge</span>:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">nil</span>:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dry_run</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'b</span></span></code></div></div><p>More complex parallelism with dependency graphs</p><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-SIG"><a href="#module-type-SIG" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-type-SIG" class="source_link">Source</a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-SIG/index.html">SIG</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-Make" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-G/index.html">G</a> : <a href="module-type-G/index.html">G</a>) : <a href="module-type-SIG/index.html">SIG</a> <span class="keyword">with</span> <span><span class="keyword">module</span> <a href="module-type-SIG/G/index.html">G</a> = <a href="Make/argument-1-G/index.html">G</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="Make/argument-1-G/V/index.html#type-t">G.V.t</a> = <a href="Make/argument-1-G/V/index.html#type-t">G.V.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-GRAPH"><a href="#module-type-GRAPH" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-type-GRAPH" class="source_link">Source</a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-GRAPH/index.html">GRAPH</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-MakeGraph"><a href="#module-MakeGraph" class="anchor"></a><a href="../../src/opam-core/opamParallel.ml.html#module-MakeGraph" class="source_link">Source</a><code><span><span class="keyword">module</span> <a href="MakeGraph/index.html">MakeGraph</a></span><span> (<a href="MakeGraph/argument-1-V/index.html">V</a> : <a href="module-type-VERTEX/index.html">VERTEX</a>) : <a href="module-type-GRAPH/index.html">GRAPH</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-GRAPH/V/index.html#type-t">V.t</a> = <a href="MakeGraph/argument-1-V/index.html#type-t">V.t</a></span></span></code></div></div></div></body></html>
