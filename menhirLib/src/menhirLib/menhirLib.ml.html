<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: menhirLib.ml (menhirLib.src.menhirLib)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">menhirLib</a> &#x00BB; <a href="../index.html">Sources</a> &#x00BB; menhirLib &#x00BB; menhirLib.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>menhirLib.ml</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-global-toc"><ul><li><a href="../../index.html">menhirLib</a><ul><li>Library <code>menhirLib</code><ul><li><a href="../../menhirLib/MenhirLib/index.html">MenhirLib</a></li></ul></li><li><a href="../index.html">Sources</a><ul><li>menhirLib<ul><li><a href="#" class="current_unit">menhirLib.ml</a></li></ul></li></ul></li></ul></li></ul></nav></div><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
<a id="L179" class="source_line" href="#L179">179</a>
<a id="L180" class="source_line" href="#L180">180</a>
<a id="L181" class="source_line" href="#L181">181</a>
<a id="L182" class="source_line" href="#L182">182</a>
<a id="L183" class="source_line" href="#L183">183</a>
<a id="L184" class="source_line" href="#L184">184</a>
<a id="L185" class="source_line" href="#L185">185</a>
<a id="L186" class="source_line" href="#L186">186</a>
<a id="L187" class="source_line" href="#L187">187</a>
<a id="L188" class="source_line" href="#L188">188</a>
<a id="L189" class="source_line" href="#L189">189</a>
<a id="L190" class="source_line" href="#L190">190</a>
<a id="L191" class="source_line" href="#L191">191</a>
<a id="L192" class="source_line" href="#L192">192</a>
<a id="L193" class="source_line" href="#L193">193</a>
<a id="L194" class="source_line" href="#L194">194</a>
<a id="L195" class="source_line" href="#L195">195</a>
<a id="L196" class="source_line" href="#L196">196</a>
<a id="L197" class="source_line" href="#L197">197</a>
<a id="L198" class="source_line" href="#L198">198</a>
<a id="L199" class="source_line" href="#L199">199</a>
<a id="L200" class="source_line" href="#L200">200</a>
<a id="L201" class="source_line" href="#L201">201</a>
<a id="L202" class="source_line" href="#L202">202</a>
<a id="L203" class="source_line" href="#L203">203</a>
<a id="L204" class="source_line" href="#L204">204</a>
<a id="L205" class="source_line" href="#L205">205</a>
<a id="L206" class="source_line" href="#L206">206</a>
<a id="L207" class="source_line" href="#L207">207</a>
<a id="L208" class="source_line" href="#L208">208</a>
<a id="L209" class="source_line" href="#L209">209</a>
<a id="L210" class="source_line" href="#L210">210</a>
<a id="L211" class="source_line" href="#L211">211</a>
<a id="L212" class="source_line" href="#L212">212</a>
<a id="L213" class="source_line" href="#L213">213</a>
<a id="L214" class="source_line" href="#L214">214</a>
<a id="L215" class="source_line" href="#L215">215</a>
<a id="L216" class="source_line" href="#L216">216</a>
<a id="L217" class="source_line" href="#L217">217</a>
<a id="L218" class="source_line" href="#L218">218</a>
<a id="L219" class="source_line" href="#L219">219</a>
<a id="L220" class="source_line" href="#L220">220</a>
<a id="L221" class="source_line" href="#L221">221</a>
<a id="L222" class="source_line" href="#L222">222</a>
<a id="L223" class="source_line" href="#L223">223</a>
<a id="L224" class="source_line" href="#L224">224</a>
<a id="L225" class="source_line" href="#L225">225</a>
<a id="L226" class="source_line" href="#L226">226</a>
<a id="L227" class="source_line" href="#L227">227</a>
<a id="L228" class="source_line" href="#L228">228</a>
<a id="L229" class="source_line" href="#L229">229</a>
<a id="L230" class="source_line" href="#L230">230</a>
<a id="L231" class="source_line" href="#L231">231</a>
<a id="L232" class="source_line" href="#L232">232</a>
<a id="L233" class="source_line" href="#L233">233</a>
<a id="L234" class="source_line" href="#L234">234</a>
<a id="L235" class="source_line" href="#L235">235</a>
<a id="L236" class="source_line" href="#L236">236</a>
<a id="L237" class="source_line" href="#L237">237</a>
<a id="L238" class="source_line" href="#L238">238</a>
<a id="L239" class="source_line" href="#L239">239</a>
<a id="L240" class="source_line" href="#L240">240</a>
<a id="L241" class="source_line" href="#L241">241</a>
<a id="L242" class="source_line" href="#L242">242</a>
<a id="L243" class="source_line" href="#L243">243</a>
<a id="L244" class="source_line" href="#L244">244</a>
<a id="L245" class="source_line" href="#L245">245</a>
<a id="L246" class="source_line" href="#L246">246</a>
<a id="L247" class="source_line" href="#L247">247</a>
<a id="L248" class="source_line" href="#L248">248</a>
<a id="L249" class="source_line" href="#L249">249</a>
<a id="L250" class="source_line" href="#L250">250</a>
<a id="L251" class="source_line" href="#L251">251</a>
<a id="L252" class="source_line" href="#L252">252</a>
<a id="L253" class="source_line" href="#L253">253</a>
<a id="L254" class="source_line" href="#L254">254</a>
<a id="L255" class="source_line" href="#L255">255</a>
<a id="L256" class="source_line" href="#L256">256</a>
<a id="L257" class="source_line" href="#L257">257</a>
<a id="L258" class="source_line" href="#L258">258</a>
<a id="L259" class="source_line" href="#L259">259</a>
<a id="L260" class="source_line" href="#L260">260</a>
<a id="L261" class="source_line" href="#L261">261</a>
<a id="L262" class="source_line" href="#L262">262</a>
<a id="L263" class="source_line" href="#L263">263</a>
<a id="L264" class="source_line" href="#L264">264</a>
<a id="L265" class="source_line" href="#L265">265</a>
<a id="L266" class="source_line" href="#L266">266</a>
<a id="L267" class="source_line" href="#L267">267</a>
<a id="L268" class="source_line" href="#L268">268</a>
<a id="L269" class="source_line" href="#L269">269</a>
<a id="L270" class="source_line" href="#L270">270</a>
<a id="L271" class="source_line" href="#L271">271</a>
<a id="L272" class="source_line" href="#L272">272</a>
<a id="L273" class="source_line" href="#L273">273</a>
<a id="L274" class="source_line" href="#L274">274</a>
<a id="L275" class="source_line" href="#L275">275</a>
<a id="L276" class="source_line" href="#L276">276</a>
<a id="L277" class="source_line" href="#L277">277</a>
<a id="L278" class="source_line" href="#L278">278</a>
<a id="L279" class="source_line" href="#L279">279</a>
<a id="L280" class="source_line" href="#L280">280</a>
<a id="L281" class="source_line" href="#L281">281</a>
<a id="L282" class="source_line" href="#L282">282</a>
<a id="L283" class="source_line" href="#L283">283</a>
<a id="L284" class="source_line" href="#L284">284</a>
<a id="L285" class="source_line" href="#L285">285</a>
<a id="L286" class="source_line" href="#L286">286</a>
<a id="L287" class="source_line" href="#L287">287</a>
<a id="L288" class="source_line" href="#L288">288</a>
<a id="L289" class="source_line" href="#L289">289</a>
<a id="L290" class="source_line" href="#L290">290</a>
<a id="L291" class="source_line" href="#L291">291</a>
<a id="L292" class="source_line" href="#L292">292</a>
<a id="L293" class="source_line" href="#L293">293</a>
<a id="L294" class="source_line" href="#L294">294</a>
<a id="L295" class="source_line" href="#L295">295</a>
<a id="L296" class="source_line" href="#L296">296</a>
<a id="L297" class="source_line" href="#L297">297</a>
<a id="L298" class="source_line" href="#L298">298</a>
<a id="L299" class="source_line" href="#L299">299</a>
<a id="L300" class="source_line" href="#L300">300</a>
<a id="L301" class="source_line" href="#L301">301</a>
<a id="L302" class="source_line" href="#L302">302</a>
<a id="L303" class="source_line" href="#L303">303</a>
<a id="L304" class="source_line" href="#L304">304</a>
<a id="L305" class="source_line" href="#L305">305</a>
<a id="L306" class="source_line" href="#L306">306</a>
<a id="L307" class="source_line" href="#L307">307</a>
<a id="L308" class="source_line" href="#L308">308</a>
<a id="L309" class="source_line" href="#L309">309</a>
<a id="L310" class="source_line" href="#L310">310</a>
<a id="L311" class="source_line" href="#L311">311</a>
<a id="L312" class="source_line" href="#L312">312</a>
<a id="L313" class="source_line" href="#L313">313</a>
<a id="L314" class="source_line" href="#L314">314</a>
<a id="L315" class="source_line" href="#L315">315</a>
<a id="L316" class="source_line" href="#L316">316</a>
<a id="L317" class="source_line" href="#L317">317</a>
<a id="L318" class="source_line" href="#L318">318</a>
<a id="L319" class="source_line" href="#L319">319</a>
<a id="L320" class="source_line" href="#L320">320</a>
<a id="L321" class="source_line" href="#L321">321</a>
<a id="L322" class="source_line" href="#L322">322</a>
<a id="L323" class="source_line" href="#L323">323</a>
<a id="L324" class="source_line" href="#L324">324</a>
<a id="L325" class="source_line" href="#L325">325</a>
<a id="L326" class="source_line" href="#L326">326</a>
<a id="L327" class="source_line" href="#L327">327</a>
<a id="L328" class="source_line" href="#L328">328</a>
<a id="L329" class="source_line" href="#L329">329</a>
<a id="L330" class="source_line" href="#L330">330</a>
<a id="L331" class="source_line" href="#L331">331</a>
<a id="L332" class="source_line" href="#L332">332</a>
<a id="L333" class="source_line" href="#L333">333</a>
<a id="L334" class="source_line" href="#L334">334</a>
<a id="L335" class="source_line" href="#L335">335</a>
<a id="L336" class="source_line" href="#L336">336</a>
<a id="L337" class="source_line" href="#L337">337</a>
<a id="L338" class="source_line" href="#L338">338</a>
<a id="L339" class="source_line" href="#L339">339</a>
<a id="L340" class="source_line" href="#L340">340</a>
<a id="L341" class="source_line" href="#L341">341</a>
<a id="L342" class="source_line" href="#L342">342</a>
<a id="L343" class="source_line" href="#L343">343</a>
<a id="L344" class="source_line" href="#L344">344</a>
<a id="L345" class="source_line" href="#L345">345</a>
<a id="L346" class="source_line" href="#L346">346</a>
<a id="L347" class="source_line" href="#L347">347</a>
<a id="L348" class="source_line" href="#L348">348</a>
<a id="L349" class="source_line" href="#L349">349</a>
<a id="L350" class="source_line" href="#L350">350</a>
<a id="L351" class="source_line" href="#L351">351</a>
<a id="L352" class="source_line" href="#L352">352</a>
<a id="L353" class="source_line" href="#L353">353</a>
<a id="L354" class="source_line" href="#L354">354</a>
<a id="L355" class="source_line" href="#L355">355</a>
<a id="L356" class="source_line" href="#L356">356</a>
<a id="L357" class="source_line" href="#L357">357</a>
<a id="L358" class="source_line" href="#L358">358</a>
<a id="L359" class="source_line" href="#L359">359</a>
<a id="L360" class="source_line" href="#L360">360</a>
<a id="L361" class="source_line" href="#L361">361</a>
<a id="L362" class="source_line" href="#L362">362</a>
<a id="L363" class="source_line" href="#L363">363</a>
<a id="L364" class="source_line" href="#L364">364</a>
<a id="L365" class="source_line" href="#L365">365</a>
<a id="L366" class="source_line" href="#L366">366</a>
<a id="L367" class="source_line" href="#L367">367</a>
<a id="L368" class="source_line" href="#L368">368</a>
<a id="L369" class="source_line" href="#L369">369</a>
<a id="L370" class="source_line" href="#L370">370</a>
<a id="L371" class="source_line" href="#L371">371</a>
<a id="L372" class="source_line" href="#L372">372</a>
<a id="L373" class="source_line" href="#L373">373</a>
<a id="L374" class="source_line" href="#L374">374</a>
<a id="L375" class="source_line" href="#L375">375</a>
<a id="L376" class="source_line" href="#L376">376</a>
<a id="L377" class="source_line" href="#L377">377</a>
<a id="L378" class="source_line" href="#L378">378</a>
<a id="L379" class="source_line" href="#L379">379</a>
<a id="L380" class="source_line" href="#L380">380</a>
<a id="L381" class="source_line" href="#L381">381</a>
<a id="L382" class="source_line" href="#L382">382</a>
<a id="L383" class="source_line" href="#L383">383</a>
<a id="L384" class="source_line" href="#L384">384</a>
<a id="L385" class="source_line" href="#L385">385</a>
<a id="L386" class="source_line" href="#L386">386</a>
<a id="L387" class="source_line" href="#L387">387</a>
<a id="L388" class="source_line" href="#L388">388</a>
<a id="L389" class="source_line" href="#L389">389</a>
<a id="L390" class="source_line" href="#L390">390</a>
<a id="L391" class="source_line" href="#L391">391</a>
<a id="L392" class="source_line" href="#L392">392</a>
<a id="L393" class="source_line" href="#L393">393</a>
<a id="L394" class="source_line" href="#L394">394</a>
<a id="L395" class="source_line" href="#L395">395</a>
<a id="L396" class="source_line" href="#L396">396</a>
<a id="L397" class="source_line" href="#L397">397</a>
<a id="L398" class="source_line" href="#L398">398</a>
<a id="L399" class="source_line" href="#L399">399</a>
<a id="L400" class="source_line" href="#L400">400</a>
<a id="L401" class="source_line" href="#L401">401</a>
<a id="L402" class="source_line" href="#L402">402</a>
<a id="L403" class="source_line" href="#L403">403</a>
<a id="L404" class="source_line" href="#L404">404</a>
<a id="L405" class="source_line" href="#L405">405</a>
<a id="L406" class="source_line" href="#L406">406</a>
<a id="L407" class="source_line" href="#L407">407</a>
<a id="L408" class="source_line" href="#L408">408</a>
<a id="L409" class="source_line" href="#L409">409</a>
<a id="L410" class="source_line" href="#L410">410</a>
<a id="L411" class="source_line" href="#L411">411</a>
<a id="L412" class="source_line" href="#L412">412</a>
<a id="L413" class="source_line" href="#L413">413</a>
<a id="L414" class="source_line" href="#L414">414</a>
<a id="L415" class="source_line" href="#L415">415</a>
<a id="L416" class="source_line" href="#L416">416</a>
<a id="L417" class="source_line" href="#L417">417</a>
<a id="L418" class="source_line" href="#L418">418</a>
<a id="L419" class="source_line" href="#L419">419</a>
<a id="L420" class="source_line" href="#L420">420</a>
<a id="L421" class="source_line" href="#L421">421</a>
<a id="L422" class="source_line" href="#L422">422</a>
<a id="L423" class="source_line" href="#L423">423</a>
<a id="L424" class="source_line" href="#L424">424</a>
<a id="L425" class="source_line" href="#L425">425</a>
<a id="L426" class="source_line" href="#L426">426</a>
<a id="L427" class="source_line" href="#L427">427</a>
<a id="L428" class="source_line" href="#L428">428</a>
<a id="L429" class="source_line" href="#L429">429</a>
<a id="L430" class="source_line" href="#L430">430</a>
<a id="L431" class="source_line" href="#L431">431</a>
<a id="L432" class="source_line" href="#L432">432</a>
<a id="L433" class="source_line" href="#L433">433</a>
<a id="L434" class="source_line" href="#L434">434</a>
<a id="L435" class="source_line" href="#L435">435</a>
<a id="L436" class="source_line" href="#L436">436</a>
<a id="L437" class="source_line" href="#L437">437</a>
<a id="L438" class="source_line" href="#L438">438</a>
<a id="L439" class="source_line" href="#L439">439</a>
<a id="L440" class="source_line" href="#L440">440</a>
<a id="L441" class="source_line" href="#L441">441</a>
<a id="L442" class="source_line" href="#L442">442</a>
<a id="L443" class="source_line" href="#L443">443</a>
<a id="L444" class="source_line" href="#L444">444</a>
<a id="L445" class="source_line" href="#L445">445</a>
<a id="L446" class="source_line" href="#L446">446</a>
<a id="L447" class="source_line" href="#L447">447</a>
<a id="L448" class="source_line" href="#L448">448</a>
<a id="L449" class="source_line" href="#L449">449</a>
<a id="L450" class="source_line" href="#L450">450</a>
<a id="L451" class="source_line" href="#L451">451</a>
<a id="L452" class="source_line" href="#L452">452</a>
<a id="L453" class="source_line" href="#L453">453</a>
<a id="L454" class="source_line" href="#L454">454</a>
<a id="L455" class="source_line" href="#L455">455</a>
<a id="L456" class="source_line" href="#L456">456</a>
<a id="L457" class="source_line" href="#L457">457</a>
<a id="L458" class="source_line" href="#L458">458</a>
<a id="L459" class="source_line" href="#L459">459</a>
<a id="L460" class="source_line" href="#L460">460</a>
<a id="L461" class="source_line" href="#L461">461</a>
<a id="L462" class="source_line" href="#L462">462</a>
<a id="L463" class="source_line" href="#L463">463</a>
<a id="L464" class="source_line" href="#L464">464</a>
<a id="L465" class="source_line" href="#L465">465</a>
<a id="L466" class="source_line" href="#L466">466</a>
<a id="L467" class="source_line" href="#L467">467</a>
<a id="L468" class="source_line" href="#L468">468</a>
<a id="L469" class="source_line" href="#L469">469</a>
<a id="L470" class="source_line" href="#L470">470</a>
<a id="L471" class="source_line" href="#L471">471</a>
<a id="L472" class="source_line" href="#L472">472</a>
<a id="L473" class="source_line" href="#L473">473</a>
<a id="L474" class="source_line" href="#L474">474</a>
<a id="L475" class="source_line" href="#L475">475</a>
<a id="L476" class="source_line" href="#L476">476</a>
<a id="L477" class="source_line" href="#L477">477</a>
<a id="L478" class="source_line" href="#L478">478</a>
<a id="L479" class="source_line" href="#L479">479</a>
<a id="L480" class="source_line" href="#L480">480</a>
<a id="L481" class="source_line" href="#L481">481</a>
<a id="L482" class="source_line" href="#L482">482</a>
<a id="L483" class="source_line" href="#L483">483</a>
<a id="L484" class="source_line" href="#L484">484</a>
<a id="L485" class="source_line" href="#L485">485</a>
<a id="L486" class="source_line" href="#L486">486</a>
<a id="L487" class="source_line" href="#L487">487</a>
<a id="L488" class="source_line" href="#L488">488</a>
<a id="L489" class="source_line" href="#L489">489</a>
<a id="L490" class="source_line" href="#L490">490</a>
<a id="L491" class="source_line" href="#L491">491</a>
<a id="L492" class="source_line" href="#L492">492</a>
<a id="L493" class="source_line" href="#L493">493</a>
<a id="L494" class="source_line" href="#L494">494</a>
<a id="L495" class="source_line" href="#L495">495</a>
<a id="L496" class="source_line" href="#L496">496</a>
<a id="L497" class="source_line" href="#L497">497</a>
<a id="L498" class="source_line" href="#L498">498</a>
<a id="L499" class="source_line" href="#L499">499</a>
<a id="L500" class="source_line" href="#L500">500</a>
<a id="L501" class="source_line" href="#L501">501</a>
<a id="L502" class="source_line" href="#L502">502</a>
<a id="L503" class="source_line" href="#L503">503</a>
<a id="L504" class="source_line" href="#L504">504</a>
<a id="L505" class="source_line" href="#L505">505</a>
<a id="L506" class="source_line" href="#L506">506</a>
<a id="L507" class="source_line" href="#L507">507</a>
<a id="L508" class="source_line" href="#L508">508</a>
<a id="L509" class="source_line" href="#L509">509</a>
<a id="L510" class="source_line" href="#L510">510</a>
<a id="L511" class="source_line" href="#L511">511</a>
<a id="L512" class="source_line" href="#L512">512</a>
<a id="L513" class="source_line" href="#L513">513</a>
<a id="L514" class="source_line" href="#L514">514</a>
<a id="L515" class="source_line" href="#L515">515</a>
<a id="L516" class="source_line" href="#L516">516</a>
<a id="L517" class="source_line" href="#L517">517</a>
<a id="L518" class="source_line" href="#L518">518</a>
<a id="L519" class="source_line" href="#L519">519</a>
<a id="L520" class="source_line" href="#L520">520</a>
<a id="L521" class="source_line" href="#L521">521</a>
<a id="L522" class="source_line" href="#L522">522</a>
<a id="L523" class="source_line" href="#L523">523</a>
<a id="L524" class="source_line" href="#L524">524</a>
<a id="L525" class="source_line" href="#L525">525</a>
<a id="L526" class="source_line" href="#L526">526</a>
<a id="L527" class="source_line" href="#L527">527</a>
<a id="L528" class="source_line" href="#L528">528</a>
<a id="L529" class="source_line" href="#L529">529</a>
<a id="L530" class="source_line" href="#L530">530</a>
<a id="L531" class="source_line" href="#L531">531</a>
<a id="L532" class="source_line" href="#L532">532</a>
<a id="L533" class="source_line" href="#L533">533</a>
<a id="L534" class="source_line" href="#L534">534</a>
<a id="L535" class="source_line" href="#L535">535</a>
<a id="L536" class="source_line" href="#L536">536</a>
<a id="L537" class="source_line" href="#L537">537</a>
<a id="L538" class="source_line" href="#L538">538</a>
<a id="L539" class="source_line" href="#L539">539</a>
<a id="L540" class="source_line" href="#L540">540</a>
<a id="L541" class="source_line" href="#L541">541</a>
<a id="L542" class="source_line" href="#L542">542</a>
<a id="L543" class="source_line" href="#L543">543</a>
<a id="L544" class="source_line" href="#L544">544</a>
<a id="L545" class="source_line" href="#L545">545</a>
<a id="L546" class="source_line" href="#L546">546</a>
<a id="L547" class="source_line" href="#L547">547</a>
<a id="L548" class="source_line" href="#L548">548</a>
<a id="L549" class="source_line" href="#L549">549</a>
<a id="L550" class="source_line" href="#L550">550</a>
<a id="L551" class="source_line" href="#L551">551</a>
<a id="L552" class="source_line" href="#L552">552</a>
<a id="L553" class="source_line" href="#L553">553</a>
<a id="L554" class="source_line" href="#L554">554</a>
<a id="L555" class="source_line" href="#L555">555</a>
<a id="L556" class="source_line" href="#L556">556</a>
<a id="L557" class="source_line" href="#L557">557</a>
<a id="L558" class="source_line" href="#L558">558</a>
<a id="L559" class="source_line" href="#L559">559</a>
<a id="L560" class="source_line" href="#L560">560</a>
<a id="L561" class="source_line" href="#L561">561</a>
<a id="L562" class="source_line" href="#L562">562</a>
<a id="L563" class="source_line" href="#L563">563</a>
<a id="L564" class="source_line" href="#L564">564</a>
<a id="L565" class="source_line" href="#L565">565</a>
<a id="L566" class="source_line" href="#L566">566</a>
<a id="L567" class="source_line" href="#L567">567</a>
<a id="L568" class="source_line" href="#L568">568</a>
<a id="L569" class="source_line" href="#L569">569</a>
<a id="L570" class="source_line" href="#L570">570</a>
<a id="L571" class="source_line" href="#L571">571</a>
<a id="L572" class="source_line" href="#L572">572</a>
<a id="L573" class="source_line" href="#L573">573</a>
<a id="L574" class="source_line" href="#L574">574</a>
<a id="L575" class="source_line" href="#L575">575</a>
<a id="L576" class="source_line" href="#L576">576</a>
<a id="L577" class="source_line" href="#L577">577</a>
<a id="L578" class="source_line" href="#L578">578</a>
<a id="L579" class="source_line" href="#L579">579</a>
<a id="L580" class="source_line" href="#L580">580</a>
<a id="L581" class="source_line" href="#L581">581</a>
<a id="L582" class="source_line" href="#L582">582</a>
<a id="L583" class="source_line" href="#L583">583</a>
<a id="L584" class="source_line" href="#L584">584</a>
<a id="L585" class="source_line" href="#L585">585</a>
<a id="L586" class="source_line" href="#L586">586</a>
<a id="L587" class="source_line" href="#L587">587</a>
<a id="L588" class="source_line" href="#L588">588</a>
<a id="L589" class="source_line" href="#L589">589</a>
<a id="L590" class="source_line" href="#L590">590</a>
<a id="L591" class="source_line" href="#L591">591</a>
<a id="L592" class="source_line" href="#L592">592</a>
<a id="L593" class="source_line" href="#L593">593</a>
<a id="L594" class="source_line" href="#L594">594</a>
<a id="L595" class="source_line" href="#L595">595</a>
<a id="L596" class="source_line" href="#L596">596</a>
<a id="L597" class="source_line" href="#L597">597</a>
<a id="L598" class="source_line" href="#L598">598</a>
<a id="L599" class="source_line" href="#L599">599</a>
<a id="L600" class="source_line" href="#L600">600</a>
<a id="L601" class="source_line" href="#L601">601</a>
<a id="L602" class="source_line" href="#L602">602</a>
<a id="L603" class="source_line" href="#L603">603</a>
<a id="L604" class="source_line" href="#L604">604</a>
<a id="L605" class="source_line" href="#L605">605</a>
<a id="L606" class="source_line" href="#L606">606</a>
<a id="L607" class="source_line" href="#L607">607</a>
<a id="L608" class="source_line" href="#L608">608</a>
<a id="L609" class="source_line" href="#L609">609</a>
<a id="L610" class="source_line" href="#L610">610</a>
<a id="L611" class="source_line" href="#L611">611</a>
<a id="L612" class="source_line" href="#L612">612</a>
<a id="L613" class="source_line" href="#L613">613</a>
<a id="L614" class="source_line" href="#L614">614</a>
<a id="L615" class="source_line" href="#L615">615</a>
<a id="L616" class="source_line" href="#L616">616</a>
<a id="L617" class="source_line" href="#L617">617</a>
<a id="L618" class="source_line" href="#L618">618</a>
<a id="L619" class="source_line" href="#L619">619</a>
<a id="L620" class="source_line" href="#L620">620</a>
<a id="L621" class="source_line" href="#L621">621</a>
<a id="L622" class="source_line" href="#L622">622</a>
<a id="L623" class="source_line" href="#L623">623</a>
<a id="L624" class="source_line" href="#L624">624</a>
<a id="L625" class="source_line" href="#L625">625</a>
<a id="L626" class="source_line" href="#L626">626</a>
<a id="L627" class="source_line" href="#L627">627</a>
<a id="L628" class="source_line" href="#L628">628</a>
<a id="L629" class="source_line" href="#L629">629</a>
<a id="L630" class="source_line" href="#L630">630</a>
<a id="L631" class="source_line" href="#L631">631</a>
<a id="L632" class="source_line" href="#L632">632</a>
<a id="L633" class="source_line" href="#L633">633</a>
<a id="L634" class="source_line" href="#L634">634</a>
<a id="L635" class="source_line" href="#L635">635</a>
<a id="L636" class="source_line" href="#L636">636</a>
<a id="L637" class="source_line" href="#L637">637</a>
<a id="L638" class="source_line" href="#L638">638</a>
<a id="L639" class="source_line" href="#L639">639</a>
<a id="L640" class="source_line" href="#L640">640</a>
<a id="L641" class="source_line" href="#L641">641</a>
<a id="L642" class="source_line" href="#L642">642</a>
<a id="L643" class="source_line" href="#L643">643</a>
<a id="L644" class="source_line" href="#L644">644</a>
<a id="L645" class="source_line" href="#L645">645</a>
<a id="L646" class="source_line" href="#L646">646</a>
<a id="L647" class="source_line" href="#L647">647</a>
<a id="L648" class="source_line" href="#L648">648</a>
<a id="L649" class="source_line" href="#L649">649</a>
<a id="L650" class="source_line" href="#L650">650</a>
<a id="L651" class="source_line" href="#L651">651</a>
<a id="L652" class="source_line" href="#L652">652</a>
<a id="L653" class="source_line" href="#L653">653</a>
<a id="L654" class="source_line" href="#L654">654</a>
<a id="L655" class="source_line" href="#L655">655</a>
<a id="L656" class="source_line" href="#L656">656</a>
<a id="L657" class="source_line" href="#L657">657</a>
<a id="L658" class="source_line" href="#L658">658</a>
<a id="L659" class="source_line" href="#L659">659</a>
<a id="L660" class="source_line" href="#L660">660</a>
<a id="L661" class="source_line" href="#L661">661</a>
<a id="L662" class="source_line" href="#L662">662</a>
<a id="L663" class="source_line" href="#L663">663</a>
<a id="L664" class="source_line" href="#L664">664</a>
<a id="L665" class="source_line" href="#L665">665</a>
<a id="L666" class="source_line" href="#L666">666</a>
<a id="L667" class="source_line" href="#L667">667</a>
<a id="L668" class="source_line" href="#L668">668</a>
<a id="L669" class="source_line" href="#L669">669</a>
<a id="L670" class="source_line" href="#L670">670</a>
<a id="L671" class="source_line" href="#L671">671</a>
<a id="L672" class="source_line" href="#L672">672</a>
<a id="L673" class="source_line" href="#L673">673</a>
<a id="L674" class="source_line" href="#L674">674</a>
<a id="L675" class="source_line" href="#L675">675</a>
<a id="L676" class="source_line" href="#L676">676</a>
<a id="L677" class="source_line" href="#L677">677</a>
<a id="L678" class="source_line" href="#L678">678</a>
<a id="L679" class="source_line" href="#L679">679</a>
<a id="L680" class="source_line" href="#L680">680</a>
<a id="L681" class="source_line" href="#L681">681</a>
<a id="L682" class="source_line" href="#L682">682</a>
<a id="L683" class="source_line" href="#L683">683</a>
<a id="L684" class="source_line" href="#L684">684</a>
<a id="L685" class="source_line" href="#L685">685</a>
<a id="L686" class="source_line" href="#L686">686</a>
<a id="L687" class="source_line" href="#L687">687</a>
<a id="L688" class="source_line" href="#L688">688</a>
<a id="L689" class="source_line" href="#L689">689</a>
<a id="L690" class="source_line" href="#L690">690</a>
<a id="L691" class="source_line" href="#L691">691</a>
<a id="L692" class="source_line" href="#L692">692</a>
<a id="L693" class="source_line" href="#L693">693</a>
<a id="L694" class="source_line" href="#L694">694</a>
<a id="L695" class="source_line" href="#L695">695</a>
<a id="L696" class="source_line" href="#L696">696</a>
<a id="L697" class="source_line" href="#L697">697</a>
<a id="L698" class="source_line" href="#L698">698</a>
<a id="L699" class="source_line" href="#L699">699</a>
<a id="L700" class="source_line" href="#L700">700</a>
<a id="L701" class="source_line" href="#L701">701</a>
<a id="L702" class="source_line" href="#L702">702</a>
<a id="L703" class="source_line" href="#L703">703</a>
<a id="L704" class="source_line" href="#L704">704</a>
<a id="L705" class="source_line" href="#L705">705</a>
<a id="L706" class="source_line" href="#L706">706</a>
<a id="L707" class="source_line" href="#L707">707</a>
<a id="L708" class="source_line" href="#L708">708</a>
<a id="L709" class="source_line" href="#L709">709</a>
<a id="L710" class="source_line" href="#L710">710</a>
<a id="L711" class="source_line" href="#L711">711</a>
<a id="L712" class="source_line" href="#L712">712</a>
<a id="L713" class="source_line" href="#L713">713</a>
<a id="L714" class="source_line" href="#L714">714</a>
<a id="L715" class="source_line" href="#L715">715</a>
<a id="L716" class="source_line" href="#L716">716</a>
<a id="L717" class="source_line" href="#L717">717</a>
<a id="L718" class="source_line" href="#L718">718</a>
<a id="L719" class="source_line" href="#L719">719</a>
<a id="L720" class="source_line" href="#L720">720</a>
<a id="L721" class="source_line" href="#L721">721</a>
<a id="L722" class="source_line" href="#L722">722</a>
<a id="L723" class="source_line" href="#L723">723</a>
<a id="L724" class="source_line" href="#L724">724</a>
<a id="L725" class="source_line" href="#L725">725</a>
<a id="L726" class="source_line" href="#L726">726</a>
<a id="L727" class="source_line" href="#L727">727</a>
<a id="L728" class="source_line" href="#L728">728</a>
<a id="L729" class="source_line" href="#L729">729</a>
<a id="L730" class="source_line" href="#L730">730</a>
<a id="L731" class="source_line" href="#L731">731</a>
<a id="L732" class="source_line" href="#L732">732</a>
<a id="L733" class="source_line" href="#L733">733</a>
<a id="L734" class="source_line" href="#L734">734</a>
<a id="L735" class="source_line" href="#L735">735</a>
<a id="L736" class="source_line" href="#L736">736</a>
<a id="L737" class="source_line" href="#L737">737</a>
<a id="L738" class="source_line" href="#L738">738</a>
<a id="L739" class="source_line" href="#L739">739</a>
<a id="L740" class="source_line" href="#L740">740</a>
<a id="L741" class="source_line" href="#L741">741</a>
<a id="L742" class="source_line" href="#L742">742</a>
<a id="L743" class="source_line" href="#L743">743</a>
<a id="L744" class="source_line" href="#L744">744</a>
<a id="L745" class="source_line" href="#L745">745</a>
<a id="L746" class="source_line" href="#L746">746</a>
<a id="L747" class="source_line" href="#L747">747</a>
<a id="L748" class="source_line" href="#L748">748</a>
<a id="L749" class="source_line" href="#L749">749</a>
<a id="L750" class="source_line" href="#L750">750</a>
<a id="L751" class="source_line" href="#L751">751</a>
<a id="L752" class="source_line" href="#L752">752</a>
<a id="L753" class="source_line" href="#L753">753</a>
<a id="L754" class="source_line" href="#L754">754</a>
<a id="L755" class="source_line" href="#L755">755</a>
<a id="L756" class="source_line" href="#L756">756</a>
<a id="L757" class="source_line" href="#L757">757</a>
<a id="L758" class="source_line" href="#L758">758</a>
<a id="L759" class="source_line" href="#L759">759</a>
<a id="L760" class="source_line" href="#L760">760</a>
<a id="L761" class="source_line" href="#L761">761</a>
<a id="L762" class="source_line" href="#L762">762</a>
<a id="L763" class="source_line" href="#L763">763</a>
<a id="L764" class="source_line" href="#L764">764</a>
<a id="L765" class="source_line" href="#L765">765</a>
<a id="L766" class="source_line" href="#L766">766</a>
<a id="L767" class="source_line" href="#L767">767</a>
<a id="L768" class="source_line" href="#L768">768</a>
<a id="L769" class="source_line" href="#L769">769</a>
<a id="L770" class="source_line" href="#L770">770</a>
<a id="L771" class="source_line" href="#L771">771</a>
<a id="L772" class="source_line" href="#L772">772</a>
<a id="L773" class="source_line" href="#L773">773</a>
<a id="L774" class="source_line" href="#L774">774</a>
<a id="L775" class="source_line" href="#L775">775</a>
<a id="L776" class="source_line" href="#L776">776</a>
<a id="L777" class="source_line" href="#L777">777</a>
<a id="L778" class="source_line" href="#L778">778</a>
<a id="L779" class="source_line" href="#L779">779</a>
<a id="L780" class="source_line" href="#L780">780</a>
<a id="L781" class="source_line" href="#L781">781</a>
<a id="L782" class="source_line" href="#L782">782</a>
<a id="L783" class="source_line" href="#L783">783</a>
<a id="L784" class="source_line" href="#L784">784</a>
<a id="L785" class="source_line" href="#L785">785</a>
<a id="L786" class="source_line" href="#L786">786</a>
<a id="L787" class="source_line" href="#L787">787</a>
<a id="L788" class="source_line" href="#L788">788</a>
<a id="L789" class="source_line" href="#L789">789</a>
<a id="L790" class="source_line" href="#L790">790</a>
<a id="L791" class="source_line" href="#L791">791</a>
<a id="L792" class="source_line" href="#L792">792</a>
<a id="L793" class="source_line" href="#L793">793</a>
<a id="L794" class="source_line" href="#L794">794</a>
<a id="L795" class="source_line" href="#L795">795</a>
<a id="L796" class="source_line" href="#L796">796</a>
<a id="L797" class="source_line" href="#L797">797</a>
<a id="L798" class="source_line" href="#L798">798</a>
<a id="L799" class="source_line" href="#L799">799</a>
<a id="L800" class="source_line" href="#L800">800</a>
<a id="L801" class="source_line" href="#L801">801</a>
<a id="L802" class="source_line" href="#L802">802</a>
<a id="L803" class="source_line" href="#L803">803</a>
<a id="L804" class="source_line" href="#L804">804</a>
<a id="L805" class="source_line" href="#L805">805</a>
<a id="L806" class="source_line" href="#L806">806</a>
<a id="L807" class="source_line" href="#L807">807</a>
<a id="L808" class="source_line" href="#L808">808</a>
<a id="L809" class="source_line" href="#L809">809</a>
<a id="L810" class="source_line" href="#L810">810</a>
<a id="L811" class="source_line" href="#L811">811</a>
<a id="L812" class="source_line" href="#L812">812</a>
<a id="L813" class="source_line" href="#L813">813</a>
<a id="L814" class="source_line" href="#L814">814</a>
<a id="L815" class="source_line" href="#L815">815</a>
<a id="L816" class="source_line" href="#L816">816</a>
<a id="L817" class="source_line" href="#L817">817</a>
<a id="L818" class="source_line" href="#L818">818</a>
<a id="L819" class="source_line" href="#L819">819</a>
<a id="L820" class="source_line" href="#L820">820</a>
<a id="L821" class="source_line" href="#L821">821</a>
<a id="L822" class="source_line" href="#L822">822</a>
<a id="L823" class="source_line" href="#L823">823</a>
<a id="L824" class="source_line" href="#L824">824</a>
<a id="L825" class="source_line" href="#L825">825</a>
<a id="L826" class="source_line" href="#L826">826</a>
<a id="L827" class="source_line" href="#L827">827</a>
<a id="L828" class="source_line" href="#L828">828</a>
<a id="L829" class="source_line" href="#L829">829</a>
<a id="L830" class="source_line" href="#L830">830</a>
<a id="L831" class="source_line" href="#L831">831</a>
<a id="L832" class="source_line" href="#L832">832</a>
<a id="L833" class="source_line" href="#L833">833</a>
<a id="L834" class="source_line" href="#L834">834</a>
<a id="L835" class="source_line" href="#L835">835</a>
<a id="L836" class="source_line" href="#L836">836</a>
<a id="L837" class="source_line" href="#L837">837</a>
<a id="L838" class="source_line" href="#L838">838</a>
<a id="L839" class="source_line" href="#L839">839</a>
<a id="L840" class="source_line" href="#L840">840</a>
<a id="L841" class="source_line" href="#L841">841</a>
<a id="L842" class="source_line" href="#L842">842</a>
<a id="L843" class="source_line" href="#L843">843</a>
<a id="L844" class="source_line" href="#L844">844</a>
<a id="L845" class="source_line" href="#L845">845</a>
<a id="L846" class="source_line" href="#L846">846</a>
<a id="L847" class="source_line" href="#L847">847</a>
<a id="L848" class="source_line" href="#L848">848</a>
<a id="L849" class="source_line" href="#L849">849</a>
<a id="L850" class="source_line" href="#L850">850</a>
<a id="L851" class="source_line" href="#L851">851</a>
<a id="L852" class="source_line" href="#L852">852</a>
<a id="L853" class="source_line" href="#L853">853</a>
<a id="L854" class="source_line" href="#L854">854</a>
<a id="L855" class="source_line" href="#L855">855</a>
<a id="L856" class="source_line" href="#L856">856</a>
<a id="L857" class="source_line" href="#L857">857</a>
<a id="L858" class="source_line" href="#L858">858</a>
<a id="L859" class="source_line" href="#L859">859</a>
<a id="L860" class="source_line" href="#L860">860</a>
<a id="L861" class="source_line" href="#L861">861</a>
<a id="L862" class="source_line" href="#L862">862</a>
<a id="L863" class="source_line" href="#L863">863</a>
<a id="L864" class="source_line" href="#L864">864</a>
<a id="L865" class="source_line" href="#L865">865</a>
<a id="L866" class="source_line" href="#L866">866</a>
<a id="L867" class="source_line" href="#L867">867</a>
<a id="L868" class="source_line" href="#L868">868</a>
<a id="L869" class="source_line" href="#L869">869</a>
<a id="L870" class="source_line" href="#L870">870</a>
<a id="L871" class="source_line" href="#L871">871</a>
<a id="L872" class="source_line" href="#L872">872</a>
<a id="L873" class="source_line" href="#L873">873</a>
<a id="L874" class="source_line" href="#L874">874</a>
<a id="L875" class="source_line" href="#L875">875</a>
<a id="L876" class="source_line" href="#L876">876</a>
<a id="L877" class="source_line" href="#L877">877</a>
<a id="L878" class="source_line" href="#L878">878</a>
<a id="L879" class="source_line" href="#L879">879</a>
<a id="L880" class="source_line" href="#L880">880</a>
<a id="L881" class="source_line" href="#L881">881</a>
<a id="L882" class="source_line" href="#L882">882</a>
<a id="L883" class="source_line" href="#L883">883</a>
<a id="L884" class="source_line" href="#L884">884</a>
<a id="L885" class="source_line" href="#L885">885</a>
<a id="L886" class="source_line" href="#L886">886</a>
<a id="L887" class="source_line" href="#L887">887</a>
<a id="L888" class="source_line" href="#L888">888</a>
<a id="L889" class="source_line" href="#L889">889</a>
<a id="L890" class="source_line" href="#L890">890</a>
<a id="L891" class="source_line" href="#L891">891</a>
<a id="L892" class="source_line" href="#L892">892</a>
<a id="L893" class="source_line" href="#L893">893</a>
<a id="L894" class="source_line" href="#L894">894</a>
<a id="L895" class="source_line" href="#L895">895</a>
<a id="L896" class="source_line" href="#L896">896</a>
<a id="L897" class="source_line" href="#L897">897</a>
<a id="L898" class="source_line" href="#L898">898</a>
<a id="L899" class="source_line" href="#L899">899</a>
<a id="L900" class="source_line" href="#L900">900</a>
<a id="L901" class="source_line" href="#L901">901</a>
<a id="L902" class="source_line" href="#L902">902</a>
<a id="L903" class="source_line" href="#L903">903</a>
<a id="L904" class="source_line" href="#L904">904</a>
<a id="L905" class="source_line" href="#L905">905</a>
<a id="L906" class="source_line" href="#L906">906</a>
<a id="L907" class="source_line" href="#L907">907</a>
<a id="L908" class="source_line" href="#L908">908</a>
<a id="L909" class="source_line" href="#L909">909</a>
<a id="L910" class="source_line" href="#L910">910</a>
<a id="L911" class="source_line" href="#L911">911</a>
<a id="L912" class="source_line" href="#L912">912</a>
<a id="L913" class="source_line" href="#L913">913</a>
<a id="L914" class="source_line" href="#L914">914</a>
<a id="L915" class="source_line" href="#L915">915</a>
<a id="L916" class="source_line" href="#L916">916</a>
<a id="L917" class="source_line" href="#L917">917</a>
<a id="L918" class="source_line" href="#L918">918</a>
<a id="L919" class="source_line" href="#L919">919</a>
<a id="L920" class="source_line" href="#L920">920</a>
<a id="L921" class="source_line" href="#L921">921</a>
<a id="L922" class="source_line" href="#L922">922</a>
<a id="L923" class="source_line" href="#L923">923</a>
<a id="L924" class="source_line" href="#L924">924</a>
<a id="L925" class="source_line" href="#L925">925</a>
<a id="L926" class="source_line" href="#L926">926</a>
<a id="L927" class="source_line" href="#L927">927</a>
<a id="L928" class="source_line" href="#L928">928</a>
<a id="L929" class="source_line" href="#L929">929</a>
<a id="L930" class="source_line" href="#L930">930</a>
<a id="L931" class="source_line" href="#L931">931</a>
<a id="L932" class="source_line" href="#L932">932</a>
<a id="L933" class="source_line" href="#L933">933</a>
<a id="L934" class="source_line" href="#L934">934</a>
<a id="L935" class="source_line" href="#L935">935</a>
<a id="L936" class="source_line" href="#L936">936</a>
<a id="L937" class="source_line" href="#L937">937</a>
<a id="L938" class="source_line" href="#L938">938</a>
<a id="L939" class="source_line" href="#L939">939</a>
<a id="L940" class="source_line" href="#L940">940</a>
<a id="L941" class="source_line" href="#L941">941</a>
<a id="L942" class="source_line" href="#L942">942</a>
<a id="L943" class="source_line" href="#L943">943</a>
<a id="L944" class="source_line" href="#L944">944</a>
<a id="L945" class="source_line" href="#L945">945</a>
<a id="L946" class="source_line" href="#L946">946</a>
<a id="L947" class="source_line" href="#L947">947</a>
<a id="L948" class="source_line" href="#L948">948</a>
<a id="L949" class="source_line" href="#L949">949</a>
<a id="L950" class="source_line" href="#L950">950</a>
<a id="L951" class="source_line" href="#L951">951</a>
<a id="L952" class="source_line" href="#L952">952</a>
<a id="L953" class="source_line" href="#L953">953</a>
<a id="L954" class="source_line" href="#L954">954</a>
<a id="L955" class="source_line" href="#L955">955</a>
<a id="L956" class="source_line" href="#L956">956</a>
<a id="L957" class="source_line" href="#L957">957</a>
<a id="L958" class="source_line" href="#L958">958</a>
<a id="L959" class="source_line" href="#L959">959</a>
<a id="L960" class="source_line" href="#L960">960</a>
<a id="L961" class="source_line" href="#L961">961</a>
<a id="L962" class="source_line" href="#L962">962</a>
<a id="L963" class="source_line" href="#L963">963</a>
<a id="L964" class="source_line" href="#L964">964</a>
<a id="L965" class="source_line" href="#L965">965</a>
<a id="L966" class="source_line" href="#L966">966</a>
<a id="L967" class="source_line" href="#L967">967</a>
<a id="L968" class="source_line" href="#L968">968</a>
<a id="L969" class="source_line" href="#L969">969</a>
<a id="L970" class="source_line" href="#L970">970</a>
<a id="L971" class="source_line" href="#L971">971</a>
<a id="L972" class="source_line" href="#L972">972</a>
<a id="L973" class="source_line" href="#L973">973</a>
<a id="L974" class="source_line" href="#L974">974</a>
<a id="L975" class="source_line" href="#L975">975</a>
<a id="L976" class="source_line" href="#L976">976</a>
<a id="L977" class="source_line" href="#L977">977</a>
<a id="L978" class="source_line" href="#L978">978</a>
<a id="L979" class="source_line" href="#L979">979</a>
<a id="L980" class="source_line" href="#L980">980</a>
<a id="L981" class="source_line" href="#L981">981</a>
<a id="L982" class="source_line" href="#L982">982</a>
<a id="L983" class="source_line" href="#L983">983</a>
<a id="L984" class="source_line" href="#L984">984</a>
<a id="L985" class="source_line" href="#L985">985</a>
<a id="L986" class="source_line" href="#L986">986</a>
<a id="L987" class="source_line" href="#L987">987</a>
<a id="L988" class="source_line" href="#L988">988</a>
<a id="L989" class="source_line" href="#L989">989</a>
<a id="L990" class="source_line" href="#L990">990</a>
<a id="L991" class="source_line" href="#L991">991</a>
<a id="L992" class="source_line" href="#L992">992</a>
<a id="L993" class="source_line" href="#L993">993</a>
<a id="L994" class="source_line" href="#L994">994</a>
<a id="L995" class="source_line" href="#L995">995</a>
<a id="L996" class="source_line" href="#L996">996</a>
<a id="L997" class="source_line" href="#L997">997</a>
<a id="L998" class="source_line" href="#L998">998</a>
<a id="L999" class="source_line" href="#L999">999</a>
<a id="L1000" class="source_line" href="#L1000">1000</a>
<a id="L1001" class="source_line" href="#L1001">1001</a>
<a id="L1002" class="source_line" href="#L1002">1002</a>
<a id="L1003" class="source_line" href="#L1003">1003</a>
<a id="L1004" class="source_line" href="#L1004">1004</a>
<a id="L1005" class="source_line" href="#L1005">1005</a>
<a id="L1006" class="source_line" href="#L1006">1006</a>
<a id="L1007" class="source_line" href="#L1007">1007</a>
<a id="L1008" class="source_line" href="#L1008">1008</a>
<a id="L1009" class="source_line" href="#L1009">1009</a>
<a id="L1010" class="source_line" href="#L1010">1010</a>
<a id="L1011" class="source_line" href="#L1011">1011</a>
<a id="L1012" class="source_line" href="#L1012">1012</a>
<a id="L1013" class="source_line" href="#L1013">1013</a>
<a id="L1014" class="source_line" href="#L1014">1014</a>
<a id="L1015" class="source_line" href="#L1015">1015</a>
<a id="L1016" class="source_line" href="#L1016">1016</a>
<a id="L1017" class="source_line" href="#L1017">1017</a>
<a id="L1018" class="source_line" href="#L1018">1018</a>
<a id="L1019" class="source_line" href="#L1019">1019</a>
<a id="L1020" class="source_line" href="#L1020">1020</a>
<a id="L1021" class="source_line" href="#L1021">1021</a>
<a id="L1022" class="source_line" href="#L1022">1022</a>
<a id="L1023" class="source_line" href="#L1023">1023</a>
<a id="L1024" class="source_line" href="#L1024">1024</a>
<a id="L1025" class="source_line" href="#L1025">1025</a>
<a id="L1026" class="source_line" href="#L1026">1026</a>
<a id="L1027" class="source_line" href="#L1027">1027</a>
<a id="L1028" class="source_line" href="#L1028">1028</a>
<a id="L1029" class="source_line" href="#L1029">1029</a>
<a id="L1030" class="source_line" href="#L1030">1030</a>
<a id="L1031" class="source_line" href="#L1031">1031</a>
<a id="L1032" class="source_line" href="#L1032">1032</a>
<a id="L1033" class="source_line" href="#L1033">1033</a>
<a id="L1034" class="source_line" href="#L1034">1034</a>
<a id="L1035" class="source_line" href="#L1035">1035</a>
<a id="L1036" class="source_line" href="#L1036">1036</a>
<a id="L1037" class="source_line" href="#L1037">1037</a>
<a id="L1038" class="source_line" href="#L1038">1038</a>
<a id="L1039" class="source_line" href="#L1039">1039</a>
<a id="L1040" class="source_line" href="#L1040">1040</a>
<a id="L1041" class="source_line" href="#L1041">1041</a>
<a id="L1042" class="source_line" href="#L1042">1042</a>
<a id="L1043" class="source_line" href="#L1043">1043</a>
<a id="L1044" class="source_line" href="#L1044">1044</a>
<a id="L1045" class="source_line" href="#L1045">1045</a>
<a id="L1046" class="source_line" href="#L1046">1046</a>
<a id="L1047" class="source_line" href="#L1047">1047</a>
<a id="L1048" class="source_line" href="#L1048">1048</a>
<a id="L1049" class="source_line" href="#L1049">1049</a>
<a id="L1050" class="source_line" href="#L1050">1050</a>
<a id="L1051" class="source_line" href="#L1051">1051</a>
<a id="L1052" class="source_line" href="#L1052">1052</a>
<a id="L1053" class="source_line" href="#L1053">1053</a>
<a id="L1054" class="source_line" href="#L1054">1054</a>
<a id="L1055" class="source_line" href="#L1055">1055</a>
<a id="L1056" class="source_line" href="#L1056">1056</a>
<a id="L1057" class="source_line" href="#L1057">1057</a>
<a id="L1058" class="source_line" href="#L1058">1058</a>
<a id="L1059" class="source_line" href="#L1059">1059</a>
<a id="L1060" class="source_line" href="#L1060">1060</a>
<a id="L1061" class="source_line" href="#L1061">1061</a>
<a id="L1062" class="source_line" href="#L1062">1062</a>
<a id="L1063" class="source_line" href="#L1063">1063</a>
<a id="L1064" class="source_line" href="#L1064">1064</a>
<a id="L1065" class="source_line" href="#L1065">1065</a>
<a id="L1066" class="source_line" href="#L1066">1066</a>
<a id="L1067" class="source_line" href="#L1067">1067</a>
<a id="L1068" class="source_line" href="#L1068">1068</a>
<a id="L1069" class="source_line" href="#L1069">1069</a>
<a id="L1070" class="source_line" href="#L1070">1070</a>
<a id="L1071" class="source_line" href="#L1071">1071</a>
<a id="L1072" class="source_line" href="#L1072">1072</a>
<a id="L1073" class="source_line" href="#L1073">1073</a>
<a id="L1074" class="source_line" href="#L1074">1074</a>
<a id="L1075" class="source_line" href="#L1075">1075</a>
<a id="L1076" class="source_line" href="#L1076">1076</a>
<a id="L1077" class="source_line" href="#L1077">1077</a>
<a id="L1078" class="source_line" href="#L1078">1078</a>
<a id="L1079" class="source_line" href="#L1079">1079</a>
<a id="L1080" class="source_line" href="#L1080">1080</a>
<a id="L1081" class="source_line" href="#L1081">1081</a>
<a id="L1082" class="source_line" href="#L1082">1082</a>
<a id="L1083" class="source_line" href="#L1083">1083</a>
<a id="L1084" class="source_line" href="#L1084">1084</a>
<a id="L1085" class="source_line" href="#L1085">1085</a>
<a id="L1086" class="source_line" href="#L1086">1086</a>
<a id="L1087" class="source_line" href="#L1087">1087</a>
<a id="L1088" class="source_line" href="#L1088">1088</a>
<a id="L1089" class="source_line" href="#L1089">1089</a>
<a id="L1090" class="source_line" href="#L1090">1090</a>
<a id="L1091" class="source_line" href="#L1091">1091</a>
<a id="L1092" class="source_line" href="#L1092">1092</a>
<a id="L1093" class="source_line" href="#L1093">1093</a>
<a id="L1094" class="source_line" href="#L1094">1094</a>
<a id="L1095" class="source_line" href="#L1095">1095</a>
<a id="L1096" class="source_line" href="#L1096">1096</a>
<a id="L1097" class="source_line" href="#L1097">1097</a>
<a id="L1098" class="source_line" href="#L1098">1098</a>
<a id="L1099" class="source_line" href="#L1099">1099</a>
<a id="L1100" class="source_line" href="#L1100">1100</a>
<a id="L1101" class="source_line" href="#L1101">1101</a>
<a id="L1102" class="source_line" href="#L1102">1102</a>
<a id="L1103" class="source_line" href="#L1103">1103</a>
<a id="L1104" class="source_line" href="#L1104">1104</a>
<a id="L1105" class="source_line" href="#L1105">1105</a>
<a id="L1106" class="source_line" href="#L1106">1106</a>
<a id="L1107" class="source_line" href="#L1107">1107</a>
<a id="L1108" class="source_line" href="#L1108">1108</a>
<a id="L1109" class="source_line" href="#L1109">1109</a>
<a id="L1110" class="source_line" href="#L1110">1110</a>
<a id="L1111" class="source_line" href="#L1111">1111</a>
<a id="L1112" class="source_line" href="#L1112">1112</a>
<a id="L1113" class="source_line" href="#L1113">1113</a>
<a id="L1114" class="source_line" href="#L1114">1114</a>
<a id="L1115" class="source_line" href="#L1115">1115</a>
<a id="L1116" class="source_line" href="#L1116">1116</a>
<a id="L1117" class="source_line" href="#L1117">1117</a>
<a id="L1118" class="source_line" href="#L1118">1118</a>
<a id="L1119" class="source_line" href="#L1119">1119</a>
<a id="L1120" class="source_line" href="#L1120">1120</a>
<a id="L1121" class="source_line" href="#L1121">1121</a>
<a id="L1122" class="source_line" href="#L1122">1122</a>
<a id="L1123" class="source_line" href="#L1123">1123</a>
<a id="L1124" class="source_line" href="#L1124">1124</a>
<a id="L1125" class="source_line" href="#L1125">1125</a>
<a id="L1126" class="source_line" href="#L1126">1126</a>
<a id="L1127" class="source_line" href="#L1127">1127</a>
<a id="L1128" class="source_line" href="#L1128">1128</a>
<a id="L1129" class="source_line" href="#L1129">1129</a>
<a id="L1130" class="source_line" href="#L1130">1130</a>
<a id="L1131" class="source_line" href="#L1131">1131</a>
<a id="L1132" class="source_line" href="#L1132">1132</a>
<a id="L1133" class="source_line" href="#L1133">1133</a>
<a id="L1134" class="source_line" href="#L1134">1134</a>
<a id="L1135" class="source_line" href="#L1135">1135</a>
<a id="L1136" class="source_line" href="#L1136">1136</a>
<a id="L1137" class="source_line" href="#L1137">1137</a>
<a id="L1138" class="source_line" href="#L1138">1138</a>
<a id="L1139" class="source_line" href="#L1139">1139</a>
<a id="L1140" class="source_line" href="#L1140">1140</a>
<a id="L1141" class="source_line" href="#L1141">1141</a>
<a id="L1142" class="source_line" href="#L1142">1142</a>
<a id="L1143" class="source_line" href="#L1143">1143</a>
<a id="L1144" class="source_line" href="#L1144">1144</a>
<a id="L1145" class="source_line" href="#L1145">1145</a>
<a id="L1146" class="source_line" href="#L1146">1146</a>
<a id="L1147" class="source_line" href="#L1147">1147</a>
<a id="L1148" class="source_line" href="#L1148">1148</a>
<a id="L1149" class="source_line" href="#L1149">1149</a>
<a id="L1150" class="source_line" href="#L1150">1150</a>
<a id="L1151" class="source_line" href="#L1151">1151</a>
<a id="L1152" class="source_line" href="#L1152">1152</a>
<a id="L1153" class="source_line" href="#L1153">1153</a>
<a id="L1154" class="source_line" href="#L1154">1154</a>
<a id="L1155" class="source_line" href="#L1155">1155</a>
<a id="L1156" class="source_line" href="#L1156">1156</a>
<a id="L1157" class="source_line" href="#L1157">1157</a>
<a id="L1158" class="source_line" href="#L1158">1158</a>
<a id="L1159" class="source_line" href="#L1159">1159</a>
<a id="L1160" class="source_line" href="#L1160">1160</a>
<a id="L1161" class="source_line" href="#L1161">1161</a>
<a id="L1162" class="source_line" href="#L1162">1162</a>
<a id="L1163" class="source_line" href="#L1163">1163</a>
<a id="L1164" class="source_line" href="#L1164">1164</a>
<a id="L1165" class="source_line" href="#L1165">1165</a>
<a id="L1166" class="source_line" href="#L1166">1166</a>
<a id="L1167" class="source_line" href="#L1167">1167</a>
<a id="L1168" class="source_line" href="#L1168">1168</a>
<a id="L1169" class="source_line" href="#L1169">1169</a>
<a id="L1170" class="source_line" href="#L1170">1170</a>
<a id="L1171" class="source_line" href="#L1171">1171</a>
<a id="L1172" class="source_line" href="#L1172">1172</a>
<a id="L1173" class="source_line" href="#L1173">1173</a>
<a id="L1174" class="source_line" href="#L1174">1174</a>
<a id="L1175" class="source_line" href="#L1175">1175</a>
<a id="L1176" class="source_line" href="#L1176">1176</a>
<a id="L1177" class="source_line" href="#L1177">1177</a>
<a id="L1178" class="source_line" href="#L1178">1178</a>
<a id="L1179" class="source_line" href="#L1179">1179</a>
<a id="L1180" class="source_line" href="#L1180">1180</a>
<a id="L1181" class="source_line" href="#L1181">1181</a>
<a id="L1182" class="source_line" href="#L1182">1182</a>
<a id="L1183" class="source_line" href="#L1183">1183</a>
<a id="L1184" class="source_line" href="#L1184">1184</a>
<a id="L1185" class="source_line" href="#L1185">1185</a>
<a id="L1186" class="source_line" href="#L1186">1186</a>
<a id="L1187" class="source_line" href="#L1187">1187</a>
<a id="L1188" class="source_line" href="#L1188">1188</a>
<a id="L1189" class="source_line" href="#L1189">1189</a>
<a id="L1190" class="source_line" href="#L1190">1190</a>
<a id="L1191" class="source_line" href="#L1191">1191</a>
<a id="L1192" class="source_line" href="#L1192">1192</a>
<a id="L1193" class="source_line" href="#L1193">1193</a>
<a id="L1194" class="source_line" href="#L1194">1194</a>
<a id="L1195" class="source_line" href="#L1195">1195</a>
<a id="L1196" class="source_line" href="#L1196">1196</a>
<a id="L1197" class="source_line" href="#L1197">1197</a>
<a id="L1198" class="source_line" href="#L1198">1198</a>
<a id="L1199" class="source_line" href="#L1199">1199</a>
<a id="L1200" class="source_line" href="#L1200">1200</a>
<a id="L1201" class="source_line" href="#L1201">1201</a>
<a id="L1202" class="source_line" href="#L1202">1202</a>
<a id="L1203" class="source_line" href="#L1203">1203</a>
<a id="L1204" class="source_line" href="#L1204">1204</a>
<a id="L1205" class="source_line" href="#L1205">1205</a>
<a id="L1206" class="source_line" href="#L1206">1206</a>
<a id="L1207" class="source_line" href="#L1207">1207</a>
<a id="L1208" class="source_line" href="#L1208">1208</a>
<a id="L1209" class="source_line" href="#L1209">1209</a>
<a id="L1210" class="source_line" href="#L1210">1210</a>
<a id="L1211" class="source_line" href="#L1211">1211</a>
<a id="L1212" class="source_line" href="#L1212">1212</a>
<a id="L1213" class="source_line" href="#L1213">1213</a>
<a id="L1214" class="source_line" href="#L1214">1214</a>
<a id="L1215" class="source_line" href="#L1215">1215</a>
<a id="L1216" class="source_line" href="#L1216">1216</a>
<a id="L1217" class="source_line" href="#L1217">1217</a>
<a id="L1218" class="source_line" href="#L1218">1218</a>
<a id="L1219" class="source_line" href="#L1219">1219</a>
<a id="L1220" class="source_line" href="#L1220">1220</a>
<a id="L1221" class="source_line" href="#L1221">1221</a>
<a id="L1222" class="source_line" href="#L1222">1222</a>
<a id="L1223" class="source_line" href="#L1223">1223</a>
<a id="L1224" class="source_line" href="#L1224">1224</a>
<a id="L1225" class="source_line" href="#L1225">1225</a>
<a id="L1226" class="source_line" href="#L1226">1226</a>
<a id="L1227" class="source_line" href="#L1227">1227</a>
<a id="L1228" class="source_line" href="#L1228">1228</a>
<a id="L1229" class="source_line" href="#L1229">1229</a>
<a id="L1230" class="source_line" href="#L1230">1230</a>
<a id="L1231" class="source_line" href="#L1231">1231</a>
<a id="L1232" class="source_line" href="#L1232">1232</a>
<a id="L1233" class="source_line" href="#L1233">1233</a>
<a id="L1234" class="source_line" href="#L1234">1234</a>
<a id="L1235" class="source_line" href="#L1235">1235</a>
<a id="L1236" class="source_line" href="#L1236">1236</a>
<a id="L1237" class="source_line" href="#L1237">1237</a>
<a id="L1238" class="source_line" href="#L1238">1238</a>
<a id="L1239" class="source_line" href="#L1239">1239</a>
<a id="L1240" class="source_line" href="#L1240">1240</a>
<a id="L1241" class="source_line" href="#L1241">1241</a>
<a id="L1242" class="source_line" href="#L1242">1242</a>
<a id="L1243" class="source_line" href="#L1243">1243</a>
<a id="L1244" class="source_line" href="#L1244">1244</a>
<a id="L1245" class="source_line" href="#L1245">1245</a>
<a id="L1246" class="source_line" href="#L1246">1246</a>
<a id="L1247" class="source_line" href="#L1247">1247</a>
<a id="L1248" class="source_line" href="#L1248">1248</a>
<a id="L1249" class="source_line" href="#L1249">1249</a>
<a id="L1250" class="source_line" href="#L1250">1250</a>
<a id="L1251" class="source_line" href="#L1251">1251</a>
<a id="L1252" class="source_line" href="#L1252">1252</a>
<a id="L1253" class="source_line" href="#L1253">1253</a>
<a id="L1254" class="source_line" href="#L1254">1254</a>
<a id="L1255" class="source_line" href="#L1255">1255</a>
<a id="L1256" class="source_line" href="#L1256">1256</a>
<a id="L1257" class="source_line" href="#L1257">1257</a>
<a id="L1258" class="source_line" href="#L1258">1258</a>
<a id="L1259" class="source_line" href="#L1259">1259</a>
<a id="L1260" class="source_line" href="#L1260">1260</a>
<a id="L1261" class="source_line" href="#L1261">1261</a>
<a id="L1262" class="source_line" href="#L1262">1262</a>
<a id="L1263" class="source_line" href="#L1263">1263</a>
<a id="L1264" class="source_line" href="#L1264">1264</a>
<a id="L1265" class="source_line" href="#L1265">1265</a>
<a id="L1266" class="source_line" href="#L1266">1266</a>
<a id="L1267" class="source_line" href="#L1267">1267</a>
<a id="L1268" class="source_line" href="#L1268">1268</a>
<a id="L1269" class="source_line" href="#L1269">1269</a>
<a id="L1270" class="source_line" href="#L1270">1270</a>
<a id="L1271" class="source_line" href="#L1271">1271</a>
<a id="L1272" class="source_line" href="#L1272">1272</a>
<a id="L1273" class="source_line" href="#L1273">1273</a>
<a id="L1274" class="source_line" href="#L1274">1274</a>
<a id="L1275" class="source_line" href="#L1275">1275</a>
<a id="L1276" class="source_line" href="#L1276">1276</a>
<a id="L1277" class="source_line" href="#L1277">1277</a>
<a id="L1278" class="source_line" href="#L1278">1278</a>
<a id="L1279" class="source_line" href="#L1279">1279</a>
<a id="L1280" class="source_line" href="#L1280">1280</a>
<a id="L1281" class="source_line" href="#L1281">1281</a>
<a id="L1282" class="source_line" href="#L1282">1282</a>
<a id="L1283" class="source_line" href="#L1283">1283</a>
<a id="L1284" class="source_line" href="#L1284">1284</a>
<a id="L1285" class="source_line" href="#L1285">1285</a>
<a id="L1286" class="source_line" href="#L1286">1286</a>
<a id="L1287" class="source_line" href="#L1287">1287</a>
<a id="L1288" class="source_line" href="#L1288">1288</a>
<a id="L1289" class="source_line" href="#L1289">1289</a>
<a id="L1290" class="source_line" href="#L1290">1290</a>
<a id="L1291" class="source_line" href="#L1291">1291</a>
<a id="L1292" class="source_line" href="#L1292">1292</a>
<a id="L1293" class="source_line" href="#L1293">1293</a>
<a id="L1294" class="source_line" href="#L1294">1294</a>
<a id="L1295" class="source_line" href="#L1295">1295</a>
<a id="L1296" class="source_line" href="#L1296">1296</a>
<a id="L1297" class="source_line" href="#L1297">1297</a>
<a id="L1298" class="source_line" href="#L1298">1298</a>
<a id="L1299" class="source_line" href="#L1299">1299</a>
<a id="L1300" class="source_line" href="#L1300">1300</a>
<a id="L1301" class="source_line" href="#L1301">1301</a>
<a id="L1302" class="source_line" href="#L1302">1302</a>
<a id="L1303" class="source_line" href="#L1303">1303</a>
<a id="L1304" class="source_line" href="#L1304">1304</a>
<a id="L1305" class="source_line" href="#L1305">1305</a>
<a id="L1306" class="source_line" href="#L1306">1306</a>
<a id="L1307" class="source_line" href="#L1307">1307</a>
<a id="L1308" class="source_line" href="#L1308">1308</a>
<a id="L1309" class="source_line" href="#L1309">1309</a>
<a id="L1310" class="source_line" href="#L1310">1310</a>
<a id="L1311" class="source_line" href="#L1311">1311</a>
<a id="L1312" class="source_line" href="#L1312">1312</a>
<a id="L1313" class="source_line" href="#L1313">1313</a>
<a id="L1314" class="source_line" href="#L1314">1314</a>
<a id="L1315" class="source_line" href="#L1315">1315</a>
<a id="L1316" class="source_line" href="#L1316">1316</a>
<a id="L1317" class="source_line" href="#L1317">1317</a>
<a id="L1318" class="source_line" href="#L1318">1318</a>
<a id="L1319" class="source_line" href="#L1319">1319</a>
<a id="L1320" class="source_line" href="#L1320">1320</a>
<a id="L1321" class="source_line" href="#L1321">1321</a>
<a id="L1322" class="source_line" href="#L1322">1322</a>
<a id="L1323" class="source_line" href="#L1323">1323</a>
<a id="L1324" class="source_line" href="#L1324">1324</a>
<a id="L1325" class="source_line" href="#L1325">1325</a>
<a id="L1326" class="source_line" href="#L1326">1326</a>
<a id="L1327" class="source_line" href="#L1327">1327</a>
<a id="L1328" class="source_line" href="#L1328">1328</a>
<a id="L1329" class="source_line" href="#L1329">1329</a>
<a id="L1330" class="source_line" href="#L1330">1330</a>
<a id="L1331" class="source_line" href="#L1331">1331</a>
<a id="L1332" class="source_line" href="#L1332">1332</a>
<a id="L1333" class="source_line" href="#L1333">1333</a>
<a id="L1334" class="source_line" href="#L1334">1334</a>
<a id="L1335" class="source_line" href="#L1335">1335</a>
<a id="L1336" class="source_line" href="#L1336">1336</a>
<a id="L1337" class="source_line" href="#L1337">1337</a>
<a id="L1338" class="source_line" href="#L1338">1338</a>
<a id="L1339" class="source_line" href="#L1339">1339</a>
<a id="L1340" class="source_line" href="#L1340">1340</a>
<a id="L1341" class="source_line" href="#L1341">1341</a>
<a id="L1342" class="source_line" href="#L1342">1342</a>
<a id="L1343" class="source_line" href="#L1343">1343</a>
<a id="L1344" class="source_line" href="#L1344">1344</a>
<a id="L1345" class="source_line" href="#L1345">1345</a>
<a id="L1346" class="source_line" href="#L1346">1346</a>
<a id="L1347" class="source_line" href="#L1347">1347</a>
<a id="L1348" class="source_line" href="#L1348">1348</a>
<a id="L1349" class="source_line" href="#L1349">1349</a>
<a id="L1350" class="source_line" href="#L1350">1350</a>
<a id="L1351" class="source_line" href="#L1351">1351</a>
<a id="L1352" class="source_line" href="#L1352">1352</a>
<a id="L1353" class="source_line" href="#L1353">1353</a>
<a id="L1354" class="source_line" href="#L1354">1354</a>
<a id="L1355" class="source_line" href="#L1355">1355</a>
<a id="L1356" class="source_line" href="#L1356">1356</a>
<a id="L1357" class="source_line" href="#L1357">1357</a>
<a id="L1358" class="source_line" href="#L1358">1358</a>
<a id="L1359" class="source_line" href="#L1359">1359</a>
<a id="L1360" class="source_line" href="#L1360">1360</a>
<a id="L1361" class="source_line" href="#L1361">1361</a>
<a id="L1362" class="source_line" href="#L1362">1362</a>
<a id="L1363" class="source_line" href="#L1363">1363</a>
<a id="L1364" class="source_line" href="#L1364">1364</a>
<a id="L1365" class="source_line" href="#L1365">1365</a>
<a id="L1366" class="source_line" href="#L1366">1366</a>
<a id="L1367" class="source_line" href="#L1367">1367</a>
<a id="L1368" class="source_line" href="#L1368">1368</a>
<a id="L1369" class="source_line" href="#L1369">1369</a>
<a id="L1370" class="source_line" href="#L1370">1370</a>
<a id="L1371" class="source_line" href="#L1371">1371</a>
<a id="L1372" class="source_line" href="#L1372">1372</a>
<a id="L1373" class="source_line" href="#L1373">1373</a>
<a id="L1374" class="source_line" href="#L1374">1374</a>
<a id="L1375" class="source_line" href="#L1375">1375</a>
<a id="L1376" class="source_line" href="#L1376">1376</a>
<a id="L1377" class="source_line" href="#L1377">1377</a>
<a id="L1378" class="source_line" href="#L1378">1378</a>
<a id="L1379" class="source_line" href="#L1379">1379</a>
<a id="L1380" class="source_line" href="#L1380">1380</a>
<a id="L1381" class="source_line" href="#L1381">1381</a>
<a id="L1382" class="source_line" href="#L1382">1382</a>
<a id="L1383" class="source_line" href="#L1383">1383</a>
<a id="L1384" class="source_line" href="#L1384">1384</a>
<a id="L1385" class="source_line" href="#L1385">1385</a>
<a id="L1386" class="source_line" href="#L1386">1386</a>
<a id="L1387" class="source_line" href="#L1387">1387</a>
<a id="L1388" class="source_line" href="#L1388">1388</a>
<a id="L1389" class="source_line" href="#L1389">1389</a>
<a id="L1390" class="source_line" href="#L1390">1390</a>
<a id="L1391" class="source_line" href="#L1391">1391</a>
<a id="L1392" class="source_line" href="#L1392">1392</a>
<a id="L1393" class="source_line" href="#L1393">1393</a>
<a id="L1394" class="source_line" href="#L1394">1394</a>
<a id="L1395" class="source_line" href="#L1395">1395</a>
<a id="L1396" class="source_line" href="#L1396">1396</a>
<a id="L1397" class="source_line" href="#L1397">1397</a>
<a id="L1398" class="source_line" href="#L1398">1398</a>
<a id="L1399" class="source_line" href="#L1399">1399</a>
<a id="L1400" class="source_line" href="#L1400">1400</a>
<a id="L1401" class="source_line" href="#L1401">1401</a>
<a id="L1402" class="source_line" href="#L1402">1402</a>
<a id="L1403" class="source_line" href="#L1403">1403</a>
<a id="L1404" class="source_line" href="#L1404">1404</a>
<a id="L1405" class="source_line" href="#L1405">1405</a>
<a id="L1406" class="source_line" href="#L1406">1406</a>
<a id="L1407" class="source_line" href="#L1407">1407</a>
<a id="L1408" class="source_line" href="#L1408">1408</a>
<a id="L1409" class="source_line" href="#L1409">1409</a>
<a id="L1410" class="source_line" href="#L1410">1410</a>
<a id="L1411" class="source_line" href="#L1411">1411</a>
<a id="L1412" class="source_line" href="#L1412">1412</a>
<a id="L1413" class="source_line" href="#L1413">1413</a>
<a id="L1414" class="source_line" href="#L1414">1414</a>
<a id="L1415" class="source_line" href="#L1415">1415</a>
<a id="L1416" class="source_line" href="#L1416">1416</a>
<a id="L1417" class="source_line" href="#L1417">1417</a>
<a id="L1418" class="source_line" href="#L1418">1418</a>
<a id="L1419" class="source_line" href="#L1419">1419</a>
<a id="L1420" class="source_line" href="#L1420">1420</a>
<a id="L1421" class="source_line" href="#L1421">1421</a>
<a id="L1422" class="source_line" href="#L1422">1422</a>
<a id="L1423" class="source_line" href="#L1423">1423</a>
<a id="L1424" class="source_line" href="#L1424">1424</a>
<a id="L1425" class="source_line" href="#L1425">1425</a>
<a id="L1426" class="source_line" href="#L1426">1426</a>
<a id="L1427" class="source_line" href="#L1427">1427</a>
<a id="L1428" class="source_line" href="#L1428">1428</a>
<a id="L1429" class="source_line" href="#L1429">1429</a>
<a id="L1430" class="source_line" href="#L1430">1430</a>
<a id="L1431" class="source_line" href="#L1431">1431</a>
<a id="L1432" class="source_line" href="#L1432">1432</a>
<a id="L1433" class="source_line" href="#L1433">1433</a>
<a id="L1434" class="source_line" href="#L1434">1434</a>
<a id="L1435" class="source_line" href="#L1435">1435</a>
<a id="L1436" class="source_line" href="#L1436">1436</a>
<a id="L1437" class="source_line" href="#L1437">1437</a>
<a id="L1438" class="source_line" href="#L1438">1438</a>
<a id="L1439" class="source_line" href="#L1439">1439</a>
<a id="L1440" class="source_line" href="#L1440">1440</a>
<a id="L1441" class="source_line" href="#L1441">1441</a>
<a id="L1442" class="source_line" href="#L1442">1442</a>
<a id="L1443" class="source_line" href="#L1443">1443</a>
<a id="L1444" class="source_line" href="#L1444">1444</a>
<a id="L1445" class="source_line" href="#L1445">1445</a>
<a id="L1446" class="source_line" href="#L1446">1446</a>
<a id="L1447" class="source_line" href="#L1447">1447</a>
<a id="L1448" class="source_line" href="#L1448">1448</a>
<a id="L1449" class="source_line" href="#L1449">1449</a>
<a id="L1450" class="source_line" href="#L1450">1450</a>
<a id="L1451" class="source_line" href="#L1451">1451</a>
<a id="L1452" class="source_line" href="#L1452">1452</a>
<a id="L1453" class="source_line" href="#L1453">1453</a>
<a id="L1454" class="source_line" href="#L1454">1454</a>
<a id="L1455" class="source_line" href="#L1455">1455</a>
<a id="L1456" class="source_line" href="#L1456">1456</a>
<a id="L1457" class="source_line" href="#L1457">1457</a>
<a id="L1458" class="source_line" href="#L1458">1458</a>
<a id="L1459" class="source_line" href="#L1459">1459</a>
<a id="L1460" class="source_line" href="#L1460">1460</a>
<a id="L1461" class="source_line" href="#L1461">1461</a>
<a id="L1462" class="source_line" href="#L1462">1462</a>
<a id="L1463" class="source_line" href="#L1463">1463</a>
<a id="L1464" class="source_line" href="#L1464">1464</a>
<a id="L1465" class="source_line" href="#L1465">1465</a>
<a id="L1466" class="source_line" href="#L1466">1466</a>
<a id="L1467" class="source_line" href="#L1467">1467</a>
<a id="L1468" class="source_line" href="#L1468">1468</a>
<a id="L1469" class="source_line" href="#L1469">1469</a>
<a id="L1470" class="source_line" href="#L1470">1470</a>
<a id="L1471" class="source_line" href="#L1471">1471</a>
<a id="L1472" class="source_line" href="#L1472">1472</a>
<a id="L1473" class="source_line" href="#L1473">1473</a>
<a id="L1474" class="source_line" href="#L1474">1474</a>
<a id="L1475" class="source_line" href="#L1475">1475</a>
<a id="L1476" class="source_line" href="#L1476">1476</a>
<a id="L1477" class="source_line" href="#L1477">1477</a>
<a id="L1478" class="source_line" href="#L1478">1478</a>
<a id="L1479" class="source_line" href="#L1479">1479</a>
<a id="L1480" class="source_line" href="#L1480">1480</a>
<a id="L1481" class="source_line" href="#L1481">1481</a>
<a id="L1482" class="source_line" href="#L1482">1482</a>
<a id="L1483" class="source_line" href="#L1483">1483</a>
<a id="L1484" class="source_line" href="#L1484">1484</a>
<a id="L1485" class="source_line" href="#L1485">1485</a>
<a id="L1486" class="source_line" href="#L1486">1486</a>
<a id="L1487" class="source_line" href="#L1487">1487</a>
<a id="L1488" class="source_line" href="#L1488">1488</a>
<a id="L1489" class="source_line" href="#L1489">1489</a>
<a id="L1490" class="source_line" href="#L1490">1490</a>
<a id="L1491" class="source_line" href="#L1491">1491</a>
<a id="L1492" class="source_line" href="#L1492">1492</a>
<a id="L1493" class="source_line" href="#L1493">1493</a>
<a id="L1494" class="source_line" href="#L1494">1494</a>
<a id="L1495" class="source_line" href="#L1495">1495</a>
<a id="L1496" class="source_line" href="#L1496">1496</a>
<a id="L1497" class="source_line" href="#L1497">1497</a>
<a id="L1498" class="source_line" href="#L1498">1498</a>
<a id="L1499" class="source_line" href="#L1499">1499</a>
<a id="L1500" class="source_line" href="#L1500">1500</a>
<a id="L1501" class="source_line" href="#L1501">1501</a>
<a id="L1502" class="source_line" href="#L1502">1502</a>
<a id="L1503" class="source_line" href="#L1503">1503</a>
<a id="L1504" class="source_line" href="#L1504">1504</a>
<a id="L1505" class="source_line" href="#L1505">1505</a>
<a id="L1506" class="source_line" href="#L1506">1506</a>
<a id="L1507" class="source_line" href="#L1507">1507</a>
<a id="L1508" class="source_line" href="#L1508">1508</a>
<a id="L1509" class="source_line" href="#L1509">1509</a>
<a id="L1510" class="source_line" href="#L1510">1510</a>
<a id="L1511" class="source_line" href="#L1511">1511</a>
<a id="L1512" class="source_line" href="#L1512">1512</a>
<a id="L1513" class="source_line" href="#L1513">1513</a>
<a id="L1514" class="source_line" href="#L1514">1514</a>
<a id="L1515" class="source_line" href="#L1515">1515</a>
<a id="L1516" class="source_line" href="#L1516">1516</a>
<a id="L1517" class="source_line" href="#L1517">1517</a>
<a id="L1518" class="source_line" href="#L1518">1518</a>
<a id="L1519" class="source_line" href="#L1519">1519</a>
<a id="L1520" class="source_line" href="#L1520">1520</a>
<a id="L1521" class="source_line" href="#L1521">1521</a>
<a id="L1522" class="source_line" href="#L1522">1522</a>
<a id="L1523" class="source_line" href="#L1523">1523</a>
<a id="L1524" class="source_line" href="#L1524">1524</a>
<a id="L1525" class="source_line" href="#L1525">1525</a>
<a id="L1526" class="source_line" href="#L1526">1526</a>
<a id="L1527" class="source_line" href="#L1527">1527</a>
<a id="L1528" class="source_line" href="#L1528">1528</a>
<a id="L1529" class="source_line" href="#L1529">1529</a>
<a id="L1530" class="source_line" href="#L1530">1530</a>
<a id="L1531" class="source_line" href="#L1531">1531</a>
<a id="L1532" class="source_line" href="#L1532">1532</a>
<a id="L1533" class="source_line" href="#L1533">1533</a>
<a id="L1534" class="source_line" href="#L1534">1534</a>
<a id="L1535" class="source_line" href="#L1535">1535</a>
<a id="L1536" class="source_line" href="#L1536">1536</a>
<a id="L1537" class="source_line" href="#L1537">1537</a>
<a id="L1538" class="source_line" href="#L1538">1538</a>
<a id="L1539" class="source_line" href="#L1539">1539</a>
<a id="L1540" class="source_line" href="#L1540">1540</a>
<a id="L1541" class="source_line" href="#L1541">1541</a>
<a id="L1542" class="source_line" href="#L1542">1542</a>
<a id="L1543" class="source_line" href="#L1543">1543</a>
<a id="L1544" class="source_line" href="#L1544">1544</a>
<a id="L1545" class="source_line" href="#L1545">1545</a>
<a id="L1546" class="source_line" href="#L1546">1546</a>
<a id="L1547" class="source_line" href="#L1547">1547</a>
<a id="L1548" class="source_line" href="#L1548">1548</a>
<a id="L1549" class="source_line" href="#L1549">1549</a>
<a id="L1550" class="source_line" href="#L1550">1550</a>
<a id="L1551" class="source_line" href="#L1551">1551</a>
<a id="L1552" class="source_line" href="#L1552">1552</a>
<a id="L1553" class="source_line" href="#L1553">1553</a>
<a id="L1554" class="source_line" href="#L1554">1554</a>
<a id="L1555" class="source_line" href="#L1555">1555</a>
<a id="L1556" class="source_line" href="#L1556">1556</a>
<a id="L1557" class="source_line" href="#L1557">1557</a>
<a id="L1558" class="source_line" href="#L1558">1558</a>
<a id="L1559" class="source_line" href="#L1559">1559</a>
<a id="L1560" class="source_line" href="#L1560">1560</a>
<a id="L1561" class="source_line" href="#L1561">1561</a>
<a id="L1562" class="source_line" href="#L1562">1562</a>
<a id="L1563" class="source_line" href="#L1563">1563</a>
<a id="L1564" class="source_line" href="#L1564">1564</a>
<a id="L1565" class="source_line" href="#L1565">1565</a>
<a id="L1566" class="source_line" href="#L1566">1566</a>
<a id="L1567" class="source_line" href="#L1567">1567</a>
<a id="L1568" class="source_line" href="#L1568">1568</a>
<a id="L1569" class="source_line" href="#L1569">1569</a>
<a id="L1570" class="source_line" href="#L1570">1570</a>
<a id="L1571" class="source_line" href="#L1571">1571</a>
<a id="L1572" class="source_line" href="#L1572">1572</a>
<a id="L1573" class="source_line" href="#L1573">1573</a>
<a id="L1574" class="source_line" href="#L1574">1574</a>
<a id="L1575" class="source_line" href="#L1575">1575</a>
<a id="L1576" class="source_line" href="#L1576">1576</a>
<a id="L1577" class="source_line" href="#L1577">1577</a>
<a id="L1578" class="source_line" href="#L1578">1578</a>
<a id="L1579" class="source_line" href="#L1579">1579</a>
<a id="L1580" class="source_line" href="#L1580">1580</a>
<a id="L1581" class="source_line" href="#L1581">1581</a>
<a id="L1582" class="source_line" href="#L1582">1582</a>
<a id="L1583" class="source_line" href="#L1583">1583</a>
<a id="L1584" class="source_line" href="#L1584">1584</a>
<a id="L1585" class="source_line" href="#L1585">1585</a>
<a id="L1586" class="source_line" href="#L1586">1586</a>
<a id="L1587" class="source_line" href="#L1587">1587</a>
<a id="L1588" class="source_line" href="#L1588">1588</a>
<a id="L1589" class="source_line" href="#L1589">1589</a>
<a id="L1590" class="source_line" href="#L1590">1590</a>
<a id="L1591" class="source_line" href="#L1591">1591</a>
<a id="L1592" class="source_line" href="#L1592">1592</a>
<a id="L1593" class="source_line" href="#L1593">1593</a>
<a id="L1594" class="source_line" href="#L1594">1594</a>
<a id="L1595" class="source_line" href="#L1595">1595</a>
<a id="L1596" class="source_line" href="#L1596">1596</a>
<a id="L1597" class="source_line" href="#L1597">1597</a>
<a id="L1598" class="source_line" href="#L1598">1598</a>
<a id="L1599" class="source_line" href="#L1599">1599</a>
<a id="L1600" class="source_line" href="#L1600">1600</a>
<a id="L1601" class="source_line" href="#L1601">1601</a>
<a id="L1602" class="source_line" href="#L1602">1602</a>
<a id="L1603" class="source_line" href="#L1603">1603</a>
<a id="L1604" class="source_line" href="#L1604">1604</a>
<a id="L1605" class="source_line" href="#L1605">1605</a>
<a id="L1606" class="source_line" href="#L1606">1606</a>
<a id="L1607" class="source_line" href="#L1607">1607</a>
<a id="L1608" class="source_line" href="#L1608">1608</a>
<a id="L1609" class="source_line" href="#L1609">1609</a>
<a id="L1610" class="source_line" href="#L1610">1610</a>
<a id="L1611" class="source_line" href="#L1611">1611</a>
<a id="L1612" class="source_line" href="#L1612">1612</a>
<a id="L1613" class="source_line" href="#L1613">1613</a>
<a id="L1614" class="source_line" href="#L1614">1614</a>
<a id="L1615" class="source_line" href="#L1615">1615</a>
<a id="L1616" class="source_line" href="#L1616">1616</a>
<a id="L1617" class="source_line" href="#L1617">1617</a>
<a id="L1618" class="source_line" href="#L1618">1618</a>
<a id="L1619" class="source_line" href="#L1619">1619</a>
<a id="L1620" class="source_line" href="#L1620">1620</a>
<a id="L1621" class="source_line" href="#L1621">1621</a>
<a id="L1622" class="source_line" href="#L1622">1622</a>
<a id="L1623" class="source_line" href="#L1623">1623</a>
<a id="L1624" class="source_line" href="#L1624">1624</a>
<a id="L1625" class="source_line" href="#L1625">1625</a>
<a id="L1626" class="source_line" href="#L1626">1626</a>
<a id="L1627" class="source_line" href="#L1627">1627</a>
<a id="L1628" class="source_line" href="#L1628">1628</a>
<a id="L1629" class="source_line" href="#L1629">1629</a>
<a id="L1630" class="source_line" href="#L1630">1630</a>
<a id="L1631" class="source_line" href="#L1631">1631</a>
<a id="L1632" class="source_line" href="#L1632">1632</a>
<a id="L1633" class="source_line" href="#L1633">1633</a>
<a id="L1634" class="source_line" href="#L1634">1634</a>
<a id="L1635" class="source_line" href="#L1635">1635</a>
<a id="L1636" class="source_line" href="#L1636">1636</a>
<a id="L1637" class="source_line" href="#L1637">1637</a>
<a id="L1638" class="source_line" href="#L1638">1638</a>
<a id="L1639" class="source_line" href="#L1639">1639</a>
<a id="L1640" class="source_line" href="#L1640">1640</a>
<a id="L1641" class="source_line" href="#L1641">1641</a>
<a id="L1642" class="source_line" href="#L1642">1642</a>
<a id="L1643" class="source_line" href="#L1643">1643</a>
<a id="L1644" class="source_line" href="#L1644">1644</a>
<a id="L1645" class="source_line" href="#L1645">1645</a>
<a id="L1646" class="source_line" href="#L1646">1646</a>
<a id="L1647" class="source_line" href="#L1647">1647</a>
<a id="L1648" class="source_line" href="#L1648">1648</a>
<a id="L1649" class="source_line" href="#L1649">1649</a>
<a id="L1650" class="source_line" href="#L1650">1650</a>
<a id="L1651" class="source_line" href="#L1651">1651</a>
<a id="L1652" class="source_line" href="#L1652">1652</a>
<a id="L1653" class="source_line" href="#L1653">1653</a>
<a id="L1654" class="source_line" href="#L1654">1654</a>
<a id="L1655" class="source_line" href="#L1655">1655</a>
<a id="L1656" class="source_line" href="#L1656">1656</a>
<a id="L1657" class="source_line" href="#L1657">1657</a>
<a id="L1658" class="source_line" href="#L1658">1658</a>
<a id="L1659" class="source_line" href="#L1659">1659</a>
<a id="L1660" class="source_line" href="#L1660">1660</a>
<a id="L1661" class="source_line" href="#L1661">1661</a>
<a id="L1662" class="source_line" href="#L1662">1662</a>
<a id="L1663" class="source_line" href="#L1663">1663</a>
<a id="L1664" class="source_line" href="#L1664">1664</a>
<a id="L1665" class="source_line" href="#L1665">1665</a>
<a id="L1666" class="source_line" href="#L1666">1666</a>
<a id="L1667" class="source_line" href="#L1667">1667</a>
<a id="L1668" class="source_line" href="#L1668">1668</a>
<a id="L1669" class="source_line" href="#L1669">1669</a>
<a id="L1670" class="source_line" href="#L1670">1670</a>
<a id="L1671" class="source_line" href="#L1671">1671</a>
<a id="L1672" class="source_line" href="#L1672">1672</a>
<a id="L1673" class="source_line" href="#L1673">1673</a>
<a id="L1674" class="source_line" href="#L1674">1674</a>
<a id="L1675" class="source_line" href="#L1675">1675</a>
<a id="L1676" class="source_line" href="#L1676">1676</a>
<a id="L1677" class="source_line" href="#L1677">1677</a>
<a id="L1678" class="source_line" href="#L1678">1678</a>
<a id="L1679" class="source_line" href="#L1679">1679</a>
<a id="L1680" class="source_line" href="#L1680">1680</a>
<a id="L1681" class="source_line" href="#L1681">1681</a>
<a id="L1682" class="source_line" href="#L1682">1682</a>
<a id="L1683" class="source_line" href="#L1683">1683</a>
<a id="L1684" class="source_line" href="#L1684">1684</a>
<a id="L1685" class="source_line" href="#L1685">1685</a>
<a id="L1686" class="source_line" href="#L1686">1686</a>
<a id="L1687" class="source_line" href="#L1687">1687</a>
<a id="L1688" class="source_line" href="#L1688">1688</a>
<a id="L1689" class="source_line" href="#L1689">1689</a>
<a id="L1690" class="source_line" href="#L1690">1690</a>
<a id="L1691" class="source_line" href="#L1691">1691</a>
<a id="L1692" class="source_line" href="#L1692">1692</a>
<a id="L1693" class="source_line" href="#L1693">1693</a>
<a id="L1694" class="source_line" href="#L1694">1694</a>
<a id="L1695" class="source_line" href="#L1695">1695</a>
<a id="L1696" class="source_line" href="#L1696">1696</a>
<a id="L1697" class="source_line" href="#L1697">1697</a>
<a id="L1698" class="source_line" href="#L1698">1698</a>
<a id="L1699" class="source_line" href="#L1699">1699</a>
<a id="L1700" class="source_line" href="#L1700">1700</a>
<a id="L1701" class="source_line" href="#L1701">1701</a>
<a id="L1702" class="source_line" href="#L1702">1702</a>
<a id="L1703" class="source_line" href="#L1703">1703</a>
<a id="L1704" class="source_line" href="#L1704">1704</a>
<a id="L1705" class="source_line" href="#L1705">1705</a>
<a id="L1706" class="source_line" href="#L1706">1706</a>
<a id="L1707" class="source_line" href="#L1707">1707</a>
<a id="L1708" class="source_line" href="#L1708">1708</a>
<a id="L1709" class="source_line" href="#L1709">1709</a>
<a id="L1710" class="source_line" href="#L1710">1710</a>
<a id="L1711" class="source_line" href="#L1711">1711</a>
<a id="L1712" class="source_line" href="#L1712">1712</a>
<a id="L1713" class="source_line" href="#L1713">1713</a>
<a id="L1714" class="source_line" href="#L1714">1714</a>
<a id="L1715" class="source_line" href="#L1715">1715</a>
<a id="L1716" class="source_line" href="#L1716">1716</a>
<a id="L1717" class="source_line" href="#L1717">1717</a>
<a id="L1718" class="source_line" href="#L1718">1718</a>
<a id="L1719" class="source_line" href="#L1719">1719</a>
<a id="L1720" class="source_line" href="#L1720">1720</a>
<a id="L1721" class="source_line" href="#L1721">1721</a>
<a id="L1722" class="source_line" href="#L1722">1722</a>
<a id="L1723" class="source_line" href="#L1723">1723</a>
<a id="L1724" class="source_line" href="#L1724">1724</a>
<a id="L1725" class="source_line" href="#L1725">1725</a>
<a id="L1726" class="source_line" href="#L1726">1726</a>
<a id="L1727" class="source_line" href="#L1727">1727</a>
<a id="L1728" class="source_line" href="#L1728">1728</a>
<a id="L1729" class="source_line" href="#L1729">1729</a>
<a id="L1730" class="source_line" href="#L1730">1730</a>
<a id="L1731" class="source_line" href="#L1731">1731</a>
<a id="L1732" class="source_line" href="#L1732">1732</a>
<a id="L1733" class="source_line" href="#L1733">1733</a>
<a id="L1734" class="source_line" href="#L1734">1734</a>
<a id="L1735" class="source_line" href="#L1735">1735</a>
<a id="L1736" class="source_line" href="#L1736">1736</a>
<a id="L1737" class="source_line" href="#L1737">1737</a>
<a id="L1738" class="source_line" href="#L1738">1738</a>
<a id="L1739" class="source_line" href="#L1739">1739</a>
<a id="L1740" class="source_line" href="#L1740">1740</a>
<a id="L1741" class="source_line" href="#L1741">1741</a>
<a id="L1742" class="source_line" href="#L1742">1742</a>
<a id="L1743" class="source_line" href="#L1743">1743</a>
<a id="L1744" class="source_line" href="#L1744">1744</a>
<a id="L1745" class="source_line" href="#L1745">1745</a>
<a id="L1746" class="source_line" href="#L1746">1746</a>
<a id="L1747" class="source_line" href="#L1747">1747</a>
<a id="L1748" class="source_line" href="#L1748">1748</a>
<a id="L1749" class="source_line" href="#L1749">1749</a>
<a id="L1750" class="source_line" href="#L1750">1750</a>
<a id="L1751" class="source_line" href="#L1751">1751</a>
<a id="L1752" class="source_line" href="#L1752">1752</a>
<a id="L1753" class="source_line" href="#L1753">1753</a>
<a id="L1754" class="source_line" href="#L1754">1754</a>
<a id="L1755" class="source_line" href="#L1755">1755</a>
<a id="L1756" class="source_line" href="#L1756">1756</a>
<a id="L1757" class="source_line" href="#L1757">1757</a>
<a id="L1758" class="source_line" href="#L1758">1758</a>
<a id="L1759" class="source_line" href="#L1759">1759</a>
<a id="L1760" class="source_line" href="#L1760">1760</a>
<a id="L1761" class="source_line" href="#L1761">1761</a>
<a id="L1762" class="source_line" href="#L1762">1762</a>
<a id="L1763" class="source_line" href="#L1763">1763</a>
<a id="L1764" class="source_line" href="#L1764">1764</a>
<a id="L1765" class="source_line" href="#L1765">1765</a>
<a id="L1766" class="source_line" href="#L1766">1766</a>
<a id="L1767" class="source_line" href="#L1767">1767</a>
<a id="L1768" class="source_line" href="#L1768">1768</a>
<a id="L1769" class="source_line" href="#L1769">1769</a>
<a id="L1770" class="source_line" href="#L1770">1770</a>
<a id="L1771" class="source_line" href="#L1771">1771</a>
<a id="L1772" class="source_line" href="#L1772">1772</a>
<a id="L1773" class="source_line" href="#L1773">1773</a>
<a id="L1774" class="source_line" href="#L1774">1774</a>
<a id="L1775" class="source_line" href="#L1775">1775</a>
<a id="L1776" class="source_line" href="#L1776">1776</a>
<a id="L1777" class="source_line" href="#L1777">1777</a>
<a id="L1778" class="source_line" href="#L1778">1778</a>
<a id="L1779" class="source_line" href="#L1779">1779</a>
<a id="L1780" class="source_line" href="#L1780">1780</a>
<a id="L1781" class="source_line" href="#L1781">1781</a>
<a id="L1782" class="source_line" href="#L1782">1782</a>
<a id="L1783" class="source_line" href="#L1783">1783</a>
<a id="L1784" class="source_line" href="#L1784">1784</a>
<a id="L1785" class="source_line" href="#L1785">1785</a>
<a id="L1786" class="source_line" href="#L1786">1786</a>
<a id="L1787" class="source_line" href="#L1787">1787</a>
<a id="L1788" class="source_line" href="#L1788">1788</a>
<a id="L1789" class="source_line" href="#L1789">1789</a>
<a id="L1790" class="source_line" href="#L1790">1790</a>
<a id="L1791" class="source_line" href="#L1791">1791</a>
<a id="L1792" class="source_line" href="#L1792">1792</a>
<a id="L1793" class="source_line" href="#L1793">1793</a>
<a id="L1794" class="source_line" href="#L1794">1794</a>
<a id="L1795" class="source_line" href="#L1795">1795</a>
<a id="L1796" class="source_line" href="#L1796">1796</a>
<a id="L1797" class="source_line" href="#L1797">1797</a>
<a id="L1798" class="source_line" href="#L1798">1798</a>
<a id="L1799" class="source_line" href="#L1799">1799</a>
<a id="L1800" class="source_line" href="#L1800">1800</a>
<a id="L1801" class="source_line" href="#L1801">1801</a>
<a id="L1802" class="source_line" href="#L1802">1802</a>
<a id="L1803" class="source_line" href="#L1803">1803</a>
<a id="L1804" class="source_line" href="#L1804">1804</a>
<a id="L1805" class="source_line" href="#L1805">1805</a>
<a id="L1806" class="source_line" href="#L1806">1806</a>
<a id="L1807" class="source_line" href="#L1807">1807</a>
<a id="L1808" class="source_line" href="#L1808">1808</a>
<a id="L1809" class="source_line" href="#L1809">1809</a>
<a id="L1810" class="source_line" href="#L1810">1810</a>
<a id="L1811" class="source_line" href="#L1811">1811</a>
<a id="L1812" class="source_line" href="#L1812">1812</a>
<a id="L1813" class="source_line" href="#L1813">1813</a>
<a id="L1814" class="source_line" href="#L1814">1814</a>
<a id="L1815" class="source_line" href="#L1815">1815</a>
<a id="L1816" class="source_line" href="#L1816">1816</a>
<a id="L1817" class="source_line" href="#L1817">1817</a>
<a id="L1818" class="source_line" href="#L1818">1818</a>
<a id="L1819" class="source_line" href="#L1819">1819</a>
<a id="L1820" class="source_line" href="#L1820">1820</a>
<a id="L1821" class="source_line" href="#L1821">1821</a>
<a id="L1822" class="source_line" href="#L1822">1822</a>
<a id="L1823" class="source_line" href="#L1823">1823</a>
<a id="L1824" class="source_line" href="#L1824">1824</a>
<a id="L1825" class="source_line" href="#L1825">1825</a>
<a id="L1826" class="source_line" href="#L1826">1826</a>
<a id="L1827" class="source_line" href="#L1827">1827</a>
<a id="L1828" class="source_line" href="#L1828">1828</a>
<a id="L1829" class="source_line" href="#L1829">1829</a>
<a id="L1830" class="source_line" href="#L1830">1830</a>
<a id="L1831" class="source_line" href="#L1831">1831</a>
<a id="L1832" class="source_line" href="#L1832">1832</a>
<a id="L1833" class="source_line" href="#L1833">1833</a>
<a id="L1834" class="source_line" href="#L1834">1834</a>
<a id="L1835" class="source_line" href="#L1835">1835</a>
<a id="L1836" class="source_line" href="#L1836">1836</a>
<a id="L1837" class="source_line" href="#L1837">1837</a>
<a id="L1838" class="source_line" href="#L1838">1838</a>
<a id="L1839" class="source_line" href="#L1839">1839</a>
<a id="L1840" class="source_line" href="#L1840">1840</a>
<a id="L1841" class="source_line" href="#L1841">1841</a>
<a id="L1842" class="source_line" href="#L1842">1842</a>
<a id="L1843" class="source_line" href="#L1843">1843</a>
<a id="L1844" class="source_line" href="#L1844">1844</a>
<a id="L1845" class="source_line" href="#L1845">1845</a>
<a id="L1846" class="source_line" href="#L1846">1846</a>
<a id="L1847" class="source_line" href="#L1847">1847</a>
<a id="L1848" class="source_line" href="#L1848">1848</a>
<a id="L1849" class="source_line" href="#L1849">1849</a>
<a id="L1850" class="source_line" href="#L1850">1850</a>
<a id="L1851" class="source_line" href="#L1851">1851</a>
<a id="L1852" class="source_line" href="#L1852">1852</a>
<a id="L1853" class="source_line" href="#L1853">1853</a>
<a id="L1854" class="source_line" href="#L1854">1854</a>
<a id="L1855" class="source_line" href="#L1855">1855</a>
<a id="L1856" class="source_line" href="#L1856">1856</a>
<a id="L1857" class="source_line" href="#L1857">1857</a>
<a id="L1858" class="source_line" href="#L1858">1858</a>
<a id="L1859" class="source_line" href="#L1859">1859</a>
<a id="L1860" class="source_line" href="#L1860">1860</a>
<a id="L1861" class="source_line" href="#L1861">1861</a>
<a id="L1862" class="source_line" href="#L1862">1862</a>
<a id="L1863" class="source_line" href="#L1863">1863</a>
<a id="L1864" class="source_line" href="#L1864">1864</a>
<a id="L1865" class="source_line" href="#L1865">1865</a>
<a id="L1866" class="source_line" href="#L1866">1866</a>
<a id="L1867" class="source_line" href="#L1867">1867</a>
<a id="L1868" class="source_line" href="#L1868">1868</a>
<a id="L1869" class="source_line" href="#L1869">1869</a>
<a id="L1870" class="source_line" href="#L1870">1870</a>
<a id="L1871" class="source_line" href="#L1871">1871</a>
<a id="L1872" class="source_line" href="#L1872">1872</a>
<a id="L1873" class="source_line" href="#L1873">1873</a>
<a id="L1874" class="source_line" href="#L1874">1874</a>
<a id="L1875" class="source_line" href="#L1875">1875</a>
<a id="L1876" class="source_line" href="#L1876">1876</a>
<a id="L1877" class="source_line" href="#L1877">1877</a>
<a id="L1878" class="source_line" href="#L1878">1878</a>
<a id="L1879" class="source_line" href="#L1879">1879</a>
<a id="L1880" class="source_line" href="#L1880">1880</a>
<a id="L1881" class="source_line" href="#L1881">1881</a>
<a id="L1882" class="source_line" href="#L1882">1882</a>
<a id="L1883" class="source_line" href="#L1883">1883</a>
<a id="L1884" class="source_line" href="#L1884">1884</a>
<a id="L1885" class="source_line" href="#L1885">1885</a>
<a id="L1886" class="source_line" href="#L1886">1886</a>
<a id="L1887" class="source_line" href="#L1887">1887</a>
<a id="L1888" class="source_line" href="#L1888">1888</a>
<a id="L1889" class="source_line" href="#L1889">1889</a>
<a id="L1890" class="source_line" href="#L1890">1890</a>
<a id="L1891" class="source_line" href="#L1891">1891</a>
<a id="L1892" class="source_line" href="#L1892">1892</a>
<a id="L1893" class="source_line" href="#L1893">1893</a>
<a id="L1894" class="source_line" href="#L1894">1894</a>
<a id="L1895" class="source_line" href="#L1895">1895</a>
<a id="L1896" class="source_line" href="#L1896">1896</a>
<a id="L1897" class="source_line" href="#L1897">1897</a>
<a id="L1898" class="source_line" href="#L1898">1898</a>
<a id="L1899" class="source_line" href="#L1899">1899</a>
<a id="L1900" class="source_line" href="#L1900">1900</a>
<a id="L1901" class="source_line" href="#L1901">1901</a>
<a id="L1902" class="source_line" href="#L1902">1902</a>
<a id="L1903" class="source_line" href="#L1903">1903</a>
<a id="L1904" class="source_line" href="#L1904">1904</a>
<a id="L1905" class="source_line" href="#L1905">1905</a>
<a id="L1906" class="source_line" href="#L1906">1906</a>
<a id="L1907" class="source_line" href="#L1907">1907</a>
<a id="L1908" class="source_line" href="#L1908">1908</a>
<a id="L1909" class="source_line" href="#L1909">1909</a>
<a id="L1910" class="source_line" href="#L1910">1910</a>
<a id="L1911" class="source_line" href="#L1911">1911</a>
<a id="L1912" class="source_line" href="#L1912">1912</a>
<a id="L1913" class="source_line" href="#L1913">1913</a>
<a id="L1914" class="source_line" href="#L1914">1914</a>
<a id="L1915" class="source_line" href="#L1915">1915</a>
<a id="L1916" class="source_line" href="#L1916">1916</a>
<a id="L1917" class="source_line" href="#L1917">1917</a>
<a id="L1918" class="source_line" href="#L1918">1918</a>
<a id="L1919" class="source_line" href="#L1919">1919</a>
<a id="L1920" class="source_line" href="#L1920">1920</a>
<a id="L1921" class="source_line" href="#L1921">1921</a>
<a id="L1922" class="source_line" href="#L1922">1922</a>
<a id="L1923" class="source_line" href="#L1923">1923</a>
<a id="L1924" class="source_line" href="#L1924">1924</a>
<a id="L1925" class="source_line" href="#L1925">1925</a>
<a id="L1926" class="source_line" href="#L1926">1926</a>
<a id="L1927" class="source_line" href="#L1927">1927</a>
<a id="L1928" class="source_line" href="#L1928">1928</a>
<a id="L1929" class="source_line" href="#L1929">1929</a>
<a id="L1930" class="source_line" href="#L1930">1930</a>
<a id="L1931" class="source_line" href="#L1931">1931</a>
<a id="L1932" class="source_line" href="#L1932">1932</a>
<a id="L1933" class="source_line" href="#L1933">1933</a>
<a id="L1934" class="source_line" href="#L1934">1934</a>
<a id="L1935" class="source_line" href="#L1935">1935</a>
<a id="L1936" class="source_line" href="#L1936">1936</a>
<a id="L1937" class="source_line" href="#L1937">1937</a>
<a id="L1938" class="source_line" href="#L1938">1938</a>
<a id="L1939" class="source_line" href="#L1939">1939</a>
<a id="L1940" class="source_line" href="#L1940">1940</a>
<a id="L1941" class="source_line" href="#L1941">1941</a>
<a id="L1942" class="source_line" href="#L1942">1942</a>
<a id="L1943" class="source_line" href="#L1943">1943</a>
<a id="L1944" class="source_line" href="#L1944">1944</a>
<a id="L1945" class="source_line" href="#L1945">1945</a>
<a id="L1946" class="source_line" href="#L1946">1946</a>
<a id="L1947" class="source_line" href="#L1947">1947</a>
<a id="L1948" class="source_line" href="#L1948">1948</a>
<a id="L1949" class="source_line" href="#L1949">1949</a>
<a id="L1950" class="source_line" href="#L1950">1950</a>
<a id="L1951" class="source_line" href="#L1951">1951</a>
<a id="L1952" class="source_line" href="#L1952">1952</a>
<a id="L1953" class="source_line" href="#L1953">1953</a>
<a id="L1954" class="source_line" href="#L1954">1954</a>
<a id="L1955" class="source_line" href="#L1955">1955</a>
<a id="L1956" class="source_line" href="#L1956">1956</a>
<a id="L1957" class="source_line" href="#L1957">1957</a>
<a id="L1958" class="source_line" href="#L1958">1958</a>
<a id="L1959" class="source_line" href="#L1959">1959</a>
<a id="L1960" class="source_line" href="#L1960">1960</a>
<a id="L1961" class="source_line" href="#L1961">1961</a>
<a id="L1962" class="source_line" href="#L1962">1962</a>
<a id="L1963" class="source_line" href="#L1963">1963</a>
<a id="L1964" class="source_line" href="#L1964">1964</a>
<a id="L1965" class="source_line" href="#L1965">1965</a>
<a id="L1966" class="source_line" href="#L1966">1966</a>
<a id="L1967" class="source_line" href="#L1967">1967</a>
<a id="L1968" class="source_line" href="#L1968">1968</a>
<a id="L1969" class="source_line" href="#L1969">1969</a>
<a id="L1970" class="source_line" href="#L1970">1970</a>
<a id="L1971" class="source_line" href="#L1971">1971</a>
<a id="L1972" class="source_line" href="#L1972">1972</a>
<a id="L1973" class="source_line" href="#L1973">1973</a>
<a id="L1974" class="source_line" href="#L1974">1974</a>
<a id="L1975" class="source_line" href="#L1975">1975</a>
<a id="L1976" class="source_line" href="#L1976">1976</a>
<a id="L1977" class="source_line" href="#L1977">1977</a>
<a id="L1978" class="source_line" href="#L1978">1978</a>
<a id="L1979" class="source_line" href="#L1979">1979</a>
<a id="L1980" class="source_line" href="#L1980">1980</a>
<a id="L1981" class="source_line" href="#L1981">1981</a>
<a id="L1982" class="source_line" href="#L1982">1982</a>
<a id="L1983" class="source_line" href="#L1983">1983</a>
<a id="L1984" class="source_line" href="#L1984">1984</a>
<a id="L1985" class="source_line" href="#L1985">1985</a>
<a id="L1986" class="source_line" href="#L1986">1986</a>
<a id="L1987" class="source_line" href="#L1987">1987</a>
<a id="L1988" class="source_line" href="#L1988">1988</a>
<a id="L1989" class="source_line" href="#L1989">1989</a>
<a id="L1990" class="source_line" href="#L1990">1990</a>
<a id="L1991" class="source_line" href="#L1991">1991</a>
<a id="L1992" class="source_line" href="#L1992">1992</a>
<a id="L1993" class="source_line" href="#L1993">1993</a>
<a id="L1994" class="source_line" href="#L1994">1994</a>
<a id="L1995" class="source_line" href="#L1995">1995</a>
<a id="L1996" class="source_line" href="#L1996">1996</a>
<a id="L1997" class="source_line" href="#L1997">1997</a>
<a id="L1998" class="source_line" href="#L1998">1998</a>
<a id="L1999" class="source_line" href="#L1999">1999</a>
<a id="L2000" class="source_line" href="#L2000">2000</a>
<a id="L2001" class="source_line" href="#L2001">2001</a>
<a id="L2002" class="source_line" href="#L2002">2002</a>
<a id="L2003" class="source_line" href="#L2003">2003</a>
<a id="L2004" class="source_line" href="#L2004">2004</a>
<a id="L2005" class="source_line" href="#L2005">2005</a>
<a id="L2006" class="source_line" href="#L2006">2006</a>
<a id="L2007" class="source_line" href="#L2007">2007</a>
<a id="L2008" class="source_line" href="#L2008">2008</a>
<a id="L2009" class="source_line" href="#L2009">2009</a>
<a id="L2010" class="source_line" href="#L2010">2010</a>
<a id="L2011" class="source_line" href="#L2011">2011</a>
<a id="L2012" class="source_line" href="#L2012">2012</a>
<a id="L2013" class="source_line" href="#L2013">2013</a>
<a id="L2014" class="source_line" href="#L2014">2014</a>
<a id="L2015" class="source_line" href="#L2015">2015</a>
<a id="L2016" class="source_line" href="#L2016">2016</a>
<a id="L2017" class="source_line" href="#L2017">2017</a>
<a id="L2018" class="source_line" href="#L2018">2018</a>
<a id="L2019" class="source_line" href="#L2019">2019</a>
<a id="L2020" class="source_line" href="#L2020">2020</a>
<a id="L2021" class="source_line" href="#L2021">2021</a>
<a id="L2022" class="source_line" href="#L2022">2022</a>
<a id="L2023" class="source_line" href="#L2023">2023</a>
<a id="L2024" class="source_line" href="#L2024">2024</a>
<a id="L2025" class="source_line" href="#L2025">2025</a>
<a id="L2026" class="source_line" href="#L2026">2026</a>
<a id="L2027" class="source_line" href="#L2027">2027</a>
<a id="L2028" class="source_line" href="#L2028">2028</a>
<a id="L2029" class="source_line" href="#L2029">2029</a>
<a id="L2030" class="source_line" href="#L2030">2030</a>
<a id="L2031" class="source_line" href="#L2031">2031</a>
<a id="L2032" class="source_line" href="#L2032">2032</a>
<a id="L2033" class="source_line" href="#L2033">2033</a>
<a id="L2034" class="source_line" href="#L2034">2034</a>
<a id="L2035" class="source_line" href="#L2035">2035</a>
<a id="L2036" class="source_line" href="#L2036">2036</a>
<a id="L2037" class="source_line" href="#L2037">2037</a>
<a id="L2038" class="source_line" href="#L2038">2038</a>
<a id="L2039" class="source_line" href="#L2039">2039</a>
<a id="L2040" class="source_line" href="#L2040">2040</a>
<a id="L2041" class="source_line" href="#L2041">2041</a>
<a id="L2042" class="source_line" href="#L2042">2042</a>
<a id="L2043" class="source_line" href="#L2043">2043</a>
<a id="L2044" class="source_line" href="#L2044">2044</a>
<a id="L2045" class="source_line" href="#L2045">2045</a>
<a id="L2046" class="source_line" href="#L2046">2046</a>
<a id="L2047" class="source_line" href="#L2047">2047</a>
<a id="L2048" class="source_line" href="#L2048">2048</a>
<a id="L2049" class="source_line" href="#L2049">2049</a>
<a id="L2050" class="source_line" href="#L2050">2050</a>
<a id="L2051" class="source_line" href="#L2051">2051</a>
<a id="L2052" class="source_line" href="#L2052">2052</a>
<a id="L2053" class="source_line" href="#L2053">2053</a>
<a id="L2054" class="source_line" href="#L2054">2054</a>
<a id="L2055" class="source_line" href="#L2055">2055</a>
<a id="L2056" class="source_line" href="#L2056">2056</a>
<a id="L2057" class="source_line" href="#L2057">2057</a>
<a id="L2058" class="source_line" href="#L2058">2058</a>
<a id="L2059" class="source_line" href="#L2059">2059</a>
<a id="L2060" class="source_line" href="#L2060">2060</a>
<a id="L2061" class="source_line" href="#L2061">2061</a>
<a id="L2062" class="source_line" href="#L2062">2062</a>
<a id="L2063" class="source_line" href="#L2063">2063</a>
<a id="L2064" class="source_line" href="#L2064">2064</a>
<a id="L2065" class="source_line" href="#L2065">2065</a>
<a id="L2066" class="source_line" href="#L2066">2066</a>
<a id="L2067" class="source_line" href="#L2067">2067</a>
<a id="L2068" class="source_line" href="#L2068">2068</a>
<a id="L2069" class="source_line" href="#L2069">2069</a>
<a id="L2070" class="source_line" href="#L2070">2070</a>
<a id="L2071" class="source_line" href="#L2071">2071</a>
<a id="L2072" class="source_line" href="#L2072">2072</a>
<a id="L2073" class="source_line" href="#L2073">2073</a>
<a id="L2074" class="source_line" href="#L2074">2074</a>
<a id="L2075" class="source_line" href="#L2075">2075</a>
<a id="L2076" class="source_line" href="#L2076">2076</a>
<a id="L2077" class="source_line" href="#L2077">2077</a>
<a id="L2078" class="source_line" href="#L2078">2078</a>
<a id="L2079" class="source_line" href="#L2079">2079</a>
<a id="L2080" class="source_line" href="#L2080">2080</a>
<a id="L2081" class="source_line" href="#L2081">2081</a>
<a id="L2082" class="source_line" href="#L2082">2082</a>
<a id="L2083" class="source_line" href="#L2083">2083</a>
<a id="L2084" class="source_line" href="#L2084">2084</a>
<a id="L2085" class="source_line" href="#L2085">2085</a>
<a id="L2086" class="source_line" href="#L2086">2086</a>
<a id="L2087" class="source_line" href="#L2087">2087</a>
<a id="L2088" class="source_line" href="#L2088">2088</a>
<a id="L2089" class="source_line" href="#L2089">2089</a>
<a id="L2090" class="source_line" href="#L2090">2090</a>
<a id="L2091" class="source_line" href="#L2091">2091</a>
<a id="L2092" class="source_line" href="#L2092">2092</a>
<a id="L2093" class="source_line" href="#L2093">2093</a>
<a id="L2094" class="source_line" href="#L2094">2094</a>
<a id="L2095" class="source_line" href="#L2095">2095</a>
<a id="L2096" class="source_line" href="#L2096">2096</a>
<a id="L2097" class="source_line" href="#L2097">2097</a>
<a id="L2098" class="source_line" href="#L2098">2098</a>
<a id="L2099" class="source_line" href="#L2099">2099</a>
<a id="L2100" class="source_line" href="#L2100">2100</a>
<a id="L2101" class="source_line" href="#L2101">2101</a>
<a id="L2102" class="source_line" href="#L2102">2102</a>
<a id="L2103" class="source_line" href="#L2103">2103</a>
<a id="L2104" class="source_line" href="#L2104">2104</a>
<a id="L2105" class="source_line" href="#L2105">2105</a>
<a id="L2106" class="source_line" href="#L2106">2106</a>
<a id="L2107" class="source_line" href="#L2107">2107</a>
<a id="L2108" class="source_line" href="#L2108">2108</a>
<a id="L2109" class="source_line" href="#L2109">2109</a>
<a id="L2110" class="source_line" href="#L2110">2110</a>
<a id="L2111" class="source_line" href="#L2111">2111</a>
<a id="L2112" class="source_line" href="#L2112">2112</a>
<a id="L2113" class="source_line" href="#L2113">2113</a>
<a id="L2114" class="source_line" href="#L2114">2114</a>
<a id="L2115" class="source_line" href="#L2115">2115</a>
<a id="L2116" class="source_line" href="#L2116">2116</a>
<a id="L2117" class="source_line" href="#L2117">2117</a>
<a id="L2118" class="source_line" href="#L2118">2118</a>
<a id="L2119" class="source_line" href="#L2119">2119</a>
<a id="L2120" class="source_line" href="#L2120">2120</a>
<a id="L2121" class="source_line" href="#L2121">2121</a>
<a id="L2122" class="source_line" href="#L2122">2122</a>
<a id="L2123" class="source_line" href="#L2123">2123</a>
<a id="L2124" class="source_line" href="#L2124">2124</a>
<a id="L2125" class="source_line" href="#L2125">2125</a>
<a id="L2126" class="source_line" href="#L2126">2126</a>
<a id="L2127" class="source_line" href="#L2127">2127</a>
<a id="L2128" class="source_line" href="#L2128">2128</a>
<a id="L2129" class="source_line" href="#L2129">2129</a>
<a id="L2130" class="source_line" href="#L2130">2130</a>
<a id="L2131" class="source_line" href="#L2131">2131</a>
<a id="L2132" class="source_line" href="#L2132">2132</a>
<a id="L2133" class="source_line" href="#L2133">2133</a>
<a id="L2134" class="source_line" href="#L2134">2134</a>
<a id="L2135" class="source_line" href="#L2135">2135</a>
<a id="L2136" class="source_line" href="#L2136">2136</a>
<a id="L2137" class="source_line" href="#L2137">2137</a>
<a id="L2138" class="source_line" href="#L2138">2138</a>
<a id="L2139" class="source_line" href="#L2139">2139</a>
<a id="L2140" class="source_line" href="#L2140">2140</a>
<a id="L2141" class="source_line" href="#L2141">2141</a>
<a id="L2142" class="source_line" href="#L2142">2142</a>
<a id="L2143" class="source_line" href="#L2143">2143</a>
<a id="L2144" class="source_line" href="#L2144">2144</a>
<a id="L2145" class="source_line" href="#L2145">2145</a>
<a id="L2146" class="source_line" href="#L2146">2146</a>
<a id="L2147" class="source_line" href="#L2147">2147</a>
<a id="L2148" class="source_line" href="#L2148">2148</a>
<a id="L2149" class="source_line" href="#L2149">2149</a>
<a id="L2150" class="source_line" href="#L2150">2150</a>
<a id="L2151" class="source_line" href="#L2151">2151</a>
<a id="L2152" class="source_line" href="#L2152">2152</a>
<a id="L2153" class="source_line" href="#L2153">2153</a>
<a id="L2154" class="source_line" href="#L2154">2154</a>
<a id="L2155" class="source_line" href="#L2155">2155</a>
<a id="L2156" class="source_line" href="#L2156">2156</a>
<a id="L2157" class="source_line" href="#L2157">2157</a>
<a id="L2158" class="source_line" href="#L2158">2158</a>
<a id="L2159" class="source_line" href="#L2159">2159</a>
<a id="L2160" class="source_line" href="#L2160">2160</a>
<a id="L2161" class="source_line" href="#L2161">2161</a>
<a id="L2162" class="source_line" href="#L2162">2162</a>
<a id="L2163" class="source_line" href="#L2163">2163</a>
<a id="L2164" class="source_line" href="#L2164">2164</a>
<a id="L2165" class="source_line" href="#L2165">2165</a>
<a id="L2166" class="source_line" href="#L2166">2166</a>
<a id="L2167" class="source_line" href="#L2167">2167</a>
<a id="L2168" class="source_line" href="#L2168">2168</a>
<a id="L2169" class="source_line" href="#L2169">2169</a>
<a id="L2170" class="source_line" href="#L2170">2170</a>
<a id="L2171" class="source_line" href="#L2171">2171</a>
<a id="L2172" class="source_line" href="#L2172">2172</a>
<a id="L2173" class="source_line" href="#L2173">2173</a>
<a id="L2174" class="source_line" href="#L2174">2174</a>
<a id="L2175" class="source_line" href="#L2175">2175</a>
<a id="L2176" class="source_line" href="#L2176">2176</a>
<a id="L2177" class="source_line" href="#L2177">2177</a>
<a id="L2178" class="source_line" href="#L2178">2178</a>
<a id="L2179" class="source_line" href="#L2179">2179</a>
<a id="L2180" class="source_line" href="#L2180">2180</a>
<a id="L2181" class="source_line" href="#L2181">2181</a>
<a id="L2182" class="source_line" href="#L2182">2182</a>
<a id="L2183" class="source_line" href="#L2183">2183</a>
<a id="L2184" class="source_line" href="#L2184">2184</a>
<a id="L2185" class="source_line" href="#L2185">2185</a>
<a id="L2186" class="source_line" href="#L2186">2186</a>
<a id="L2187" class="source_line" href="#L2187">2187</a>
<a id="L2188" class="source_line" href="#L2188">2188</a>
<a id="L2189" class="source_line" href="#L2189">2189</a>
<a id="L2190" class="source_line" href="#L2190">2190</a>
<a id="L2191" class="source_line" href="#L2191">2191</a>
<a id="L2192" class="source_line" href="#L2192">2192</a>
<a id="L2193" class="source_line" href="#L2193">2193</a>
<a id="L2194" class="source_line" href="#L2194">2194</a>
<a id="L2195" class="source_line" href="#L2195">2195</a>
<a id="L2196" class="source_line" href="#L2196">2196</a>
<a id="L2197" class="source_line" href="#L2197">2197</a>
<a id="L2198" class="source_line" href="#L2198">2198</a>
<a id="L2199" class="source_line" href="#L2199">2199</a>
<a id="L2200" class="source_line" href="#L2200">2200</a>
<a id="L2201" class="source_line" href="#L2201">2201</a>
<a id="L2202" class="source_line" href="#L2202">2202</a>
<a id="L2203" class="source_line" href="#L2203">2203</a>
<a id="L2204" class="source_line" href="#L2204">2204</a>
<a id="L2205" class="source_line" href="#L2205">2205</a>
<a id="L2206" class="source_line" href="#L2206">2206</a>
<a id="L2207" class="source_line" href="#L2207">2207</a>
<a id="L2208" class="source_line" href="#L2208">2208</a>
<a id="L2209" class="source_line" href="#L2209">2209</a>
<a id="L2210" class="source_line" href="#L2210">2210</a>
<a id="L2211" class="source_line" href="#L2211">2211</a>
<a id="L2212" class="source_line" href="#L2212">2212</a>
<a id="L2213" class="source_line" href="#L2213">2213</a>
<a id="L2214" class="source_line" href="#L2214">2214</a>
<a id="L2215" class="source_line" href="#L2215">2215</a>
<a id="L2216" class="source_line" href="#L2216">2216</a>
<a id="L2217" class="source_line" href="#L2217">2217</a>
<a id="L2218" class="source_line" href="#L2218">2218</a>
<a id="L2219" class="source_line" href="#L2219">2219</a>
<a id="L2220" class="source_line" href="#L2220">2220</a>
<a id="L2221" class="source_line" href="#L2221">2221</a>
<a id="L2222" class="source_line" href="#L2222">2222</a>
<a id="L2223" class="source_line" href="#L2223">2223</a>
<a id="L2224" class="source_line" href="#L2224">2224</a>
<a id="L2225" class="source_line" href="#L2225">2225</a>
<a id="L2226" class="source_line" href="#L2226">2226</a>
<a id="L2227" class="source_line" href="#L2227">2227</a>
<a id="L2228" class="source_line" href="#L2228">2228</a>
<a id="L2229" class="source_line" href="#L2229">2229</a>
<a id="L2230" class="source_line" href="#L2230">2230</a>
<a id="L2231" class="source_line" href="#L2231">2231</a>
<a id="L2232" class="source_line" href="#L2232">2232</a>
<a id="L2233" class="source_line" href="#L2233">2233</a>
<a id="L2234" class="source_line" href="#L2234">2234</a>
<a id="L2235" class="source_line" href="#L2235">2235</a>
<a id="L2236" class="source_line" href="#L2236">2236</a>
<a id="L2237" class="source_line" href="#L2237">2237</a>
<a id="L2238" class="source_line" href="#L2238">2238</a>
<a id="L2239" class="source_line" href="#L2239">2239</a>
<a id="L2240" class="source_line" href="#L2240">2240</a>
<a id="L2241" class="source_line" href="#L2241">2241</a>
<a id="L2242" class="source_line" href="#L2242">2242</a>
<a id="L2243" class="source_line" href="#L2243">2243</a>
<a id="L2244" class="source_line" href="#L2244">2244</a>
<a id="L2245" class="source_line" href="#L2245">2245</a>
<a id="L2246" class="source_line" href="#L2246">2246</a>
<a id="L2247" class="source_line" href="#L2247">2247</a>
<a id="L2248" class="source_line" href="#L2248">2248</a>
<a id="L2249" class="source_line" href="#L2249">2249</a>
<a id="L2250" class="source_line" href="#L2250">2250</a>
<a id="L2251" class="source_line" href="#L2251">2251</a>
<a id="L2252" class="source_line" href="#L2252">2252</a>
<a id="L2253" class="source_line" href="#L2253">2253</a>
<a id="L2254" class="source_line" href="#L2254">2254</a>
<a id="L2255" class="source_line" href="#L2255">2255</a>
<a id="L2256" class="source_line" href="#L2256">2256</a>
<a id="L2257" class="source_line" href="#L2257">2257</a>
<a id="L2258" class="source_line" href="#L2258">2258</a>
<a id="L2259" class="source_line" href="#L2259">2259</a>
<a id="L2260" class="source_line" href="#L2260">2260</a>
<a id="L2261" class="source_line" href="#L2261">2261</a>
<a id="L2262" class="source_line" href="#L2262">2262</a>
<a id="L2263" class="source_line" href="#L2263">2263</a>
<a id="L2264" class="source_line" href="#L2264">2264</a>
<a id="L2265" class="source_line" href="#L2265">2265</a>
<a id="L2266" class="source_line" href="#L2266">2266</a>
<a id="L2267" class="source_line" href="#L2267">2267</a>
<a id="L2268" class="source_line" href="#L2268">2268</a>
<a id="L2269" class="source_line" href="#L2269">2269</a>
<a id="L2270" class="source_line" href="#L2270">2270</a>
<a id="L2271" class="source_line" href="#L2271">2271</a>
<a id="L2272" class="source_line" href="#L2272">2272</a>
<a id="L2273" class="source_line" href="#L2273">2273</a>
<a id="L2274" class="source_line" href="#L2274">2274</a>
<a id="L2275" class="source_line" href="#L2275">2275</a>
<a id="L2276" class="source_line" href="#L2276">2276</a>
<a id="L2277" class="source_line" href="#L2277">2277</a>
<a id="L2278" class="source_line" href="#L2278">2278</a>
<a id="L2279" class="source_line" href="#L2279">2279</a>
<a id="L2280" class="source_line" href="#L2280">2280</a>
<a id="L2281" class="source_line" href="#L2281">2281</a>
<a id="L2282" class="source_line" href="#L2282">2282</a>
<a id="L2283" class="source_line" href="#L2283">2283</a>
<a id="L2284" class="source_line" href="#L2284">2284</a>
<a id="L2285" class="source_line" href="#L2285">2285</a>
<a id="L2286" class="source_line" href="#L2286">2286</a>
<a id="L2287" class="source_line" href="#L2287">2287</a>
<a id="L2288" class="source_line" href="#L2288">2288</a>
<a id="L2289" class="source_line" href="#L2289">2289</a>
<a id="L2290" class="source_line" href="#L2290">2290</a>
<a id="L2291" class="source_line" href="#L2291">2291</a>
<a id="L2292" class="source_line" href="#L2292">2292</a>
<a id="L2293" class="source_line" href="#L2293">2293</a>
<a id="L2294" class="source_line" href="#L2294">2294</a>
<a id="L2295" class="source_line" href="#L2295">2295</a>
<a id="L2296" class="source_line" href="#L2296">2296</a>
<a id="L2297" class="source_line" href="#L2297">2297</a>
<a id="L2298" class="source_line" href="#L2298">2298</a>
<a id="L2299" class="source_line" href="#L2299">2299</a>
<a id="L2300" class="source_line" href="#L2300">2300</a>
<a id="L2301" class="source_line" href="#L2301">2301</a>
<a id="L2302" class="source_line" href="#L2302">2302</a>
<a id="L2303" class="source_line" href="#L2303">2303</a>
<a id="L2304" class="source_line" href="#L2304">2304</a>
<a id="L2305" class="source_line" href="#L2305">2305</a>
<a id="L2306" class="source_line" href="#L2306">2306</a>
<a id="L2307" class="source_line" href="#L2307">2307</a>
<a id="L2308" class="source_line" href="#L2308">2308</a>
<a id="L2309" class="source_line" href="#L2309">2309</a>
<a id="L2310" class="source_line" href="#L2310">2310</a>
<a id="L2311" class="source_line" href="#L2311">2311</a>
<a id="L2312" class="source_line" href="#L2312">2312</a>
<a id="L2313" class="source_line" href="#L2313">2313</a>
<a id="L2314" class="source_line" href="#L2314">2314</a>
<a id="L2315" class="source_line" href="#L2315">2315</a>
<a id="L2316" class="source_line" href="#L2316">2316</a>
<a id="L2317" class="source_line" href="#L2317">2317</a>
<a id="L2318" class="source_line" href="#L2318">2318</a>
<a id="L2319" class="source_line" href="#L2319">2319</a>
<a id="L2320" class="source_line" href="#L2320">2320</a>
<a id="L2321" class="source_line" href="#L2321">2321</a>
<a id="L2322" class="source_line" href="#L2322">2322</a>
<a id="L2323" class="source_line" href="#L2323">2323</a>
<a id="L2324" class="source_line" href="#L2324">2324</a>
<a id="L2325" class="source_line" href="#L2325">2325</a>
<a id="L2326" class="source_line" href="#L2326">2326</a>
<a id="L2327" class="source_line" href="#L2327">2327</a>
<a id="L2328" class="source_line" href="#L2328">2328</a>
<a id="L2329" class="source_line" href="#L2329">2329</a>
<a id="L2330" class="source_line" href="#L2330">2330</a>
<a id="L2331" class="source_line" href="#L2331">2331</a>
<a id="L2332" class="source_line" href="#L2332">2332</a>
<a id="L2333" class="source_line" href="#L2333">2333</a>
<a id="L2334" class="source_line" href="#L2334">2334</a>
<a id="L2335" class="source_line" href="#L2335">2335</a>
<a id="L2336" class="source_line" href="#L2336">2336</a>
<a id="L2337" class="source_line" href="#L2337">2337</a>
<a id="L2338" class="source_line" href="#L2338">2338</a>
<a id="L2339" class="source_line" href="#L2339">2339</a>
<a id="L2340" class="source_line" href="#L2340">2340</a>
<a id="L2341" class="source_line" href="#L2341">2341</a>
<a id="L2342" class="source_line" href="#L2342">2342</a>
<a id="L2343" class="source_line" href="#L2343">2343</a>
<a id="L2344" class="source_line" href="#L2344">2344</a>
<a id="L2345" class="source_line" href="#L2345">2345</a>
<a id="L2346" class="source_line" href="#L2346">2346</a>
<a id="L2347" class="source_line" href="#L2347">2347</a>
<a id="L2348" class="source_line" href="#L2348">2348</a>
<a id="L2349" class="source_line" href="#L2349">2349</a>
<a id="L2350" class="source_line" href="#L2350">2350</a>
<a id="L2351" class="source_line" href="#L2351">2351</a>
<a id="L2352" class="source_line" href="#L2352">2352</a>
<a id="L2353" class="source_line" href="#L2353">2353</a>
<a id="L2354" class="source_line" href="#L2354">2354</a>
<a id="L2355" class="source_line" href="#L2355">2355</a>
<a id="L2356" class="source_line" href="#L2356">2356</a>
<a id="L2357" class="source_line" href="#L2357">2357</a>
<a id="L2358" class="source_line" href="#L2358">2358</a>
<a id="L2359" class="source_line" href="#L2359">2359</a>
<a id="L2360" class="source_line" href="#L2360">2360</a>
<a id="L2361" class="source_line" href="#L2361">2361</a>
<a id="L2362" class="source_line" href="#L2362">2362</a>
<a id="L2363" class="source_line" href="#L2363">2363</a>
<a id="L2364" class="source_line" href="#L2364">2364</a>
<a id="L2365" class="source_line" href="#L2365">2365</a>
<a id="L2366" class="source_line" href="#L2366">2366</a>
<a id="L2367" class="source_line" href="#L2367">2367</a>
<a id="L2368" class="source_line" href="#L2368">2368</a>
<a id="L2369" class="source_line" href="#L2369">2369</a>
<a id="L2370" class="source_line" href="#L2370">2370</a>
<a id="L2371" class="source_line" href="#L2371">2371</a>
<a id="L2372" class="source_line" href="#L2372">2372</a>
<a id="L2373" class="source_line" href="#L2373">2373</a>
<a id="L2374" class="source_line" href="#L2374">2374</a>
<a id="L2375" class="source_line" href="#L2375">2375</a>
<a id="L2376" class="source_line" href="#L2376">2376</a>
<a id="L2377" class="source_line" href="#L2377">2377</a>
<a id="L2378" class="source_line" href="#L2378">2378</a>
<a id="L2379" class="source_line" href="#L2379">2379</a>
<a id="L2380" class="source_line" href="#L2380">2380</a>
<a id="L2381" class="source_line" href="#L2381">2381</a>
<a id="L2382" class="source_line" href="#L2382">2382</a>
<a id="L2383" class="source_line" href="#L2383">2383</a>
<a id="L2384" class="source_line" href="#L2384">2384</a>
<a id="L2385" class="source_line" href="#L2385">2385</a>
<a id="L2386" class="source_line" href="#L2386">2386</a>
<a id="L2387" class="source_line" href="#L2387">2387</a>
<a id="L2388" class="source_line" href="#L2388">2388</a>
<a id="L2389" class="source_line" href="#L2389">2389</a>
<a id="L2390" class="source_line" href="#L2390">2390</a>
<a id="L2391" class="source_line" href="#L2391">2391</a>
<a id="L2392" class="source_line" href="#L2392">2392</a>
<a id="L2393" class="source_line" href="#L2393">2393</a>
<a id="L2394" class="source_line" href="#L2394">2394</a>
<a id="L2395" class="source_line" href="#L2395">2395</a>
<a id="L2396" class="source_line" href="#L2396">2396</a>
<a id="L2397" class="source_line" href="#L2397">2397</a>
<a id="L2398" class="source_line" href="#L2398">2398</a>
<a id="L2399" class="source_line" href="#L2399">2399</a>
<a id="L2400" class="source_line" href="#L2400">2400</a>
<a id="L2401" class="source_line" href="#L2401">2401</a>
<a id="L2402" class="source_line" href="#L2402">2402</a>
<a id="L2403" class="source_line" href="#L2403">2403</a>
<a id="L2404" class="source_line" href="#L2404">2404</a>
<a id="L2405" class="source_line" href="#L2405">2405</a>
<a id="L2406" class="source_line" href="#L2406">2406</a>
<a id="L2407" class="source_line" href="#L2407">2407</a>
<a id="L2408" class="source_line" href="#L2408">2408</a>
<a id="L2409" class="source_line" href="#L2409">2409</a>
<a id="L2410" class="source_line" href="#L2410">2410</a>
<a id="L2411" class="source_line" href="#L2411">2411</a>
<a id="L2412" class="source_line" href="#L2412">2412</a>
<a id="L2413" class="source_line" href="#L2413">2413</a>
<a id="L2414" class="source_line" href="#L2414">2414</a>
<a id="L2415" class="source_line" href="#L2415">2415</a>
<a id="L2416" class="source_line" href="#L2416">2416</a>
<a id="L2417" class="source_line" href="#L2417">2417</a>
<a id="L2418" class="source_line" href="#L2418">2418</a>
<a id="L2419" class="source_line" href="#L2419">2419</a>
<a id="L2420" class="source_line" href="#L2420">2420</a>
<a id="L2421" class="source_line" href="#L2421">2421</a>
<a id="L2422" class="source_line" href="#L2422">2422</a>
<a id="L2423" class="source_line" href="#L2423">2423</a>
<a id="L2424" class="source_line" href="#L2424">2424</a>
<a id="L2425" class="source_line" href="#L2425">2425</a>
<a id="L2426" class="source_line" href="#L2426">2426</a>
<a id="L2427" class="source_line" href="#L2427">2427</a>
<a id="L2428" class="source_line" href="#L2428">2428</a>
<a id="L2429" class="source_line" href="#L2429">2429</a>
<a id="L2430" class="source_line" href="#L2430">2430</a>
<a id="L2431" class="source_line" href="#L2431">2431</a>
<a id="L2432" class="source_line" href="#L2432">2432</a>
<a id="L2433" class="source_line" href="#L2433">2433</a>
<a id="L2434" class="source_line" href="#L2434">2434</a>
<a id="L2435" class="source_line" href="#L2435">2435</a>
<a id="L2436" class="source_line" href="#L2436">2436</a>
<a id="L2437" class="source_line" href="#L2437">2437</a>
<a id="L2438" class="source_line" href="#L2438">2438</a>
<a id="L2439" class="source_line" href="#L2439">2439</a>
<a id="L2440" class="source_line" href="#L2440">2440</a>
<a id="L2441" class="source_line" href="#L2441">2441</a>
<a id="L2442" class="source_line" href="#L2442">2442</a>
<a id="L2443" class="source_line" href="#L2443">2443</a>
<a id="L2444" class="source_line" href="#L2444">2444</a>
<a id="L2445" class="source_line" href="#L2445">2445</a>
<a id="L2446" class="source_line" href="#L2446">2446</a>
<a id="L2447" class="source_line" href="#L2447">2447</a>
<a id="L2448" class="source_line" href="#L2448">2448</a>
<a id="L2449" class="source_line" href="#L2449">2449</a>
<a id="L2450" class="source_line" href="#L2450">2450</a>
<a id="L2451" class="source_line" href="#L2451">2451</a>
<a id="L2452" class="source_line" href="#L2452">2452</a>
<a id="L2453" class="source_line" href="#L2453">2453</a>
<a id="L2454" class="source_line" href="#L2454">2454</a>
<a id="L2455" class="source_line" href="#L2455">2455</a>
<a id="L2456" class="source_line" href="#L2456">2456</a>
<a id="L2457" class="source_line" href="#L2457">2457</a>
<a id="L2458" class="source_line" href="#L2458">2458</a>
<a id="L2459" class="source_line" href="#L2459">2459</a>
<a id="L2460" class="source_line" href="#L2460">2460</a>
<a id="L2461" class="source_line" href="#L2461">2461</a>
<a id="L2462" class="source_line" href="#L2462">2462</a>
<a id="L2463" class="source_line" href="#L2463">2463</a>
<a id="L2464" class="source_line" href="#L2464">2464</a>
<a id="L2465" class="source_line" href="#L2465">2465</a>
<a id="L2466" class="source_line" href="#L2466">2466</a>
<a id="L2467" class="source_line" href="#L2467">2467</a>
<a id="L2468" class="source_line" href="#L2468">2468</a>
<a id="L2469" class="source_line" href="#L2469">2469</a>
<a id="L2470" class="source_line" href="#L2470">2470</a>
<a id="L2471" class="source_line" href="#L2471">2471</a>
<a id="L2472" class="source_line" href="#L2472">2472</a>
<a id="L2473" class="source_line" href="#L2473">2473</a>
<a id="L2474" class="source_line" href="#L2474">2474</a>
<a id="L2475" class="source_line" href="#L2475">2475</a>
<a id="L2476" class="source_line" href="#L2476">2476</a>
<a id="L2477" class="source_line" href="#L2477">2477</a>
<a id="L2478" class="source_line" href="#L2478">2478</a>
<a id="L2479" class="source_line" href="#L2479">2479</a>
<a id="L2480" class="source_line" href="#L2480">2480</a>
<a id="L2481" class="source_line" href="#L2481">2481</a>
<a id="L2482" class="source_line" href="#L2482">2482</a>
<a id="L2483" class="source_line" href="#L2483">2483</a>
<a id="L2484" class="source_line" href="#L2484">2484</a>
<a id="L2485" class="source_line" href="#L2485">2485</a>
<a id="L2486" class="source_line" href="#L2486">2486</a>
<a id="L2487" class="source_line" href="#L2487">2487</a>
<a id="L2488" class="source_line" href="#L2488">2488</a>
<a id="L2489" class="source_line" href="#L2489">2489</a>
<a id="L2490" class="source_line" href="#L2490">2490</a>
<a id="L2491" class="source_line" href="#L2491">2491</a>
<a id="L2492" class="source_line" href="#L2492">2492</a>
<a id="L2493" class="source_line" href="#L2493">2493</a>
<a id="L2494" class="source_line" href="#L2494">2494</a>
<a id="L2495" class="source_line" href="#L2495">2495</a>
<a id="L2496" class="source_line" href="#L2496">2496</a>
<a id="L2497" class="source_line" href="#L2497">2497</a>
<a id="L2498" class="source_line" href="#L2498">2498</a>
<a id="L2499" class="source_line" href="#L2499">2499</a>
<a id="L2500" class="source_line" href="#L2500">2500</a>
<a id="L2501" class="source_line" href="#L2501">2501</a>
<a id="L2502" class="source_line" href="#L2502">2502</a>
<a id="L2503" class="source_line" href="#L2503">2503</a>
<a id="L2504" class="source_line" href="#L2504">2504</a>
<a id="L2505" class="source_line" href="#L2505">2505</a>
<a id="L2506" class="source_line" href="#L2506">2506</a>
<a id="L2507" class="source_line" href="#L2507">2507</a>
<a id="L2508" class="source_line" href="#L2508">2508</a>
<a id="L2509" class="source_line" href="#L2509">2509</a>
<a id="L2510" class="source_line" href="#L2510">2510</a>
<a id="L2511" class="source_line" href="#L2511">2511</a>
<a id="L2512" class="source_line" href="#L2512">2512</a>
<a id="L2513" class="source_line" href="#L2513">2513</a>
<a id="L2514" class="source_line" href="#L2514">2514</a>
<a id="L2515" class="source_line" href="#L2515">2515</a>
<a id="L2516" class="source_line" href="#L2516">2516</a>
<a id="L2517" class="source_line" href="#L2517">2517</a>
<a id="L2518" class="source_line" href="#L2518">2518</a>
<a id="L2519" class="source_line" href="#L2519">2519</a>
<a id="L2520" class="source_line" href="#L2520">2520</a>
<a id="L2521" class="source_line" href="#L2521">2521</a>
<a id="L2522" class="source_line" href="#L2522">2522</a>
<a id="L2523" class="source_line" href="#L2523">2523</a>
<a id="L2524" class="source_line" href="#L2524">2524</a>
<a id="L2525" class="source_line" href="#L2525">2525</a>
<a id="L2526" class="source_line" href="#L2526">2526</a>
<a id="L2527" class="source_line" href="#L2527">2527</a>
<a id="L2528" class="source_line" href="#L2528">2528</a>
<a id="L2529" class="source_line" href="#L2529">2529</a>
<a id="L2530" class="source_line" href="#L2530">2530</a>
<a id="L2531" class="source_line" href="#L2531">2531</a>
<a id="L2532" class="source_line" href="#L2532">2532</a>
<a id="L2533" class="source_line" href="#L2533">2533</a>
<a id="L2534" class="source_line" href="#L2534">2534</a>
<a id="L2535" class="source_line" href="#L2535">2535</a>
<a id="L2536" class="source_line" href="#L2536">2536</a>
<a id="L2537" class="source_line" href="#L2537">2537</a>
<a id="L2538" class="source_line" href="#L2538">2538</a>
<a id="L2539" class="source_line" href="#L2539">2539</a>
<a id="L2540" class="source_line" href="#L2540">2540</a>
<a id="L2541" class="source_line" href="#L2541">2541</a>
<a id="L2542" class="source_line" href="#L2542">2542</a>
<a id="L2543" class="source_line" href="#L2543">2543</a>
<a id="L2544" class="source_line" href="#L2544">2544</a>
<a id="L2545" class="source_line" href="#L2545">2545</a>
<a id="L2546" class="source_line" href="#L2546">2546</a>
<a id="L2547" class="source_line" href="#L2547">2547</a>
<a id="L2548" class="source_line" href="#L2548">2548</a>
<a id="L2549" class="source_line" href="#L2549">2549</a>
<a id="L2550" class="source_line" href="#L2550">2550</a>
<a id="L2551" class="source_line" href="#L2551">2551</a>
<a id="L2552" class="source_line" href="#L2552">2552</a>
<a id="L2553" class="source_line" href="#L2553">2553</a>
<a id="L2554" class="source_line" href="#L2554">2554</a>
<a id="L2555" class="source_line" href="#L2555">2555</a>
<a id="L2556" class="source_line" href="#L2556">2556</a>
<a id="L2557" class="source_line" href="#L2557">2557</a>
<a id="L2558" class="source_line" href="#L2558">2558</a>
<a id="L2559" class="source_line" href="#L2559">2559</a>
<a id="L2560" class="source_line" href="#L2560">2560</a>
<a id="L2561" class="source_line" href="#L2561">2561</a>
<a id="L2562" class="source_line" href="#L2562">2562</a>
<a id="L2563" class="source_line" href="#L2563">2563</a>
<a id="L2564" class="source_line" href="#L2564">2564</a>
<a id="L2565" class="source_line" href="#L2565">2565</a>
<a id="L2566" class="source_line" href="#L2566">2566</a>
<a id="L2567" class="source_line" href="#L2567">2567</a>
<a id="L2568" class="source_line" href="#L2568">2568</a>
<a id="L2569" class="source_line" href="#L2569">2569</a>
<a id="L2570" class="source_line" href="#L2570">2570</a>
<a id="L2571" class="source_line" href="#L2571">2571</a>
<a id="L2572" class="source_line" href="#L2572">2572</a>
<a id="L2573" class="source_line" href="#L2573">2573</a>
<a id="L2574" class="source_line" href="#L2574">2574</a>
<a id="L2575" class="source_line" href="#L2575">2575</a>
<a id="L2576" class="source_line" href="#L2576">2576</a>
<a id="L2577" class="source_line" href="#L2577">2577</a>
<a id="L2578" class="source_line" href="#L2578">2578</a>
<a id="L2579" class="source_line" href="#L2579">2579</a>
<a id="L2580" class="source_line" href="#L2580">2580</a>
<a id="L2581" class="source_line" href="#L2581">2581</a>
<a id="L2582" class="source_line" href="#L2582">2582</a>
<a id="L2583" class="source_line" href="#L2583">2583</a>
<a id="L2584" class="source_line" href="#L2584">2584</a>
<a id="L2585" class="source_line" href="#L2585">2585</a>
<a id="L2586" class="source_line" href="#L2586">2586</a>
<a id="L2587" class="source_line" href="#L2587">2587</a>
<a id="L2588" class="source_line" href="#L2588">2588</a>
<a id="L2589" class="source_line" href="#L2589">2589</a>
<a id="L2590" class="source_line" href="#L2590">2590</a>
<a id="L2591" class="source_line" href="#L2591">2591</a>
<a id="L2592" class="source_line" href="#L2592">2592</a>
<a id="L2593" class="source_line" href="#L2593">2593</a>
<a id="L2594" class="source_line" href="#L2594">2594</a>
<a id="L2595" class="source_line" href="#L2595">2595</a>
<a id="L2596" class="source_line" href="#L2596">2596</a>
<a id="L2597" class="source_line" href="#L2597">2597</a>
<a id="L2598" class="source_line" href="#L2598">2598</a>
<a id="L2599" class="source_line" href="#L2599">2599</a>
<a id="L2600" class="source_line" href="#L2600">2600</a>
<a id="L2601" class="source_line" href="#L2601">2601</a>
<a id="L2602" class="source_line" href="#L2602">2602</a>
<a id="L2603" class="source_line" href="#L2603">2603</a>
<a id="L2604" class="source_line" href="#L2604">2604</a>
<a id="L2605" class="source_line" href="#L2605">2605</a>
<a id="L2606" class="source_line" href="#L2606">2606</a>
<a id="L2607" class="source_line" href="#L2607">2607</a>
<a id="L2608" class="source_line" href="#L2608">2608</a>
<a id="L2609" class="source_line" href="#L2609">2609</a>
<a id="L2610" class="source_line" href="#L2610">2610</a>
<a id="L2611" class="source_line" href="#L2611">2611</a>
<a id="L2612" class="source_line" href="#L2612">2612</a>
<a id="L2613" class="source_line" href="#L2613">2613</a>
<a id="L2614" class="source_line" href="#L2614">2614</a>
<a id="L2615" class="source_line" href="#L2615">2615</a>
<a id="L2616" class="source_line" href="#L2616">2616</a>
<a id="L2617" class="source_line" href="#L2617">2617</a>
<a id="L2618" class="source_line" href="#L2618">2618</a>
<a id="L2619" class="source_line" href="#L2619">2619</a>
<a id="L2620" class="source_line" href="#L2620">2620</a>
<a id="L2621" class="source_line" href="#L2621">2621</a>
<a id="L2622" class="source_line" href="#L2622">2622</a>
<a id="L2623" class="source_line" href="#L2623">2623</a>
<a id="L2624" class="source_line" href="#L2624">2624</a>
<a id="L2625" class="source_line" href="#L2625">2625</a>
<a id="L2626" class="source_line" href="#L2626">2626</a>
<a id="L2627" class="source_line" href="#L2627">2627</a>
<a id="L2628" class="source_line" href="#L2628">2628</a>
<a id="L2629" class="source_line" href="#L2629">2629</a>
<a id="L2630" class="source_line" href="#L2630">2630</a>
<a id="L2631" class="source_line" href="#L2631">2631</a>
<a id="L2632" class="source_line" href="#L2632">2632</a>
<a id="L2633" class="source_line" href="#L2633">2633</a>
<a id="L2634" class="source_line" href="#L2634">2634</a>
<a id="L2635" class="source_line" href="#L2635">2635</a>
<a id="L2636" class="source_line" href="#L2636">2636</a>
<a id="L2637" class="source_line" href="#L2637">2637</a>
<a id="L2638" class="source_line" href="#L2638">2638</a>
<a id="L2639" class="source_line" href="#L2639">2639</a>
<a id="L2640" class="source_line" href="#L2640">2640</a>
<a id="L2641" class="source_line" href="#L2641">2641</a>
<a id="L2642" class="source_line" href="#L2642">2642</a>
<a id="L2643" class="source_line" href="#L2643">2643</a>
<a id="L2644" class="source_line" href="#L2644">2644</a>
<a id="L2645" class="source_line" href="#L2645">2645</a>
<a id="L2646" class="source_line" href="#L2646">2646</a>
<a id="L2647" class="source_line" href="#L2647">2647</a>
<a id="L2648" class="source_line" href="#L2648">2648</a>
<a id="L2649" class="source_line" href="#L2649">2649</a>
<a id="L2650" class="source_line" href="#L2650">2650</a>
<a id="L2651" class="source_line" href="#L2651">2651</a>
<a id="L2652" class="source_line" href="#L2652">2652</a>
<a id="L2653" class="source_line" href="#L2653">2653</a>
<a id="L2654" class="source_line" href="#L2654">2654</a>
<a id="L2655" class="source_line" href="#L2655">2655</a>
<a id="L2656" class="source_line" href="#L2656">2656</a>
<a id="L2657" class="source_line" href="#L2657">2657</a>
<a id="L2658" class="source_line" href="#L2658">2658</a>
<a id="L2659" class="source_line" href="#L2659">2659</a>
<a id="L2660" class="source_line" href="#L2660">2660</a>
<a id="L2661" class="source_line" href="#L2661">2661</a>
<a id="L2662" class="source_line" href="#L2662">2662</a>
<a id="L2663" class="source_line" href="#L2663">2663</a>
<a id="L2664" class="source_line" href="#L2664">2664</a>
<a id="L2665" class="source_line" href="#L2665">2665</a>
<a id="L2666" class="source_line" href="#L2666">2666</a>
<a id="L2667" class="source_line" href="#L2667">2667</a>
<a id="L2668" class="source_line" href="#L2668">2668</a>
<a id="L2669" class="source_line" href="#L2669">2669</a>
<a id="L2670" class="source_line" href="#L2670">2670</a>
<a id="L2671" class="source_line" href="#L2671">2671</a>
<a id="L2672" class="source_line" href="#L2672">2672</a>
<a id="L2673" class="source_line" href="#L2673">2673</a>
<a id="L2674" class="source_line" href="#L2674">2674</a>
<a id="L2675" class="source_line" href="#L2675">2675</a>
<a id="L2676" class="source_line" href="#L2676">2676</a>
<a id="L2677" class="source_line" href="#L2677">2677</a>
<a id="L2678" class="source_line" href="#L2678">2678</a>
<a id="L2679" class="source_line" href="#L2679">2679</a>
<a id="L2680" class="source_line" href="#L2680">2680</a>
<a id="L2681" class="source_line" href="#L2681">2681</a>
<a id="L2682" class="source_line" href="#L2682">2682</a>
<a id="L2683" class="source_line" href="#L2683">2683</a>
<a id="L2684" class="source_line" href="#L2684">2684</a>
<a id="L2685" class="source_line" href="#L2685">2685</a>
<a id="L2686" class="source_line" href="#L2686">2686</a>
<a id="L2687" class="source_line" href="#L2687">2687</a>
<a id="L2688" class="source_line" href="#L2688">2688</a>
<a id="L2689" class="source_line" href="#L2689">2689</a>
<a id="L2690" class="source_line" href="#L2690">2690</a>
<a id="L2691" class="source_line" href="#L2691">2691</a>
<a id="L2692" class="source_line" href="#L2692">2692</a>
<a id="L2693" class="source_line" href="#L2693">2693</a>
<a id="L2694" class="source_line" href="#L2694">2694</a>
<a id="L2695" class="source_line" href="#L2695">2695</a>
<a id="L2696" class="source_line" href="#L2696">2696</a>
<a id="L2697" class="source_line" href="#L2697">2697</a>
<a id="L2698" class="source_line" href="#L2698">2698</a>
<a id="L2699" class="source_line" href="#L2699">2699</a>
<a id="L2700" class="source_line" href="#L2700">2700</a>
<a id="L2701" class="source_line" href="#L2701">2701</a>
<a id="L2702" class="source_line" href="#L2702">2702</a>
<a id="L2703" class="source_line" href="#L2703">2703</a>
<a id="L2704" class="source_line" href="#L2704">2704</a>
<a id="L2705" class="source_line" href="#L2705">2705</a>
<a id="L2706" class="source_line" href="#L2706">2706</a>
<a id="L2707" class="source_line" href="#L2707">2707</a>
<a id="L2708" class="source_line" href="#L2708">2708</a>
<a id="L2709" class="source_line" href="#L2709">2709</a>
<a id="L2710" class="source_line" href="#L2710">2710</a>
<a id="L2711" class="source_line" href="#L2711">2711</a>
<a id="L2712" class="source_line" href="#L2712">2712</a>
<a id="L2713" class="source_line" href="#L2713">2713</a>
<a id="L2714" class="source_line" href="#L2714">2714</a>
<a id="L2715" class="source_line" href="#L2715">2715</a>
<a id="L2716" class="source_line" href="#L2716">2716</a>
<a id="L2717" class="source_line" href="#L2717">2717</a>
<a id="L2718" class="source_line" href="#L2718">2718</a>
<a id="L2719" class="source_line" href="#L2719">2719</a>
<a id="L2720" class="source_line" href="#L2720">2720</a>
<a id="L2721" class="source_line" href="#L2721">2721</a>
<a id="L2722" class="source_line" href="#L2722">2722</a>
<a id="L2723" class="source_line" href="#L2723">2723</a>
<a id="L2724" class="source_line" href="#L2724">2724</a>
<a id="L2725" class="source_line" href="#L2725">2725</a>
<a id="L2726" class="source_line" href="#L2726">2726</a>
<a id="L2727" class="source_line" href="#L2727">2727</a>
<a id="L2728" class="source_line" href="#L2728">2728</a>
<a id="L2729" class="source_line" href="#L2729">2729</a>
<a id="L2730" class="source_line" href="#L2730">2730</a>
<a id="L2731" class="source_line" href="#L2731">2731</a>
<a id="L2732" class="source_line" href="#L2732">2732</a>
<a id="L2733" class="source_line" href="#L2733">2733</a>
<a id="L2734" class="source_line" href="#L2734">2734</a>
<a id="L2735" class="source_line" href="#L2735">2735</a>
<a id="L2736" class="source_line" href="#L2736">2736</a>
<a id="L2737" class="source_line" href="#L2737">2737</a>
<a id="L2738" class="source_line" href="#L2738">2738</a>
<a id="L2739" class="source_line" href="#L2739">2739</a>
<a id="L2740" class="source_line" href="#L2740">2740</a>
<a id="L2741" class="source_line" href="#L2741">2741</a>
<a id="L2742" class="source_line" href="#L2742">2742</a>
<a id="L2743" class="source_line" href="#L2743">2743</a>
<a id="L2744" class="source_line" href="#L2744">2744</a>
<a id="L2745" class="source_line" href="#L2745">2745</a>
<a id="L2746" class="source_line" href="#L2746">2746</a>
<a id="L2747" class="source_line" href="#L2747">2747</a>
<a id="L2748" class="source_line" href="#L2748">2748</a>
<a id="L2749" class="source_line" href="#L2749">2749</a>
<a id="L2750" class="source_line" href="#L2750">2750</a>
<a id="L2751" class="source_line" href="#L2751">2751</a>
<a id="L2752" class="source_line" href="#L2752">2752</a>
<a id="L2753" class="source_line" href="#L2753">2753</a>
<a id="L2754" class="source_line" href="#L2754">2754</a>
<a id="L2755" class="source_line" href="#L2755">2755</a>
<a id="L2756" class="source_line" href="#L2756">2756</a>
<a id="L2757" class="source_line" href="#L2757">2757</a>
<a id="L2758" class="source_line" href="#L2758">2758</a>
<a id="L2759" class="source_line" href="#L2759">2759</a>
<a id="L2760" class="source_line" href="#L2760">2760</a>
<a id="L2761" class="source_line" href="#L2761">2761</a>
<a id="L2762" class="source_line" href="#L2762">2762</a>
<a id="L2763" class="source_line" href="#L2763">2763</a>
<a id="L2764" class="source_line" href="#L2764">2764</a>
<a id="L2765" class="source_line" href="#L2765">2765</a>
<a id="L2766" class="source_line" href="#L2766">2766</a>
<a id="L2767" class="source_line" href="#L2767">2767</a>
<a id="L2768" class="source_line" href="#L2768">2768</a>
<a id="L2769" class="source_line" href="#L2769">2769</a>
<a id="L2770" class="source_line" href="#L2770">2770</a>
<a id="L2771" class="source_line" href="#L2771">2771</a>
<a id="L2772" class="source_line" href="#L2772">2772</a>
<a id="L2773" class="source_line" href="#L2773">2773</a>
<a id="L2774" class="source_line" href="#L2774">2774</a>
<a id="L2775" class="source_line" href="#L2775">2775</a>
<a id="L2776" class="source_line" href="#L2776">2776</a>
<a id="L2777" class="source_line" href="#L2777">2777</a>
<a id="L2778" class="source_line" href="#L2778">2778</a>
<a id="L2779" class="source_line" href="#L2779">2779</a>
<a id="L2780" class="source_line" href="#L2780">2780</a>
<a id="L2781" class="source_line" href="#L2781">2781</a>
<a id="L2782" class="source_line" href="#L2782">2782</a>
<a id="L2783" class="source_line" href="#L2783">2783</a>
<a id="L2784" class="source_line" href="#L2784">2784</a>
<a id="L2785" class="source_line" href="#L2785">2785</a>
<a id="L2786" class="source_line" href="#L2786">2786</a>
<a id="L2787" class="source_line" href="#L2787">2787</a>
<a id="L2788" class="source_line" href="#L2788">2788</a>
<a id="L2789" class="source_line" href="#L2789">2789</a>
<a id="L2790" class="source_line" href="#L2790">2790</a>
<a id="L2791" class="source_line" href="#L2791">2791</a>
<a id="L2792" class="source_line" href="#L2792">2792</a>
<a id="L2793" class="source_line" href="#L2793">2793</a>
<a id="L2794" class="source_line" href="#L2794">2794</a>
<a id="L2795" class="source_line" href="#L2795">2795</a>
<a id="L2796" class="source_line" href="#L2796">2796</a>
<a id="L2797" class="source_line" href="#L2797">2797</a>
<a id="L2798" class="source_line" href="#L2798">2798</a>
<a id="L2799" class="source_line" href="#L2799">2799</a>
<a id="L2800" class="source_line" href="#L2800">2800</a>
<a id="L2801" class="source_line" href="#L2801">2801</a>
<a id="L2802" class="source_line" href="#L2802">2802</a>
<a id="L2803" class="source_line" href="#L2803">2803</a>
<a id="L2804" class="source_line" href="#L2804">2804</a>
<a id="L2805" class="source_line" href="#L2805">2805</a>
<a id="L2806" class="source_line" href="#L2806">2806</a>
<a id="L2807" class="source_line" href="#L2807">2807</a>
<a id="L2808" class="source_line" href="#L2808">2808</a>
<a id="L2809" class="source_line" href="#L2809">2809</a>
<a id="L2810" class="source_line" href="#L2810">2810</a>
<a id="L2811" class="source_line" href="#L2811">2811</a>
<a id="L2812" class="source_line" href="#L2812">2812</a>
<a id="L2813" class="source_line" href="#L2813">2813</a>
<a id="L2814" class="source_line" href="#L2814">2814</a>
<a id="L2815" class="source_line" href="#L2815">2815</a>
<a id="L2816" class="source_line" href="#L2816">2816</a>
<a id="L2817" class="source_line" href="#L2817">2817</a>
<a id="L2818" class="source_line" href="#L2818">2818</a>
<a id="L2819" class="source_line" href="#L2819">2819</a>
<a id="L2820" class="source_line" href="#L2820">2820</a>
<a id="L2821" class="source_line" href="#L2821">2821</a>
<a id="L2822" class="source_line" href="#L2822">2822</a>
<a id="L2823" class="source_line" href="#L2823">2823</a>
<a id="L2824" class="source_line" href="#L2824">2824</a>
<a id="L2825" class="source_line" href="#L2825">2825</a>
<a id="L2826" class="source_line" href="#L2826">2826</a>
<a id="L2827" class="source_line" href="#L2827">2827</a>
<a id="L2828" class="source_line" href="#L2828">2828</a>
<a id="L2829" class="source_line" href="#L2829">2829</a>
<a id="L2830" class="source_line" href="#L2830">2830</a>
<a id="L2831" class="source_line" href="#L2831">2831</a>
<a id="L2832" class="source_line" href="#L2832">2832</a>
<a id="L2833" class="source_line" href="#L2833">2833</a>
<a id="L2834" class="source_line" href="#L2834">2834</a>
<a id="L2835" class="source_line" href="#L2835">2835</a>
<a id="L2836" class="source_line" href="#L2836">2836</a>
<a id="L2837" class="source_line" href="#L2837">2837</a>
<a id="L2838" class="source_line" href="#L2838">2838</a>
<a id="L2839" class="source_line" href="#L2839">2839</a>
<a id="L2840" class="source_line" href="#L2840">2840</a>
<a id="L2841" class="source_line" href="#L2841">2841</a>
<a id="L2842" class="source_line" href="#L2842">2842</a>
<a id="L2843" class="source_line" href="#L2843">2843</a>
<a id="L2844" class="source_line" href="#L2844">2844</a>
<a id="L2845" class="source_line" href="#L2845">2845</a>
<a id="L2846" class="source_line" href="#L2846">2846</a>
<a id="L2847" class="source_line" href="#L2847">2847</a>
<a id="L2848" class="source_line" href="#L2848">2848</a>
<a id="L2849" class="source_line" href="#L2849">2849</a>
<a id="L2850" class="source_line" href="#L2850">2850</a>
<a id="L2851" class="source_line" href="#L2851">2851</a>
<a id="L2852" class="source_line" href="#L2852">2852</a>
<a id="L2853" class="source_line" href="#L2853">2853</a>
<a id="L2854" class="source_line" href="#L2854">2854</a>
<a id="L2855" class="source_line" href="#L2855">2855</a>
<a id="L2856" class="source_line" href="#L2856">2856</a>
<a id="L2857" class="source_line" href="#L2857">2857</a>
<a id="L2858" class="source_line" href="#L2858">2858</a>
<a id="L2859" class="source_line" href="#L2859">2859</a>
<a id="L2860" class="source_line" href="#L2860">2860</a>
<a id="L2861" class="source_line" href="#L2861">2861</a>
<a id="L2862" class="source_line" href="#L2862">2862</a>
<a id="L2863" class="source_line" href="#L2863">2863</a>
<a id="L2864" class="source_line" href="#L2864">2864</a>
<a id="L2865" class="source_line" href="#L2865">2865</a>
<a id="L2866" class="source_line" href="#L2866">2866</a>
<a id="L2867" class="source_line" href="#L2867">2867</a>
<a id="L2868" class="source_line" href="#L2868">2868</a>
<a id="L2869" class="source_line" href="#L2869">2869</a>
<a id="L2870" class="source_line" href="#L2870">2870</a>
<a id="L2871" class="source_line" href="#L2871">2871</a>
<a id="L2872" class="source_line" href="#L2872">2872</a>
<a id="L2873" class="source_line" href="#L2873">2873</a>
<a id="L2874" class="source_line" href="#L2874">2874</a>
<a id="L2875" class="source_line" href="#L2875">2875</a>
<a id="L2876" class="source_line" href="#L2876">2876</a>
<a id="L2877" class="source_line" href="#L2877">2877</a>
<a id="L2878" class="source_line" href="#L2878">2878</a>
<a id="L2879" class="source_line" href="#L2879">2879</a>
<a id="L2880" class="source_line" href="#L2880">2880</a>
<a id="L2881" class="source_line" href="#L2881">2881</a>
<a id="L2882" class="source_line" href="#L2882">2882</a>
<a id="L2883" class="source_line" href="#L2883">2883</a>
<a id="L2884" class="source_line" href="#L2884">2884</a>
<a id="L2885" class="source_line" href="#L2885">2885</a>
<a id="L2886" class="source_line" href="#L2886">2886</a>
<a id="L2887" class="source_line" href="#L2887">2887</a>
<a id="L2888" class="source_line" href="#L2888">2888</a>
<a id="L2889" class="source_line" href="#L2889">2889</a>
<a id="L2890" class="source_line" href="#L2890">2890</a>
<a id="L2891" class="source_line" href="#L2891">2891</a>
<a id="L2892" class="source_line" href="#L2892">2892</a>
<a id="L2893" class="source_line" href="#L2893">2893</a>
<a id="L2894" class="source_line" href="#L2894">2894</a>
<a id="L2895" class="source_line" href="#L2895">2895</a>
<a id="L2896" class="source_line" href="#L2896">2896</a>
<a id="L2897" class="source_line" href="#L2897">2897</a>
<a id="L2898" class="source_line" href="#L2898">2898</a>
<a id="L2899" class="source_line" href="#L2899">2899</a>
<a id="L2900" class="source_line" href="#L2900">2900</a>
<a id="L2901" class="source_line" href="#L2901">2901</a>
<a id="L2902" class="source_line" href="#L2902">2902</a>
<a id="L2903" class="source_line" href="#L2903">2903</a>
<a id="L2904" class="source_line" href="#L2904">2904</a>
<a id="L2905" class="source_line" href="#L2905">2905</a>
<a id="L2906" class="source_line" href="#L2906">2906</a>
<a id="L2907" class="source_line" href="#L2907">2907</a>
<a id="L2908" class="source_line" href="#L2908">2908</a>
<a id="L2909" class="source_line" href="#L2909">2909</a>
<a id="L2910" class="source_line" href="#L2910">2910</a>
<a id="L2911" class="source_line" href="#L2911">2911</a>
<a id="L2912" class="source_line" href="#L2912">2912</a>
<a id="L2913" class="source_line" href="#L2913">2913</a>
<a id="L2914" class="source_line" href="#L2914">2914</a>
<a id="L2915" class="source_line" href="#L2915">2915</a>
<a id="L2916" class="source_line" href="#L2916">2916</a>
<a id="L2917" class="source_line" href="#L2917">2917</a>
<a id="L2918" class="source_line" href="#L2918">2918</a>
<a id="L2919" class="source_line" href="#L2919">2919</a>
<a id="L2920" class="source_line" href="#L2920">2920</a>
<a id="L2921" class="source_line" href="#L2921">2921</a>
<a id="L2922" class="source_line" href="#L2922">2922</a>
<a id="L2923" class="source_line" href="#L2923">2923</a>
<a id="L2924" class="source_line" href="#L2924">2924</a>
<a id="L2925" class="source_line" href="#L2925">2925</a>
<a id="L2926" class="source_line" href="#L2926">2926</a>
<a id="L2927" class="source_line" href="#L2927">2927</a>
<a id="L2928" class="source_line" href="#L2928">2928</a>
<a id="L2929" class="source_line" href="#L2929">2929</a>
<a id="L2930" class="source_line" href="#L2930">2930</a>
<a id="L2931" class="source_line" href="#L2931">2931</a>
<a id="L2932" class="source_line" href="#L2932">2932</a>
<a id="L2933" class="source_line" href="#L2933">2933</a>
<a id="L2934" class="source_line" href="#L2934">2934</a>
<a id="L2935" class="source_line" href="#L2935">2935</a>
<a id="L2936" class="source_line" href="#L2936">2936</a>
<a id="L2937" class="source_line" href="#L2937">2937</a>
<a id="L2938" class="source_line" href="#L2938">2938</a>
<a id="L2939" class="source_line" href="#L2939">2939</a>
<a id="L2940" class="source_line" href="#L2940">2940</a>
<a id="L2941" class="source_line" href="#L2941">2941</a>
<a id="L2942" class="source_line" href="#L2942">2942</a>
<a id="L2943" class="source_line" href="#L2943">2943</a>
<a id="L2944" class="source_line" href="#L2944">2944</a>
<a id="L2945" class="source_line" href="#L2945">2945</a>
<a id="L2946" class="source_line" href="#L2946">2946</a>
<a id="L2947" class="source_line" href="#L2947">2947</a>
<a id="L2948" class="source_line" href="#L2948">2948</a>
<a id="L2949" class="source_line" href="#L2949">2949</a>
<a id="L2950" class="source_line" href="#L2950">2950</a>
<a id="L2951" class="source_line" href="#L2951">2951</a>
<a id="L2952" class="source_line" href="#L2952">2952</a>
<a id="L2953" class="source_line" href="#L2953">2953</a>
<a id="L2954" class="source_line" href="#L2954">2954</a>
<a id="L2955" class="source_line" href="#L2955">2955</a>
<a id="L2956" class="source_line" href="#L2956">2956</a>
<a id="L2957" class="source_line" href="#L2957">2957</a>
<a id="L2958" class="source_line" href="#L2958">2958</a>
<a id="L2959" class="source_line" href="#L2959">2959</a>
<a id="L2960" class="source_line" href="#L2960">2960</a>
<a id="L2961" class="source_line" href="#L2961">2961</a>
<a id="L2962" class="source_line" href="#L2962">2962</a>
<a id="L2963" class="source_line" href="#L2963">2963</a>
<a id="L2964" class="source_line" href="#L2964">2964</a>
<a id="L2965" class="source_line" href="#L2965">2965</a>
<a id="L2966" class="source_line" href="#L2966">2966</a>
<a id="L2967" class="source_line" href="#L2967">2967</a>
<a id="L2968" class="source_line" href="#L2968">2968</a>
<a id="L2969" class="source_line" href="#L2969">2969</a>
<a id="L2970" class="source_line" href="#L2970">2970</a>
<a id="L2971" class="source_line" href="#L2971">2971</a>
<a id="L2972" class="source_line" href="#L2972">2972</a>
<a id="L2973" class="source_line" href="#L2973">2973</a>
<a id="L2974" class="source_line" href="#L2974">2974</a>
<a id="L2975" class="source_line" href="#L2975">2975</a>
<a id="L2976" class="source_line" href="#L2976">2976</a>
<a id="L2977" class="source_line" href="#L2977">2977</a>
<a id="L2978" class="source_line" href="#L2978">2978</a>
<a id="L2979" class="source_line" href="#L2979">2979</a>
<a id="L2980" class="source_line" href="#L2980">2980</a>
<a id="L2981" class="source_line" href="#L2981">2981</a>
<a id="L2982" class="source_line" href="#L2982">2982</a>
<a id="L2983" class="source_line" href="#L2983">2983</a>
<a id="L2984" class="source_line" href="#L2984">2984</a>
<a id="L2985" class="source_line" href="#L2985">2985</a>
<a id="L2986" class="source_line" href="#L2986">2986</a>
<a id="L2987" class="source_line" href="#L2987">2987</a>
<a id="L2988" class="source_line" href="#L2988">2988</a>
<a id="L2989" class="source_line" href="#L2989">2989</a>
<a id="L2990" class="source_line" href="#L2990">2990</a>
<a id="L2991" class="source_line" href="#L2991">2991</a>
<a id="L2992" class="source_line" href="#L2992">2992</a>
<a id="L2993" class="source_line" href="#L2993">2993</a>
<a id="L2994" class="source_line" href="#L2994">2994</a>
<a id="L2995" class="source_line" href="#L2995">2995</a>
<a id="L2996" class="source_line" href="#L2996">2996</a>
<a id="L2997" class="source_line" href="#L2997">2997</a>
<a id="L2998" class="source_line" href="#L2998">2998</a>
<a id="L2999" class="source_line" href="#L2999">2999</a>
<a id="L3000" class="source_line" href="#L3000">3000</a>
<a id="L3001" class="source_line" href="#L3001">3001</a>
<a id="L3002" class="source_line" href="#L3002">3002</a>
<a id="L3003" class="source_line" href="#L3003">3003</a>
<a id="L3004" class="source_line" href="#L3004">3004</a>
<a id="L3005" class="source_line" href="#L3005">3005</a>
<a id="L3006" class="source_line" href="#L3006">3006</a>
<a id="L3007" class="source_line" href="#L3007">3007</a>
<a id="L3008" class="source_line" href="#L3008">3008</a>
<a id="L3009" class="source_line" href="#L3009">3009</a>
<a id="L3010" class="source_line" href="#L3010">3010</a>
<a id="L3011" class="source_line" href="#L3011">3011</a>
<a id="L3012" class="source_line" href="#L3012">3012</a>
<a id="L3013" class="source_line" href="#L3013">3013</a>
<a id="L3014" class="source_line" href="#L3014">3014</a>
<a id="L3015" class="source_line" href="#L3015">3015</a>
<a id="L3016" class="source_line" href="#L3016">3016</a>
<a id="L3017" class="source_line" href="#L3017">3017</a>
<a id="L3018" class="source_line" href="#L3018">3018</a>
<a id="L3019" class="source_line" href="#L3019">3019</a>
<a id="L3020" class="source_line" href="#L3020">3020</a>
<a id="L3021" class="source_line" href="#L3021">3021</a>
<a id="L3022" class="source_line" href="#L3022">3022</a>
<a id="L3023" class="source_line" href="#L3023">3023</a>
<a id="L3024" class="source_line" href="#L3024">3024</a>
<a id="L3025" class="source_line" href="#L3025">3025</a>
<a id="L3026" class="source_line" href="#L3026">3026</a>
<a id="L3027" class="source_line" href="#L3027">3027</a>
<a id="L3028" class="source_line" href="#L3028">3028</a>
<a id="L3029" class="source_line" href="#L3029">3029</a>
<a id="L3030" class="source_line" href="#L3030">3030</a>
<a id="L3031" class="source_line" href="#L3031">3031</a>
<a id="L3032" class="source_line" href="#L3032">3032</a>
<a id="L3033" class="source_line" href="#L3033">3033</a>
<a id="L3034" class="source_line" href="#L3034">3034</a>
<a id="L3035" class="source_line" href="#L3035">3035</a>
<a id="L3036" class="source_line" href="#L3036">3036</a>
<a id="L3037" class="source_line" href="#L3037">3037</a>
<a id="L3038" class="source_line" href="#L3038">3038</a>
<a id="L3039" class="source_line" href="#L3039">3039</a>
<a id="L3040" class="source_line" href="#L3040">3040</a>
<a id="L3041" class="source_line" href="#L3041">3041</a>
<a id="L3042" class="source_line" href="#L3042">3042</a>
<a id="L3043" class="source_line" href="#L3043">3043</a>
<a id="L3044" class="source_line" href="#L3044">3044</a>
<a id="L3045" class="source_line" href="#L3045">3045</a>
<a id="L3046" class="source_line" href="#L3046">3046</a>
<a id="L3047" class="source_line" href="#L3047">3047</a>
<a id="L3048" class="source_line" href="#L3048">3048</a>
<a id="L3049" class="source_line" href="#L3049">3049</a>
<a id="L3050" class="source_line" href="#L3050">3050</a>
<a id="L3051" class="source_line" href="#L3051">3051</a>
<a id="L3052" class="source_line" href="#L3052">3052</a>
<a id="L3053" class="source_line" href="#L3053">3053</a>
<a id="L3054" class="source_line" href="#L3054">3054</a>
<a id="L3055" class="source_line" href="#L3055">3055</a>
<a id="L3056" class="source_line" href="#L3056">3056</a>
<a id="L3057" class="source_line" href="#L3057">3057</a>
<a id="L3058" class="source_line" href="#L3058">3058</a>
<a id="L3059" class="source_line" href="#L3059">3059</a>
<a id="L3060" class="source_line" href="#L3060">3060</a>
<a id="L3061" class="source_line" href="#L3061">3061</a>
<a id="L3062" class="source_line" href="#L3062">3062</a>
<a id="L3063" class="source_line" href="#L3063">3063</a>
<a id="L3064" class="source_line" href="#L3064">3064</a>
<a id="L3065" class="source_line" href="#L3065">3065</a>
<a id="L3066" class="source_line" href="#L3066">3066</a>
<a id="L3067" class="source_line" href="#L3067">3067</a>
<a id="L3068" class="source_line" href="#L3068">3068</a>
<a id="L3069" class="source_line" href="#L3069">3069</a>
<a id="L3070" class="source_line" href="#L3070">3070</a>
<a id="L3071" class="source_line" href="#L3071">3071</a>
<a id="L3072" class="source_line" href="#L3072">3072</a>
<a id="L3073" class="source_line" href="#L3073">3073</a>
<a id="L3074" class="source_line" href="#L3074">3074</a>
<a id="L3075" class="source_line" href="#L3075">3075</a>
<a id="L3076" class="source_line" href="#L3076">3076</a>
<a id="L3077" class="source_line" href="#L3077">3077</a>
<a id="L3078" class="source_line" href="#L3078">3078</a>
<a id="L3079" class="source_line" href="#L3079">3079</a>
<a id="L3080" class="source_line" href="#L3080">3080</a>
<a id="L3081" class="source_line" href="#L3081">3081</a>
<a id="L3082" class="source_line" href="#L3082">3082</a>
<a id="L3083" class="source_line" href="#L3083">3083</a>
<a id="L3084" class="source_line" href="#L3084">3084</a>
<a id="L3085" class="source_line" href="#L3085">3085</a>
<a id="L3086" class="source_line" href="#L3086">3086</a>
<a id="L3087" class="source_line" href="#L3087">3087</a>
<a id="L3088" class="source_line" href="#L3088">3088</a>
<a id="L3089" class="source_line" href="#L3089">3089</a>
<a id="L3090" class="source_line" href="#L3090">3090</a>
<a id="L3091" class="source_line" href="#L3091">3091</a>
<a id="L3092" class="source_line" href="#L3092">3092</a>
<a id="L3093" class="source_line" href="#L3093">3093</a>
<a id="L3094" class="source_line" href="#L3094">3094</a>
<a id="L3095" class="source_line" href="#L3095">3095</a>
<a id="L3096" class="source_line" href="#L3096">3096</a>
<a id="L3097" class="source_line" href="#L3097">3097</a>
<a id="L3098" class="source_line" href="#L3098">3098</a>
<a id="L3099" class="source_line" href="#L3099">3099</a>
<a id="L3100" class="source_line" href="#L3100">3100</a>
<a id="L3101" class="source_line" href="#L3101">3101</a>
<a id="L3102" class="source_line" href="#L3102">3102</a>
<a id="L3103" class="source_line" href="#L3103">3103</a>
<a id="L3104" class="source_line" href="#L3104">3104</a>
<a id="L3105" class="source_line" href="#L3105">3105</a>
<a id="L3106" class="source_line" href="#L3106">3106</a>
<a id="L3107" class="source_line" href="#L3107">3107</a>
<a id="L3108" class="source_line" href="#L3108">3108</a>
<a id="L3109" class="source_line" href="#L3109">3109</a>
<a id="L3110" class="source_line" href="#L3110">3110</a>
<a id="L3111" class="source_line" href="#L3111">3111</a>
<a id="L3112" class="source_line" href="#L3112">3112</a>
<a id="L3113" class="source_line" href="#L3113">3113</a>
<a id="L3114" class="source_line" href="#L3114">3114</a>
<a id="L3115" class="source_line" href="#L3115">3115</a>
<a id="L3116" class="source_line" href="#L3116">3116</a>
<a id="L3117" class="source_line" href="#L3117">3117</a>
<a id="L3118" class="source_line" href="#L3118">3118</a>
<a id="L3119" class="source_line" href="#L3119">3119</a>
<a id="L3120" class="source_line" href="#L3120">3120</a>
<a id="L3121" class="source_line" href="#L3121">3121</a>
<a id="L3122" class="source_line" href="#L3122">3122</a>
<a id="L3123" class="source_line" href="#L3123">3123</a>
<a id="L3124" class="source_line" href="#L3124">3124</a>
<a id="L3125" class="source_line" href="#L3125">3125</a>
<a id="L3126" class="source_line" href="#L3126">3126</a>
<a id="L3127" class="source_line" href="#L3127">3127</a>
<a id="L3128" class="source_line" href="#L3128">3128</a>
<a id="L3129" class="source_line" href="#L3129">3129</a>
<a id="L3130" class="source_line" href="#L3130">3130</a>
<a id="L3131" class="source_line" href="#L3131">3131</a>
<a id="L3132" class="source_line" href="#L3132">3132</a>
<a id="L3133" class="source_line" href="#L3133">3133</a>
<a id="L3134" class="source_line" href="#L3134">3134</a>
<a id="L3135" class="source_line" href="#L3135">3135</a>
<a id="L3136" class="source_line" href="#L3136">3136</a>
<a id="L3137" class="source_line" href="#L3137">3137</a>
<a id="L3138" class="source_line" href="#L3138">3138</a>
<a id="L3139" class="source_line" href="#L3139">3139</a>
<a id="L3140" class="source_line" href="#L3140">3140</a>
<a id="L3141" class="source_line" href="#L3141">3141</a>
<a id="L3142" class="source_line" href="#L3142">3142</a>
<a id="L3143" class="source_line" href="#L3143">3143</a>
<a id="L3144" class="source_line" href="#L3144">3144</a>
<a id="L3145" class="source_line" href="#L3145">3145</a>
<a id="L3146" class="source_line" href="#L3146">3146</a>
<a id="L3147" class="source_line" href="#L3147">3147</a>
<a id="L3148" class="source_line" href="#L3148">3148</a>
<a id="L3149" class="source_line" href="#L3149">3149</a>
<a id="L3150" class="source_line" href="#L3150">3150</a>
<a id="L3151" class="source_line" href="#L3151">3151</a>
<a id="L3152" class="source_line" href="#L3152">3152</a>
<a id="L3153" class="source_line" href="#L3153">3153</a>
<a id="L3154" class="source_line" href="#L3154">3154</a>
<a id="L3155" class="source_line" href="#L3155">3155</a>
<a id="L3156" class="source_line" href="#L3156">3156</a>
<a id="L3157" class="source_line" href="#L3157">3157</a>
<a id="L3158" class="source_line" href="#L3158">3158</a>
<a id="L3159" class="source_line" href="#L3159">3159</a>
<a id="L3160" class="source_line" href="#L3160">3160</a>
<a id="L3161" class="source_line" href="#L3161">3161</a>
<a id="L3162" class="source_line" href="#L3162">3162</a>
<a id="L3163" class="source_line" href="#L3163">3163</a>
<a id="L3164" class="source_line" href="#L3164">3164</a>
<a id="L3165" class="source_line" href="#L3165">3165</a>
<a id="L3166" class="source_line" href="#L3166">3166</a>
<a id="L3167" class="source_line" href="#L3167">3167</a>
<a id="L3168" class="source_line" href="#L3168">3168</a>
<a id="L3169" class="source_line" href="#L3169">3169</a>
<a id="L3170" class="source_line" href="#L3170">3170</a>
<a id="L3171" class="source_line" href="#L3171">3171</a>
<a id="L3172" class="source_line" href="#L3172">3172</a>
<a id="L3173" class="source_line" href="#L3173">3173</a>
<a id="L3174" class="source_line" href="#L3174">3174</a>
<a id="L3175" class="source_line" href="#L3175">3175</a>
<a id="L3176" class="source_line" href="#L3176">3176</a>
<a id="L3177" class="source_line" href="#L3177">3177</a>
<a id="L3178" class="source_line" href="#L3178">3178</a>
<a id="L3179" class="source_line" href="#L3179">3179</a>
<a id="L3180" class="source_line" href="#L3180">3180</a>
<a id="L3181" class="source_line" href="#L3181">3181</a>
<a id="L3182" class="source_line" href="#L3182">3182</a>
<a id="L3183" class="source_line" href="#L3183">3183</a>
<a id="L3184" class="source_line" href="#L3184">3184</a>
<a id="L3185" class="source_line" href="#L3185">3185</a>
<a id="L3186" class="source_line" href="#L3186">3186</a>
<a id="L3187" class="source_line" href="#L3187">3187</a>
<a id="L3188" class="source_line" href="#L3188">3188</a>
<a id="L3189" class="source_line" href="#L3189">3189</a>
<a id="L3190" class="source_line" href="#L3190">3190</a>
<a id="L3191" class="source_line" href="#L3191">3191</a>
<a id="L3192" class="source_line" href="#L3192">3192</a>
<a id="L3193" class="source_line" href="#L3193">3193</a>
<a id="L3194" class="source_line" href="#L3194">3194</a>
<a id="L3195" class="source_line" href="#L3195">3195</a>
<a id="L3196" class="source_line" href="#L3196">3196</a>
<a id="L3197" class="source_line" href="#L3197">3197</a>
<a id="L3198" class="source_line" href="#L3198">3198</a>
<a id="L3199" class="source_line" href="#L3199">3199</a>
<a id="L3200" class="source_line" href="#L3200">3200</a>
<a id="L3201" class="source_line" href="#L3201">3201</a>
<a id="L3202" class="source_line" href="#L3202">3202</a>
<a id="L3203" class="source_line" href="#L3203">3203</a>
<a id="L3204" class="source_line" href="#L3204">3204</a>
<a id="L3205" class="source_line" href="#L3205">3205</a>
<a id="L3206" class="source_line" href="#L3206">3206</a>
<a id="L3207" class="source_line" href="#L3207">3207</a>
<a id="L3208" class="source_line" href="#L3208">3208</a>
<a id="L3209" class="source_line" href="#L3209">3209</a>
<a id="L3210" class="source_line" href="#L3210">3210</a>
<a id="L3211" class="source_line" href="#L3211">3211</a>
<a id="L3212" class="source_line" href="#L3212">3212</a>
<a id="L3213" class="source_line" href="#L3213">3213</a>
<a id="L3214" class="source_line" href="#L3214">3214</a>
<a id="L3215" class="source_line" href="#L3215">3215</a>
<a id="L3216" class="source_line" href="#L3216">3216</a>
<a id="L3217" class="source_line" href="#L3217">3217</a>
<a id="L3218" class="source_line" href="#L3218">3218</a>
<a id="L3219" class="source_line" href="#L3219">3219</a>
<a id="L3220" class="source_line" href="#L3220">3220</a>
<a id="L3221" class="source_line" href="#L3221">3221</a>
<a id="L3222" class="source_line" href="#L3222">3222</a>
<a id="L3223" class="source_line" href="#L3223">3223</a>
<a id="L3224" class="source_line" href="#L3224">3224</a>
<a id="L3225" class="source_line" href="#L3225">3225</a>
<a id="L3226" class="source_line" href="#L3226">3226</a>
<a id="L3227" class="source_line" href="#L3227">3227</a>
<a id="L3228" class="source_line" href="#L3228">3228</a>
<a id="L3229" class="source_line" href="#L3229">3229</a>
<a id="L3230" class="source_line" href="#L3230">3230</a>
<a id="L3231" class="source_line" href="#L3231">3231</a>
<a id="L3232" class="source_line" href="#L3232">3232</a>
<a id="L3233" class="source_line" href="#L3233">3233</a>
<a id="L3234" class="source_line" href="#L3234">3234</a>
<a id="L3235" class="source_line" href="#L3235">3235</a>
<a id="L3236" class="source_line" href="#L3236">3236</a>
<a id="L3237" class="source_line" href="#L3237">3237</a>
<a id="L3238" class="source_line" href="#L3238">3238</a>
<a id="L3239" class="source_line" href="#L3239">3239</a>
<a id="L3240" class="source_line" href="#L3240">3240</a>
<a id="L3241" class="source_line" href="#L3241">3241</a>
<a id="L3242" class="source_line" href="#L3242">3242</a>
<a id="L3243" class="source_line" href="#L3243">3243</a>
<a id="L3244" class="source_line" href="#L3244">3244</a>
<a id="L3245" class="source_line" href="#L3245">3245</a>
<a id="L3246" class="source_line" href="#L3246">3246</a>
<a id="L3247" class="source_line" href="#L3247">3247</a>
<a id="L3248" class="source_line" href="#L3248">3248</a>
<a id="L3249" class="source_line" href="#L3249">3249</a>
<a id="L3250" class="source_line" href="#L3250">3250</a>
<a id="L3251" class="source_line" href="#L3251">3251</a>
<a id="L3252" class="source_line" href="#L3252">3252</a>
<a id="L3253" class="source_line" href="#L3253">3253</a>
<a id="L3254" class="source_line" href="#L3254">3254</a>
<a id="L3255" class="source_line" href="#L3255">3255</a>
<a id="L3256" class="source_line" href="#L3256">3256</a>
<a id="L3257" class="source_line" href="#L3257">3257</a>
<a id="L3258" class="source_line" href="#L3258">3258</a>
<a id="L3259" class="source_line" href="#L3259">3259</a>
<a id="L3260" class="source_line" href="#L3260">3260</a>
<a id="L3261" class="source_line" href="#L3261">3261</a>
<a id="L3262" class="source_line" href="#L3262">3262</a>
<a id="L3263" class="source_line" href="#L3263">3263</a>
<a id="L3264" class="source_line" href="#L3264">3264</a>
<a id="L3265" class="source_line" href="#L3265">3265</a>
<a id="L3266" class="source_line" href="#L3266">3266</a>
<a id="L3267" class="source_line" href="#L3267">3267</a>
<a id="L3268" class="source_line" href="#L3268">3268</a>
<a id="L3269" class="source_line" href="#L3269">3269</a>
<a id="L3270" class="source_line" href="#L3270">3270</a>
<a id="L3271" class="source_line" href="#L3271">3271</a>
<a id="L3272" class="source_line" href="#L3272">3272</a>
<a id="L3273" class="source_line" href="#L3273">3273</a>
<a id="L3274" class="source_line" href="#L3274">3274</a>
<a id="L3275" class="source_line" href="#L3275">3275</a>
<a id="L3276" class="source_line" href="#L3276">3276</a>
<a id="L3277" class="source_line" href="#L3277">3277</a>
<a id="L3278" class="source_line" href="#L3278">3278</a>
<a id="L3279" class="source_line" href="#L3279">3279</a>
<a id="L3280" class="source_line" href="#L3280">3280</a>
<a id="L3281" class="source_line" href="#L3281">3281</a>
<a id="L3282" class="source_line" href="#L3282">3282</a>
<a id="L3283" class="source_line" href="#L3283">3283</a>
<a id="L3284" class="source_line" href="#L3284">3284</a>
<a id="L3285" class="source_line" href="#L3285">3285</a>
<a id="L3286" class="source_line" href="#L3286">3286</a>
<a id="L3287" class="source_line" href="#L3287">3287</a>
<a id="L3288" class="source_line" href="#L3288">3288</a>
<a id="L3289" class="source_line" href="#L3289">3289</a>
<a id="L3290" class="source_line" href="#L3290">3290</a>
<a id="L3291" class="source_line" href="#L3291">3291</a>
<a id="L3292" class="source_line" href="#L3292">3292</a>
<a id="L3293" class="source_line" href="#L3293">3293</a>
<a id="L3294" class="source_line" href="#L3294">3294</a>
<a id="L3295" class="source_line" href="#L3295">3295</a>
<a id="L3296" class="source_line" href="#L3296">3296</a>
<a id="L3297" class="source_line" href="#L3297">3297</a>
<a id="L3298" class="source_line" href="#L3298">3298</a>
<a id="L3299" class="source_line" href="#L3299">3299</a>
<a id="L3300" class="source_line" href="#L3300">3300</a>
<a id="L3301" class="source_line" href="#L3301">3301</a>
<a id="L3302" class="source_line" href="#L3302">3302</a>
<a id="L3303" class="source_line" href="#L3303">3303</a>
<a id="L3304" class="source_line" href="#L3304">3304</a>
<a id="L3305" class="source_line" href="#L3305">3305</a>
<a id="L3306" class="source_line" href="#L3306">3306</a>
<a id="L3307" class="source_line" href="#L3307">3307</a>
<a id="L3308" class="source_line" href="#L3308">3308</a>
<a id="L3309" class="source_line" href="#L3309">3309</a>
<a id="L3310" class="source_line" href="#L3310">3310</a>
<a id="L3311" class="source_line" href="#L3311">3311</a>
<a id="L3312" class="source_line" href="#L3312">3312</a>
<a id="L3313" class="source_line" href="#L3313">3313</a>
<a id="L3314" class="source_line" href="#L3314">3314</a>
<a id="L3315" class="source_line" href="#L3315">3315</a>
<a id="L3316" class="source_line" href="#L3316">3316</a>
<a id="L3317" class="source_line" href="#L3317">3317</a>
<a id="L3318" class="source_line" href="#L3318">3318</a>
<a id="L3319" class="source_line" href="#L3319">3319</a>
<a id="L3320" class="source_line" href="#L3320">3320</a>
<a id="L3321" class="source_line" href="#L3321">3321</a>
<a id="L3322" class="source_line" href="#L3322">3322</a>
<a id="L3323" class="source_line" href="#L3323">3323</a>
<a id="L3324" class="source_line" href="#L3324">3324</a>
<a id="L3325" class="source_line" href="#L3325">3325</a>
<a id="L3326" class="source_line" href="#L3326">3326</a>
<a id="L3327" class="source_line" href="#L3327">3327</a>
<a id="L3328" class="source_line" href="#L3328">3328</a>
<a id="L3329" class="source_line" href="#L3329">3329</a>
<a id="L3330" class="source_line" href="#L3330">3330</a>
<a id="L3331" class="source_line" href="#L3331">3331</a>
<a id="L3332" class="source_line" href="#L3332">3332</a>
<a id="L3333" class="source_line" href="#L3333">3333</a>
<a id="L3334" class="source_line" href="#L3334">3334</a>
<a id="L3335" class="source_line" href="#L3335">3335</a>
<a id="L3336" class="source_line" href="#L3336">3336</a>
<a id="L3337" class="source_line" href="#L3337">3337</a>
<a id="L3338" class="source_line" href="#L3338">3338</a>
<a id="L3339" class="source_line" href="#L3339">3339</a>
<a id="L3340" class="source_line" href="#L3340">3340</a>
<a id="L3341" class="source_line" href="#L3341">3341</a>
<a id="L3342" class="source_line" href="#L3342">3342</a>
<a id="L3343" class="source_line" href="#L3343">3343</a>
<a id="L3344" class="source_line" href="#L3344">3344</a>
<a id="L3345" class="source_line" href="#L3345">3345</a>
<a id="L3346" class="source_line" href="#L3346">3346</a>
<a id="L3347" class="source_line" href="#L3347">3347</a>
<a id="L3348" class="source_line" href="#L3348">3348</a>
<a id="L3349" class="source_line" href="#L3349">3349</a>
<a id="L3350" class="source_line" href="#L3350">3350</a>
<a id="L3351" class="source_line" href="#L3351">3351</a>
<a id="L3352" class="source_line" href="#L3352">3352</a>
<a id="L3353" class="source_line" href="#L3353">3353</a>
<a id="L3354" class="source_line" href="#L3354">3354</a>
<a id="L3355" class="source_line" href="#L3355">3355</a>
<a id="L3356" class="source_line" href="#L3356">3356</a>
<a id="L3357" class="source_line" href="#L3357">3357</a>
<a id="L3358" class="source_line" href="#L3358">3358</a>
<a id="L3359" class="source_line" href="#L3359">3359</a>
<a id="L3360" class="source_line" href="#L3360">3360</a>
<a id="L3361" class="source_line" href="#L3361">3361</a>
<a id="L3362" class="source_line" href="#L3362">3362</a>
<a id="L3363" class="source_line" href="#L3363">3363</a>
<a id="L3364" class="source_line" href="#L3364">3364</a>
<a id="L3365" class="source_line" href="#L3365">3365</a>
<a id="L3366" class="source_line" href="#L3366">3366</a>
<a id="L3367" class="source_line" href="#L3367">3367</a>
<a id="L3368" class="source_line" href="#L3368">3368</a>
<a id="L3369" class="source_line" href="#L3369">3369</a>
<a id="L3370" class="source_line" href="#L3370">3370</a>
<a id="L3371" class="source_line" href="#L3371">3371</a>
<a id="L3372" class="source_line" href="#L3372">3372</a>
<a id="L3373" class="source_line" href="#L3373">3373</a>
<a id="L3374" class="source_line" href="#L3374">3374</a>
<a id="L3375" class="source_line" href="#L3375">3375</a>
<a id="L3376" class="source_line" href="#L3376">3376</a>
<a id="L3377" class="source_line" href="#L3377">3377</a>
<a id="L3378" class="source_line" href="#L3378">3378</a>
<a id="L3379" class="source_line" href="#L3379">3379</a>
<a id="L3380" class="source_line" href="#L3380">3380</a>
<a id="L3381" class="source_line" href="#L3381">3381</a>
<a id="L3382" class="source_line" href="#L3382">3382</a>
<a id="L3383" class="source_line" href="#L3383">3383</a>
<a id="L3384" class="source_line" href="#L3384">3384</a>
<a id="L3385" class="source_line" href="#L3385">3385</a>
<a id="L3386" class="source_line" href="#L3386">3386</a>
<a id="L3387" class="source_line" href="#L3387">3387</a>
<a id="L3388" class="source_line" href="#L3388">3388</a>
<a id="L3389" class="source_line" href="#L3389">3389</a>
<a id="L3390" class="source_line" href="#L3390">3390</a>
<a id="L3391" class="source_line" href="#L3391">3391</a>
<a id="L3392" class="source_line" href="#L3392">3392</a>
<a id="L3393" class="source_line" href="#L3393">3393</a>
<a id="L3394" class="source_line" href="#L3394">3394</a>
<a id="L3395" class="source_line" href="#L3395">3395</a>
<a id="L3396" class="source_line" href="#L3396">3396</a>
<a id="L3397" class="source_line" href="#L3397">3397</a>
<a id="L3398" class="source_line" href="#L3398">3398</a>
<a id="L3399" class="source_line" href="#L3399">3399</a>
<a id="L3400" class="source_line" href="#L3400">3400</a>
<a id="L3401" class="source_line" href="#L3401">3401</a>
<a id="L3402" class="source_line" href="#L3402">3402</a>
<a id="L3403" class="source_line" href="#L3403">3403</a>
<a id="L3404" class="source_line" href="#L3404">3404</a>
<a id="L3405" class="source_line" href="#L3405">3405</a>
<a id="L3406" class="source_line" href="#L3406">3406</a>
<a id="L3407" class="source_line" href="#L3407">3407</a>
<a id="L3408" class="source_line" href="#L3408">3408</a>
<a id="L3409" class="source_line" href="#L3409">3409</a>
<a id="L3410" class="source_line" href="#L3410">3410</a>
<a id="L3411" class="source_line" href="#L3411">3411</a>
<a id="L3412" class="source_line" href="#L3412">3412</a>
<a id="L3413" class="source_line" href="#L3413">3413</a>
<a id="L3414" class="source_line" href="#L3414">3414</a>
<a id="L3415" class="source_line" href="#L3415">3415</a>
<a id="L3416" class="source_line" href="#L3416">3416</a>
<a id="L3417" class="source_line" href="#L3417">3417</a>
<a id="L3418" class="source_line" href="#L3418">3418</a>
<a id="L3419" class="source_line" href="#L3419">3419</a>
<a id="L3420" class="source_line" href="#L3420">3420</a>
<a id="L3421" class="source_line" href="#L3421">3421</a>
<a id="L3422" class="source_line" href="#L3422">3422</a>
<a id="L3423" class="source_line" href="#L3423">3423</a>
<a id="L3424" class="source_line" href="#L3424">3424</a>
<a id="L3425" class="source_line" href="#L3425">3425</a>
<a id="L3426" class="source_line" href="#L3426">3426</a>
<a id="L3427" class="source_line" href="#L3427">3427</a>
<a id="L3428" class="source_line" href="#L3428">3428</a>
<a id="L3429" class="source_line" href="#L3429">3429</a>
<a id="L3430" class="source_line" href="#L3430">3430</a>
<a id="L3431" class="source_line" href="#L3431">3431</a>
<a id="L3432" class="source_line" href="#L3432">3432</a>
<a id="L3433" class="source_line" href="#L3433">3433</a>
<a id="L3434" class="source_line" href="#L3434">3434</a>
<a id="L3435" class="source_line" href="#L3435">3435</a>
<a id="L3436" class="source_line" href="#L3436">3436</a>
<a id="L3437" class="source_line" href="#L3437">3437</a>
<a id="L3438" class="source_line" href="#L3438">3438</a>
<a id="L3439" class="source_line" href="#L3439">3439</a>
<a id="L3440" class="source_line" href="#L3440">3440</a>
<a id="L3441" class="source_line" href="#L3441">3441</a>
<a id="L3442" class="source_line" href="#L3442">3442</a>
<a id="L3443" class="source_line" href="#L3443">3443</a>
<a id="L3444" class="source_line" href="#L3444">3444</a>
<a id="L3445" class="source_line" href="#L3445">3445</a>
<a id="L3446" class="source_line" href="#L3446">3446</a>
<a id="L3447" class="source_line" href="#L3447">3447</a>
<a id="L3448" class="source_line" href="#L3448">3448</a>
<a id="L3449" class="source_line" href="#L3449">3449</a>
<a id="L3450" class="source_line" href="#L3450">3450</a>
<a id="L3451" class="source_line" href="#L3451">3451</a>
<a id="L3452" class="source_line" href="#L3452">3452</a>
<a id="L3453" class="source_line" href="#L3453">3453</a>
<a id="L3454" class="source_line" href="#L3454">3454</a>
<a id="L3455" class="source_line" href="#L3455">3455</a>
<a id="L3456" class="source_line" href="#L3456">3456</a>
<a id="L3457" class="source_line" href="#L3457">3457</a>
<a id="L3458" class="source_line" href="#L3458">3458</a>
<a id="L3459" class="source_line" href="#L3459">3459</a>
<a id="L3460" class="source_line" href="#L3460">3460</a>
<a id="L3461" class="source_line" href="#L3461">3461</a>
<a id="L3462" class="source_line" href="#L3462">3462</a>
<a id="L3463" class="source_line" href="#L3463">3463</a>
<a id="L3464" class="source_line" href="#L3464">3464</a>
<a id="L3465" class="source_line" href="#L3465">3465</a>
<a id="L3466" class="source_line" href="#L3466">3466</a>
<a id="L3467" class="source_line" href="#L3467">3467</a>
<a id="L3468" class="source_line" href="#L3468">3468</a>
<a id="L3469" class="source_line" href="#L3469">3469</a>
<a id="L3470" class="source_line" href="#L3470">3470</a>
<a id="L3471" class="source_line" href="#L3471">3471</a>
<a id="L3472" class="source_line" href="#L3472">3472</a>
<a id="L3473" class="source_line" href="#L3473">3473</a>
<a id="L3474" class="source_line" href="#L3474">3474</a>
<a id="L3475" class="source_line" href="#L3475">3475</a>
<a id="L3476" class="source_line" href="#L3476">3476</a>
<a id="L3477" class="source_line" href="#L3477">3477</a>
<a id="L3478" class="source_line" href="#L3478">3478</a>
<a id="L3479" class="source_line" href="#L3479">3479</a>
<a id="L3480" class="source_line" href="#L3480">3480</a>
<a id="L3481" class="source_line" href="#L3481">3481</a>
<a id="L3482" class="source_line" href="#L3482">3482</a>
<a id="L3483" class="source_line" href="#L3483">3483</a>
<a id="L3484" class="source_line" href="#L3484">3484</a>
<a id="L3485" class="source_line" href="#L3485">3485</a>
<a id="L3486" class="source_line" href="#L3486">3486</a>
<a id="L3487" class="source_line" href="#L3487">3487</a>
<a id="L3488" class="source_line" href="#L3488">3488</a>
<a id="L3489" class="source_line" href="#L3489">3489</a>
<a id="L3490" class="source_line" href="#L3490">3490</a>
<a id="L3491" class="source_line" href="#L3491">3491</a>
<a id="L3492" class="source_line" href="#L3492">3492</a>
<a id="L3493" class="source_line" href="#L3493">3493</a>
<a id="L3494" class="source_line" href="#L3494">3494</a>
<a id="L3495" class="source_line" href="#L3495">3495</a>
<a id="L3496" class="source_line" href="#L3496">3496</a>
<a id="L3497" class="source_line" href="#L3497">3497</a>
<a id="L3498" class="source_line" href="#L3498">3498</a>
<a id="L3499" class="source_line" href="#L3499">3499</a>
<a id="L3500" class="source_line" href="#L3500">3500</a>
<a id="L3501" class="source_line" href="#L3501">3501</a>
<a id="L3502" class="source_line" href="#L3502">3502</a>
<a id="L3503" class="source_line" href="#L3503">3503</a>
<a id="L3504" class="source_line" href="#L3504">3504</a>
<a id="L3505" class="source_line" href="#L3505">3505</a>
<a id="L3506" class="source_line" href="#L3506">3506</a>
<a id="L3507" class="source_line" href="#L3507">3507</a>
<a id="L3508" class="source_line" href="#L3508">3508</a>
<a id="L3509" class="source_line" href="#L3509">3509</a>
<a id="L3510" class="source_line" href="#L3510">3510</a>
<a id="L3511" class="source_line" href="#L3511">3511</a>
<a id="L3512" class="source_line" href="#L3512">3512</a>
<a id="L3513" class="source_line" href="#L3513">3513</a>
<a id="L3514" class="source_line" href="#L3514">3514</a>
<a id="L3515" class="source_line" href="#L3515">3515</a>
<a id="L3516" class="source_line" href="#L3516">3516</a>
<a id="L3517" class="source_line" href="#L3517">3517</a>
<a id="L3518" class="source_line" href="#L3518">3518</a>
<a id="L3519" class="source_line" href="#L3519">3519</a>
<a id="L3520" class="source_line" href="#L3520">3520</a>
<a id="L3521" class="source_line" href="#L3521">3521</a>
<a id="L3522" class="source_line" href="#L3522">3522</a>
<a id="L3523" class="source_line" href="#L3523">3523</a>
<a id="L3524" class="source_line" href="#L3524">3524</a>
<a id="L3525" class="source_line" href="#L3525">3525</a>
<a id="L3526" class="source_line" href="#L3526">3526</a>
<a id="L3527" class="source_line" href="#L3527">3527</a>
<a id="L3528" class="source_line" href="#L3528">3528</a>
<a id="L3529" class="source_line" href="#L3529">3529</a>
<a id="L3530" class="source_line" href="#L3530">3530</a>
<a id="L3531" class="source_line" href="#L3531">3531</a>
<a id="L3532" class="source_line" href="#L3532">3532</a>
<a id="L3533" class="source_line" href="#L3533">3533</a>
<a id="L3534" class="source_line" href="#L3534">3534</a>
<a id="L3535" class="source_line" href="#L3535">3535</a>
<a id="L3536" class="source_line" href="#L3536">3536</a>
<a id="L3537" class="source_line" href="#L3537">3537</a>
<a id="L3538" class="source_line" href="#L3538">3538</a>
<a id="L3539" class="source_line" href="#L3539">3539</a>
<a id="L3540" class="source_line" href="#L3540">3540</a>
<a id="L3541" class="source_line" href="#L3541">3541</a>
<a id="L3542" class="source_line" href="#L3542">3542</a>
<a id="L3543" class="source_line" href="#L3543">3543</a>
<a id="L3544" class="source_line" href="#L3544">3544</a>
<a id="L3545" class="source_line" href="#L3545">3545</a>
<a id="L3546" class="source_line" href="#L3546">3546</a>
<a id="L3547" class="source_line" href="#L3547">3547</a>
<a id="L3548" class="source_line" href="#L3548">3548</a>
<a id="L3549" class="source_line" href="#L3549">3549</a>
<a id="L3550" class="source_line" href="#L3550">3550</a>
<a id="L3551" class="source_line" href="#L3551">3551</a>
<a id="L3552" class="source_line" href="#L3552">3552</a>
<a id="L3553" class="source_line" href="#L3553">3553</a>
<a id="L3554" class="source_line" href="#L3554">3554</a>
<a id="L3555" class="source_line" href="#L3555">3555</a>
<a id="L3556" class="source_line" href="#L3556">3556</a>
<a id="L3557" class="source_line" href="#L3557">3557</a>
<a id="L3558" class="source_line" href="#L3558">3558</a>
<a id="L3559" class="source_line" href="#L3559">3559</a>
<a id="L3560" class="source_line" href="#L3560">3560</a>
<a id="L3561" class="source_line" href="#L3561">3561</a>
<a id="L3562" class="source_line" href="#L3562">3562</a>
<a id="L3563" class="source_line" href="#L3563">3563</a>
<a id="L3564" class="source_line" href="#L3564">3564</a>
<a id="L3565" class="source_line" href="#L3565">3565</a>
<a id="L3566" class="source_line" href="#L3566">3566</a>
<a id="L3567" class="source_line" href="#L3567">3567</a>
<a id="L3568" class="source_line" href="#L3568">3568</a>
<a id="L3569" class="source_line" href="#L3569">3569</a>
<a id="L3570" class="source_line" href="#L3570">3570</a>
<a id="L3571" class="source_line" href="#L3571">3571</a>
<a id="L3572" class="source_line" href="#L3572">3572</a>
<a id="L3573" class="source_line" href="#L3573">3573</a>
<a id="L3574" class="source_line" href="#L3574">3574</a>
<a id="L3575" class="source_line" href="#L3575">3575</a>
<a id="L3576" class="source_line" href="#L3576">3576</a>
<a id="L3577" class="source_line" href="#L3577">3577</a>
<a id="L3578" class="source_line" href="#L3578">3578</a>
<a id="L3579" class="source_line" href="#L3579">3579</a>
<a id="L3580" class="source_line" href="#L3580">3580</a>
<a id="L3581" class="source_line" href="#L3581">3581</a>
<a id="L3582" class="source_line" href="#L3582">3582</a>
<a id="L3583" class="source_line" href="#L3583">3583</a>
<a id="L3584" class="source_line" href="#L3584">3584</a>
<a id="L3585" class="source_line" href="#L3585">3585</a>
<a id="L3586" class="source_line" href="#L3586">3586</a>
<a id="L3587" class="source_line" href="#L3587">3587</a>
<a id="L3588" class="source_line" href="#L3588">3588</a>
<a id="L3589" class="source_line" href="#L3589">3589</a>
<a id="L3590" class="source_line" href="#L3590">3590</a>
<a id="L3591" class="source_line" href="#L3591">3591</a>
<a id="L3592" class="source_line" href="#L3592">3592</a>
<a id="L3593" class="source_line" href="#L3593">3593</a>
<a id="L3594" class="source_line" href="#L3594">3594</a>
<a id="L3595" class="source_line" href="#L3595">3595</a>
<a id="L3596" class="source_line" href="#L3596">3596</a>
<a id="L3597" class="source_line" href="#L3597">3597</a>
<a id="L3598" class="source_line" href="#L3598">3598</a>
<a id="L3599" class="source_line" href="#L3599">3599</a>
<a id="L3600" class="source_line" href="#L3600">3600</a>
<a id="L3601" class="source_line" href="#L3601">3601</a>
<a id="L3602" class="source_line" href="#L3602">3602</a>
<a id="L3603" class="source_line" href="#L3603">3603</a>
<a id="L3604" class="source_line" href="#L3604">3604</a>
<a id="L3605" class="source_line" href="#L3605">3605</a>
<a id="L3606" class="source_line" href="#L3606">3606</a>
<a id="L3607" class="source_line" href="#L3607">3607</a>
<a id="L3608" class="source_line" href="#L3608">3608</a>
<a id="L3609" class="source_line" href="#L3609">3609</a>
<a id="L3610" class="source_line" href="#L3610">3610</a>
<a id="L3611" class="source_line" href="#L3611">3611</a>
<a id="L3612" class="source_line" href="#L3612">3612</a>
<a id="L3613" class="source_line" href="#L3613">3613</a>
<a id="L3614" class="source_line" href="#L3614">3614</a>
<a id="L3615" class="source_line" href="#L3615">3615</a>
<a id="L3616" class="source_line" href="#L3616">3616</a>
<a id="L3617" class="source_line" href="#L3617">3617</a>
<a id="L3618" class="source_line" href="#L3618">3618</a>
<a id="L3619" class="source_line" href="#L3619">3619</a>
<a id="L3620" class="source_line" href="#L3620">3620</a>
<a id="L3621" class="source_line" href="#L3621">3621</a>
<a id="L3622" class="source_line" href="#L3622">3622</a>
<a id="L3623" class="source_line" href="#L3623">3623</a>
<a id="L3624" class="source_line" href="#L3624">3624</a>
<a id="L3625" class="source_line" href="#L3625">3625</a>
<a id="L3626" class="source_line" href="#L3626">3626</a>
<a id="L3627" class="source_line" href="#L3627">3627</a>
<a id="L3628" class="source_line" href="#L3628">3628</a>
<a id="L3629" class="source_line" href="#L3629">3629</a>
<a id="L3630" class="source_line" href="#L3630">3630</a>
<a id="L3631" class="source_line" href="#L3631">3631</a>
<a id="L3632" class="source_line" href="#L3632">3632</a>
<a id="L3633" class="source_line" href="#L3633">3633</a>
<a id="L3634" class="source_line" href="#L3634">3634</a>
<a id="L3635" class="source_line" href="#L3635">3635</a>
<a id="L3636" class="source_line" href="#L3636">3636</a>
<a id="L3637" class="source_line" href="#L3637">3637</a>
<a id="L3638" class="source_line" href="#L3638">3638</a>
<a id="L3639" class="source_line" href="#L3639">3639</a>
<a id="L3640" class="source_line" href="#L3640">3640</a>
<a id="L3641" class="source_line" href="#L3641">3641</a>
<a id="L3642" class="source_line" href="#L3642">3642</a>
<a id="L3643" class="source_line" href="#L3643">3643</a>
<a id="L3644" class="source_line" href="#L3644">3644</a>
<a id="L3645" class="source_line" href="#L3645">3645</a>
<a id="L3646" class="source_line" href="#L3646">3646</a>
<a id="L3647" class="source_line" href="#L3647">3647</a>
<a id="L3648" class="source_line" href="#L3648">3648</a>
<a id="L3649" class="source_line" href="#L3649">3649</a>
<a id="L3650" class="source_line" href="#L3650">3650</a>
<a id="L3651" class="source_line" href="#L3651">3651</a>
<a id="L3652" class="source_line" href="#L3652">3652</a>
<a id="L3653" class="source_line" href="#L3653">3653</a>
<a id="L3654" class="source_line" href="#L3654">3654</a>
<a id="L3655" class="source_line" href="#L3655">3655</a>
<a id="L3656" class="source_line" href="#L3656">3656</a>
<a id="L3657" class="source_line" href="#L3657">3657</a>
<a id="L3658" class="source_line" href="#L3658">3658</a>
<a id="L3659" class="source_line" href="#L3659">3659</a>
<a id="L3660" class="source_line" href="#L3660">3660</a>
<a id="L3661" class="source_line" href="#L3661">3661</a>
<a id="L3662" class="source_line" href="#L3662">3662</a>
<a id="L3663" class="source_line" href="#L3663">3663</a>
<a id="L3664" class="source_line" href="#L3664">3664</a>
<a id="L3665" class="source_line" href="#L3665">3665</a>
<a id="L3666" class="source_line" href="#L3666">3666</a>
<a id="L3667" class="source_line" href="#L3667">3667</a>
<a id="L3668" class="source_line" href="#L3668">3668</a>
<a id="L3669" class="source_line" href="#L3669">3669</a>
<a id="L3670" class="source_line" href="#L3670">3670</a>
<a id="L3671" class="source_line" href="#L3671">3671</a>
<a id="L3672" class="source_line" href="#L3672">3672</a>
<a id="L3673" class="source_line" href="#L3673">3673</a>
<a id="L3674" class="source_line" href="#L3674">3674</a>
<a id="L3675" class="source_line" href="#L3675">3675</a>
<a id="L3676" class="source_line" href="#L3676">3676</a>
<a id="L3677" class="source_line" href="#L3677">3677</a>
<a id="L3678" class="source_line" href="#L3678">3678</a>
<a id="L3679" class="source_line" href="#L3679">3679</a>
<a id="L3680" class="source_line" href="#L3680">3680</a>
<a id="L3681" class="source_line" href="#L3681">3681</a>
<a id="L3682" class="source_line" href="#L3682">3682</a>
<a id="L3683" class="source_line" href="#L3683">3683</a>
<a id="L3684" class="source_line" href="#L3684">3684</a>
<a id="L3685" class="source_line" href="#L3685">3685</a>
<a id="L3686" class="source_line" href="#L3686">3686</a>
<a id="L3687" class="source_line" href="#L3687">3687</a>
<a id="L3688" class="source_line" href="#L3688">3688</a>
<a id="L3689" class="source_line" href="#L3689">3689</a>
<a id="L3690" class="source_line" href="#L3690">3690</a>
<a id="L3691" class="source_line" href="#L3691">3691</a>
<a id="L3692" class="source_line" href="#L3692">3692</a>
<a id="L3693" class="source_line" href="#L3693">3693</a>
<a id="L3694" class="source_line" href="#L3694">3694</a>
<a id="L3695" class="source_line" href="#L3695">3695</a>
<a id="L3696" class="source_line" href="#L3696">3696</a>
<a id="L3697" class="source_line" href="#L3697">3697</a>
<a id="L3698" class="source_line" href="#L3698">3698</a>
<a id="L3699" class="source_line" href="#L3699">3699</a>
<a id="L3700" class="source_line" href="#L3700">3700</a>
<a id="L3701" class="source_line" href="#L3701">3701</a>
<a id="L3702" class="source_line" href="#L3702">3702</a>
<a id="L3703" class="source_line" href="#L3703">3703</a>
<a id="L3704" class="source_line" href="#L3704">3704</a>
<a id="L3705" class="source_line" href="#L3705">3705</a>
<a id="L3706" class="source_line" href="#L3706">3706</a>
<a id="L3707" class="source_line" href="#L3707">3707</a>
<a id="L3708" class="source_line" href="#L3708">3708</a>
<a id="L3709" class="source_line" href="#L3709">3709</a>
<a id="L3710" class="source_line" href="#L3710">3710</a>
<a id="L3711" class="source_line" href="#L3711">3711</a>
<a id="L3712" class="source_line" href="#L3712">3712</a>
<a id="L3713" class="source_line" href="#L3713">3713</a>
<a id="L3714" class="source_line" href="#L3714">3714</a>
<a id="L3715" class="source_line" href="#L3715">3715</a>
<a id="L3716" class="source_line" href="#L3716">3716</a>
<a id="L3717" class="source_line" href="#L3717">3717</a>
<a id="L3718" class="source_line" href="#L3718">3718</a>
<a id="L3719" class="source_line" href="#L3719">3719</a>
<a id="L3720" class="source_line" href="#L3720">3720</a>
<a id="L3721" class="source_line" href="#L3721">3721</a>
<a id="L3722" class="source_line" href="#L3722">3722</a>
<a id="L3723" class="source_line" href="#L3723">3723</a>
<a id="L3724" class="source_line" href="#L3724">3724</a>
<a id="L3725" class="source_line" href="#L3725">3725</a>
<a id="L3726" class="source_line" href="#L3726">3726</a>
<a id="L3727" class="source_line" href="#L3727">3727</a>
<a id="L3728" class="source_line" href="#L3728">3728</a>
<a id="L3729" class="source_line" href="#L3729">3729</a>
<a id="L3730" class="source_line" href="#L3730">3730</a>
<a id="L3731" class="source_line" href="#L3731">3731</a>
<a id="L3732" class="source_line" href="#L3732">3732</a>
<a id="L3733" class="source_line" href="#L3733">3733</a>
<a id="L3734" class="source_line" href="#L3734">3734</a>
<a id="L3735" class="source_line" href="#L3735">3735</a>
<a id="L3736" class="source_line" href="#L3736">3736</a>
<a id="L3737" class="source_line" href="#L3737">3737</a>
<a id="L3738" class="source_line" href="#L3738">3738</a>
<a id="L3739" class="source_line" href="#L3739">3739</a>
<a id="L3740" class="source_line" href="#L3740">3740</a>
<a id="L3741" class="source_line" href="#L3741">3741</a>
<a id="L3742" class="source_line" href="#L3742">3742</a>
<a id="L3743" class="source_line" href="#L3743">3743</a>
<a id="L3744" class="source_line" href="#L3744">3744</a>
<a id="L3745" class="source_line" href="#L3745">3745</a>
<a id="L3746" class="source_line" href="#L3746">3746</a>
<a id="L3747" class="source_line" href="#L3747">3747</a>
<a id="L3748" class="source_line" href="#L3748">3748</a>
<a id="L3749" class="source_line" href="#L3749">3749</a>
<a id="L3750" class="source_line" href="#L3750">3750</a>
<a id="L3751" class="source_line" href="#L3751">3751</a>
<a id="L3752" class="source_line" href="#L3752">3752</a>
<a id="L3753" class="source_line" href="#L3753">3753</a>
<a id="L3754" class="source_line" href="#L3754">3754</a>
<a id="L3755" class="source_line" href="#L3755">3755</a>
<a id="L3756" class="source_line" href="#L3756">3756</a>
<a id="L3757" class="source_line" href="#L3757">3757</a>
<a id="L3758" class="source_line" href="#L3758">3758</a>
<a id="L3759" class="source_line" href="#L3759">3759</a>
<a id="L3760" class="source_line" href="#L3760">3760</a>
<a id="L3761" class="source_line" href="#L3761">3761</a>
<a id="L3762" class="source_line" href="#L3762">3762</a>
<a id="L3763" class="source_line" href="#L3763">3763</a>
<a id="L3764" class="source_line" href="#L3764">3764</a>
<a id="L3765" class="source_line" href="#L3765">3765</a>
<a id="L3766" class="source_line" href="#L3766">3766</a>
<a id="L3767" class="source_line" href="#L3767">3767</a>
<a id="L3768" class="source_line" href="#L3768">3768</a>
<a id="L3769" class="source_line" href="#L3769">3769</a>
<a id="L3770" class="source_line" href="#L3770">3770</a>
<a id="L3771" class="source_line" href="#L3771">3771</a>
<a id="L3772" class="source_line" href="#L3772">3772</a>
<a id="L3773" class="source_line" href="#L3773">3773</a>
<a id="L3774" class="source_line" href="#L3774">3774</a>
<a id="L3775" class="source_line" href="#L3775">3775</a>
<a id="L3776" class="source_line" href="#L3776">3776</a>
<a id="L3777" class="source_line" href="#L3777">3777</a>
<a id="L3778" class="source_line" href="#L3778">3778</a>
<a id="L3779" class="source_line" href="#L3779">3779</a>
<a id="L3780" class="source_line" href="#L3780">3780</a>
<a id="L3781" class="source_line" href="#L3781">3781</a>
<a id="L3782" class="source_line" href="#L3782">3782</a>
<a id="L3783" class="source_line" href="#L3783">3783</a>
<a id="L3784" class="source_line" href="#L3784">3784</a>
<a id="L3785" class="source_line" href="#L3785">3785</a>
<a id="L3786" class="source_line" href="#L3786">3786</a>
<a id="L3787" class="source_line" href="#L3787">3787</a>
<a id="L3788" class="source_line" href="#L3788">3788</a>
<a id="L3789" class="source_line" href="#L3789">3789</a>
<a id="L3790" class="source_line" href="#L3790">3790</a>
<a id="L3791" class="source_line" href="#L3791">3791</a>
<a id="L3792" class="source_line" href="#L3792">3792</a>
<a id="L3793" class="source_line" href="#L3793">3793</a>
<a id="L3794" class="source_line" href="#L3794">3794</a>
<a id="L3795" class="source_line" href="#L3795">3795</a>
<a id="L3796" class="source_line" href="#L3796">3796</a>
<a id="L3797" class="source_line" href="#L3797">3797</a>
<a id="L3798" class="source_line" href="#L3798">3798</a>
<a id="L3799" class="source_line" href="#L3799">3799</a>
<a id="L3800" class="source_line" href="#L3800">3800</a>
<a id="L3801" class="source_line" href="#L3801">3801</a>
<a id="L3802" class="source_line" href="#L3802">3802</a>
<a id="L3803" class="source_line" href="#L3803">3803</a>
<a id="L3804" class="source_line" href="#L3804">3804</a>
<a id="L3805" class="source_line" href="#L3805">3805</a>
<a id="L3806" class="source_line" href="#L3806">3806</a>
<a id="L3807" class="source_line" href="#L3807">3807</a>
<a id="L3808" class="source_line" href="#L3808">3808</a>
<a id="L3809" class="source_line" href="#L3809">3809</a>
<a id="L3810" class="source_line" href="#L3810">3810</a>
<a id="L3811" class="source_line" href="#L3811">3811</a>
<a id="L3812" class="source_line" href="#L3812">3812</a>
<a id="L3813" class="source_line" href="#L3813">3813</a>
<a id="L3814" class="source_line" href="#L3814">3814</a>
<a id="L3815" class="source_line" href="#L3815">3815</a>
<a id="L3816" class="source_line" href="#L3816">3816</a>
<a id="L3817" class="source_line" href="#L3817">3817</a>
<a id="L3818" class="source_line" href="#L3818">3818</a>
<a id="L3819" class="source_line" href="#L3819">3819</a>
<a id="L3820" class="source_line" href="#L3820">3820</a>
<a id="L3821" class="source_line" href="#L3821">3821</a>
<a id="L3822" class="source_line" href="#L3822">3822</a>
<a id="L3823" class="source_line" href="#L3823">3823</a>
<a id="L3824" class="source_line" href="#L3824">3824</a>
<a id="L3825" class="source_line" href="#L3825">3825</a>
<a id="L3826" class="source_line" href="#L3826">3826</a>
<a id="L3827" class="source_line" href="#L3827">3827</a>
<a id="L3828" class="source_line" href="#L3828">3828</a>
<a id="L3829" class="source_line" href="#L3829">3829</a>
<a id="L3830" class="source_line" href="#L3830">3830</a>
<a id="L3831" class="source_line" href="#L3831">3831</a>
<a id="L3832" class="source_line" href="#L3832">3832</a>
<a id="L3833" class="source_line" href="#L3833">3833</a>
<a id="L3834" class="source_line" href="#L3834">3834</a>
<a id="L3835" class="source_line" href="#L3835">3835</a>
<a id="L3836" class="source_line" href="#L3836">3836</a>
<a id="L3837" class="source_line" href="#L3837">3837</a>
<a id="L3838" class="source_line" href="#L3838">3838</a>
</code><code class="source_code"><span><span id="module-General"><span class="MODULE">module</span> <span class="UIDENT">General</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Lists. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-General.val-take"><span class="LIDENT">take</span></span> <span id="local_n_1"><span class="LIDENT">n</span></span> <span id="local_xs_2"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_n_1"><span class="LIDENT">n</span></a><span class="COMMA">,</span> <a href="#local_xs_2"><span class="LIDENT">xs</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">0</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LPAREN">(</span><span id="local_x_4"><span class="LIDENT">x</span></span> <span class="COLONCOLON">::</span> <span id="local_xs_5"><span class="LIDENT">xs</span></span> <span class="AS">as</span> <span id="local_input_3"><span class="LIDENT">input</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>     <span class="LET">let</span> <span id="local_xs'_6"><span class="LIDENT">xs'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">take</span> <span class="LPAREN">(</span><a href="#local_n_1"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_xs_5"><span class="LIDENT">xs</span></a> <span class="IN">in</span><span class="EOL">
</span>     <span class="IF">if</span> <a href="#local_xs_5"><span class="LIDENT">xs</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_xs'_6"><span class="LIDENT">xs'</span></a> <span class="THEN">then</span><span class="EOL">
</span>       <a href="#local_input_3"><span class="LIDENT">input</span></a><span class="EOL">
</span>     <span class="ELSE">else</span><span class="EOL">
</span>       <a href="#local_x_4"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <a href="#local_xs'_6"><span class="LIDENT">xs'</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-General.val-drop"><span class="LIDENT">drop</span></span> <span id="local_n_7"><span class="LIDENT">n</span></span> <span id="local_xs_8"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_n_7"><span class="LIDENT">n</span></a><span class="COMMA">,</span> <a href="#local_xs_8"><span class="LIDENT">xs</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">0</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_xs_8"><span class="LIDENT">xs</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="COLONCOLON">::</span> <span id="local_xs_9"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">drop</span> <span class="LPAREN">(</span><a href="#local_n_7"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_xs_9"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-General.val-uniq1"><span class="LIDENT">uniq1</span></span> <span id="local_cmp_10"><span class="LIDENT">cmp</span></span> <span id="local_x_11"><span class="LIDENT">x</span></span> <span id="local_ys_12"><span class="LIDENT">ys</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_ys_12"><span class="LIDENT">ys</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span id="local_y_13"><span class="LIDENT">y</span></span> <span class="COLONCOLON">::</span> <span id="local_ys_14"><span class="LIDENT">ys</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_cmp_10"><span class="LIDENT">cmp</span></a> <a href="#local_x_11"><span class="LIDENT">x</span></a> <a href="#local_y_13"><span class="LIDENT">y</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>        <span class="LIDENT">uniq1</span> <a href="#local_cmp_10"><span class="LIDENT">cmp</span></a> <a href="#local_x_11"><span class="LIDENT">x</span></a> <a href="#local_ys_14"><span class="LIDENT">ys</span></a><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <a href="#local_y_13"><span class="LIDENT">y</span></a> <span class="COLONCOLON">::</span> <span class="LIDENT">uniq1</span> <a href="#local_cmp_10"><span class="LIDENT">cmp</span></a> <a href="#local_y_13"><span class="LIDENT">y</span></a> <a href="#local_ys_14"><span class="LIDENT">ys</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-General.val-uniq"><span class="LIDENT">uniq</span></span> <span id="local_cmp_15"><span class="LIDENT">cmp</span></span> <span id="local_xs_16"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_xs_16"><span class="LIDENT">xs</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="BAR">|</span> <span id="local_x_17"><span class="LIDENT">x</span></span> <span class="COLONCOLON">::</span> <span id="local_xs_18"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_x_17"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <span class="LIDENT">uniq1</span> <a href="#local_cmp_15"><span class="LIDENT">cmp</span></a> <a href="#local_x_17"><span class="LIDENT">x</span></a> <a href="#local_xs_18"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-General.val-weed"><span class="LIDENT">weed</span></span> <span id="local_cmp_19"><span class="LIDENT">cmp</span></span> <span id="local_xs_20"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">uniq</span> <a href="#local_cmp_19"><span class="LIDENT">cmp</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-sort"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">sort</span></a> <a href="#local_cmp_19"><span class="LIDENT">cmp</span></a> <a href="#local_xs_20"><span class="LIDENT">xs</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Streams. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-General.type-stream"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">stream</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/lazy.ml.html#type-t"><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">head</span> <span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-General.type-head"><span class="AND">and</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">head</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span id="module-General.type-head.constructor-Nil"><span class="BAR">|</span> <span class="UIDENT">Nil</span></span><span class="EOL">
</span>  <span id="module-General.type-head.constructor-Cons"><span class="BAR">|</span> <span class="UIDENT">Cons</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">stream</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The length of a stream. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-General.val-length"><span class="LIDENT">length</span></span> <span id="local_xs_21"><span class="LIDENT">xs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/lazy.ml.html#val-force"><span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">force</span></a> <a href="#local_xs_21"><span class="LIDENT">xs</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Nil</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="INT">0</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Cons</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_xs_22"><span class="LIDENT">xs</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="INT">1</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="LIDENT">length</span> <a href="#local_xs_22"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Folding over a stream. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-General.val-foldr"><span class="LIDENT">foldr</span></span> <span id="local_f_23"><span class="LIDENT">f</span></span> <span id="local_xs_24"><span class="LIDENT">xs</span></span> <span id="local_accu_25"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/lazy.ml.html#val-force"><span class="UIDENT">Lazy</span><span class="DOT">.</span><span class="LIDENT">force</span></a> <a href="#local_xs_24"><span class="LIDENT">xs</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Nil</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_accu_25"><span class="LIDENT">accu</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Cons</span> <span class="LPAREN">(</span><span id="local_x_26"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_xs_27"><span class="LIDENT">xs</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_f_23"><span class="LIDENT">f</span></a> <a href="#local_x_26"><span class="LIDENT">x</span></a> <span class="LPAREN">(</span><span class="LIDENT">foldr</span> <a href="#local_f_23"><span class="LIDENT">f</span></a> <a href="#local_xs_27"><span class="LIDENT">xs</span></a> <a href="#local_accu_25"><span class="LIDENT">accu</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-Convert"><span class="MODULE">module</span> <span class="UIDENT">Convert</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* An ocamlyacc-style, or Menhir-style, parser requires access to
   the lexer, which must be parameterized with a lexing buffer, and
   to the lexing buffer itself, where it reads position information. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This traditional API is convenient when used with ocamllex, but
   inelegant when used with other lexer generators. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Convert.type-traditional"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">traditional</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This revised API is independent of any lexer generator. Here, the
   parser only requires access to the lexer, and the lexer takes no
   parameters. The tokens returned by the lexer may contain position
   information. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Convert.type-revised"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">revised</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Converting a traditional parser, produced by ocamlyacc or Menhir,
   into a revised parser. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A token of the revised lexer is essentially a triple of a token
   of the traditional lexer (or raw token), a start position, and
   and end position. The three [get] functions are accessors. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* We do not require the type ['token] to actually be a triple type.
   This enables complex applications where it is a record type with
   more than three fields. It also enables simple applications where
   positions are of no interest, so ['token] is just ['raw_token]
   and [get_startp] and [get_endp] return dummy positions. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-Convert.val-traditional2revised"><span class="LIDENT">traditional2revised</span></span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_get_raw_token_28"><span class="LIDENT">get_raw_token</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">raw_token</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_get_startp_29"><span class="LIDENT">get_startp</span></span>    <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_get_endp_30"><span class="LIDENT">get_endp</span></span>      <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_parser_31"><span class="LIDENT">parser</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">raw_token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">traditional</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">revised</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Accept a revised lexer. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_lexer_32"><span class="LIDENT">lexer</span></span> <span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Create a dummy lexing buffer. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_lexbuf_33"><span class="LIDENT">lexbuf</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="EQUAL">=</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#val-from_string"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">from_string</span></a> <span class="STRING">&quot;&quot;</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Wrap the revised lexer as a traditional lexer. A traditional
       lexer returns a raw token and updates the fields of the lexing
       buffer with new positions, which will be read by the parser. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_lexer_34"><span class="LIDENT">lexer</span></span> <span class="LPAREN">(</span><span id="local_lexbuf_35"><span class="LIDENT">lexbuf</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">raw_token</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_token_36"><span class="LIDENT">token</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="EQUAL">=</span> <a href="#local_lexer_32"><span class="LIDENT">lexer</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_lexbuf_35"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_start_p</span> <span class="LESSMINUS">&lt;-</span> <a href="#local_get_startp_29"><span class="LIDENT">get_startp</span></a> <a href="#local_token_36"><span class="LIDENT">token</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <a href="#local_lexbuf_35"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="LESSMINUS">&lt;-</span> <a href="#local_get_endp_30"><span class="LIDENT">get_endp</span></a> <a href="#local_token_36"><span class="LIDENT">token</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <a href="#local_get_raw_token_28"><span class="LIDENT">get_raw_token</span></a> <a href="#local_token_36"><span class="LIDENT">token</span></a><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Invoke the traditional parser. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <a href="#local_parser_31"><span class="LIDENT">parser</span></a> <a href="#local_lexer_34"><span class="LIDENT">lexer</span></a> <a href="#local_lexbuf_33"><span class="LIDENT">lexbuf</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Converting a revised parser back to a traditional parser. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-Convert.val-revised2traditional"><span class="LIDENT">revised2traditional</span></span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_make_token_37"><span class="LIDENT">make_token</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">raw_token</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">token</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span id="local_parser_38"><span class="LIDENT">parser</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">revised</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">raw_token</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">traditional</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Accept a traditional lexer and a lexing buffer. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_lexer_39"><span class="LIDENT">lexer</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">raw_token</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_lexbuf_40"><span class="LIDENT">lexbuf</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Wrap the traditional lexer as a revised lexer. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_lexer_41"><span class="LIDENT">lexer</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_token_42"><span class="LIDENT">token</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">raw_token</span> <span class="EQUAL">=</span> <a href="#local_lexer_39"><span class="LIDENT">lexer</span></a> <a href="#local_lexbuf_40"><span class="LIDENT">lexbuf</span></a> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_make_token_37"><span class="LIDENT">make_token</span></a> <a href="#local_token_42"><span class="LIDENT">token</span></a> <a href="#local_lexbuf_40"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_start_p</span> <a href="#local_lexbuf_40"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Invoke the revised parser. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <a href="#local_parser_38"><span class="LIDENT">parser</span></a> <a href="#local_lexer_41"><span class="LIDENT">lexer</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Simplified versions of the above, where concrete triples are used. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Convert.module-Simplified"><span class="MODULE">module</span> <span class="UIDENT">Simplified</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Convert.module-Simplified.val-traditional2revised"><span class="LIDENT">traditional2revised</span></span> <span id="local_parser_43"><span class="LIDENT">parser</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">traditional2revised</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_token_44"><span class="LIDENT">token</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span>  <span class="MINUSGREATER">-&gt;</span> <a href="#local_token_44"><span class="LIDENT">token</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_startp_45"><span class="LIDENT">startp</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_startp_45"><span class="LIDENT">startp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_endp_46"><span class="LIDENT">endp</span></span><span class="RPAREN">)</span>   <span class="MINUSGREATER">-&gt;</span> <a href="#local_endp_46"><span class="LIDENT">endp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_parser_43"><span class="LIDENT">parser</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Convert.module-Simplified.val-revised2traditional"><span class="LIDENT">revised2traditional</span></span> <span id="local_parser_47"><span class="LIDENT">parser</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">revised2traditional</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_token_48"><span class="LIDENT">token</span></span> <span id="local_startp_49"><span class="LIDENT">startp</span></span> <span id="local_endp_50"><span class="LIDENT">endp</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_token_48"><span class="LIDENT">token</span></a><span class="COMMA">,</span> <a href="#local_startp_49"><span class="LIDENT">startp</span></a><span class="COMMA">,</span> <a href="#local_endp_50"><span class="LIDENT">endp</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_parser_47"><span class="LIDENT">parser</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-IncrementalEngine"><span class="MODULE">module</span> <span class="UIDENT">IncrementalEngine</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-IncrementalEngine.type-position"><span class="TYPE">type</span> <span class="LIDENT">position</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a></span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <span class="UIDENT">General</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature describes the incremental LR engine. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* In this mode, the user controls the lexer, and the parser suspends
   itself when it needs to read a new token. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">INCREMENTAL_ENGINE</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-token"><span class="TYPE">type</span> <span class="LIDENT">token</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A value of type [production] is (an index for) a production. The start
     productions (which do not exist in an \mly file, but are constructed by
     Menhir internally) are not part of this type. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-production"><span class="TYPE">type</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a checkpoint] represents an intermediate or final state of the
     parser. An intermediate checkpoint is a suspension: it records the parser's
     current state, and allows parsing to be resumed. The parameter ['a] is
     the type of the semantic value that will eventually be produced if the
     parser succeeds. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [Accepted] and [Rejected] are final checkpoints. [Accepted] carries a
     semantic value. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [InputNeeded] is an intermediate checkpoint. It means that the parser wishes
     to read one token before continuing. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [Shifting] is an intermediate checkpoint. It means that the parser is taking
     a shift transition. It exposes the state of the parser before and after
     the transition. The Boolean parameter tells whether the parser intends to
     request a new token after this transition. (It always does, except when
     it is about to accept.) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [AboutToReduce] is an intermediate checkpoint. It means that the parser is
     about to perform a reduction step. It exposes the parser's current
     state as well as the production that is about to be reduced. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [HandlingError] is an intermediate checkpoint. It means that the parser has
     detected an error and is currently handling it, in several steps. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A value of type ['a env] represents a configuration of the automaton:
     current state, stack, lookahead token, etc. The parameter ['a] is the
     type of the semantic value that will eventually be produced if the parser
     succeeds. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In normal operation, the parser works with checkpoints: see the functions
     [offer] and [resume]. However, it is also possible to work directly with
     environments (see the functions [pop], [force_reduction], and [feed]) and
     to reconstruct a checkpoint out of an environment (see [input_needed]).
     This is considered advanced functionality; its purpose is to allow error
     recovery strategies to be programmed by the user. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-env"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span> <span class="PRIVATE">private</span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-InputNeeded"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-InputNeeded"><span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span></span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-Shifting"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-Shifting"><span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="LIDENT">bool</span></span></span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-AboutToReduce"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-AboutToReduce"><span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="LIDENT">production</span></span></span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-HandlingError"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-HandlingError"><span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span></span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-Accepted"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-Accepted"><span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span></span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-checkpoint.constructor-Rejected"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-checkpoint.constructor-Rejected"><span class="BAR">|</span> <span class="UIDENT">Rejected</span></span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [offer] allows the user to resume the parser after it has suspended
     itself with a checkpoint of the form [InputNeeded env]. [offer] expects
     the old checkpoint as well as a new token and produces a new checkpoint.
     It does not raise any exception. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-offer"><span class="VAL">val</span> <span class="LIDENT">offer</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">token</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [resume] allows the user to resume the parser after it has suspended
     itself with a checkpoint of the form [Shifting _], [AboutToReduce _], or
     [HandlingError _]. [resume] expects the old checkpoint and produces a
     new checkpoint. It does not raise any exception. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The optional argument [strategy] influences the manner in which [resume]
     deals with checkpoints of the form [HandlingError _]. Its default value
     is [`Legacy]. It can be briefly described as follows:

     - If the [error] token is used only to report errors (that is, if the
       [error] token appears only at the end of a production, whose semantic
       action raises an exception) then the simplified strategy should be
       preferred. (This includes the case where the [error] token does not
       appear at all in the grammar.)

     - If the [error] token is used to recover after an error, or if
       perfect backward compatibility is required, the legacy strategy
       should be selected.

     More details on these strategies appear in the file [Engine.ml]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-strategy"><span class="TYPE">type</span> <span class="LIDENT">strategy</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-resume"><span class="VAL">val</span> <span class="LIDENT">resume</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="OPTLABEL">?strategy:</span><span class="LIDENT">strategy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A token supplier is a function of no arguments which delivers a new token
     (together with its start and end positions) every time it is called. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-supplier"><span class="TYPE">type</span> <span class="LIDENT">supplier</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A pair of a lexer and a lexing buffer can be easily turned into a
     supplier. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-lexer_lexbuf_to_supplier"><span class="VAL">val</span> <span class="LIDENT">lexer_lexbuf_to_supplier</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">supplier</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The functions [offer] and [resume] are sufficient to write a parser loop.
     One can imagine many variations (which is why we expose these functions
     in the first place!). Here, we expose a few variations of the main loop,
     ready for use. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop supplier checkpoint] begins parsing from [checkpoint], reading
     tokens from [supplier]. It continues parsing until it reaches a
     checkpoint of the form [Accepted v] or [Rejected]. In the former case, it
     returns [v]. In the latter case, it raises the exception [Error].
     The optional argument [strategy], whose default value is [Legacy],
     is passed to [resume] and influences the error-handling strategy. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-loop"><span class="VAL">val</span> <span class="LIDENT">loop</span><span class="COLON">:</span> <span class="OPTLABEL">?strategy:</span><span class="LIDENT">strategy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">supplier</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop_handle succeed fail supplier checkpoint] begins parsing from
     [checkpoint], reading tokens from [supplier]. It continues parsing until
     it reaches a checkpoint of the form [Accepted v] or [HandlingError env]
     (or [Rejected], but that should not happen, as [HandlingError _] will be
     observed first). In the former case, it calls [succeed v]. In the latter
     case, it calls [fail] with this checkpoint. It cannot raise [Error].

     This means that Menhir's error-handling procedure does not get a chance
     to run. For this reason, there is no [strategy] parameter. Instead, the
     user can implement her own error handling code, in the [fail]
     continuation. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-loop_handle"><span class="VAL">val</span> <span class="LIDENT">loop_handle</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">supplier</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop_handle_undo] is analogous to [loop_handle], except it passes a pair
     of checkpoints to the failure continuation.

     The first (and oldest) checkpoint is the last [InputNeeded] checkpoint that
     was encountered before the error was detected. The second (and newest)
     checkpoint is where the error was detected, as in [loop_handle]. Going back
     to the first checkpoint can be thought of as undoing any reductions that
     were performed after seeing the problematic token. (These reductions must
     be default reductions or spurious reductions.)

     [loop_handle_undo] must initially be applied to an [InputNeeded] checkpoint.
     The parser's initial checkpoints satisfy this constraint. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-loop_handle_undo"><span class="VAL">val</span> <span class="LIDENT">loop_handle_undo</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">supplier</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [shifts checkpoint] assumes that [checkpoint] has been obtained by
     submitting a token to the parser. It runs the parser from [checkpoint],
     through an arbitrary number of reductions, until the parser either
     accepts this token (i.e., shifts) or rejects it (i.e., signals an error).
     If the parser decides to shift, then [Some env] is returned, where [env]
     is the parser's state just before shifting. Otherwise, [None] is
     returned. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* It is desirable that the semantic actions be side-effect free, or that
     their side-effects be harmless (replayable). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-shifts"><span class="VAL">val</span> <span class="LIDENT">shifts</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [acceptable] allows testing, after an error has been
     detected, which tokens would have been accepted at this point. It is
     implemented using [shifts]. Its argument should be an [InputNeeded]
     checkpoint. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* For completeness, one must undo any spurious reductions before carrying out
     this test -- that is, one must apply [acceptable] to the FIRST checkpoint
     that is passed by [loop_handle_undo] to its failure continuation. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This test causes some semantic actions to be run! The semantic actions
     should be side-effect free, or their side-effects should be harmless. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The position [pos] is used as the start and end positions of the
     hypothetical token, and may be picked up by the semantic actions. We
     suggest using the position where the error was detected. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-acceptable"><span class="VAL">val</span> <span class="LIDENT">acceptable</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The abstract type ['a lr1state] describes the non-initial states of the
     LR(1) automaton. The index ['a] represents the type of the semantic value
     associated with this state's incoming symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-lr1state"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The states of the LR(1) automaton are numbered (from 0 and up). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-number"><span class="VAL">val</span> <span class="LIDENT">number</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">lr1state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Productions are numbered. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [find_production i] requires the index [i] to be valid. Use with care. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-production_index"><span class="VAL">val</span> <span class="LIDENT">production_index</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-find_production"><span class="VAL">val</span> <span class="LIDENT">find_production</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* An element is a pair of a non-initial state [s] and a semantic value [v]
     associated with the incoming symbol of this state. The idea is, the value
     [v] was pushed onto the stack just before the state [s] was entered. Thus,
     for some type ['a], the state [s] has type ['a lr1state] and the value [v]
     has type ['a]. In other words, the type [element] is an existential type. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-element"><span class="TYPE">type</span> <span class="LIDENT">element</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-IncrementalEngine.module-type-EVERYTHING.type-element.constructor-Element"><span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-element.constructor-Element"><span class="BAR">|</span> <span class="UIDENT">Element</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">element</span></span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The parser's stack is (or, more precisely, can be viewed as) a stream of
     elements. The type [stream] is defined by the module [General]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* As of 2017/03/31, the types [stream] and [stack] and the function [stack]
     are DEPRECATED. They might be removed in the future. An alternative way
     of inspecting the stack is via the functions [top] and [pop]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.type-stack"><span class="TYPE">type</span> <span class="LIDENT">stack</span> <span class="EQUAL">=</span> <span class="COMMENT">(* DEPRECATED *)</span><span class="EOL">
</span>    <span class="LIDENT">element</span> <span class="LIDENT">stream</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This is the parser's stack, a stream of elements. This stream is empty if
     the parser is in an initial state; otherwise, it is non-empty.  The LR(1)
     automaton's current state is the one found in the top element of the
     stack. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-stack"><span class="VAL">val</span> <span class="LIDENT">stack</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">stack</span></span> <span class="COMMENT">(* DEPRECATED *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [top env] returns the parser's top stack element. The state contained in
     this stack element is the current state of the automaton. If the stack is
     empty, [None] is returned. In that case, the current state of the
     automaton must be an initial state. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-top"><span class="VAL">val</span> <span class="LIDENT">top</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">element</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [pop_many i env] pops [i] cells off the automaton's stack. This is done
     via [i] successive invocations of [pop]. Thus, [pop_many 1] is [pop]. The
     index [i] must be nonnegative. The time complexity is O(i). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-pop_many"><span class="VAL">val</span> <span class="LIDENT">pop_many</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [get i env] returns the parser's [i]-th stack element. The index [i] is
     0-based: thus, [get 0] is [top]. If [i] is greater than or equal to the
     number of elements in the stack, [None] is returned. The time complexity
     is O(i). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-get"><span class="VAL">val</span> <span class="LIDENT">get</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">element</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [current_state_number env] is (the integer number of) the automaton's
     current state. This works even if the automaton's stack is empty, in
     which case the current state is an initial state. This number can be
     passed as an argument to a [message] function generated by [menhir
     --compile-errors]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-current_state_number"><span class="VAL">val</span> <span class="LIDENT">current_state_number</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [equal env1 env2] tells whether the parser configurations [env1] and
     [env2] are equal in the sense that the automaton's current state is the
     same in [env1] and [env2] and the stack is *physically* the same in
     [env1] and [env2]. If [equal env1 env2] is [true], then the sequence of
     the stack elements, as observed via [pop] and [top], must be the same in
     [env1] and [env2]. Also, if [equal env1 env2] holds, then the checkpoints
     [input_needed env1] and [input_needed env2] must be equivalent. The
     function [equal] has time complexity O(1). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-equal"><span class="VAL">val</span> <span class="LIDENT">equal</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* These are the start and end positions of the current lookahead token. If
     invoked in an initial state, this function returns a pair of twice the
     initial position. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-positions"><span class="VAL">val</span> <span class="LIDENT">positions</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* When applied to an environment taken from a checkpoint of the form
     [AboutToReduce (env, prod)], the function [env_has_default_reduction]
     tells whether the reduction that is about to take place is a default
     reduction. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-env_has_default_reduction"><span class="VAL">val</span> <span class="LIDENT">env_has_default_reduction</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [state_has_default_reduction s] tells whether the state [s] has a default
     reduction. This includes the case where [s] is an accepting state. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-state_has_default_reduction"><span class="VAL">val</span> <span class="LIDENT">state_has_default_reduction</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">lr1state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [pop env] returns a new environment, where the parser's top stack cell
     has been popped off. (If the stack is empty, [None] is returned.) This
     amounts to pretending that the (terminal or nonterminal) symbol that
     corresponds to this stack cell has not been read. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-pop"><span class="VAL">val</span> <span class="LIDENT">pop</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [force_reduction prod env] should be called only if in the state [env]
     the parser is capable of reducing the production [prod]. If this
     condition is satisfied, then this production is reduced, which means that
     its semantic action is executed (this can have side effects!) and the
     automaton makes a goto (nonterminal) transition. If this condition is not
     satisfied, [Invalid_argument _] is raised. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-force_reduction"><span class="VAL">val</span> <span class="LIDENT">force_reduction</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [input_needed env] returns [InputNeeded env]. That is, out of an [env]
     that might have been obtained via a series of calls to the functions
     [pop], [force_reduction], [feed], etc., it produces a checkpoint, which
     can be used to resume normal parsing, by supplying this checkpoint as an
     argument to [offer]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This function should be used with some care. It could &quot;mess up the
     lookahead&quot; in the sense that it allows parsing to resume in an arbitrary
     state [s] with an arbitrary lookahead symbol [t], even though Menhir's
     reachability analysis (menhir --list-errors) might well think that it is
     impossible to reach this particular configuration. If one is using
     Menhir's new error reporting facility, this could cause the parser to
     reach an error state for which no error message has been prepared. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INCREMENTAL_ENGINE.val-input_needed"><span class="VAL">val</span> <span class="LIDENT">input_needed</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature is a fragment of the inspection API that is made available
   to the user when [--inspection] is used. This fragment contains type
   definitions for symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-IncrementalEngine.module-type-SYMBOLS"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">SYMBOLS</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a terminal] represents a terminal symbol. The type ['a
     nonterminal] represents a nonterminal symbol. In both cases, the index
     ['a] represents the type of the semantic values associated with this
     symbol. The concrete definitions of these types are generated. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-SYMBOLS.type-terminal"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-SYMBOLS.type-nonterminal"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">nonterminal</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a symbol] represents a terminal or nonterminal symbol. It is
     the disjoint union of the types ['a terminal] and ['a nonterminal]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-SYMBOLS.type-symbol"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Make.type-symbol.constructor-T"><span id="module-InspectionTableFormat.module-type-TABLES.type-symbol.constructor-T"><span id="module-IncrementalEngine.module-type-INSPECTION.type-symbol.constructor-T"><span id="module-IncrementalEngine.module-type-SYMBOLS.type-symbol.constructor-T"><span class="BAR">|</span> <span class="UIDENT">T</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span></span></span></span></span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Make.type-symbol.constructor-N"><span id="module-InspectionTableFormat.module-type-TABLES.type-symbol.constructor-N"><span id="module-IncrementalEngine.module-type-INSPECTION.type-symbol.constructor-N"><span id="module-IncrementalEngine.module-type-SYMBOLS.type-symbol.constructor-N"><span class="BAR">|</span> <span class="UIDENT">N</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span></span></span></span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type [xsymbol] is an existentially quantified version of the type
     ['a symbol]. This type is useful in situations where the index ['a]
     is not statically known. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-SYMBOLS.type-xsymbol"><span class="TYPE">type</span> <span class="LIDENT">xsymbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Make.type-xsymbol.constructor-X"><span id="module-InspectionTableFormat.module-type-TABLES.type-xsymbol.constructor-X"><span id="module-IncrementalEngine.module-type-INSPECTION.type-xsymbol.constructor-X"><span id="module-IncrementalEngine.module-type-SYMBOLS.type-xsymbol.constructor-X"><span class="BAR">|</span> <span class="UIDENT">X</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span></span></span></span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature describes the inspection API that is made available to the
   user when [--inspection] is used. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-IncrementalEngine.module-type-INSPECTION"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">INSPECTION</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The types of symbols are described above. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">SYMBOLS</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a lr1state] is meant to be the same as in [INCREMENTAL_ENGINE]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.type-lr1state"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type [production] is meant to be the same as in [INCREMENTAL_ENGINE].
     It represents a production of the grammar. A production can be examined
     via the functions [lhs] and [rhs] below. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.type-production"><span class="TYPE">type</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* An LR(0) item is a pair of a production [prod] and a valid index [i] into
     this production. That is, if the length of [rhs prod] is [n], then [i] is
     comprised between 0 and [n], inclusive. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.type-item"><span class="TYPE">type</span> <span class="LIDENT">item</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">production</span> <span class="STAR">*</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Ordering functions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-compare_terminals"><span class="VAL">val</span> <span class="LIDENT">compare_terminals</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-compare_nonterminals"><span class="VAL">val</span> <span class="LIDENT">compare_nonterminals</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-compare_symbols"><span class="VAL">val</span> <span class="LIDENT">compare_symbols</span><span class="COLON">:</span> <span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-compare_productions"><span class="VAL">val</span> <span class="LIDENT">compare_productions</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-compare_items"><span class="VAL">val</span> <span class="LIDENT">compare_items</span><span class="COLON">:</span> <span class="LIDENT">item</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">item</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [incoming_symbol s] is the incoming symbol of the state [s], that is,
     the symbol that the parser must recognize before (has recognized when)
     it enters the state [s]. This function gives access to the semantic
     value [v] stored in a stack element [Element (s, v, _, _)]. Indeed,
     by case analysis on the symbol [incoming_symbol s], one discovers the
     type ['a] of the value [v]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-incoming_symbol"><span class="VAL">val</span> <span class="LIDENT">incoming_symbol</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [items s] is the set of the LR(0) items in the LR(0) core of the LR(1)
     state [s]. This set is not epsilon-closed. This set is presented as a
     list, in an arbitrary order. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-items"><span class="VAL">val</span> <span class="LIDENT">items</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">lr1state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">item</span> <span class="LIDENT">list</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [lhs prod] is the left-hand side of the production [prod]. This is
     always a non-terminal symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-lhs"><span class="VAL">val</span> <span class="LIDENT">lhs</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [rhs prod] is the right-hand side of the production [prod]. This is
     a (possibly empty) sequence of (terminal or nonterminal) symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-rhs"><span class="VAL">val</span> <span class="LIDENT">rhs</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span> <span class="LIDENT">list</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [nullable nt] tells whether the non-terminal symbol [nt] is nullable.
     That is, it is true if and only if this symbol produces the empty
     word [epsilon]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-nullable"><span class="VAL">val</span> <span class="LIDENT">nullable</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [first nt t] tells whether the FIRST set of the nonterminal symbol [nt]
     contains the terminal symbol [t]. That is, it is true if and only if
     [nt] produces a word that begins with [t]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-first"><span class="VAL">val</span> <span class="LIDENT">first</span><span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [xfirst] is analogous to [first], but expects a first argument of type
     [xsymbol] instead of [_ terminal]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-xfirst"><span class="VAL">val</span> <span class="LIDENT">xfirst</span><span class="COLON">:</span> <span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [foreach_terminal] enumerates the terminal symbols, including [error].
     [foreach_terminal_but_error] enumerates the terminal symbols, excluding
     [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-foreach_terminal"><span class="VAL">val</span> <span class="LIDENT">foreach_terminal</span><span class="COLON">:</span>           <span class="LPAREN">(</span><span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-foreach_terminal_but_error"><span class="VAL">val</span> <span class="LIDENT">foreach_terminal_but_error</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type [env] is meant to be the same as in [INCREMENTAL_ENGINE]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.type-env"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [feed symbol startp semv endp env] causes the parser to consume the
     (terminal or nonterminal) symbol [symbol], accompanied with the semantic
     value [semv] and with the start and end positions [startp] and [endp].
     Thus, the automaton makes a transition, and reaches a new state. The
     stack grows by one cell. This operation is permitted only if the current
     state (as determined by [env]) has an outgoing transition labeled with
     [symbol]. Otherwise, [Invalid_argument _] is raised. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-IncrementalEngine.module-type-INSPECTION.val-feed"><span class="VAL">val</span> <span class="LIDENT">feed</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature combines the incremental API and the inspection API. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-IncrementalEngine.module-type-EVERYTHING"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">EVERYTHING</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">INCREMENTAL_ENGINE</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span id="module-IncrementalEngine.module-type-EVERYTHING.type-xsymbol.constructor-X"><span id="module-IncrementalEngine.module-type-EVERYTHING.type-symbol.constructor-N"><span id="module-IncrementalEngine.module-type-EVERYTHING.type-symbol.constructor-T"><span class="UIDENT">INSPECTION</span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_641"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="COLONEQUAL">:=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span></span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_630"><span class="TYPE">type</span> <span class="LIDENT">production</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">production</span></span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_651"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="COLONEQUAL">:=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span></span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-EngineTypes"><span class="MODULE">module</span> <span class="UIDENT">EngineTypes</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This file defines several types and module types that are used in the
   specification of module [Engine]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* It would be nice if we could keep the structure of stacks and environments
   hidden. However, stacks and environments must be accessible to semantic
   actions, so the following data structure definitions must be public. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A stack is a linked list of cells. A sentinel cell -- which is its own
   successor -- is used to mark the bottom of the stack. The sentinel cell
   itself is not significant -- it contains dummy values. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.type-stack"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">stack</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The state that we should go back to if we pop this stack cell. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This convention means that the state contained in the top stack cell is
     not the current state [env.current]. It also means that the state found
     within the sentinel is a dummy -- it is never consulted. This convention
     is the same as that adopted by the code-based back-end. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_642"><span class="LIDENT">state</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">state</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The semantic value associated with the chunk of input that this cell
     represents. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_631"><span class="LIDENT">semv</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The start and end positions of the chunk of input that this cell
     represents. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_627"><span class="LIDENT">startp</span><span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a><span class="SEMI">;</span></span><span class="EOL">
</span>  <span id="def_626"><span class="LIDENT">endp</span><span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The next cell down in the stack. If this is a self-pointer, then this
     cell is the sentinel, and the stack is conceptually empty. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_636"><span class="LIDENT">next</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">stack</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A parsing environment contains all of the parser's state (except for the
   current program point). *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.type-env"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="LIDENT">env</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If this flag is true, then the first component of [env.triple] should
     be ignored, as it has been logically overwritten with the [error]
     pseudo-token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_644"><span class="LIDENT">error</span><span class="COLON">:</span> <span class="LIDENT">bool</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The last token that was obtained from the lexer, together with its start
     and end positions. Warning: before the first call to the lexer has taken
     place, a dummy (and possibly invalid) token is stored here. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_623"><span class="LIDENT">triple</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">token</span> <span class="STAR">*</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="STAR">*</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The stack. In [CodeBackend], it is passed around on its own,
     whereas, here, it is accessed via the environment. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_632"><span class="LIDENT">stack</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">stack</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The current state. In [CodeBackend], it is passed around on its
     own, whereas, here, it is accessed via the environment. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_620"><span class="LIDENT">current</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">state</span><span class="SEMI">;</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A number of logging hooks are used to (optionally) emit logging messages. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The comments indicate the conventional messages that correspond
   to these hooks in the code-based back-end; see [CodeBackend]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.module-type-LOG"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">LOG</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.type-state"><span class="TYPE">type</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.type-terminal"><span class="TYPE">type</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.type-production"><span class="TYPE">type</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* State %d: *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-state"><span class="VAL">val</span> <span class="LIDENT">state</span><span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Shifting (&lt;terminal&gt;) to state &lt;state&gt; *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-shift"><span class="VAL">val</span> <span class="LIDENT">shift</span><span class="COLON">:</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Reducing a production should be logged either as a reduction
     event (for regular productions) or as an acceptance event (for
     start productions). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Reducing production &lt;production&gt; / Accepting *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-reduce_or_accept"><span class="VAL">val</span> <span class="LIDENT">reduce_or_accept</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Lookahead token is now &lt;terminal&gt; (&lt;pos&gt;-&lt;pos&gt;) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-lookahead_token"><span class="VAL">val</span> <span class="LIDENT">lookahead_token</span><span class="COLON">:</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Initiating error handling *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-initiating_error_handling"><span class="VAL">val</span> <span class="LIDENT">initiating_error_handling</span><span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Resuming error handling *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-resuming_error_handling"><span class="VAL">val</span> <span class="LIDENT">resuming_error_handling</span><span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Handling error in state &lt;state&gt; *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-LOG.val-handling_error"><span class="VAL">val</span> <span class="LIDENT">handling_error</span><span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature describes the parameters that must be supplied to the LR
   engine. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.module-type-TABLE"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">TABLE</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of automaton states. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-state"><span class="TYPE">type</span> <span class="LIDENT">state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* States are numbered. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-number"><span class="VAL">val</span> <span class="LIDENT">number</span><span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of tokens. These can be thought of as real tokens, that is,
     tokens returned by the lexer. They carry a semantic value. This type
     does not include the [error] pseudo-token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-token"><span class="TYPE">type</span> <span class="LIDENT">token</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of terminal symbols. These can be thought of as integer codes.
     They do not carry a semantic value. This type does include the [error]
     pseudo-token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-terminal"><span class="TYPE">type</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of nonterminal symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-nonterminal"><span class="TYPE">type</span> <span class="LIDENT">nonterminal</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of semantic values. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-semantic_value"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A token is conceptually a pair of a (non-[error]) terminal symbol and
     a semantic value. The following two functions are the pair projections. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-token2terminal"><span class="VAL">val</span> <span class="LIDENT">token2terminal</span><span class="COLON">:</span> <span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-token2value"><span class="VAL">val</span> <span class="LIDENT">token2value</span><span class="COLON">:</span> <span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Even though the [error] pseudo-token is not a real token, it is a
     terminal symbol. Furthermore, for regularity, it must have a semantic
     value. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-error_terminal"><span class="VAL">val</span> <span class="LIDENT">error_terminal</span><span class="COLON">:</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-error_value"><span class="VAL">val</span> <span class="LIDENT">error_value</span><span class="COLON">:</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [foreach_terminal] allows iterating over all terminal symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-foreach_terminal"><span class="VAL">val</span> <span class="LIDENT">foreach_terminal</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type of productions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-production"><span class="TYPE">type</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-production_index"><span class="VAL">val</span> <span class="LIDENT">production_index</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-find_production"><span class="VAL">val</span> <span class="LIDENT">find_production</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If a state [s] has a default reduction on production [prod], then, upon
     entering [s], the automaton should reduce [prod] without consulting the
     lookahead token. The following function allows determining which states
     have default reductions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Instead of returning a value of a sum type -- either [DefRed prod], or
     [NoDefRed] -- it accepts two continuations, and invokes just one of
     them. This mechanism allows avoiding a memory allocation. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-default_reduction"><span class="VAL">val</span> <span class="LIDENT">default_reduction</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* An LR automaton can normally take three kinds of actions: shift, reduce,
     or fail. (Acceptance is a particular case of reduction: it consists in
     reducing a start production.) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* There are two variants of the shift action. [shift/discard s] instructs
     the automaton to discard the current token, request a new one from the
     lexer, and move to state [s]. [shift/nodiscard s] instructs it to move to
     state [s] without requesting a new token. This instruction should be used
     when [s] has a default reduction on [#]. See [CodeBackend.gettoken] for
     details. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This is the automaton's action table. It maps a pair of a state and a
     terminal symbol to an action. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Instead of returning a value of a sum type -- one of shift/discard,
     shift/nodiscard, reduce, or fail -- this function accepts three
     continuations, and invokes just one them. This mechanism allows avoiding
     a memory allocation. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In summary, the parameters to [action] are as follows:

     - the first two parameters, a state and a terminal symbol, are used to
       look up the action table;

     - the next parameter is the semantic value associated with the above
       terminal symbol; it is not used, only passed along to the shift
       continuation, as explained below;

     - the shift continuation expects an environment; a flag that tells
       whether to discard the current token; the terminal symbol that
       is being shifted; its semantic value; and the target state of
       the transition;

     - the reduce continuation expects an environment and a production;

     - the fail continuation expects an environment;

     - the last parameter is the environment; it is not used, only passed
       along to the selected continuation. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-action"><span class="VAL">val</span> <span class="LIDENT">action</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">semantic_value</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">semantic_value</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="QUOTE">'</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">answer</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(**[maybe_shift_t s t] determines whether there exists a transition out of
     the state [s], labeled with the terminal symbol [t], to some state
     [s']. If so, it returns [Some s']. Otherwise, it returns [None]. *)</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-maybe_shift_t"><span class="VAL">val</span> <span class="LIDENT">maybe_shift_t</span> <span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="DOCSTRING">(**[may_reduce_prod s t prod] determines whether in the state [s], with
     lookahead symbol [t], the automaton reduces production [prod]. This test
     accounts for the possible existence of a default reduction. *)</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-may_reduce_prod"><span class="VAL">val</span> <span class="LIDENT">may_reduce_prod</span> <span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This is the automaton's goto table. This table maps a pair of a state
     and a nonterminal symbol to a new state. By extension, it also maps a
     pair of a state and a production to a new state. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [goto_nt] can be applied to [s] and [nt] ONLY if the state
     [s] has an outgoing transition labeled [nt]. Otherwise, its result is
     undefined. Similarly, the call [goto_prod prod s] is permitted ONLY if
     the state [s] has an outgoing transition labeled with the nonterminal
     symbol [lhs prod]. The function [maybe_goto_nt] involves an additional
     dynamic check and CAN be called even if there is no outgoing transition. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-goto_nt"><span class="VAL">val</span>       <span class="LIDENT">goto_nt</span>  <span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-goto_prod"><span class="VAL">val</span>       <span class="LIDENT">goto_prod</span><span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span>  <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-maybe_goto_nt"><span class="VAL">val</span> <span class="LIDENT">maybe_goto_nt</span><span class="COLON">:</span>   <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">state</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [lhs prod] returns the left-hand side of production [prod],
     a nonterminal symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-lhs"><span class="VAL">val</span> <span class="LIDENT">lhs</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">nonterminal</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [is_start prod] tells whether the production [prod] is a start production. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-is_start"><span class="VAL">val</span> <span class="LIDENT">is_start</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* By convention, a semantic action is responsible for:

     1. fetching whatever semantic values and positions it needs off the stack;

     2. popping an appropriate number of cells off the stack, as dictated
        by the length of the right-hand side of the production;

     3. computing a new semantic value, as well as new start and end positions;

     4. pushing a new stack cell, which contains the three values
        computed in step 3;

     5. returning the new stack computed in steps 2 and 4.

     Point 1 is essentially forced upon us: if semantic values were fetched
     off the stack by this interpreter, then the calling convention for
     semantic actions would be variadic: not all semantic actions would have
     the same number of arguments. The rest follows rather naturally. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Semantic actions are allowed to raise [Error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.exception-Error"><span id="module-EngineTypes.module-type-TABLE.exception-Error"><span class="EXCEPTION">exception</span> <span class="UIDENT">Error</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.type-semantic_action"><span class="TYPE">type</span> <span class="LIDENT">semantic_action</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="LIDENT">semantic_value</span><span class="COMMA">,</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span class="LIDENT">stack</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-semantic_action"><span class="VAL">val</span> <span class="LIDENT">semantic_action</span><span class="COLON">:</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">semantic_action</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [may_reduce state prod] tests whether the state [state] is capable of
     reducing the production [prod]. This function is currently costly and
     is not used by the core LR engine. It is used in the implementation
     of certain functions, such as [force_reduction], which allow the engine
     to be driven programmatically. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-may_reduce"><span class="VAL">val</span> <span class="LIDENT">may_reduce</span><span class="COLON">:</span> <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">production</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If the flag [log] is false, then the logging functions are not called.
     If it is [true], then they are called. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.val-log"><span class="VAL">val</span> <span class="LIDENT">log</span> <span class="COLON">:</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The logging hooks required by the LR engine. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-TABLE.module-Log"><span class="MODULE">module</span> <span class="UIDENT">Log</span> <span class="COLON">:</span> <span class="UIDENT">LOG</span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_639"><span class="TYPE">type</span> <span class="LIDENT">state</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>     <span class="AND">and</span> <span id="def_646"><span class="TYPE">type</span> <span class="LIDENT">terminal</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>     <span class="AND">and</span> <span id="def_621"><span class="TYPE">type</span> <span class="LIDENT">production</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">production</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature describes the monolithic (traditional) LR engine. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* In this interface, the parser controls the lexer. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">MONOLITHIC_ENGINE</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE.type-state"><span class="TYPE">type</span> <span class="LIDENT">state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE.type-token"><span class="TYPE">type</span> <span class="LIDENT">token</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE.type-semantic_value"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* An entry point to the engine requires a start state, a lexer, and a lexing
     buffer. It either succeeds and produces a semantic value, or fails and
     raises [Error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-ENGINE.exception-Error"><span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE.exception-Error"><span class="EXCEPTION">exception</span> <span class="UIDENT">Error</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-MONOLITHIC_ENGINE.val-entry"><span class="VAL">val</span> <span class="LIDENT">entry</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="COMMENT">(* strategy: *)</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="COMMENT">(* see [IncrementalEngine] *)</span><span class="EOL">
</span>    <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The following signatures describe the incremental LR engine. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* First, see [INCREMENTAL_ENGINE] in the file [IncrementalEngine.ml]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The [start] function is set apart because we do not wish to publish
   it as part of the generated [parser.mli] file. Instead, the table
   back-end will publish specialized versions of it, with a suitable
   type cast. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.module-type-INCREMENTAL_ENGINE_START"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">INCREMENTAL_ENGINE_START</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [start] is an entry point. It requires a start state and a start position
     and begins the parsing process. If the lexer is based on an OCaml lexing
     buffer, the start position should be [lexbuf.lex_curr_p]. [start] produces
     a checkpoint, which usually will be an [InputNeeded] checkpoint. (It could
     be [Accepted] if this starting state accepts only the empty word. It could
     be [Rejected] if this starting state accepts no word at all.) It does not
     raise any exception. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [start s pos] should really produce a checkpoint of type ['a checkpoint],
     for a fixed ['a] that depends on the state [s]. We cannot express this, so
     we use [semantic_value checkpoint], which is safe. The table back-end uses
     [Obj.magic] to produce safe specialized versions of [start]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-INCREMENTAL_ENGINE_START.type-state"><span class="TYPE">type</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-INCREMENTAL_ENGINE_START.type-semantic_value"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-INCREMENTAL_ENGINE_START.type-checkpoint"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-EngineTypes.module-type-INCREMENTAL_ENGINE_START.val-start"><span class="VAL">val</span> <span class="LIDENT">start</span><span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">state</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">semantic_value</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* --------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature describes the LR engine, which combines the monolithic
   and incremental interfaces. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-EngineTypes.module-type-ENGINE"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">ENGINE</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">MONOLITHIC_ENGINE</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span id="module-EngineTypes.module-type-ENGINE.type-element.constructor-Element"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-Rejected"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-Accepted"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-HandlingError"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-AboutToReduce"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-Shifting"><span id="module-EngineTypes.module-type-ENGINE.type-checkpoint.constructor-InputNeeded"><span class="UIDENT">IncrementalEngine</span><span class="DOT">.</span><span class="UIDENT">INCREMENTAL_ENGINE</span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_634"><span class="TYPE">type</span> <span class="LIDENT">token</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">token</span></span><span class="EOL">
</span>     <span class="AND">and</span> <span id="def_645"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="EQUAL">=</span> <span class="LIDENT">state</span></span></span></span></span></span></span></span></span> <span class="COMMENT">(* useful for us; hidden from the end user *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">INCREMENTAL_ENGINE_START</span><span class="EOL">
</span>    <span class="WITH">with</span> <span id="def_629"><span class="TYPE">type</span> <span class="LIDENT">state</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">state</span></span><span class="EOL">
</span>     <span class="AND">and</span> <span id="def_622"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span> <span class="COLONEQUAL">:=</span> <span class="LIDENT">semantic_value</span></span><span class="EOL">
</span>     <span class="AND">and</span> <span id="def_617"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="COLONEQUAL">:=</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-Engine"><span class="MODULE">module</span> <span class="UIDENT">Engine</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Engine.type-position"><span class="TYPE">type</span> <span class="LIDENT">position</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-position"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">position</span></a></span><span class="EOL">
</span><span class="OPEN">open</span> <span class="UIDENT">EngineTypes</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The LR parsing engine. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This module is used:

   - at compile time, if so requested by the user, via the --interpret options;
   - at run time, in the table-based back-end. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Engine.module-Make"><span class="MODULE">module</span> <span class="UIDENT">Make</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="COLON">:</span> <span class="UIDENT">TABLE</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This propagates type and exception definitions. The functions [number],
     [production_index], [find_production], too, are defined by this [include]
     declaration. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">T</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-env"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="LIDENT">semantic_value</span><span class="COMMA">,</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">env</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type [checkpoint] represents an intermediate or final result of the
     parser. See [EngineTypes]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type [checkpoint] is presented to the user as a private type (see
     [IncrementalEngine]). This prevents the user from manufacturing
     checkpoints (i.e., continuations) that do not make sense. (Such
     continuations could potentially violate the LR invariant and lead to
     crashes.) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* 2017/03/29 Although [checkpoint] is a private type, we now expose a
     constructor function, [input_needed]. This function allows manufacturing
     a checkpoint out of an environment. For this reason, the type [env] must
     also be parameterized with ['a]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-checkpoint"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-InputNeeded"><span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-Shifting"><span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="LIDENT">bool</span></span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-AboutToReduce"><span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="STAR">*</span> <span class="LIDENT">production</span></span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-HandlingError"><span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span></span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-Accepted"><span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-checkpoint.constructor-Rejected"><span class="BAR">|</span> <span class="UIDENT">Rejected</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* As of 2020/12/16, we introduce a choice between multiple error handling
     strategies. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Regardless of the strategy, when a syntax error is encountered, the
     function [initiate] is called, a [HandlingError] checkpoint is produced,
     and (after resuming) the function [error] is called. This function checks
     whether the current state allows shifting, reducing, or neither, when the
     lookahead token is [error]. Its behavior, then, depends on the strategy,
     as follows. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In the legacy strategy, which until now was the only strategy,

     - If shifting is possible, then a [Shifting] checkpoint is produced,
       whose field [please_discard] is [true], so (after resuming) an
       [InputNeeded] checkpoint is produced, and (after a new token
       has been provided) the parser leaves error-handling mode and
       returns to normal mode.

     - If reducing is possible, then one or more reductions are performed.
       Default reductions are announced via [AboutToReduce] checkpoints,
       whereas ordinary reductions are performed silently. (It is unclear
       why this is so.) The parser remains in error-handling mode, so
       another [HandlingError] checkpoint is produced, and the function
       [error] is called again.

     - If neither action is possible and if the stack is nonempty, then a
       cell is popped off the stack, then a [HandlingError] checkpoint is
       produced, and the function [error] is called again.

     - If neither action is possible and if the stack is empty, then the
       parse dies with a [Reject] checkpoint. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The simplified strategy differs from the legacy strategy as follows:

     - When shifting, a [Shifting] checkpoint is produced, whose field
       [please_discard] is [false], so the parser does not request another
       token, and the parser remains in error-handling mode. (If the
       destination state of this shift transition has a default reduction,
       then the parser will perform this reduction as its next step.)

     - When reducing, all reductions are announced by [AboutToReduce]
       checkpoints.

     - If neither shifting [error] nor reducing on [error] is possible,
       then the parser dies with a [Reject] checkpoint. (The parser does
       not attempt to pop cells off the stack one by one.)

     This simplified strategy is appropriate when the grammar uses the [error]
     token in a limited way, where the [error] token always appears at the end
     of a production whose semantic action raises an exception (whose purpose
     is to signal a syntax error and perhaps produce a custom message). Then,
     the parser must not request one token past the syntax error. (In a REPL,
     that would be undesirable.) It must perform as many reductions on [error]
     as possible, then (if possible) shift the [error] token and move to a new
     state where a default reduction will be possible. (Because the [error]
     token always appears at the end of a production, no other action can
     exist in that state, so a default reduction must exist.) The semantic
     action raises an exception, and that is it. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Let us note that it is also possible to perform no error handling at
     all, or to perform customized error handling, by stopping as soon as
     the first [ErrorHandling] checkpoint appears. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-strategy"><span class="TYPE">type</span> <span class="LIDENT">strategy</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In the code-based back-end, the [run] function is sometimes responsible
     for pushing a new cell on the stack. This is motivated by code sharing
     concerns. In this interpreter, there is no such concern; [run]'s caller
     is always responsible for updating the stack. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In the code-based back-end, there is a [run] function for each state
     [s]. This function can behave in two slightly different ways, depending
     on when it is invoked, or (equivalently) depending on [s].

     If [run] is invoked after shifting a terminal symbol (or, equivalently,
     if [s] has a terminal incoming symbol), then [run] discards a token,
     unless [s] has a default reduction on [#]. (Indeed, in that case,
     requesting the next token might drive the lexer off the end of the input
     stream.)

     If, on the other hand, [run] is invoked after performing a goto
     transition, or invoked directly by an entry point, then there is nothing
     to discard.

     These two cases are reflected in [CodeBackend.gettoken].

     Here, the code is structured in a slightly different way. It is up to the
     caller of [run] to indicate whether to discard a token, via the parameter
     [please_discard]. This flag is set when [s] is being entered by shifting
     a terminal symbol and [s] does not have a default reduction on [#]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The following recursive group of functions are tail recursive, produce a
     checkpoint of type [semantic_value checkpoint], and cannot raise an
     exception. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-run"><span class="LIDENT">run</span></span> <span id="local_env_51"><span class="LIDENT">env</span></span> <span id="local_please_discard_52"><span class="LIDENT">please_discard</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Log the fact that we just entered this state. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">state</span> <a href="#local_env_51"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* If [please_discard] is set, we discard the current lookahead token and
       fetch the next one. In order to request a token from the user, we
       return an [InputNeeded] continuation, which, when invoked by the user,
       will take us to [discard]. If [please_discard] is not set, we skip this
       step and jump directly to [check_for_default_reduction]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_please_discard_52"><span class="LIDENT">please_discard</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">InputNeeded</span> <a href="#local_env_51"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="LIDENT">check_for_default_reduction</span> <a href="#local_env_51"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [discard env triple] stores [triple] into [env], overwriting the previous
     token. It is invoked by [offer], which itself is invoked by the user in
     response to an [InputNeeded] checkpoint. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-discard"><span class="LIDENT">discard</span></span> <span id="local_env_53"><span class="LIDENT">env</span></span> <span id="local_triple_54"><span class="LIDENT">triple</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_633"><span class="LPAREN">(</span><span id="local_token_55"><span class="LIDENT">token</span></span><span class="COMMA">,</span> <span id="local_startp_56"><span class="LIDENT">startp</span></span><span class="COMMA">,</span> <span id="local_endp_57"><span class="LIDENT">endp</span></span><span class="RPAREN">)</span></span> <span class="EQUAL">=</span> <a href="#local_triple_54"><span class="LIDENT">triple</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">lookahead_token</span> <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token2terminal</span> <a href="#local_token_55"><span class="LIDENT">token</span></a><span class="RPAREN">)</span> <a href="#local_startp_56"><span class="LIDENT">startp</span></a> <a href="#local_endp_57"><span class="LIDENT">endp</span></a><span class="EOL">
</span>    <span class="END">end</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_env_58"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_env_53"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <span class="LIDENT">error</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span> <a href="#local_triple_54"><span class="LIDENT">triple</span></a> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">check_for_default_reduction</span> <a href="#local_env_58"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-check_for_default_reduction"><span class="LIDENT">check_for_default_reduction</span></span> <span id="local_env_59"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Examine what situation we are in. This case analysis is analogous to
       that performed in [CodeBackend.gettoken], in the sub-case where we do
       not have a terminal incoming symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">default_reduction</span><span class="EOL">
</span>      <a href="#local_env_59"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="EOL">
</span>      <span class="LIDENT">announce_reduce</span>       <span class="COMMENT">(* there is a default reduction; perform it *)</span><span class="EOL">
</span>      <span class="LIDENT">check_for_error_token</span> <span class="COMMENT">(* there is none; continue below *)</span><span class="EOL">
</span>      <a href="#local_env_59"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-check_for_error_token"><span class="LIDENT">check_for_error_token</span></span> <span id="local_env_60"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* There is no default reduction. Consult the current lookahead token
       so as to determine which action should be taken. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Peeking at the first input token, without taking it off the input
       stream, is done by reading [env.triple]. We are careful to first
       check [env.error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Note that, if [please_discard] was true, then we have just called
       [discard], so the lookahead token cannot be [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Returning [HandlingError env] is like calling [error ~strategy env]
       directly, except it allows the user to regain control and choose an
       error-handling strategy. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_env_60"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">error</span> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>        <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">resuming_error_handling</span><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="UIDENT">HandlingError</span> <a href="#local_env_60"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_650"><span class="LPAREN">(</span><span id="local_token_61"><span class="LIDENT">token</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span></span> <span class="EQUAL">=</span> <a href="#local_env_60"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">triple</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="COMMENT">(* We consult the two-dimensional action table, indexed by the
         current state and the current lookahead token, in order to
         determine which action should be taken. *)</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">action</span><span class="EOL">
</span>        <a href="#local_env_60"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span>                    <span class="COMMENT">(* determines a row *)</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token2terminal</span> <a href="#local_token_61"><span class="LIDENT">token</span></a><span class="RPAREN">)</span>       <span class="COMMENT">(* determines a column *)</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token2value</span> <a href="#local_token_61"><span class="LIDENT">token</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="LIDENT">shift</span>                          <span class="COMMENT">(* shift continuation *)</span><span class="EOL">
</span>        <span class="LIDENT">announce_reduce</span>                <span class="COMMENT">(* reduce continuation *)</span><span class="EOL">
</span>        <span class="LIDENT">initiate</span>                       <span class="COMMENT">(* failure continuation *)</span><span class="EOL">
</span>        <a href="#local_env_60"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This function takes care of shift transitions along a terminal symbol.
     (Goto transitions are taken care of within [reduce] below.) The symbol
     can be either an actual token or the [error] pseudo-token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Here, the lookahead token CAN be [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-shift"><span class="LIDENT">shift</span></span> <span id="local_env_62"><span class="LIDENT">env</span></span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_please_discard_63"><span class="LIDENT">please_discard</span></span> <span class="COLON">:</span> <span class="LIDENT">bool</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_terminal_64"><span class="LIDENT">terminal</span></span> <span class="COLON">:</span> <span class="LIDENT">terminal</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_value_65"><span class="LIDENT">value</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_s'_66"><span class="LIDENT">s'</span></span> <span class="COLON">:</span> <span class="LIDENT">state</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Log the transition. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">shift</span> <a href="#local_terminal_64"><span class="LIDENT">terminal</span></a> <a href="#local_s'_66"><span class="LIDENT">s'</span></a><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Push a new cell onto the stack, containing the identity of the
       state that we are leaving. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_647"><span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_startp_67"><span class="LIDENT">startp</span></span><span class="COMMA">,</span> <span id="local_endp_68"><span class="LIDENT">endp</span></span><span class="RPAREN">)</span></span> <span class="EQUAL">=</span> <a href="#local_env_62"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">triple</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_stack_69"><span class="LIDENT">stack</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>      <span class="LIDENT">state</span> <span class="EQUAL">=</span> <a href="#local_env_62"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">semv</span> <span class="EQUAL">=</span> <a href="#local_value_65"><span class="LIDENT">value</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <a href="#local_startp_67"><span class="LIDENT">startp</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <a href="#local_endp_68"><span class="LIDENT">endp</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">next</span> <span class="EQUAL">=</span> <a href="#local_env_62"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Switch to state [s']. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_new_env_70"><span class="LIDENT">new_env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_env_62"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <a href="#local_stack_69"><span class="LIDENT">stack</span></a><span class="SEMI">;</span> <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_s'_66"><span class="LIDENT">s'</span></a> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Expose the transition to the user. (In principle, we have a choice
       between exposing the transition before we take it, after we take
       it, or at some point in between. This affects the number and type
       of the parameters carried by [Shifting]. Here, we choose to expose
       the transition after we take it; this allows [Shifting] to carry
       only three parameters, whose meaning is simple.) *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="UIDENT">Shifting</span> <span class="LPAREN">(</span><a href="#local_env_62"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_new_env_70"><span class="LIDENT">new_env</span></a><span class="COMMA">,</span> <a href="#local_please_discard_63"><span class="LIDENT">please_discard</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [announce_reduce] stops the parser and returns a checkpoint
     which allows the parser to be resumed by calling [reduce]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Only ordinary productions are exposed to the user. Start productions
     are not exposed to the user. Reducing a start production simply leads
     to the successful termination of the parser. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-announce_reduce"><span class="LIDENT">announce_reduce</span></span> <span id="local_env_71"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_prod_72"><span class="LIDENT">prod</span></span> <span class="COLON">:</span> <span class="LIDENT">production</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">is_start</span> <a href="#local_prod_72"><span class="LIDENT">prod</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <span class="LIDENT">accept</span> <a href="#local_env_71"><span class="LIDENT">env</span></a> <a href="#local_prod_72"><span class="LIDENT">prod</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="UIDENT">AboutToReduce</span> <span class="LPAREN">(</span><a href="#local_env_71"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_prod_72"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [reduce] takes care of reductions. It is invoked by
     [resume] after an [AboutToReduce] event has been produced. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Here, the lookahead token CAN be [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The production [prod] CANNOT be a start production. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-reduce"><span class="LIDENT">reduce</span></span> <span id="local_env_73"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_prod_74"><span class="LIDENT">prod</span></span> <span class="COLON">:</span> <span class="LIDENT">production</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Log a reduction event. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">reduce_or_accept</span> <a href="#local_prod_74"><span class="LIDENT">prod</span></a><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Invoke the semantic action. The semantic action is responsible for
       truncating the stack and pushing a new cell onto the stack, which
       contains a new semantic value. The semantic action returns a new stack,
       which becomes the current stack. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_stack_75"><span class="LIDENT">stack</span></span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">semantic_action</span> <a href="#local_prod_74"><span class="LIDENT">prod</span></a> <a href="#local_env_73"><span class="LIDENT">env</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* By our convention, the semantic action has produced an updated
       stack. The state now found in the top stack cell is the return
       state. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Perform a goto transition. The target state is determined
       by consulting the goto table at the return state and at
       production [prod]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_current_76"><span class="LIDENT">current</span></span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">goto_prod</span> <a href="#local_stack_75"><span class="LIDENT">stack</span></a><span class="DOT">.</span><span class="LIDENT">state</span> <a href="#local_prod_74"><span class="LIDENT">prod</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_env_77"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_env_73"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <a href="#local_stack_75"><span class="LIDENT">stack</span></a><span class="SEMI">;</span> <a href="#local_current_76"><span class="LIDENT">current</span></a> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">run</span> <a href="#local_env_77"><span class="LIDENT">env</span></a> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-accept"><span class="LIDENT">accept</span></span> <span id="local_env_78"><span class="LIDENT">env</span></span> <span id="local_prod_79"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Log an accept event. *)</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">reduce_or_accept</span> <a href="#local_prod_79"><span class="LIDENT">prod</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="COMMENT">(* Extract the semantic value out of the stack. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_v_80"><span class="LIDENT">v</span></span> <span class="EQUAL">=</span> <a href="#local_env_78"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span><span class="DOT">.</span><span class="LIDENT">semv</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* Finish. *)</span><span class="EOL">
</span>    <span class="UIDENT">Accepted</span> <a href="#local_v_80"><span class="LIDENT">v</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The following functions deal with errors. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [initiate] initiates or resumes error handling. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Here, the lookahead token CAN be [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-initiate"><span class="LIDENT">initiate</span></span> <span id="local_env_81"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">initiating_error_handling</span><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_env_82"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_env_81"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <span class="LIDENT">error</span> <span class="EQUAL">=</span> <span class="TRUE">true</span> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="UIDENT">HandlingError</span> <a href="#local_env_82"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [error] handles errors. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-error"><span class="LIDENT">error</span></span> <span class="TILDE">~</span><span id="local_strategy_83"><span class="LIDENT">strategy</span></span> <span id="local_env_84"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <a href="#local_env_84"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">error</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Consult the column associated with the [error] pseudo-token in the
       action table. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">action</span><span class="EOL">
</span>      <a href="#local_env_84"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span>                    <span class="COMMENT">(* determines a row *)</span><span class="EOL">
</span>      <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_terminal</span>               <span class="COMMENT">(* determines a column *)</span><span class="EOL">
</span>      <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_value</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">error_shift</span> <span class="TILDE">~</span><a href="#local_strategy_83"><span class="LIDENT">strategy</span></a><span class="RPAREN">)</span>        <span class="COMMENT">(* shift continuation *)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">error_reduce</span> <span class="TILDE">~</span><a href="#local_strategy_83"><span class="LIDENT">strategy</span></a><span class="RPAREN">)</span>       <span class="COMMENT">(* reduce continuation *)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">error_fail</span> <span class="TILDE">~</span><a href="#local_strategy_83"><span class="LIDENT">strategy</span></a><span class="RPAREN">)</span>         <span class="COMMENT">(* failure continuation *)</span><span class="EOL">
</span>      <a href="#local_env_84"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-error_shift"><span class="LIDENT">error_shift</span></span> <span class="TILDE">~</span><span id="local_strategy_85"><span class="LIDENT">strategy</span></span> <span id="local_env_86"><span class="LIDENT">env</span></span> <span id="local_please_discard_87"><span class="LIDENT">please_discard</span></span> <span id="local_terminal_88"><span class="LIDENT">terminal</span></span> <span id="local_value_89"><span class="LIDENT">value</span></span> <span id="local_s'_90"><span class="LIDENT">s'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_terminal_88"><span class="LIDENT">terminal</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_terminal</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_value_89"><span class="LIDENT">value</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_value</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* This state is capable of shifting the [error] token. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">handling_error</span> <a href="#local_env_86"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* In the simplified strategy, we change [please_discard] to [false],
       which means that we won't request the next token and (therefore)
       we will remain in error-handling mode after shifting the [error]
       token. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_please_discard_91"><span class="LIDENT">please_discard</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_strategy_85"><span class="LIDENT">strategy</span></a> <span class="WITH">with</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_please_discard_87"><span class="LIDENT">please_discard</span></a> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LIDENT">shift</span> <a href="#local_env_86"><span class="LIDENT">env</span></a> <a href="#local_please_discard_91"><span class="LIDENT">please_discard</span></a> <a href="#local_terminal_88"><span class="LIDENT">terminal</span></a> <a href="#local_value_89"><span class="LIDENT">value</span></a> <a href="#local_s'_90"><span class="LIDENT">s'</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-error_reduce"><span class="LIDENT">error_reduce</span></span> <span class="TILDE">~</span><span id="local_strategy_92"><span class="LIDENT">strategy</span></span> <span id="local_env_93"><span class="LIDENT">env</span></span> <span id="local_prod_94"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* This state is capable of performing a reduction on [error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">log</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Log</span><span class="DOT">.</span><span class="LIDENT">handling_error</span> <a href="#local_env_93"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* In the legacy strategy, we call [reduce] instead of [announce_reduce],
       apparently in an attempt to hide the reduction steps performed during
       error handling. In the simplified strategy, all reductions steps are
       announced. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_strategy_92"><span class="LIDENT">strategy</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">reduce</span> <a href="#local_env_93"><span class="LIDENT">env</span></a> <a href="#local_prod_94"><span class="LIDENT">prod</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">announce_reduce</span> <a href="#local_env_93"><span class="LIDENT">env</span></a> <a href="#local_prod_94"><span class="LIDENT">prod</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="module-Engine.module-Make.val-error_fail"><span class="LIDENT">error_fail</span></span> <span class="TILDE">~</span><span id="local_strategy_95"><span class="LIDENT">strategy</span></span> <span id="local_env_96"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* This state is unable to handle errors. In the simplified strategy, we
       die immediately. In the legacy strategy, we attempt to pop a stack
       cell. (This amounts to forgetting part of what we have just read, in
       the hope of reaching a state where we can shift the [error] token and
       resume parsing in normal mode. Forgetting past input is not appropriate
       when the goal is merely to produce a good syntax error message.) *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_strategy_95"><span class="LIDENT">strategy</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Simplified</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Rejected</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Attempt to pop a stack cell. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_cell_97"><span class="LIDENT">cell</span></span> <span class="EQUAL">=</span> <a href="#local_env_96"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_next_98"><span class="LIDENT">next</span></span> <span class="EQUAL">=</span> <a href="#local_cell_97"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">next</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_next_98"><span class="LIDENT">next</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_cell_97"><span class="LIDENT">cell</span></a> <span class="THEN">then</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="COMMENT">(* The stack is empty. Die. *)</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="UIDENT">Rejected</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="ELSE">else</span> <span class="BEGIN">begin</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="COMMENT">(* The stack is nonempty. Pop a cell, updating the current state
         to the state [cell.state] found in the popped cell, and continue
         error handling there. *)</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="COMMENT">(* I note that if the new state [cell.state] has a default reduction,
         then it is ignored. It is unclear whether this is intentional. It
         could be a good thing, as it avoids a scenario where the parser
         diverges by repeatedly popping, performing a default reduction of
         an epsilon production, popping, etc. Still, the question of whether
         to obey default reductions while error handling seems obscure. *)</span><span class="EOL">
</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_env_99"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_env_96"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="LIDENT">stack</span> <span class="EQUAL">=</span> <a href="#local_next_98"><span class="LIDENT">next</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_cell_97"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">state</span><span class="EOL">
</span>      <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">HandlingError</span> <a href="#local_env_99"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* End of the nest of tail recursive functions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The incremental interface. See [EngineTypes]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [start s] begins the parsing process. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-start"><span class="LIDENT">start</span></span> <span class="LPAREN">(</span><span id="local_s_100"><span class="LIDENT">s</span></span> <span class="COLON">:</span> <span class="LIDENT">state</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_initial_101"><span class="LIDENT">initial</span></span> <span class="COLON">:</span> <span class="LIDENT">position</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Build an empty stack. This is a dummy cell, which is its own successor.
       Its [next] field WILL be accessed by [error_fail] if an error occurs and
       is propagated all the way until the stack is empty. Its [endp] field WILL
       be accessed (by a semantic action) if an epsilon production is reduced
       when the stack is empty. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="REC">rec</span> <span id="local_empty_102"><span class="LIDENT">empty</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>      <span class="LIDENT">state</span> <span class="EQUAL">=</span> <a href="#local_s_100"><span class="LIDENT">s</span></a><span class="SEMI">;</span>                          <span class="COMMENT">(* dummy *)</span><span class="EOL">
</span>      <span class="LIDENT">semv</span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_value</span><span class="SEMI">;</span>               <span class="COMMENT">(* dummy *)</span><span class="EOL">
</span>      <span class="LIDENT">startp</span> <span class="EQUAL">=</span> <a href="#local_initial_101"><span class="LIDENT">initial</span></a><span class="SEMI">;</span>                   <span class="COMMENT">(* dummy *)</span><span class="EOL">
</span>      <span class="LIDENT">endp</span> <span class="EQUAL">=</span> <a href="#local_initial_101"><span class="LIDENT">initial</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">next</span> <span class="EQUAL">=</span> <a href="#local_empty_102"><span class="LIDENT">empty</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Build an initial environment. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Unfortunately, there is no type-safe way of constructing a
       dummy token. Tokens carry semantic values, which in general
       we cannot manufacture. This instance of [Obj.magic] could
       be avoided by adopting a different representation (e.g., no
       [env.error] field, and an option in the first component of
       [env.triple]), but I like this representation better. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_dummy_token_103"><span class="LIDENT">dummy_token</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_env_104"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>      <span class="LIDENT">error</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">triple</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="#local_dummy_token_103"><span class="LIDENT">dummy_token</span></a><span class="COMMA">,</span> <a href="#local_initial_101"><span class="LIDENT">initial</span></a><span class="COMMA">,</span> <a href="#local_initial_101"><span class="LIDENT">initial</span></a><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="COMMENT">(* dummy *)</span><span class="EOL">
</span>      <span class="LIDENT">stack</span> <span class="EQUAL">=</span> <a href="#local_empty_102"><span class="LIDENT">empty</span></a><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_s_100"><span class="LIDENT">s</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Begin parsing. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* The parameter [please_discard] here is [true], which means we know
       that we must read at least one token. This claim relies on the fact
       that we have ruled out the two special cases where a start symbol
       recognizes the empty language or the singleton language {epsilon}. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LIDENT">run</span> <a href="#local_env_104"><span class="LIDENT">env</span></a> <span class="TRUE">true</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [offer checkpoint triple] is invoked by the user in response to a
     checkpoint of the form [InputNeeded env]. It checks that [checkpoint] is
     indeed of this form, and invokes [discard]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [resume checkpoint] is invoked by the user in response to a checkpoint
     of the form [Shifting _], [AboutToReduce _], or [HandlingError env]. It
     checks that [checkpoint] is indeed of this form, and invokes [reduce]
     or [error], as appropriate. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In reality, [offer] and [resume] accept an argument of type
     [semantic_value checkpoint] and produce a checkpoint of the same type.
     The choice of [semantic_value] is forced by the fact that this is the
     parameter of the checkpoint [Accepted]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* We change this as follows. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* We change the argument and result type of [offer] and [resume] from
     [semantic_value checkpoint] to ['a checkpoint]. This is safe, in this
     case, because we give the user access to values of type [t checkpoint]
     only if [t] is indeed the type of the eventual semantic value for this
     run. (More precisely, by examining the signatures [INCREMENTAL_ENGINE]
     and [INCREMENTAL_ENGINE_START], one finds that the user can build a value
     of type ['a checkpoint] only if ['a] is [semantic_value]. The table
     back-end goes further than this and produces versions of [start] composed
     with a suitable cast, which give the user access to a value of type
     [t checkpoint] where [t] is the type of the start symbol.) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-offer"><span class="LIDENT">offer</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="DOT">.</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                   <span class="LIDENT">token</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                   <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span><span class="EOL">
</span>  <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span id="local_env_105"><span class="LIDENT">env</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <span class="LIDENT">discard</span> <a href="#local_env_105"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-invalid_arg"><span class="LIDENT">invalid_arg</span></a> <span class="STRING">&quot;offer expects InputNeeded&quot;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-resume"><span class="LIDENT">resume</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="DOT">.</span> <span class="OPTLABEL">?strategy:</span><span class="LIDENT">strategy</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="QUESTION">?</span><span class="LPAREN">(</span><span id="local_strategy_106"><span class="LIDENT">strategy</span></span><span class="EQUAL">=</span><span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span><span class="RPAREN">)</span> <span id="local_checkpoint_107"><span class="LIDENT">checkpoint</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_checkpoint_107"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span id="local_env_108"><span class="LIDENT">env</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <span class="LIDENT">error</span> <span class="TILDE">~</span><a href="#local_strategy_106"><span class="LIDENT">strategy</span></a> <a href="#local_env_108"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_env_109"><span class="LIDENT">env</span></span><span class="COMMA">,</span> <span id="local_please_discard_110"><span class="LIDENT">please_discard</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <span class="LIDENT">run</span> <a href="#local_env_109"><span class="LIDENT">env</span></a> <a href="#local_please_discard_110"><span class="LIDENT">please_discard</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="LPAREN">(</span><span id="local_env_111"><span class="LIDENT">env</span></span><span class="COMMA">,</span> <span id="local_prod_112"><span class="LIDENT">prod</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <span class="LIDENT">reduce</span> <a href="#local_env_111"><span class="LIDENT">env</span></a> <a href="#local_prod_112"><span class="LIDENT">prod</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-invalid_arg"><span class="LIDENT">invalid_arg</span></a> <span class="STRING">&quot;resume expects HandlingError | Shifting | AboutToReduce&quot;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The traditional interface. See [EngineTypes]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Wrapping a lexer and lexbuf as a token supplier. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-supplier"><span class="TYPE">type</span> <span class="LIDENT">supplier</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-lexer_lexbuf_to_supplier"><span class="LIDENT">lexer_lexbuf_to_supplier</span></span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_lexer_113"><span class="LIDENT">lexer</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">token</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span id="local_lexbuf_114"><span class="LIDENT">lexbuf</span></span> <span class="COLON">:</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#type-lexbuf"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lexbuf</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="COLON">:</span> <span class="LIDENT">supplier</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_token_115"><span class="LIDENT">token</span></span> <span class="EQUAL">=</span> <a href="#local_lexer_113"><span class="LIDENT">lexer</span></a> <a href="#local_lexbuf_114"><span class="LIDENT">lexbuf</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_startp_116"><span class="LIDENT">startp</span></span> <span class="EQUAL">=</span> <a href="#local_lexbuf_114"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_start_p</span><span class="EOL">
</span>      <span class="AND">and</span> <span id="local_endp_117"><span class="LIDENT">endp</span></span> <span class="EQUAL">=</span> <a href="#local_lexbuf_114"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_token_115"><span class="LIDENT">token</span></a><span class="COMMA">,</span> <a href="#local_startp_116"><span class="LIDENT">startp</span></a><span class="COMMA">,</span> <a href="#local_endp_117"><span class="LIDENT">endp</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The main loop repeatedly handles intermediate checkpoints, until a final
     checkpoint is obtained. This allows implementing the monolithic interface
     ([entry]) in terms of the incremental interface ([start], [offer],
     [handle], [reduce]). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* By convention, acceptance is reported by returning a semantic value,
     whereas rejection is reported by raising [Error]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop] is polymorphic in ['a]. No cheating is involved in achieving this.
     All of the cheating resides in the types assigned to [offer] and [handle]
     above. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-loop"><span class="LIDENT">loop</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="DOT">.</span> <span class="OPTLABEL">?strategy:</span><span class="LIDENT">strategy</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">supplier</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="FUN">fun</span> <span class="QUESTION">?</span><span class="LPAREN">(</span><span id="local_strategy_118"><span class="LIDENT">strategy</span></span><span class="EQUAL">=</span><span class="BACKQUOTE">`</span><span class="UIDENT">Legacy</span><span class="RPAREN">)</span> <span id="local_read_119"><span class="LIDENT">read</span></span> <span id="local_checkpoint_120"><span class="LIDENT">checkpoint</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_checkpoint_120"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser needs a token. Request one from the lexer,
           and offer it to the parser, which will produce a new
           checkpoint. Then, repeat. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_triple_121"><span class="LIDENT">triple</span></span> <span class="EQUAL">=</span> <a href="#local_read_119"><span class="LIDENT">read</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_122"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">offer</span> <a href="#local_checkpoint_120"><span class="LIDENT">checkpoint</span></a> <a href="#local_triple_121"><span class="LIDENT">triple</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop</span> <span class="TILDE">~</span><a href="#local_strategy_118"><span class="LIDENT">strategy</span></a> <a href="#local_read_119"><span class="LIDENT">read</span></a> <a href="#local_checkpoint_122"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser has suspended itself, but does not need
           new input. Just resume the parser. Then, repeat. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_123"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resume</span> <span class="TILDE">~</span><a href="#local_strategy_118"><span class="LIDENT">strategy</span></a> <a href="#local_checkpoint_120"><span class="LIDENT">checkpoint</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop</span> <span class="TILDE">~</span><a href="#local_strategy_118"><span class="LIDENT">strategy</span></a> <a href="#local_read_119"><span class="LIDENT">read</span></a> <a href="#local_checkpoint_123"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span id="local_v_124"><span class="LIDENT">v</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser has succeeded and produced a semantic value.
           Return this semantic value to the user. *)</span><span class="EOL">
</span>        <a href="#local_v_124"><span class="LIDENT">v</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Rejected</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser rejects this input. Raise an exception. *)</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-raise"><span class="LIDENT">raise</span></a> <span class="UIDENT">Error</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-entry"><span class="LIDENT">entry</span></span> <span id="local_strategy_125"><span class="LIDENT">strategy</span></span> <span class="LPAREN">(</span><span id="local_s_126"><span class="LIDENT">s</span></span> <span class="COLON">:</span> <span class="LIDENT">state</span><span class="RPAREN">)</span> <span id="local_lexer_127"><span class="LIDENT">lexer</span></span> <span id="local_lexbuf_128"><span class="LIDENT">lexbuf</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_initial_129"><span class="LIDENT">initial</span></span> <span class="EQUAL">=</span> <a href="#local_lexbuf_128"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">loop</span> <span class="TILDE">~</span><a href="#local_strategy_125"><span class="LIDENT">strategy</span></a> <span class="LPAREN">(</span><span class="LIDENT">lexer_lexbuf_to_supplier</span> <a href="#local_lexer_127"><span class="LIDENT">lexer</span></a> <a href="#local_lexbuf_128"><span class="LIDENT">lexbuf</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LIDENT">start</span> <a href="#local_s_126"><span class="LIDENT">s</span></a> <a href="#local_initial_129"><span class="LIDENT">initial</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop_handle] stops if it encounters an error, and at this point, invokes
     its failure continuation, without letting Menhir do its own traditional
     error-handling (which involves popping the stack, etc.). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-loop_handle"><span class="LIDENT">loop_handle</span></span> <span id="local_succeed_130"><span class="LIDENT">succeed</span></span> <span id="local_fail_131"><span class="LIDENT">fail</span></span> <span id="local_read_132"><span class="LIDENT">read</span></span> <span id="local_checkpoint_133"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_checkpoint_133"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_triple_134"><span class="LIDENT">triple</span></span> <span class="EQUAL">=</span> <a href="#local_read_132"><span class="LIDENT">read</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_135"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">offer</span> <a href="#local_checkpoint_133"><span class="LIDENT">checkpoint</span></a> <a href="#local_triple_134"><span class="LIDENT">triple</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop_handle</span> <a href="#local_succeed_130"><span class="LIDENT">succeed</span></a> <a href="#local_fail_131"><span class="LIDENT">fail</span></a> <a href="#local_read_132"><span class="LIDENT">read</span></a> <a href="#local_checkpoint_135"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Which strategy is passed to [resume] here is irrelevant,
           since this checkpoint is not [HandlingError _]. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_136"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resume</span> <a href="#local_checkpoint_133"><span class="LIDENT">checkpoint</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop_handle</span> <a href="#local_succeed_130"><span class="LIDENT">succeed</span></a> <a href="#local_fail_131"><span class="LIDENT">fail</span></a> <a href="#local_read_132"><span class="LIDENT">read</span></a> <a href="#local_checkpoint_136"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Rejected</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser has detected an error. Invoke the failure continuation. *)</span><span class="EOL">
</span>        <a href="#local_fail_131"><span class="LIDENT">fail</span></a> <a href="#local_checkpoint_133"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span id="local_v_137"><span class="LIDENT">v</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser has succeeded and produced a semantic value. Invoke the
           success continuation. *)</span><span class="EOL">
</span>        <a href="#local_succeed_130"><span class="LIDENT">succeed</span></a> <a href="#local_v_137"><span class="LIDENT">v</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [loop_handle_undo] is analogous to [loop_handle], except it passes a pair
     of checkpoints to the failure continuation.

     The first (and oldest) checkpoint is the last [InputNeeded] checkpoint
     that was encountered before the error was detected. The second (and
     newest) checkpoint is where the error was detected, as in [loop_handle].
     Going back to the first checkpoint can be thought of as undoing any
     reductions that were performed after seeing the problematic token. (These
     reductions must be default reductions or spurious reductions.) *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-{loop_handle_undo}1/shadowed/(menhirLib-src-menhirLib-menhirLib.ml)"><span class="LIDENT">loop_handle_undo</span></span> <span id="local_succeed_138"><span class="LIDENT">succeed</span></span> <span id="local_fail_139"><span class="LIDENT">fail</span></span> <span id="local_read_140"><span class="LIDENT">read</span></span> <span class="LPAREN">(</span><span id="local_inputneeded_141"><span class="LIDENT">inputneeded</span></span><span class="COMMA">,</span> <span id="local_checkpoint_142"><span class="LIDENT">checkpoint</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_checkpoint_142"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Update the last recorded [InputNeeded] checkpoint. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_inputneeded_143"><span class="LIDENT">inputneeded</span></span> <span class="EQUAL">=</span> <a href="#local_checkpoint_142"><span class="LIDENT">checkpoint</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_triple_144"><span class="LIDENT">triple</span></span> <span class="EQUAL">=</span> <a href="#local_read_140"><span class="LIDENT">read</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_145"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">offer</span> <a href="#local_checkpoint_142"><span class="LIDENT">checkpoint</span></a> <a href="#local_triple_144"><span class="LIDENT">triple</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop_handle_undo</span> <a href="#local_succeed_138"><span class="LIDENT">succeed</span></a> <a href="#local_fail_139"><span class="LIDENT">fail</span></a> <a href="#local_read_140"><span class="LIDENT">read</span></a> <span class="LPAREN">(</span><a href="#local_inputneeded_143"><span class="LIDENT">inputneeded</span></a><span class="COMMA">,</span> <a href="#local_checkpoint_145"><span class="LIDENT">checkpoint</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Which strategy is passed to [resume] here is irrelevant,
           since this checkpoint is not [HandlingError _]. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_checkpoint_146"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resume</span> <a href="#local_checkpoint_142"><span class="LIDENT">checkpoint</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">loop_handle_undo</span> <a href="#local_succeed_138"><span class="LIDENT">succeed</span></a> <a href="#local_fail_139"><span class="LIDENT">fail</span></a> <a href="#local_read_140"><span class="LIDENT">read</span></a> <span class="LPAREN">(</span><a href="#local_inputneeded_141"><span class="LIDENT">inputneeded</span></a><span class="COMMA">,</span> <a href="#local_checkpoint_146"><span class="LIDENT">checkpoint</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Rejected</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_fail_139"><span class="LIDENT">fail</span></a> <a href="#local_inputneeded_141"><span class="LIDENT">inputneeded</span></a> <a href="#local_checkpoint_142"><span class="LIDENT">checkpoint</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span id="local_v_147"><span class="LIDENT">v</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_succeed_138"><span class="LIDENT">succeed</span></a> <a href="#local_v_147"><span class="LIDENT">v</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* For simplicity, we publish a version of [loop_handle_undo] that takes a
     single checkpoint as an argument, instead of a pair of checkpoints. We
     check that the argument is [InputNeeded _], and duplicate it. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The parser cannot accept or reject before it asks for the very first
     character of input. (Indeed, we statically reject a symbol that
     generates the empty language or the singleton language {epsilon}.)
     So, the [start] checkpoint must match [InputNeeded _]. Hence, it is
     permitted to call [loop_handle_undo] with a [start] checkpoint. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-loop_handle_undo"><span class="LIDENT">loop_handle_undo</span></span> <span id="local_succeed_148"><span class="LIDENT">succeed</span></span> <span id="local_fail_149"><span class="LIDENT">fail</span></span> <span id="local_read_150"><span class="LIDENT">read</span></span> <span id="local_checkpoint_151"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="MATCH">match</span> <a href="#local_checkpoint_151"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span> <span class="UIDENT">InputNeeded</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span> <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">loop_handle_undo</span> <a href="#local_succeed_148"><span class="LIDENT">succeed</span></a> <a href="#local_fail_149"><span class="LIDENT">fail</span></a> <a href="#local_read_150"><span class="LIDENT">read</span></a> <span class="LPAREN">(</span><a href="#local_checkpoint_151"><span class="LIDENT">checkpoint</span></a><span class="COMMA">,</span> <a href="#local_checkpoint_151"><span class="LIDENT">checkpoint</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-shifts"><span class="LIDENT">shifts</span></span> <span id="local_checkpoint_152"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_checkpoint_152"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Shifting</span> <span class="LPAREN">(</span><span id="local_env_153"><span class="LIDENT">env</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser is about to shift, which means it is willing to
           consume the terminal symbol that we have fed it. Return the
           state just before this transition. *)</span><span class="EOL">
</span>        <span class="UIDENT">Some</span> <a href="#local_env_153"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">AboutToReduce</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser wishes to reduce. Just follow. *)</span><span class="EOL">
</span>        <span class="COMMENT">(* Which strategy is passed to [resume] here is irrelevant,
           since this checkpoint is not [HandlingError _]. *)</span><span class="EOL">
</span>        <span class="LIDENT">shifts</span> <span class="LPAREN">(</span><span class="LIDENT">resume</span> <a href="#local_checkpoint_152"><span class="LIDENT">checkpoint</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">HandlingError</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* The parser fails, which means it rejects the terminal symbol
           that we have fed it. *)</span><span class="EOL">
</span>        <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">InputNeeded</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Accepted</span> <span class="UNDERSCORE">_</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Rejected</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* None of these cases can arise. Indeed, after a token is submitted
           to it, the parser must shift, reduce, or signal an error, before
           it can request another token or terminate. *)</span><span class="EOL">
</span>        <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-acceptable"><span class="LIDENT">acceptable</span></span> <span id="local_checkpoint_154"><span class="LIDENT">checkpoint</span></span> <span id="local_token_155"><span class="LIDENT">token</span></span> <span id="local_pos_156"><span class="LIDENT">pos</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_triple_157"><span class="LIDENT">triple</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="#local_token_155"><span class="LIDENT">token</span></a><span class="COMMA">,</span> <a href="#local_pos_156"><span class="LIDENT">pos</span></a><span class="COMMA">,</span> <a href="#local_pos_156"><span class="LIDENT">pos</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_checkpoint_158"><span class="LIDENT">checkpoint</span></span> <span class="EQUAL">=</span> <span class="LIDENT">offer</span> <a href="#local_checkpoint_154"><span class="LIDENT">checkpoint</span></a> <a href="#local_triple_157"><span class="LIDENT">triple</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">shifts</span> <a href="#local_checkpoint_158"><span class="LIDENT">checkpoint</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span>      <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local__env_159"><span class="LIDENT">_env</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a lr1state] describes the (non-initial) states of the LR(1)
     automaton. The index ['a] represents the type of the semantic value
     associated with the state's incoming symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a lr1state] is defined as an alias for [state], which itself
     is usually defined as [int] (see [TableInterpreter]). So, ['a lr1state]
     is technically a phantom type, but should really be thought of as a GADT
     whose data constructors happen to be represented as integers. It is
     presented to the user as an abstract type (see [IncrementalEngine]). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-lr1state"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Stack inspection. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* We offer a read-only view of the parser's state as a stream of elements.
     Each element contains a pair of a (non-initial) state and a semantic
     value associated with (the incoming symbol of) this state. Note that the
     type [element] is an existential type. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* As of 2017/03/31, the type [stack] and the function [stack] are DEPRECATED.
     If desired, they could now be implemented outside Menhir, by relying on
     the functions [top] and [pop]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-element"><span class="TYPE">type</span> <span class="LIDENT">element</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-Engine.module-Make.type-element.constructor-Element"><span class="BAR">|</span> <span class="UIDENT">Element</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="STAR">*</span> <span class="LIDENT">position</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">element</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">General</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-Engine.module-Make.type-stack"><span class="TYPE">type</span> <span class="LIDENT">stack</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">element</span> <span class="LIDENT">stream</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If [current] is the current state and [cell] is the top stack cell,
     then [stack cell current] is a view of the parser's state as a stream
     of elements. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-{stack}2/shadowed/(menhirLib-src-menhirLib-menhirLib.ml)"><span class="LIDENT">stack</span></span> <span id="local_cell_160"><span class="LIDENT">cell</span></span> <span id="local_current_161"><span class="LIDENT">current</span></span> <span class="COLON">:</span> <span class="LIDENT">element</span> <span class="LIDENT">stream</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LAZY">lazy</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="COMMENT">(* The stack is empty iff the top stack cell is its own successor. In
         that case, the current state [current] should be an initial state
         (which has no incoming symbol).
         We do not allow the user to inspect this state. *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_next_162"><span class="LIDENT">next</span></span> <span class="EQUAL">=</span> <a href="#local_cell_160"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">next</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_next_162"><span class="LIDENT">next</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_cell_160"><span class="LIDENT">cell</span></a> <span class="THEN">then</span><span class="EOL">
</span>        <span class="UIDENT">Nil</span><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <span class="COMMENT">(* Construct an element containing the current state [current] as well
           as the semantic value contained in the top stack cell. This semantic
           value is associated with the incoming symbol of this state, so it
           makes sense to pair them together. The state has type ['a state] and
           the semantic value has type ['a], for some type ['a]. Here, the OCaml
           type-checker thinks ['a] is [semantic_value] and considers this code
           well-typed. Outside, we will use magic to provide the user with a way
           of inspecting states and recovering the value of ['a]. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_element_163"><span class="LIDENT">element</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Element</span> <span class="LPAREN">(</span><span class="EOL">
</span>          <a href="#local_current_161"><span class="LIDENT">current</span></a><span class="COMMA">,</span><span class="EOL">
</span>          <a href="#local_cell_160"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">semv</span><span class="COMMA">,</span><span class="EOL">
</span>          <a href="#local_cell_160"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">startp</span><span class="COMMA">,</span><span class="EOL">
</span>          <a href="#local_cell_160"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">endp</span><span class="EOL">
</span>        <span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="UIDENT">Cons</span> <span class="LPAREN">(</span><a href="#local_element_163"><span class="LIDENT">element</span></a><span class="COMMA">,</span> <span class="LIDENT">stack</span> <a href="#local_next_162"><span class="LIDENT">next</span></a> <a href="#local_cell_160"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">state</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-stack"><span class="LIDENT">stack</span></span> <span id="local_env_164"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="LIDENT">element</span> <span class="LIDENT">stream</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">stack</span> <a href="#local_env_164"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <a href="#local_env_164"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* As explained above, the function [top] allows access to the top stack
     element only if the stack is nonempty, i.e., only if the current state
     is not an initial state. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-top"><span class="LIDENT">top</span></span> <span id="local_env_165"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="LIDENT">element</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_cell_166"><span class="LIDENT">cell</span></span> <span class="EQUAL">=</span> <a href="#local_env_165"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_next_167"><span class="LIDENT">next</span></span> <span class="EQUAL">=</span> <a href="#local_cell_166"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">next</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_next_167"><span class="LIDENT">next</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_cell_166"><span class="LIDENT">cell</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Element</span> <span class="LPAREN">(</span><a href="#local_env_165"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="COMMA">,</span> <a href="#local_cell_166"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">semv</span><span class="COMMA">,</span> <a href="#local_cell_166"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">startp</span><span class="COMMA">,</span> <a href="#local_cell_166"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">endp</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [equal] compares the stacks for physical equality, and compares the
     current states via their numbers (this seems cleaner than using OCaml's
     polymorphic equality). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The two fields that are not compared by [equal], namely [error] and
     [triple], are overwritten by the function [discard], which handles
     [InputNeeded] checkpoints. Thus, if [equal env1 env2] holds, then the
     checkpoints [input_needed env1] and [input_needed env2] are
     equivalent: they lead the parser to behave in the same way. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-equal"><span class="LIDENT">equal</span></span> <span id="local_env1_168"><span class="LIDENT">env1</span></span> <span id="local_env2_169"><span class="LIDENT">env2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="#local_env1_168"><span class="LIDENT">env1</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_env2_169"><span class="LIDENT">env2</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a><span class="EOL">
</span>    <span class="LIDENT">number</span> <a href="#local_env1_168"><span class="LIDENT">env1</span></a><span class="DOT">.</span><span class="LIDENT">current</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="LIDENT">number</span> <a href="#local_env2_169"><span class="LIDENT">env2</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-current_state_number"><span class="LIDENT">current_state_number</span></span> <span id="local_env_170"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">number</span> <a href="#local_env_170"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Access to the position of the lookahead token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-positions"><span class="LIDENT">positions</span></span> <span class="LBRACE">{</span> <span class="LIDENT">triple</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_startp_171"><span class="LIDENT">startp</span></span><span class="COMMA">,</span> <span id="local_endp_172"><span class="LIDENT">endp</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="#local_startp_171"><span class="LIDENT">startp</span></a><span class="COMMA">,</span> <a href="#local_endp_172"><span class="LIDENT">endp</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Access to information about default reductions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This can be a function of states, or a function of environments.
     We offer both. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Instead of a Boolean result, we could return a [production option].
     However, we would have to explicitly test whether [prod] is a start
     production, and in that case, return [None], I suppose. Indeed, we
     have decided not to expose the start productions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-state_has_default_reduction"><span class="LIDENT">state_has_default_reduction</span></span> <span class="LPAREN">(</span><span id="local_state_173"><span class="LIDENT">state</span></span> <span class="COLON">:</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">lr1state</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">bool</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">default_reduction</span> <a href="#local_state_173"><span class="LIDENT">state</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local__env_174"><span class="LIDENT">_env</span></span> <span id="local__prod_175"><span class="LIDENT">_prod</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local__env_176"><span class="LIDENT">_env</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-env_has_default_reduction"><span class="LIDENT">env_has_default_reduction</span></span> <span id="local_env_177"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">state_has_default_reduction</span> <a href="#local_env_177"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The following functions work at the level of environments (as opposed to
     checkpoints). The function [pop] causes the automaton to go back into the
     past, pretending that the last input symbol has never been read. The
     function [force_reduction] causes the automaton to re-interpret the past,
     by recognizing the right-hand side of a production and reducing this
     production. The function [feed] causes the automaton to progress into the
     future by pretending that a (terminal or nonterminal) symbol has been
     read. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [feed] would ideally be defined here. However, for this
     function to be type-safe, the GADT ['a symbol] is needed. For this
     reason, we move its definition to [InspectionTableInterpreter], where
     the inspection API is available. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [pop] pops one stack cell. It cannot go wrong. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-pop"><span class="LIDENT">pop</span></span> <span class="LPAREN">(</span><span id="local_env_178"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_cell_179"><span class="LIDENT">cell</span></span> <span class="EQUAL">=</span> <a href="#local_env_178"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_next_180"><span class="LIDENT">next</span></span> <span class="EQUAL">=</span> <a href="#local_cell_179"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">next</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_next_180"><span class="LIDENT">next</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="#local_cell_179"><span class="LIDENT">cell</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <span class="COMMENT">(* The stack is empty. *)</span><span class="EOL">
</span>      <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="COMMENT">(* The stack is nonempty. Pop off one cell. *)</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LBRACE">{</span> <a href="#local_env_178"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <span class="LIDENT">stack</span> <span class="EQUAL">=</span> <a href="#local_next_180"><span class="LIDENT">next</span></a><span class="SEMI">;</span> <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_cell_179"><span class="LIDENT">cell</span></a><span class="DOT">.</span><span class="LIDENT">state</span> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [force_reduction] is analogous to [reduce], except that it does not
     continue by calling [run env] or [initiate env]. Instead, it returns
     [env] to the user. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [force_reduction] is dangerous insofar as it executes a semantic action.
     This semantic action could have side effects: nontermination, state,
     exceptions, input/output, etc. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-force_reduction"><span class="LIDENT">force_reduction</span></span> <span id="local_prod_181"><span class="LIDENT">prod</span></span> <span class="LPAREN">(</span><span id="local_env_182"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Check if this reduction is permitted. This check is REALLY important.
       The stack must have the correct shape: that is, it must be sufficiently
       high, and must contain semantic values of appropriate types, otherwise
       the semantic action will crash and burn. *)</span><span class="EOL">
</span>    <span class="COMMENT">(* We currently check whether the current state is WILLING to reduce this
       production (i.e., there is a reduction action in the action table row
       associated with this state), whereas it would be more liberal to check
       whether this state is CAPABLE of reducing this production (i.e., the
       stack has an appropriate shape). We currently have no means of
       performing such a check. *)</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-not"><span class="LIDENT">not</span></a> <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">may_reduce</span> <a href="#local_env_182"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span> <a href="#local_prod_181"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span> <span class="THEN">then</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-invalid_arg"><span class="LIDENT">invalid_arg</span></a> <span class="STRING">&quot;force_reduction: this reduction is not permitted in this state&quot;</span><span class="EOL">
</span>    <span class="ELSE">else</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="COMMENT">(* We do not expose the start productions to the user, so this cannot be
         a start production. Hence, it has a semantic action. *)</span><span class="EOL">
</span>      <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-not"><span class="LIDENT">not</span></a> <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">is_start</span> <a href="#local_prod_181"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="COMMENT">(* Invoke the semantic action. *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_stack_183"><span class="LIDENT">stack</span></span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">semantic_action</span> <a href="#local_prod_181"><span class="LIDENT">prod</span></a> <a href="#local_env_182"><span class="LIDENT">env</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="COMMENT">(* Perform a goto transition. *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_current_184"><span class="LIDENT">current</span></span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">goto_prod</span> <a href="#local_stack_183"><span class="LIDENT">stack</span></a><span class="DOT">.</span><span class="LIDENT">state</span> <a href="#local_prod_181"><span class="LIDENT">prod</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LBRACE">{</span> <a href="#local_env_182"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <a href="#local_stack_183"><span class="LIDENT">stack</span></a><span class="SEMI">;</span> <a href="#local_current_184"><span class="LIDENT">current</span></a> <span class="RBRACE">}</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The environment manipulation functions -- [pop] and [force_reduction]
     above, plus [feed] -- manipulate the automaton's stack and current state,
     but do not affect the automaton's lookahead symbol. When the function
     [input_needed] is used to go back from an environment to a checkpoint
     (and therefore, resume normal parsing), the lookahead symbol is clobbered
     anyway, since the only action that the user can take is to call [offer].
     So far, so good. One problem, though, is that this call to [offer] may
     well place the automaton in a configuration of a state [s] and a
     lookahead symbol [t] that is normally unreachable. Also, perhaps the
     state [s] is a state where an input symbol normally is never demanded, so
     this [InputNeeded] checkpoint is fishy. There does not seem to be a deep
     problem here, but, when programming an error recovery strategy, one
     should pay some attention to this issue. Ideally, perhaps, one should use
     [input_needed] only in a state [s] where an input symbol is normally
     demanded, that is, a state [s] whose incoming symbol is a terminal symbol
     and which does not have a default reduction on [#]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-input_needed"><span class="LIDENT">input_needed</span></span> <span class="LPAREN">(</span><span id="local_env_185"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">checkpoint</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">InputNeeded</span> <a href="#local_env_185"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The following functions are compositions of [top] and [pop]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Engine.module-Make.val-pop_many"><span class="LIDENT">pop_many</span></span> <span id="local_i_186"><span class="LIDENT">i</span></span> <span id="local_env_187"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_186"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <a href="#local_env_187"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="ELSE">else</span> <span class="MATCH">match</span> <span class="LIDENT">pop</span> <a href="#local_env_187"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_env_188"><span class="LIDENT">env</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">pop_many</span> <span class="LPAREN">(</span><a href="#local_i_186"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_env_188"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Engine.module-Make.val-get"><span class="LIDENT">get</span></span> <span id="local_i_189"><span class="LIDENT">i</span></span> <span id="local_env_190"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">pop_many</span> <a href="#local_i_189"><span class="LIDENT">i</span></a> <a href="#local_env_190"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_env_191"><span class="LIDENT">env</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">top</span> <a href="#local_env_191"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-ErrorReports"><span class="MODULE">module</span> <span class="UIDENT">ErrorReports</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* -------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A two-place buffer stores zero, one, or two elements. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-ErrorReports.type-content"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">content</span> <span class="EQUAL">=</span><span class="EOL">
</span><span id="module-ErrorReports.type-content.constructor-Zero"><span class="BAR">|</span> <span class="UIDENT">Zero</span></span><span class="EOL">
</span><span id="module-ErrorReports.type-content.constructor-One"><span class="BAR">|</span> <span class="UIDENT">One</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span><span class="EOL">
</span><span id="module-ErrorReports.type-content.constructor-Two"><span class="BAR">|</span> <span class="UIDENT">Two</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="STAR">*</span> <span class="COMMENT">(* most recent: *)</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-ErrorReports.type-buffer"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">buffer</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#type-ref"><span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">content</span> <span class="LIDENT">ref</span></a></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [update buffer x] pushes [x] into [buffer], causing the buffer to slide. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-update"><span class="LIDENT">update</span></span> <span id="local_buffer_192"><span class="LIDENT">buffer</span></span> <span id="local_x_193"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_buffer_192"><span class="LIDENT">buffer</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_buffer_192"><span class="LIDENT">buffer</span></a><span class="COMMA">,</span> <a href="#local_x_193"><span class="LIDENT">x</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Zero</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">One</span> <a href="#local_x_193"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">One</span> <span id="local_x1_194"><span class="LIDENT">x1</span></span><span class="COMMA">,</span> <span id="local_x2_195"><span class="LIDENT">x2</span></span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Two</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_x1_196"><span class="LIDENT">x1</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_x2_197"><span class="LIDENT">x2</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Two</span> <span class="LPAREN">(</span><a href="#local_x1_196"><span class="LIDENT">x1</span></a><span class="COMMA">,</span> <a href="#local_x2_197"><span class="LIDENT">x2</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-show"><span class="LIDENT">show</span></span> <span id="local_f_198"><span class="LIDENT">f</span></span> <span id="local_buffer_199"><span class="LIDENT">buffer</span></span> <span class="COLON">:</span> <span class="LIDENT">string</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_buffer_199"><span class="LIDENT">buffer</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Zero</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="COMMENT">(* The buffer cannot be empty. If we have read no tokens,
         we cannot have detected a syntax error. *)</span><span class="EOL">
</span>      <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">One</span> <span id="local_invalid_200"><span class="LIDENT">invalid</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="COMMENT">(* It is unlikely, but possible, that we have read just one token. *)</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;before '%s'&quot;</span> <span class="LPAREN">(</span><a href="#local_f_198"><span class="LIDENT">f</span></a> <a href="#local_invalid_200"><span class="LIDENT">invalid</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Two</span> <span class="LPAREN">(</span><span id="local_valid_201"><span class="LIDENT">valid</span></span><span class="COMMA">,</span> <span id="local_invalid_202"><span class="LIDENT">invalid</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="COMMENT">(* In the most likely case, we have read two tokens. *)</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="UIDENT">Printf</span><span class="DOT">.</span><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;after '%s' and before '%s'&quot;</span> <span class="LPAREN">(</span><a href="#local_f_198"><span class="LIDENT">f</span></a> <a href="#local_valid_201"><span class="LIDENT">valid</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="#local_f_198"><span class="LIDENT">f</span></a> <a href="#local_invalid_202"><span class="LIDENT">invalid</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-last"><span class="LIDENT">last</span></span> <span id="local_buffer_203"><span class="LIDENT">buffer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_buffer_203"><span class="LIDENT">buffer</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Zero</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="COMMENT">(* The buffer cannot be empty. If we have read no tokens,
         we cannot have detected a syntax error. *)</span><span class="EOL">
</span>      <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">One</span> <span id="local_invalid_204"><span class="LIDENT">invalid</span></span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Two</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_invalid_205"><span class="LIDENT">invalid</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_invalid_205"><span class="LIDENT">invalid</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html"><span class="UIDENT">Lexing</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-wrap"><span class="LIDENT">wrap</span></span> <span id="local_lexer_206"><span class="LIDENT">lexer</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_buffer_207"><span class="LIDENT">buffer</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="UIDENT">Zero</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_buffer_207"><span class="LIDENT">buffer</span></a><span class="COMMA">,</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span id="local_lexbuf_208"><span class="LIDENT">lexbuf</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_token_209"><span class="LIDENT">token</span></span> <span class="EQUAL">=</span> <a href="#local_lexer_206"><span class="LIDENT">lexer</span></a> <a href="#local_lexbuf_208"><span class="LIDENT">lexbuf</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">update</span> <a href="#local_buffer_207"><span class="LIDENT">buffer</span></a> <span class="LPAREN">(</span><a href="#local_lexbuf_208"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="LIDENT">lex_start_p</span><span class="COMMA">,</span> <a href="#local_lexbuf_208"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_token_209"><span class="LIDENT">token</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-wrap_supplier"><span class="LIDENT">wrap_supplier</span></span> <span id="local_supplier_210"><span class="LIDENT">supplier</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_buffer_211"><span class="LIDENT">buffer</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="UIDENT">Zero</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_buffer_211"><span class="LIDENT">buffer</span></a><span class="COMMA">,</span><span class="EOL">
</span>  <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_624"><span class="LPAREN">(</span><span id="local__token_213"><span class="LIDENT">_token</span></span><span class="COMMA">,</span> <span id="local_pos1_214"><span class="LIDENT">pos1</span></span><span class="COMMA">,</span> <span id="local_pos2_215"><span class="LIDENT">pos2</span></span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_triple_212"><span class="LIDENT">triple</span></span></span> <span class="EQUAL">=</span> <a href="#local_supplier_210"><span class="LIDENT">supplier</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">update</span> <a href="#local_buffer_211"><span class="LIDENT">buffer</span></a> <span class="LPAREN">(</span><a href="#local_pos1_214"><span class="LIDENT">pos1</span></a><span class="COMMA">,</span> <a href="#local_pos2_215"><span class="LIDENT">pos2</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_triple_212"><span class="LIDENT">triple</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* -------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-extract"><span class="LIDENT">extract</span></span> <span id="local_text_216"><span class="LIDENT">text</span></span> <span class="LPAREN">(</span><span id="local_pos1_217"><span class="LIDENT">pos1</span></span><span class="COMMA">,</span> <span id="local_pos2_218"><span class="LIDENT">pos2</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">string</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_ofs1_219"><span class="LIDENT">ofs1</span></span> <span class="EQUAL">=</span> <a href="#local_pos1_217"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_cnum</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="local_ofs2_220"><span class="LIDENT">ofs2</span></span> <span class="EQUAL">=</span> <a href="#local_pos2_218"><span class="LIDENT">pos2</span></a><span class="DOT">.</span><span class="LIDENT">pos_cnum</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_len_221"><span class="LIDENT">len</span></span> <span class="EQUAL">=</span> <a href="#local_ofs2_220"><span class="LIDENT">ofs2</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_ofs1_219"><span class="LIDENT">ofs1</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="TRY">try</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-sub"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">sub</span></a> <a href="#local_text_216"><span class="LIDENT">text</span></a> <a href="#local_ofs1_219"><span class="LIDENT">ofs1</span></a> <a href="#local_len_221"><span class="LIDENT">len</span></a><span class="EOL">
</span>  <span class="WITH">with</span> <span class="UIDENT">Invalid_argument</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="COMMENT">(* In principle, this should not happen, but if it does, let's make this
       a non-fatal error. *)</span><span class="EOL">
</span>    <span class="STRING">&quot;???&quot;</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-sanitize"><span class="LIDENT">sanitize</span></span> <span id="local_text_222"><span class="LIDENT">text</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-map"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_c_223"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-code"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">code</span></a> <a href="#local_c_223"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="INT">32</span> <span class="THEN">then</span> <span class="CHAR">' '</span> <span class="ELSE">else</span> <a href="#local_c_223"><span class="LIDENT">c</span></a><span class="EOL">
</span>  <span class="RPAREN">)</span> <a href="#local_text_222"><span class="LIDENT">text</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* If we were willing to depend on [Str], we could implement [compress] as
   follows:

   let compress text =
     Str.global_replace (Str.regexp &quot;[ \t\n\r]+&quot;) &quot; &quot; text

 *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-ErrorReports.val-{compress}3/shadowed/(menhirLib-src-menhirLib-menhirLib.ml)"><span class="LIDENT">compress</span></span> <span id="local_n_224"><span class="LIDENT">n</span></span> <span id="local_b_225"><span class="LIDENT">b</span></span> <span id="local_i_226"><span class="LIDENT">i</span></span> <span id="local_j_227"><span class="LIDENT">j</span></span> <span id="local_skipping_228"><span class="LIDENT">skipping</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_j_227"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_n_224"><span class="LIDENT">n</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_635"><span id="local_c_229"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span id="local_j_230"><span class="LIDENT">j</span></span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-get"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <a href="#local_j_227"><span class="LIDENT">j</span></a><span class="COMMA">,</span> <a href="#local_j_227"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_c_229"><span class="LIDENT">c</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="CHAR">' '</span> <span class="BAR">|</span> <span class="CHAR">'\t'</span> <span class="BAR">|</span> <span class="CHAR">'\n'</span> <span class="BAR">|</span> <span class="CHAR">'\r'</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_i_231"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-not"><span class="LIDENT">not</span></a> <a href="#local_skipping_228"><span class="LIDENT">skipping</span></a> <span class="THEN">then</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">set</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <a href="#local_i_226"><span class="LIDENT">i</span></a> <span class="CHAR">' '</span><span class="SEMI">;</span> <a href="#local_i_226"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <span class="ELSE">else</span> <a href="#local_i_226"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_skipping_232"><span class="LIDENT">skipping</span></span> <span class="EQUAL">=</span> <span class="TRUE">true</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">compress</span> <a href="#local_n_224"><span class="LIDENT">n</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <a href="#local_i_231"><span class="LIDENT">i</span></a> <a href="#local_j_230"><span class="LIDENT">j</span></a> <a href="#local_skipping_232"><span class="LIDENT">skipping</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_i_233"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">set</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <a href="#local_i_226"><span class="LIDENT">i</span></a> <a href="#local_c_229"><span class="LIDENT">c</span></a><span class="SEMI">;</span> <a href="#local_i_226"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_skipping_234"><span class="LIDENT">skipping</span></span> <span class="EQUAL">=</span> <span class="FALSE">false</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">compress</span> <a href="#local_n_224"><span class="LIDENT">n</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <a href="#local_i_233"><span class="LIDENT">i</span></a> <a href="#local_j_230"><span class="LIDENT">j</span></a> <a href="#local_skipping_234"><span class="LIDENT">skipping</span></a><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-sub_string"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">sub_string</span></a> <a href="#local_b_225"><span class="LIDENT">b</span></a> <span class="INT">0</span> <a href="#local_i_226"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-compress"><span class="LIDENT">compress</span></span> <span id="local_text_235"><span class="LIDENT">text</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_b_236"><span class="LIDENT">b</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-of_string"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">of_string</span></a> <a href="#local_text_235"><span class="LIDENT">text</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_n_237"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-length"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_b_236"><span class="LIDENT">b</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LIDENT">compress</span> <a href="#local_n_237"><span class="LIDENT">n</span></a> <a href="#local_b_236"><span class="LIDENT">b</span></a> <span class="INT">0</span> <span class="INT">0</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-shorten"><span class="LIDENT">shorten</span></span> <span id="local_k_238"><span class="LIDENT">k</span></span> <span id="local_text_239"><span class="LIDENT">text</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_n_240"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-length"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_text_239"><span class="LIDENT">text</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_n_240"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_k_238"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">3</span> <span class="THEN">then</span><span class="EOL">
</span>    <a href="#local_text_239"><span class="LIDENT">text</span></a><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-sub"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">sub</span></a> <a href="#local_text_239"><span class="LIDENT">text</span></a> <span class="INT">0</span> <a href="#local_k_238"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a><span class="EOL">
</span>    <span class="STRING">&quot;...&quot;</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(^)"><span class="INFIXOP1">^</span></a><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-sub"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">sub</span></a> <a href="#local_text_239"><span class="LIDENT">text</span></a> <span class="LPAREN">(</span><a href="#local_n_240"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_k_238"><span class="LIDENT">k</span></a><span class="RPAREN">)</span> <a href="#local_k_238"><span class="LIDENT">k</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-is_digit"><span class="LIDENT">is_digit</span></span> <span id="local_c_241"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_c_242"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-code"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">code</span></a> <a href="#local_c_241"><span class="LIDENT">c</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-code"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">code</span></a> <span class="CHAR">'0'</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_c_242"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_c_242"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-code"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">code</span></a> <span class="CHAR">'9'</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-ErrorReports.exception-Copy"><span class="EXCEPTION">exception</span> <span class="UIDENT">Copy</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-ErrorReports.val-expand"><span class="LIDENT">expand</span></span> <span id="local_f_243"><span class="LIDENT">f</span></span> <span id="local_text_244"><span class="LIDENT">text</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_n_245"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-length"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_text_244"><span class="LIDENT">text</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_b_246"><span class="LIDENT">b</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/buffer.ml.html#val-create"><span class="UIDENT">Buffer</span><span class="DOT">.</span><span class="LIDENT">create</span></a> <a href="#local_n_245"><span class="LIDENT">n</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_loop_247"><span class="LIDENT">loop</span></span> <span id="local_i_248"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_248"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_n_245"><span class="LIDENT">n</span></a> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="def_618"><span id="local_c_249"><span class="LIDENT">c</span></span><span class="COMMA">,</span> <span id="local_i_250"><span class="LIDENT">i</span></span></span> <span class="EQUAL">=</span> <a href="#local_text_244"><span class="LIDENT">text</span></a><span class="DOT">.</span><span class="LBRACKET">[</span><a href="#local_i_248"><span class="LIDENT">i</span></a><span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_i_248"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_loop_247"><span class="LIDENT">loop</span></a> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="TRY">try</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_c_249"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;&gt;)"><span class="INFIXOP0">&lt;&gt;</span></a> <span class="CHAR">'$'</span> <span class="THEN">then</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-raise"><span class="LIDENT">raise</span></a> <span class="UIDENT">Copy</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_j_251"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <a href="#local_i_250"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>          <span class="WHILE">while</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_251"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_n_245"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <span class="LIDENT">is_digit</span> <a href="#local_text_244"><span class="LIDENT">text</span></a><span class="DOT">.</span><span class="LBRACKET">[</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_251"><span class="LIDENT">j</span></a><span class="RBRACKET">]</span> <span class="DO">do</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-incr"><span class="LIDENT">incr</span></a> <a href="#local_j_251"><span class="LIDENT">j</span></a> <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_i_250"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_251"><span class="LIDENT">j</span></a> <span class="THEN">then</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-raise"><span class="LIDENT">raise</span></a> <span class="UIDENT">Copy</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_k_252"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-int_of_string"><span class="LIDENT">int_of_string</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-sub"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">sub</span></a> <a href="#local_text_244"><span class="LIDENT">text</span></a> <a href="#local_i_250"><span class="LIDENT">i</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_251"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_i_250"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/buffer.ml.html#val-add_string"><span class="UIDENT">Buffer</span><span class="DOT">.</span><span class="LIDENT">add_string</span></a> <a href="#local_b_246"><span class="LIDENT">b</span></a> <span class="LPAREN">(</span><a href="#local_f_243"><span class="LIDENT">f</span></a> <a href="#local_k_252"><span class="LIDENT">k</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_251"><span class="LIDENT">j</span></a><span class="EOL">
</span>        <span class="WITH">with</span> <span class="UIDENT">Copy</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="COMMENT">(* We reach this point if either [c] is not '$' or [c] is '$'
             but is not followed by an integer literal. *)</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/buffer.ml.html#val-add_char"><span class="UIDENT">Buffer</span><span class="DOT">.</span><span class="LIDENT">add_char</span></a> <a href="#local_b_246"><span class="LIDENT">b</span></a> <a href="#local_c_249"><span class="LIDENT">c</span></a><span class="SEMI">;</span><span class="EOL">
</span>          <a href="#local_i_250"><span class="LIDENT">i</span></a><span class="EOL">
</span>      <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/buffer.ml.html#val-contents"><span class="UIDENT">Buffer</span><span class="DOT">.</span><span class="LIDENT">contents</span></a> <a href="#local_b_246"><span class="LIDENT">b</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_loop_247"><span class="LIDENT">loop</span></a> <span class="INT">0</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-LexerUtil"><span class="MODULE">module</span> <span class="UIDENT">LexerUtil</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html"><span class="UIDENT">Lexing</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html"><span class="UIDENT">Printf</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-init"><span class="LIDENT">init</span></span> <span id="local_filename_253"><span class="LIDENT">filename</span></span> <span id="local_lexbuf_254"><span class="LIDENT">lexbuf</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_lexbuf_254"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="LESSMINUS">&lt;-</span> <span class="LBRACE">{</span><span class="EOL">
</span>    <span class="LIDENT">pos_fname</span> <span class="EQUAL">=</span> <a href="#local_filename_253"><span class="LIDENT">filename</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">pos_lnum</span>  <span class="EQUAL">=</span> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">pos_bol</span>   <span class="EQUAL">=</span> <span class="INT">0</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">pos_cnum</span>  <span class="EQUAL">=</span> <span class="INT">0</span><span class="EOL">
</span>  <span class="RBRACE">}</span><span class="SEMI">;</span><span class="EOL">
</span>  <a href="#local_lexbuf_254"><span class="LIDENT">lexbuf</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-read"><span class="LIDENT">read</span></span> <span id="local_filename_255"><span class="LIDENT">filename</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_c_256"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-open_in"><span class="LIDENT">open_in</span></a> <a href="#local_filename_255"><span class="LIDENT">filename</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_text_257"><span class="LIDENT">text</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-really_input_string"><span class="LIDENT">really_input_string</span></a> <a href="#local_c_256"><span class="LIDENT">c</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-in_channel_length"><span class="LIDENT">in_channel_length</span></a> <a href="#local_c_256"><span class="LIDENT">c</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-close_in"><span class="LIDENT">close_in</span></a> <a href="#local_c_256"><span class="LIDENT">c</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lexbuf_258"><span class="LIDENT">lexbuf</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#val-from_string"><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">from_string</span></a> <a href="#local_text_257"><span class="LIDENT">text</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_text_257"><span class="LIDENT">text</span></a><span class="COMMA">,</span> <span class="LIDENT">init</span> <a href="#local_filename_255"><span class="LIDENT">filename</span></a> <a href="#local_lexbuf_258"><span class="LIDENT">lexbuf</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-newline"><span class="LIDENT">newline</span></span> <span id="local_lexbuf_259"><span class="LIDENT">lexbuf</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_pos_260"><span class="LIDENT">pos</span></span> <span class="EQUAL">=</span> <a href="#local_lexbuf_259"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_lexbuf_259"><span class="LIDENT">lexbuf</span></a><span class="DOT">.</span><span class="LIDENT">lex_curr_p</span> <span class="LESSMINUS">&lt;-</span> <span class="LBRACE">{</span> <a href="#local_pos_260"><span class="LIDENT">pos</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="LIDENT">pos_lnum</span> <span class="EQUAL">=</span> <a href="#local_pos_260"><span class="LIDENT">pos</span></a><span class="DOT">.</span><span class="LIDENT">pos_lnum</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">pos_bol</span> <span class="EQUAL">=</span> <a href="#local_pos_260"><span class="LIDENT">pos</span></a><span class="DOT">.</span><span class="LIDENT">pos_cnum</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-is_dummy"><span class="LIDENT">is_dummy</span></span> <span class="LPAREN">(</span><span id="local_pos1_261"><span class="LIDENT">pos1</span></span><span class="COMMA">,</span> <span id="local_pos2_262"><span class="LIDENT">pos2</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_pos1_261"><span class="LIDENT">pos1</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#val-dummy_pos"><span class="LIDENT">dummy_pos</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(||)"><span class="BARBAR">||</span></a> <a href="#local_pos2_262"><span class="LIDENT">pos2</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(==)"><span class="INFIXOP0">==</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/lexing.ml.html#val-dummy_pos"><span class="LIDENT">dummy_pos</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-range"><span class="LIDENT">range</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span id="local_pos1_264"><span class="LIDENT">pos1</span></span><span class="COMMA">,</span> <span id="local_pos2_265"><span class="LIDENT">pos2</span></span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_range_263"><span class="LIDENT">range</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <span class="LIDENT">is_dummy</span> <a href="#local_range_263"><span class="LIDENT">range</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;At an unknown location:\n&quot;</span><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_file_266"><span class="LIDENT">file</span></span> <span class="EQUAL">=</span> <a href="#local_pos1_264"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_fname</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_line_267"><span class="LIDENT">line</span></span> <span class="EQUAL">=</span> <a href="#local_pos1_264"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_lnum</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_char1_268"><span class="LIDENT">char1</span></span> <span class="EQUAL">=</span> <a href="#local_pos1_264"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_cnum</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_pos1_264"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_bol</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_char2_269"><span class="LIDENT">char2</span></span> <span class="EQUAL">=</span> <a href="#local_pos2_265"><span class="LIDENT">pos2</span></a><span class="DOT">.</span><span class="LIDENT">pos_cnum</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_pos1_264"><span class="LIDENT">pos1</span></a><span class="DOT">.</span><span class="LIDENT">pos_bol</span> <span class="IN">in</span> <span class="COMMENT">(* yes, [pos1.pos_bol] *)</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-sprintf"><span class="LIDENT">sprintf</span></a> <span class="STRING">&quot;File \&quot;%s\&quot;, line %d, characters %d-%d:\n&quot;</span><span class="EOL">
</span>      <a href="#local_file_266"><span class="LIDENT">file</span></a> <a href="#local_line_267"><span class="LIDENT">line</span></a> <a href="#local_char1_268"><span class="LIDENT">char1</span></a> <a href="#local_char2_269"><span class="LIDENT">char2</span></a><span class="EOL">
</span>      <span class="COMMENT">(* use [char1 + 1] and [char2 + 1] if *not* using Caml mode *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LexerUtil.val-tabulate"><span class="LIDENT">tabulate</span></span> <span class="LPAREN">(</span><span class="TYPE">type</span> <span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_is_eof_270"><span class="LIDENT">is_eof</span></span> <span class="COLON">:</span> <span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_lexer_271"><span class="LIDENT">lexer</span></span> <span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">a</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* Read tokens from the lexer until we hit an EOF token. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_read_272"><span class="LIDENT">read</span></span> <span id="local_tokens_273"><span class="LIDENT">tokens</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_token_274"><span class="LIDENT">token</span></span> <span class="EQUAL">=</span> <a href="#local_lexer_271"><span class="LIDENT">lexer</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_tokens_275"><span class="LIDENT">tokens</span></span> <span class="EQUAL">=</span> <a href="#local_token_274"><span class="LIDENT">token</span></a> <span class="COLONCOLON">::</span> <a href="#local_tokens_273"><span class="LIDENT">tokens</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_is_eof_270"><span class="LIDENT">is_eof</span></a> <a href="#local_token_274"><span class="LIDENT">token</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <span class="COMMENT">(* Once done, reverse the list and convert it to an array. *)</span><span class="EOL">
</span>      <a href="#local_tokens_275"><span class="LIDENT">tokens</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-rev"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">rev</span></a> <span class="INFIXOP0">|&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-of_list"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">of_list</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <a href="#local_read_272"><span class="LIDENT">read</span></a> <a href="#local_tokens_275"><span class="LIDENT">tokens</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="COMMENT">(* We now have an array of tokens. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_tokens_276"><span class="LIDENT">tokens</span></span> <span class="EQUAL">=</span> <a href="#local_read_272"><span class="LIDENT">read</span></a> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="COMMENT">(* Define a pseudo-lexer that reads from this array. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_i_277"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lexer_278"><span class="LIDENT">lexer</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* If this assertion is violated, then the parser is trying to read
       past an EOF token. This should not happen. *)</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_277"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_tokens_276"><span class="LIDENT">tokens</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_token_279"><span class="LIDENT">token</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-unsafe_get"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">unsafe_get</span></a> <a href="#local_tokens_276"><span class="LIDENT">tokens</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_277"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_i_277"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_277"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_token_279"><span class="LIDENT">token</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_lexer_278"><span class="LIDENT">lexer</span></a><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-Printers"><span class="MODULE">module</span> <span class="UIDENT">Printers</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-Printers.module-Make"><span class="MODULE">module</span> <span class="UIDENT">Make</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">I</span> <span class="COLON">:</span> <span class="UIDENT">IncrementalEngine</span><span class="DOT">.</span><span class="UIDENT">EVERYTHING</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">User</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span>    <span id="module-Printers.module-Make.argument-2-User.val-print"><span class="VAL">val</span> <span class="LIDENT">print</span><span class="COLON">:</span> <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span>    <span id="module-Printers.module-Make.argument-2-User.val-print_symbol"><span class="VAL">val</span> <span class="LIDENT">print_symbol</span><span class="COLON">:</span> <span class="UIDENT">I</span><span class="DOT">.</span><span class="LIDENT">xsymbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span></span><span class="EOL">
</span>    <span id="module-Printers.module-Make.argument-2-User.val-print_element"><span class="VAL">val</span> <span class="LIDENT">print_element</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="UIDENT">I</span><span class="DOT">.</span><span class="LIDENT">element</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">unit</span><span class="RPAREN">)</span> <span class="LIDENT">option</span></span><span class="EOL">
</span>  <span class="END">end</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-arrow"><span class="LIDENT">arrow</span></span> <span class="EQUAL">=</span> <span class="STRING">&quot; -&gt; &quot;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-dot"><span class="LIDENT">dot</span></span> <span class="EQUAL">=</span> <span class="STRING">&quot;.&quot;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-space"><span class="LIDENT">space</span></span> <span class="EQUAL">=</span> <span class="STRING">&quot; &quot;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-newline"><span class="LIDENT">newline</span></span> <span class="EQUAL">=</span> <span class="STRING">&quot;\n&quot;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">User</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">I</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing a list of symbols. An optional dot is printed at offset
     [i] into the list [symbols], if this offset lies between [0] and
     the length of the list (included). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Printers.module-Make.val-{print_symbols}4/shadowed/(menhirLib-src-menhirLib-menhirLib.ml)"><span class="LIDENT">print_symbols</span></span> <span id="local_i_280"><span class="LIDENT">i</span></span> <span id="local_symbols_281"><span class="LIDENT">symbols</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_280"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="LIDENT">print</span> <span class="LIDENT">dot</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">print</span> <span class="LIDENT">space</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="LIDENT">print_symbols</span> <span class="LPAREN">(</span><span class="MINUS">-</span><span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_symbols_281"><span class="LIDENT">symbols</span></a><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span>    <span class="ELSE">else</span> <span class="BEGIN">begin</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_symbols_281"><span class="LIDENT">symbols</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_symbol_282"><span class="LIDENT">symbol</span></span> <span class="COLONCOLON">::</span> <span id="local_symbols_283"><span class="LIDENT">symbols</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LIDENT">print_symbol</span> <a href="#local_symbol_282"><span class="LIDENT">symbol</span></a><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LIDENT">print</span> <span class="LIDENT">space</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="LIDENT">print_symbols</span> <span class="LPAREN">(</span><a href="#local_i_280"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_symbols_283"><span class="LIDENT">symbols</span></a><span class="EOL">
</span>    <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing an element as a symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_element_as_symbol"><span class="LIDENT">print_element_as_symbol</span></span> <span id="local_element_284"><span class="LIDENT">element</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_element_284"><span class="LIDENT">element</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Element</span> <span class="LPAREN">(</span><span id="local_s_285"><span class="LIDENT">s</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">print_symbol</span> <span class="LPAREN">(</span><span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="LIDENT">incoming_symbol</span> <a href="#local_s_285"><span class="LIDENT">s</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Some of the functions that follow need an element printer. They use
     [print_element] if provided by the user; otherwise they use
     [print_element_as_symbol]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_element"><span class="LIDENT">print_element</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">print_element</span> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_print_element_286"><span class="LIDENT">print_element</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_print_element_286"><span class="LIDENT">print_element</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">print_element_as_symbol</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing a stack as a list of symbols. Stack bottom on the left,
     stack top on the right. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-Printers.module-Make.val-{print_stack}5/shadowed/(menhirLib-src-menhirLib-menhirLib.ml)"><span class="LIDENT">print_stack</span></span> <span id="local_env_287"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">top</span> <a href="#local_env_287"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <span class="LIDENT">pop</span> <a href="#local_env_287"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_element_288"><span class="LIDENT">element</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_env_289"><span class="LIDENT">env</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">print_stack</span> <a href="#local_env_289"><span class="LIDENT">env</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">print</span> <span class="LIDENT">space</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">print_element</span> <a href="#local_element_288"><span class="LIDENT">element</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_stack"><span class="LIDENT">print_stack</span></span> <span id="local_env_290"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print_stack</span> <a href="#local_env_290"><span class="LIDENT">env</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print</span> <span class="LIDENT">newline</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing an item. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_item"><span class="LIDENT">print_item</span></span> <span class="LPAREN">(</span><span id="local_prod_291"><span class="LIDENT">prod</span></span><span class="COMMA">,</span> <span id="local_i_292"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print_symbol</span> <span class="LPAREN">(</span><span class="LIDENT">lhs</span> <a href="#local_prod_291"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print</span> <span class="LIDENT">arrow</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print_symbols</span> <a href="#local_i_292"><span class="LIDENT">i</span></a> <span class="LPAREN">(</span><span class="LIDENT">rhs</span> <a href="#local_prod_291"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print</span> <span class="LIDENT">newline</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing a list of symbols (public version). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_symbols"><span class="LIDENT">print_symbols</span></span> <span id="local_symbols_293"><span class="LIDENT">symbols</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print_symbols</span> <span class="LPAREN">(</span><span class="MINUS">-</span><span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_symbols_293"><span class="LIDENT">symbols</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing a production (without a dot). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_production"><span class="LIDENT">print_production</span></span> <span id="local_prod_294"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print_item</span> <span class="LPAREN">(</span><a href="#local_prod_294"><span class="LIDENT">prod</span></a><span class="COMMA">,</span> <span class="MINUS">-</span><span class="INT">1</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Printing the current LR(1) state. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_current_state"><span class="LIDENT">print_current_state</span></span> <span id="local_env_295"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print</span> <span class="STRING">&quot;Current LR(1) state: &quot;</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">top</span> <a href="#local_env_295"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">print</span> <span class="STRING">&quot;&lt;some initial state&gt;&quot;</span><span class="SEMI">;</span> <span class="COMMENT">(* TEMPORARY unsatisfactory *)</span><span class="EOL">
</span>        <span class="LIDENT">print</span> <span class="LIDENT">newline</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Element</span> <span class="LPAREN">(</span><span id="local_current_296"><span class="LIDENT">current</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">print</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-string_of_int"><span class="LIDENT">string_of_int</span></a> <span class="LPAREN">(</span><span class="LIDENT">number</span> <a href="#local_current_296"><span class="LIDENT">current</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">print</span> <span class="LIDENT">newline</span><span class="SEMI">;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-iter"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">iter</span></a> <span class="LIDENT">print_item</span> <span class="LPAREN">(</span><span class="LIDENT">items</span> <a href="#local_current_296"><span class="LIDENT">current</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-Printers.module-Make.val-print_env"><span class="LIDENT">print_env</span></span> <span id="local_env_297"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">print_stack</span> <a href="#local_env_297"><span class="LIDENT">env</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print_current_state</span> <a href="#local_env_297"><span class="LIDENT">env</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LIDENT">print</span> <span class="LIDENT">newline</span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-InfiniteArray"><span class="MODULE">module</span> <span class="UIDENT">InfiniteArray</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="DOCSTRING">(** This module implements infinite arrays, that is, arrays that grow
    transparently upon demand. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-InfiniteArray.type-t"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>    <span id="def_619"><span class="LIDENT">default</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="SEMI">;</span></span><span class="EOL">
</span>    <span id="def_648"><span class="MUTABLE">mutable</span> <span class="LIDENT">table</span><span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span><span class="SEMI">;</span></span><span class="EOL">
</span>    <span id="def_625"><span class="MUTABLE">mutable</span> <span class="LIDENT">extent</span><span class="COLON">:</span> <span class="LIDENT">int</span><span class="SEMI">;</span></span> <span class="COMMENT">(* the index of the greatest [set] ever, plus one *)</span><span class="EOL">
</span>  <span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-default_size"><span class="LIDENT">default_size</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="INT">16384</span> <span class="COMMENT">(* must be non-zero *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-make"><span class="LIDENT">make</span></span> <span id="local_x_298"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span><span class="EOL">
</span>  <span class="LIDENT">default</span> <span class="EQUAL">=</span> <a href="#local_x_298"><span class="LIDENT">x</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <span class="LIDENT">table</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-make"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">make</span></a> <span class="LIDENT">default_size</span> <a href="#local_x_298"><span class="LIDENT">x</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <span class="LIDENT">extent</span> <span class="EQUAL">=</span> <span class="INT">0</span><span class="SEMI">;</span><span class="EOL">
</span><span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-InfiniteArray.val-new_length"><span class="LIDENT">new_length</span></span> <span id="local_length_299"><span class="LIDENT">length</span></span> <span id="local_i_300"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_i_300"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_length_299"><span class="LIDENT">length</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <a href="#local_length_299"><span class="LIDENT">length</span></a><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <span class="LIDENT">new_length</span> <span class="LPAREN">(</span><span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_length_299"><span class="LIDENT">length</span></a><span class="RPAREN">)</span> <a href="#local_i_300"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-ensure"><span class="LIDENT">ensure</span></span> <span id="local_a_301"><span class="LIDENT">a</span></span> <span id="local_i_302"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_i_302"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_table_303"><span class="LIDENT">table</span></span> <span class="EQUAL">=</span> <a href="#local_a_301"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">table</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_length_304"><span class="LIDENT">length</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_table_303"><span class="LIDENT">table</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_i_302"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <a href="#local_length_304"><span class="LIDENT">length</span></a> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_table'_305"><span class="LIDENT">table'</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-make"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">make</span></a> <span class="LPAREN">(</span><span class="LIDENT">new_length</span> <span class="LPAREN">(</span><span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_length_304"><span class="LIDENT">length</span></a><span class="RPAREN">)</span> <a href="#local_i_302"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="#local_a_301"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">default</span> <span class="IN">in</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-blit"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">blit</span></a> <a href="#local_table_303"><span class="LIDENT">table</span></a> <span class="INT">0</span> <a href="#local_table'_305"><span class="LIDENT">table'</span></a> <span class="INT">0</span> <a href="#local_length_304"><span class="LIDENT">length</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_a_301"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">table</span> <span class="LESSMINUS">&lt;-</span> <a href="#local_table'_305"><span class="LIDENT">table'</span></a><span class="EOL">
</span>  <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-get"><span class="LIDENT">get</span></span> <span id="local_a_306"><span class="LIDENT">a</span></span> <span id="local_i_307"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">ensure</span> <a href="#local_a_306"><span class="LIDENT">a</span></a> <a href="#local_i_307"><span class="LIDENT">i</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-unsafe_get"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">unsafe_get</span></a> <a href="#local_a_306"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">table</span> <a href="#local_i_307"><span class="LPAREN">(</span><span class="LIDENT">i</span><span class="RPAREN">)</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-set"><span class="LIDENT">set</span></span> <span id="local_a_308"><span class="LIDENT">a</span></span> <span id="local_i_309"><span class="LIDENT">i</span></span> <span id="local_x_310"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">ensure</span> <a href="#local_a_308"><span class="LIDENT">a</span></a> <a href="#local_i_309"><span class="LIDENT">i</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-unsafe_set"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">unsafe_set</span></a> <a href="#local_a_308"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">table</span> <a href="#local_i_309"><span class="LPAREN">(</span><span class="LIDENT">i</span><span class="RPAREN">)</span></a> <a href="#local_x_310"><span class="LIDENT">x</span></a><span class="SEMI">;</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_a_308"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">extent</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_i_309"><span class="LIDENT">i</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <a href="#local_a_308"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">extent</span> <span class="LESSMINUS">&lt;-</span> <a href="#local_i_309"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-extent"><span class="LIDENT">extent</span></span> <span id="local_a_311"><span class="LIDENT">a</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_a_311"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">extent</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-InfiniteArray.val-domain"><span class="LIDENT">domain</span></span> <span id="local_a_312"><span class="LIDENT">a</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-sub"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">sub</span></a> <a href="#local_a_312"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">table</span> <span class="INT">0</span> <a href="#local_a_312"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LIDENT">extent</span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-PackedIntArray"><span class="MODULE">module</span> <span class="UIDENT">PackedIntArray</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A packed integer array is represented as a pair of an integer [k] and
   a string [s]. The integer [k] is the number of bits per integer that we
   use. The string [s] is just an array of bits, which is read in 8-bit
   chunks. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The ocaml programming language treats string literals and array literals
   in slightly different ways: the former are statically allocated, while
   the latter are dynamically allocated. (This is rather arbitrary.) In the
   context of Menhir's table-based back-end, where compact, immutable
   integer arrays are needed, ocaml strings are preferable to ocaml arrays. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-PackedIntArray.type-t"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="LIDENT">string</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The magnitude [k] of an integer [v] is the number of bits required
   to represent [v]. It is rounded up to the nearest power of two, so
   that [k] divides [Sys.word_size]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-magnitude"><span class="LIDENT">magnitude</span></span> <span class="LPAREN">(</span><span id="local_v_313"><span class="LIDENT">v</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_v_313"><span class="LIDENT">v</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/sys.ml.html#val-word_size"><span class="UIDENT">Sys</span><span class="DOT">.</span><span class="LIDENT">word_size</span></a><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="REC">rec</span> <span id="local_check_314"><span class="LIDENT">check</span></span> <span id="local_k_315"><span class="LIDENT">k</span></span> <span id="local_max_316"><span class="LIDENT">max</span></span> <span class="EQUAL">=</span> <span class="COMMENT">(* [max] equals [2^k] *)</span><span class="EOL">
</span>      <span class="IF">if</span> <span class="LPAREN">(</span><a href="#local_max_316"><span class="LIDENT">max</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <span class="INT">0</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(||)"><span class="BARBAR">||</span></a> <span class="LPAREN">(</span><a href="#local_v_313"><span class="LIDENT">v</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_max_316"><span class="LIDENT">max</span></a><span class="RPAREN">)</span> <span class="THEN">then</span><span class="EOL">
</span>        <a href="#local_k_315"><span class="LIDENT">k</span></a><span class="EOL">
</span>          <span class="COMMENT">(* if [max] just overflew, then [v] requires a full ocaml
             integer, and [k] is the number of bits in an ocaml integer
             plus one, that is, [Sys.word_size]. *)</span><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <a href="#local_check_314"><span class="LIDENT">check</span></a> <span class="LPAREN">(</span><span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_k_315"><span class="LIDENT">k</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="#local_max_316"><span class="LIDENT">max</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_max_316"><span class="LIDENT">max</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_check_314"><span class="LIDENT">check</span></a> <span class="INT">1</span> <span class="INT">2</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [pack a] turns an array of integers into a packed integer array. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Because the sign bit is the most significant bit, the magnitude of
   any negative number is the word size. In other words, [pack] does
   not achieve any space savings as soon as [a] contains any negative
   numbers, even if they are ``small''. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-pack"><span class="LIDENT">pack</span></span> <span class="LPAREN">(</span><span id="local_a_317"><span class="LIDENT">a</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="LIDENT">array</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_m_318"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_a_317"><span class="LIDENT">a</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Compute the maximum magnitude of the array elements. This tells
     us how many bits per element we are going to use. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_k_319"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-fold_left"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">fold_left</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_k_320"><span class="LIDENT">k</span></span> <span id="local_v_321"><span class="LIDENT">v</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-max"><span class="LIDENT">max</span></a> <a href="#local_k_320"><span class="LIDENT">k</span></a> <span class="LPAREN">(</span><span class="LIDENT">magnitude</span> <a href="#local_v_321"><span class="LIDENT">v</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="RPAREN">)</span> <span class="INT">1</span> <a href="#local_a_317"><span class="LIDENT">a</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Because access to ocaml strings is performed on an 8-bit basis,
     two cases arise. If [k] is less than 8, then we can pack multiple
     array entries into a single character. If [k] is greater than 8,
     then we must use multiple characters to represent a single array
     entry. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_k_319"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <span class="INT">8</span> <span class="THEN">then</span> <span class="BEGIN">begin</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* [w] is the number of array entries that we pack in a character. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(mod)"><span class="INFIXOP3">mod</span></a> <a href="#local_k_319"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_w_322"><span class="LIDENT">w</span></span> <span class="EQUAL">=</span> <span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(/)"><span class="INFIXOP3">/</span></a> <a href="#local_k_319"><span class="LIDENT">k</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* [n] is the length of the string that we allocate. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_n_323"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_m_318"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(mod)"><span class="INFIXOP3">mod</span></a> <a href="#local_w_322"><span class="LIDENT">w</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>        <a href="#local_m_318"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(/)"><span class="INFIXOP3">/</span></a> <a href="#local_w_322"><span class="LIDENT">w</span></a><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <a href="#local_m_318"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(/)"><span class="INFIXOP3">/</span></a> <a href="#local_w_322"><span class="LIDENT">w</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_s_324"><span class="LIDENT">s</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-create"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">create</span></a> <a href="#local_n_323"><span class="LIDENT">n</span></a><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Define a reader for the source array. The reader might run off
       the end if [w] does not divide [m]. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_i_325"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_next_326"><span class="LIDENT">next</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_ii_327"><span class="LIDENT">ii</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_325"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_ii_327"><span class="LIDENT">ii</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_m_318"><span class="LIDENT">m</span></a> <span class="THEN">then</span><span class="EOL">
</span>        <span class="INT">0</span> <span class="COMMENT">(* ran off the end, pad with zeroes *)</span><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_v_328"><span class="LIDENT">v</span></span> <span class="EQUAL">=</span> <a href="#local_a_317"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_ii_327"><span class="LIDENT">ii</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_i_325"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="#local_ii_327"><span class="LIDENT">ii</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>        <a href="#local_v_328"><span class="LIDENT">v</span></a><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Fill up the string. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="FOR">for</span> <span class="LIDENT">j</span> <span class="EQUAL">=</span> <span class="INT">0</span> <span class="TO">to</span> <a href="#local_n_323"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="DO">do</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_329"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="FOR">for</span> <span class="LIDENT">_x</span> <span class="EQUAL">=</span> <span class="INT">1</span> <span class="TO">to</span> <a href="#local_w_322"><span class="LIDENT">w</span></a> <span class="DO">do</span><span class="EOL">
</span>        <a href="#local_c_329"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_c_329"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <a href="#local_k_319"><span class="LIDENT">k</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lor)"><span class="INFIXOP3">lor</span></a> <a href="#local_next_326"><span class="LIDENT">next</span></a><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">set</span></a> <a href="#local_s_324"><span class="LIDENT">s</span></a> <span class="LIDENT">j</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-chr"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">chr</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_c_329"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Done. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <a href="#local_k_319"><span class="LIDENT">k</span></a><span class="COMMA">,</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-unsafe_to_string"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">unsafe_to_string</span></a> <a href="#local_s_324"><span class="LIDENT">s</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="END">end</span><span class="EOL">
</span>  <span class="ELSE">else</span> <span class="BEGIN">begin</span> <span class="COMMENT">(* k &gt; 8 *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* [w] is the number of characters that we use to encode an array entry. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_k_319"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(mod)"><span class="INFIXOP3">mod</span></a> <span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_w_330"><span class="LIDENT">w</span></span> <span class="EQUAL">=</span> <a href="#local_k_319"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(/)"><span class="INFIXOP3">/</span></a> <span class="INT">8</span> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* [n] is the length of the string that we allocate. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_n_331"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <a href="#local_m_318"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_w_330"><span class="LIDENT">w</span></a><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_s_332"><span class="LIDENT">s</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-create"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">create</span></a> <a href="#local_n_331"><span class="LIDENT">n</span></a><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Fill up the string. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="FOR">for</span> <span class="LIDENT">i</span> <span class="EQUAL">=</span> <span class="INT">0</span> <span class="TO">to</span> <a href="#local_m_318"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="DO">do</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_v_333"><span class="LIDENT">v</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <a href="#local_a_317"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">i</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="FOR">for</span> <span class="LIDENT">x</span> <span class="EQUAL">=</span> <span class="INT">1</span> <span class="TO">to</span> <a href="#local_w_330"><span class="LIDENT">w</span></a> <span class="DO">do</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-set"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">set</span></a> <a href="#local_s_332"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><span class="LIDENT">i</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_w_330"><span class="LIDENT">w</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="LIDENT">x</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-chr"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">chr</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_v_333"><span class="LIDENT">v</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">255</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <a href="#local_v_333"><span class="LIDENT">v</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_v_333"><span class="LIDENT">v</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">8</span><span class="EOL">
</span>      <span class="DONE">done</span><span class="EOL">
</span>    <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="COMMENT">(* Done. *)</span><span class="EOL">
</span><span class="EOL">
</span>    <a href="#local_k_319"><span class="LIDENT">k</span></a><span class="COMMA">,</span> <a href="../../../ocaml-base-compiler/src/stdlib/bytes.ml.html#val-unsafe_to_string"><span class="UIDENT">Bytes</span><span class="DOT">.</span><span class="LIDENT">unsafe_to_string</span></a> <a href="#local_s_332"><span class="LIDENT">s</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="END">end</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Access to a string. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-read"><span class="LIDENT">read</span></span> <span class="LPAREN">(</span><span id="local_s_334"><span class="LIDENT">s</span></span> <span class="COLON">:</span> <span class="LIDENT">string</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_i_335"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/char.ml.html#val-code"><span class="UIDENT">Char</span><span class="DOT">.</span><span class="LIDENT">code</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/string.ml.html#val-unsafe_get"><span class="UIDENT">String</span><span class="DOT">.</span><span class="LIDENT">unsafe_get</span></a> <a href="#local_s_334"><span class="LIDENT">s</span></a> <a href="#local_i_335"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [get1 t i] returns the integer stored in the packed array [t] at index [i].
   It assumes (and does not check) that the array's bit width is [1]. The
   parameter [t] is just a string. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-get1"><span class="LIDENT">get1</span></span> <span class="LPAREN">(</span><span id="local_s_336"><span class="LIDENT">s</span></span> <span class="COLON">:</span> <span class="LIDENT">string</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_i_337"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_c_338"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <span class="LIDENT">read</span> <a href="#local_s_336"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_i_337"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">3</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_c_339"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_338"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-lnot"><span class="LIDENT">lnot</span></a> <a href="#local_i_337"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b111</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_c_340"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_339"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b1</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_c_340"><span class="LIDENT">c</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [get t i] returns the integer stored in the packed array [t] at index [i]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Together, [pack] and [get] satisfy the following property: if the index [i]
   is within bounds, then [get (pack a) i] equals [a.(i)]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-get"><span class="LIDENT">get</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span id="local_k_341"><span class="LIDENT">k</span></span><span class="COMMA">,</span> <span id="local_s_342"><span class="LIDENT">s</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_i_343"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_k_341"><span class="LIDENT">k</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">1</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">get1</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">2</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_344"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_i_343"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">2</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_345"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_344"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="LPAREN">(</span><span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-lnot"><span class="LIDENT">lnot</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b11</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_346"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_345"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b11</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_c_346"><span class="LIDENT">c</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">4</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_347"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_i_343"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_348"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_347"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="LPAREN">(</span><span class="INT">4</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-lnot"><span class="LIDENT">lnot</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b1</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_c_349"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <a href="#local_c_348"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b1111</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_c_349"><span class="LIDENT">c</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">8</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="INT">16</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_j_350"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span> <span class="INT">2</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <a href="#local_j_350"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_j_350"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_k_341"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">32</span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="COMMENT">(* 64 bits unlikely, not supported *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_j_351"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span> <span class="INT">4</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_i_343"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LPAREN">(</span><span class="LPAREN">(</span><span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <a href="#local_j_351"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">8</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_j_351"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_j_351"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">2</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">8</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="LIDENT">read</span> <a href="#local_s_342"><span class="LIDENT">s</span></a> <span class="LPAREN">(</span><a href="#local_j_351"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">3</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [unflatten1 (n, data) i j] accesses the two-dimensional bitmap
   represented by [(n, data)] at indices [i] and [j]. The integer
   [n] is the width of the bitmap; the string [data] is the second
   component of the packed array obtained by encoding the table as
   a one-dimensional array. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-PackedIntArray.val-unflatten1"><span class="LIDENT">unflatten1</span></span> <span class="LPAREN">(</span><span id="local_n_352"><span class="LIDENT">n</span></span><span class="COMMA">,</span> <span id="local_data_353"><span class="LIDENT">data</span></span><span class="RPAREN">)</span> <span id="local_i_354"><span class="LIDENT">i</span></span> <span id="local_j_355"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>   <span class="LIDENT">get1</span> <a href="#local_data_353"><span class="LIDENT">data</span></a> <span class="LPAREN">(</span><a href="#local_n_352"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(*)"><span class="STAR">*</span></a> <a href="#local_i_354"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_355"><span class="LIDENT">j</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-RowDisplacement"><span class="MODULE">module</span> <span class="UIDENT">RowDisplacement</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This module compresses a two-dimensional table, where some values
   are considered insignificant, via row displacement. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This idea reportedly appears in Aho and Ullman's ``Principles
   of Compiler Design'' (1977). It is evaluated in Tarjan and Yao's
   ``Storing a Sparse Table'' (1979) and in Dencker, DÃ¼rre, and Heuft's
   ``Optimization of Parser Tables for Portable Compilers'' (1984). *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* A compressed table is represented as a pair of arrays. The
   displacement array is an array of offsets into the data array. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-RowDisplacement.type-table"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">table</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">int</span> <span class="LIDENT">array</span> <span class="STAR">*</span> <span class="COMMENT">(* displacement *)</span><span class="EOL">
</span>     <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span></span>   <span class="COMMENT">(* data *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* In a natural version of this algorithm, displacements would be greater
   than (or equal to) [-n]. However, in the particular setting of Menhir,
   both arrays are intended to be compressed with [PackedIntArray], which
   does not efficiently support negative numbers. For this reason, we are
   careful not to produce negative displacements. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* In order to avoid producing negative displacements, we simply use the
   least significant bit as the sign bit. This is implemented by [encode]
   and [decode] below. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* One could also think, say, of adding [n] to every displacement, so as
   to ensure that all displacements are nonnegative. This would work, but
   would require [n] to be published, for use by the decoder. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-RowDisplacement.val-encode"><span class="LIDENT">encode</span></span> <span class="LPAREN">(</span><span id="local_displacement_356"><span class="LIDENT">displacement</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_displacement_356"><span class="LIDENT">displacement</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>    <a href="#local_displacement_356"><span class="LIDENT">displacement</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">1</span><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(~-)"><span class="MINUS">-</span></a><a href="#local_displacement_356"><span class="LIDENT">displacement</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="INT">1</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-RowDisplacement.val-decode"><span class="LIDENT">decode</span></span> <span class="LPAREN">(</span><span id="local_displacement_357"><span class="LIDENT">displacement</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_displacement_357"><span class="LIDENT">displacement</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">1</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>    <a href="#local_displacement_357"><span class="LIDENT">displacement</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">1</span><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(~-)"><span class="MINUS">-</span></a><span class="LPAREN">(</span><a href="#local_displacement_357"><span class="LIDENT">displacement</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* It is reasonable to assume that, as matrices grow large, their
   density becomes low, i.e., they have many insignificant entries.
   As a result, it is important to work with a sparse data structure
   for rows. We internally represent a row as a list of its
   significant entries, where each entry is a pair of a [j] index and
   an element. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-RowDisplacement.type-row"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">row</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">int</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="LIDENT">list</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [compress equal insignificant dummy m n t] turns the two-dimensional table
   [t] into a compressed table. The parameter [equal] is equality of data
   values. The parameter [wildcard] tells which data values are insignificant,
   and can thus be overwritten with other values. The parameter [dummy] is
   used to fill holes in the data array. [m] and [n] are the integer
   dimensions of the table [t]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-RowDisplacement.val-compress"><span class="LIDENT">compress</span></span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_equal_358"><span class="LIDENT">equal</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_insignificant_359"><span class="LIDENT">insignificant</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">bool</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_dummy_360"><span class="LIDENT">dummy</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_m_361"><span class="LIDENT">m</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_n_362"><span class="LIDENT">n</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_t_363"><span class="LIDENT">t</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span> <span class="LIDENT">array</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">table</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Be defensive. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_t_363"><span class="LIDENT">t</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_m_361"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="BEGIN">begin</span><span class="EOL">
</span>    <span class="FOR">for</span> <span class="LIDENT">i</span> <span class="EQUAL">=</span> <span class="INT">0</span> <span class="TO">to</span> <a href="#local_m_361"><span class="LIDENT">m</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="DO">do</span><span class="EOL">
</span>      <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_t_363"><span class="LIDENT">t</span></a><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">i</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_n_362"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="TRUE">true</span><span class="EOL">
</span>  <span class="END">end</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This turns a row-as-array into a row-as-sparse-list. The row is
     accompanied by its index [i] and by its rank (the number of its
     significant entries, that is, the length of the row-as-a-list. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_sparse_364"><span class="LIDENT">sparse</span></span> <span class="LPAREN">(</span><span id="local_i_365"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_line_366"><span class="LIDENT">line</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">row</span> <span class="COMMENT">(* index, rank, row *)</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="REC">rec</span> <span id="local_loop_367"><span class="LIDENT">loop</span></span> <span class="LPAREN">(</span><span id="local_j_368"><span class="LIDENT">j</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_rank_369"><span class="LIDENT">rank</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_row_370"><span class="LIDENT">row</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">row</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_j_368"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>        <a href="#local_i_365"><span class="LIDENT">i</span></a><span class="COMMA">,</span> <a href="#local_rank_369"><span class="LIDENT">rank</span></a><span class="COMMA">,</span> <a href="#local_row_370"><span class="LIDENT">row</span></a><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_x_371"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <a href="#local_line_366"><span class="LIDENT">line</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_j_368"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="IF">if</span> <a href="#local_insignificant_359"><span class="LIDENT">insignificant</span></a> <a href="#local_x_371"><span class="LIDENT">x</span></a> <span class="THEN">then</span><span class="EOL">
</span>          <a href="#local_loop_367"><span class="LIDENT">loop</span></a> <span class="LPAREN">(</span><a href="#local_j_368"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_rank_369"><span class="LIDENT">rank</span></a> <a href="#local_row_370"><span class="LIDENT">row</span></a><span class="EOL">
</span>        <span class="ELSE">else</span><span class="EOL">
</span>          <a href="#local_loop_367"><span class="LIDENT">loop</span></a> <span class="LPAREN">(</span><a href="#local_j_368"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="INT">1</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_rank_369"><span class="LIDENT">rank</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="#local_j_368"><span class="LIDENT">j</span></a><span class="COMMA">,</span> <a href="#local_x_371"><span class="LIDENT">x</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_row_370"><span class="LIDENT">row</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <a href="#local_loop_367"><span class="LIDENT">loop</span></a> <span class="LPAREN">(</span><a href="#local_n_362"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <span class="INT">0</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Construct an array of all rows, together with their index and rank. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_rows_372"><span class="LIDENT">rows</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">int</span> <span class="STAR">*</span> <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">row</span><span class="RPAREN">)</span> <span class="LIDENT">array</span> <span class="EQUAL">=</span> <span class="COMMENT">(* index, rank, row *)</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-mapi"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">mapi</span></a> <a href="#local_sparse_364"><span class="LIDENT">sparse</span></a> <a href="#local_t_363"><span class="LIDENT">t</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Sort this array by decreasing rank. This does not have any impact
     on correctness, but reportedly improves compression. The
     intuitive idea is that rows with few significant elements are
     easy to fit, so they should be inserted last, after the problem
     has become quite constrained by fitting the heavier rows. This
     heuristic is attributed to Ziegler. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-fast_sort"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">fast_sort</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_rank1_373"><span class="LIDENT">rank1</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_rank2_374"><span class="LIDENT">rank2</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-compare"><span class="LIDENT">compare</span></a> <a href="#local_rank2_374"><span class="LIDENT">rank2</span></a> <a href="#local_rank1_373"><span class="LIDENT">rank1</span></a><span class="EOL">
</span>  <span class="RPAREN">)</span> <a href="#local_rows_372"><span class="LIDENT">rows</span></a><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Allocate a one-dimensional array of displacements. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_displacement_375"><span class="LIDENT">displacement</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="LIDENT">array</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-make"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">make</span></a> <a href="#local_m_361"><span class="LIDENT">m</span></a> <span class="INT">0</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Allocate a one-dimensional, infinite array of values. Indices
     into this array are written [k]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_data_376"><span class="LIDENT">data</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">make</span> <a href="#local_dummy_360"><span class="LIDENT">dummy</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Determine whether [row] fits at offset [k] within the current [data]
     array, up to extension of this array. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Note that this check always succeeds when [k] equals the length of
     the [data] array. Indeed, the loop is then skipped. This property
     guarantees the termination of the recursive function [fit] below. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_fits_377"><span class="LIDENT">fits</span></span> <span id="local_k_378"><span class="LIDENT">k</span></span> <span class="LPAREN">(</span><span id="local_row_379"><span class="LIDENT">row</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">row</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">bool</span> <span class="EQUAL">=</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_d_380"><span class="LIDENT">d</span></span> <span class="EQUAL">=</span> <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">extent</span> <a href="#local_data_376"><span class="LIDENT">data</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="REC">rec</span> <span id="local_loop_381"><span class="LIDENT">loop</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="TRUE">true</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_j_382"><span class="LIDENT">j</span></span><span class="COMMA">,</span> <span id="local_x_383"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_row_384"><span class="LIDENT">row</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="COMMENT">(* [x] is a significant element. *)</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="COMMENT">(* By hypothesis, [k + j] is nonnegative. If it is greater than or
             equal to the current length of the data array, stop -- the row
             fits. *)</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_k_378"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_382"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_k_378"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_382"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <a href="#local_d_380"><span class="LIDENT">d</span></a> <span class="THEN">then</span><span class="EOL">
</span>            <span class="TRUE">true</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="COMMENT">(* We now know that [k + j] is within bounds of the data
             array. Check whether it is compatible with the element [y] found
             there. If it is, continue. If it isn't, stop -- the row does not
             fit. *)</span><span class="EOL">
</span><span class="EOL">
</span>          <span class="ELSE">else</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_y_385"><span class="LIDENT">y</span></span> <span class="EQUAL">=</span> <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <a href="#local_data_376"><span class="LIDENT">data</span></a> <span class="LPAREN">(</span><a href="#local_k_378"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_382"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <span class="IF">if</span> <a href="#local_insignificant_359"><span class="LIDENT">insignificant</span></a> <a href="#local_y_385"><span class="LIDENT">y</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(||)"><span class="BARBAR">||</span></a> <a href="#local_equal_358"><span class="LIDENT">equal</span></a> <a href="#local_x_383"><span class="LIDENT">x</span></a> <a href="#local_y_385"><span class="LIDENT">y</span></a> <span class="THEN">then</span><span class="EOL">
</span>              <a href="#local_loop_381"><span class="LIDENT">loop</span></a> <a href="#local_row_384"><span class="LIDENT">row</span></a><span class="EOL">
</span>            <span class="ELSE">else</span><span class="EOL">
</span>              <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_loop_381"><span class="LIDENT">loop</span></a> <a href="#local_row_379"><span class="LIDENT">row</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Find the leftmost position where a row fits. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If the leftmost significant element in this row is at offset [j],
     then we can hope to fit as far left as [-j] -- so this element
     lands at offset [0] in the data array. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Note that displacements may be negative. This means that, for
     insignificant elements, accesses to the data array could fail: they could
     be out of bounds, either towards the left or towards the right. This is
     not a problem, as long as [get] is invoked only at significant
     elements. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_fit_386"><span class="LIDENT">fit</span></span> <span id="local_k_387"><span class="LIDENT">k</span></span> <span id="local_row_388"><span class="LIDENT">row</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_fits_377"><span class="LIDENT">fits</span></a> <a href="#local_k_387"><span class="LIDENT">k</span></a> <a href="#local_row_388"><span class="LIDENT">row</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <a href="#local_k_387"><span class="LIDENT">k</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <a href="#local_fit_386"><span class="LIDENT">fit</span></a> <span class="LPAREN">(</span><a href="#local_k_387"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_row_388"><span class="LIDENT">row</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_fit_389"><span class="LIDENT">fit</span></span> <span id="local_row_390"><span class="LIDENT">row</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_row_390"><span class="LIDENT">row</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="INT">0</span> <span class="COMMENT">(* irrelevant *)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_j_391"><span class="LIDENT">j</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_fit_386"><span class="LIDENT">fit</span></a> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(~-)"><span class="MINUS">-</span></a><a href="#local_j_391"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <a href="#local_row_390"><span class="LIDENT">row</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Write [row] at (compatible) offset [k]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_write_392"><span class="LIDENT">write</span></span> <span id="local_k_393"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_j_394"><span class="LIDENT">j</span></span><span class="COMMA">,</span> <span id="local_x_395"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_row_396"><span class="LIDENT">row</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">set</span> <a href="#local_data_376"><span class="LIDENT">data</span></a> <span class="LPAREN">(</span><a href="#local_k_393"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_394"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <a href="#local_x_395"><span class="LIDENT">x</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <a href="#local_write_392"><span class="LIDENT">write</span></a> <a href="#local_k_393"><span class="LIDENT">k</span></a> <a href="#local_row_396"><span class="LIDENT">row</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Iterate over the sorted array of rows. Fit and write each row at
     the leftmost compatible offset. Update the displacement table. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-iter"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">iter</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_i_397"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_row_398"><span class="LIDENT">row</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_k_399"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span> <a href="#local_fit_389"><span class="LIDENT">fit</span></a> <a href="#local_row_398"><span class="LIDENT">row</span></a> <span class="IN">in</span> <span class="COMMENT">(* if [row] has leading insignificant elements, then [k] can be negative *)</span><span class="EOL">
</span>    <a href="#local_write_392"><span class="LIDENT">write</span></a> <a href="#local_k_399"><span class="LIDENT">k</span></a> <a href="#local_row_398"><span class="LIDENT">row</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_displacement_375"><span class="LIDENT">displacement</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_397"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LESSMINUS">&lt;-</span> <span class="LIDENT">encode</span> <a href="#local_k_399"><span class="LIDENT">k</span></a><span class="EOL">
</span>  <span class="RPAREN">)</span> <a href="#local_rows_372"><span class="LIDENT">rows</span></a><span class="SEMI">;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Return the compressed tables. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <a href="#local_displacement_375"><span class="LIDENT">displacement</span></a><span class="COMMA">,</span> <span class="UIDENT">InfiniteArray</span><span class="DOT">.</span><span class="LIDENT">domain</span> <a href="#local_data_376"><span class="LIDENT">data</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [get ct i j] returns the value found at indices [i] and [j] in the
   compressed table [ct]. This function call is permitted only if the
   value found at indices [i] and [j] in the original table is
   significant -- otherwise, it could fail abruptly. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Together, [compress] and [get] have the property that, if the value
   found at indices [i] and [j] in an uncompressed table [t] is
   significant, then [get (compress t) i j] is equal to that value. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-RowDisplacement.val-get"><span class="LIDENT">get</span></span> <span class="LPAREN">(</span><span id="local_displacement_400"><span class="LIDENT">displacement</span></span><span class="COMMA">,</span> <span id="local_data_401"><span class="LIDENT">data</span></span><span class="RPAREN">)</span> <span id="local_i_402"><span class="LIDENT">i</span></span> <span id="local_j_403"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_i_402"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_i_402"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_displacement_400"><span class="LIDENT">displacement</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_k_404"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span> <span class="LIDENT">decode</span> <a href="#local_displacement_400"><span class="LIDENT">displacement</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_402"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_k_404"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_403"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_k_404"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_403"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_data_401"><span class="LIDENT">data</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="COMMENT">(* failure of this assertion indicates an attempt to access an
       insignificant element that happens to be mapped out of the bounds
       of the [data] array. *)</span><span class="EOL">
</span>  <a href="#local_data_401"><span class="LIDENT">data</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_k_404"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_403"><span class="LIDENT">j</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* [getget] is a variant of [get] which only requires read access,
   via accessors, to the two components of the table. *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-RowDisplacement.val-getget"><span class="LIDENT">getget</span></span> <span id="local_get_displacement_405"><span class="LIDENT">get_displacement</span></span> <span id="local_get_data_406"><span class="LIDENT">get_data</span></span> <span class="LPAREN">(</span><span id="local_displacement_407"><span class="LIDENT">displacement</span></span><span class="COMMA">,</span> <span id="local_data_408"><span class="LIDENT">data</span></span><span class="RPAREN">)</span> <span id="local_i_409"><span class="LIDENT">i</span></span> <span id="local_j_410"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_k_411"><span class="LIDENT">k</span></span> <span class="EQUAL">=</span> <span class="LIDENT">decode</span> <span class="LPAREN">(</span><a href="#local_get_displacement_405"><span class="LIDENT">get_displacement</span></a> <a href="#local_displacement_407"><span class="LIDENT">displacement</span></a> <a href="#local_i_409"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_get_data_406"><span class="LIDENT">get_data</span></a> <a href="#local_data_408"><span class="LIDENT">data</span></a> <span class="LPAREN">(</span><a href="#local_k_411"><span class="LIDENT">k</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_410"><span class="LIDENT">j</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-LinearizedArray"><span class="MODULE">module</span> <span class="UIDENT">LinearizedArray</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The [entry] array contains offsets into the [data] array. It has [n+1]
   elements if the original (unencoded) array has [n] elements. The value
   of [entry.(n)] is the length of the [data] array. This convention is
   natural and allows avoiding a special case. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-LinearizedArray.type-t"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* data: *)</span>   <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span> <span class="STAR">*</span><span class="EOL">
</span>  <span class="COMMENT">(* entry: *)</span> <span class="LIDENT">int</span> <span class="LIDENT">array</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-make"><span class="LIDENT">make</span></span> <span class="LPAREN">(</span><span id="local_a_412"><span class="LIDENT">a</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">array</span> <span class="LIDENT">array</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_n_413"><span class="LIDENT">n</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_a_412"><span class="LIDENT">a</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="COMMENT">(* Build the entry array. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_size_414"><span class="LIDENT">size</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_entry_415"><span class="LIDENT">entry</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-init"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">init</span></a> <span class="LPAREN">(</span><a href="#local_n_413"><span class="LIDENT">n</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_416"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_s_417"><span class="LIDENT">s</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_size_414"><span class="LIDENT">size</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_416"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="#local_n_413"><span class="LIDENT">n</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <a href="#local_size_414"><span class="LIDENT">size</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="#local_s_417"><span class="LIDENT">s</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_a_412"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_416"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_s_417"><span class="LIDENT">s</span></a><span class="EOL">
</span>  <span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_entry_415"><span class="LIDENT">entry</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_n_413"><span class="LIDENT">n</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_size_414"><span class="LIDENT">size</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="COMMENT">(* Build the data array. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_i_418"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span><span class="EOL">
</span>  <span class="AND">and</span> <span id="local_j_419"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-ref"><span class="LIDENT">ref</span></a> <span class="INT">0</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_data_420"><span class="LIDENT">data</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-init"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">init</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_size_414"><span class="LIDENT">size</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="WHILE">while</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_419"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_a_412"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_418"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="DO">do</span><span class="EOL">
</span>      <a href="#local_i_418"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_418"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>      <a href="#local_j_419"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <span class="INT">0</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="DONE">done</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_x_421"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <a href="#local_a_412"><span class="LIDENT">a</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_i_418"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="DOT">.</span><span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_419"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_j_419"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(:=)"><span class="COLONEQUAL">:=</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(!)"><span class="BANG">!</span></a><a href="#local_j_419"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_x_421"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_data_420"><span class="LIDENT">data</span></a><span class="COMMA">,</span> <a href="#local_entry_415"><span class="LIDENT">entry</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-length"><span class="LIDENT">length</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_entry_422"><span class="LIDENT">entry</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <a href="#local_entry_422"><span class="LIDENT">entry</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-row_length"><span class="LIDENT">row_length</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_entry_423"><span class="LIDENT">entry</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span id="local_i_424"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_entry_423"><span class="LIDENT">entry</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_424"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_entry_423"><span class="LIDENT">entry</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_424"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-row_length_via"><span class="LIDENT">row_length_via</span></span> <span id="local_get_entry_425"><span class="LIDENT">get_entry</span></span> <span id="local_i_426"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <a href="#local_get_entry_425"><span class="LIDENT">get_entry</span></a> <span class="LPAREN">(</span><a href="#local_i_426"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_get_entry_425"><span class="LIDENT">get_entry</span></a> <a href="#local_i_426"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-read"><span class="LIDENT">read</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span id="local_data_428"><span class="LIDENT">data</span></span><span class="COMMA">,</span> <span id="local_entry_429"><span class="LIDENT">entry</span></span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_la_427"><span class="LIDENT">la</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span id="local_i_430"><span class="LIDENT">i</span></span> <span id="local_j_431"><span class="LIDENT">j</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_j_431"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_j_431"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="LIDENT">row_length</span> <a href="#local_la_427"><span class="LIDENT">la</span></a> <a href="#local_i_430"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <a href="#local_data_428"><span class="LIDENT">data</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_entry_429"><span class="LIDENT">entry</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_430"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_431"><span class="LIDENT">j</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-read_via"><span class="LIDENT">read_via</span></span> <span id="local_get_data_432"><span class="LIDENT">get_data</span></span> <span id="local_get_entry_433"><span class="LIDENT">get_entry</span></span> <span id="local_i_434"><span class="LIDENT">i</span></span> <span id="local_j_435"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_j_435"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_j_435"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="LIDENT">row_length_via</span> <a href="#local_get_entry_433"><span class="LIDENT">get_entry</span></a> <a href="#local_i_434"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <a href="#local_get_data_432"><span class="LIDENT">get_data</span></a> <span class="LPAREN">(</span><a href="#local_get_entry_433"><span class="LIDENT">get_entry</span></a> <a href="#local_i_434"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_435"><span class="LIDENT">j</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-write"><span class="LIDENT">write</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span id="local_data_437"><span class="LIDENT">data</span></span><span class="COMMA">,</span> <span id="local_entry_438"><span class="LIDENT">entry</span></span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_la_436"><span class="LIDENT">la</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span id="local_i_439"><span class="LIDENT">i</span></span> <span id="local_j_440"><span class="LIDENT">j</span></span> <span class="LPAREN">(</span><span id="local_v_441"><span class="LIDENT">v</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">unit</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_j_440"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_j_440"><span class="LIDENT">j</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="LIDENT">row_length</span> <a href="#local_la_436"><span class="LIDENT">la</span></a> <a href="#local_i_439"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <a href="#local_data_437"><span class="LIDENT">data</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_entry_438"><span class="LIDENT">entry</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_i_439"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="#local_j_440"><span class="LIDENT">j</span></a><span class="RPAREN">)</span> <span class="LESSMINUS">&lt;-</span> <a href="#local_v_441"><span class="LIDENT">v</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="module-LinearizedArray.val-read_interval_via"><span class="LIDENT">read_interval_via</span></span> <span id="local_get_data_442"><span class="LIDENT">get_data</span></span> <span id="local_i_443"><span class="LIDENT">i</span></span> <span id="local_j_444"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="IF">if</span> <a href="#local_i_443"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_j_444"><span class="LIDENT">j</span></a> <span class="THEN">then</span><span class="EOL">
</span>    <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="ELSE">else</span><span class="EOL">
</span>    <a href="#local_get_data_442"><span class="LIDENT">get_data</span></a> <a href="#local_i_443"><span class="LIDENT">i</span></a> <span class="COLONCOLON">::</span> <span class="LIDENT">read_interval_via</span> <a href="#local_get_data_442"><span class="LIDENT">get_data</span></a> <span class="LPAREN">(</span><a href="#local_i_443"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_j_444"><span class="LIDENT">j</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-read_row_via"><span class="LIDENT">read_row_via</span></span> <span id="local_get_data_445"><span class="LIDENT">get_data</span></span> <span id="local_get_entry_446"><span class="LIDENT">get_entry</span></span> <span id="local_i_447"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">read_interval_via</span> <a href="#local_get_data_445"><span class="LIDENT">get_data</span></a> <span class="LPAREN">(</span><a href="#local_get_entry_446"><span class="LIDENT">get_entry</span></a> <a href="#local_i_447"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="#local_get_entry_446"><span class="LIDENT">get_entry</span></a> <span class="LPAREN">(</span><a href="#local_i_447"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-LinearizedArray.val-read_row"><span class="LIDENT">read_row</span></span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span id="local_data_448"><span class="LIDENT">data</span></span><span class="COMMA">,</span> <span id="local_entry_449"><span class="LIDENT">entry</span></span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">t</span><span class="RPAREN">)</span> <span id="local_i_450"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">list</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">read_row_via</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-get"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_data_448"><span class="LIDENT">data</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-get"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_entry_449"><span class="LIDENT">entry</span></a><span class="RPAREN">)</span> <a href="#local_i_450"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-TableFormat"><span class="MODULE">module</span> <span class="UIDENT">TableFormat</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature defines the format of the parse tables. It is used as
   an argument to [TableInterpreter.Make]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-TableFormat.module-type-TABLES"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">TABLES</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This is the parser's type of tokens. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.type-token"><span class="TYPE">type</span> <span class="LIDENT">token</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This maps a token to its internal (generation-time) integer code. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-token2terminal"><span class="VAL">val</span> <span class="LIDENT">token2terminal</span><span class="COLON">:</span> <span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This is the integer code for the error pseudo-token. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-error_terminal"><span class="VAL">val</span> <span class="LIDENT">error_terminal</span><span class="COLON">:</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This maps a token to its semantic value. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-token2value"><span class="VAL">val</span> <span class="LIDENT">token2value</span><span class="COLON">:</span> <span class="LIDENT">token</span> <span class="MINUSGREATER">-&gt;</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#type-t"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Traditionally, an LR automaton is described by two tables, namely, an
     action table and a goto table. See, for instance, the Dragon book.

     The action table is a two-dimensional matrix that maps a state and a
     lookahead token to an action. An action is one of: shift to a certain
     state, reduce a certain production, accept, or fail.

     The goto table is a two-dimensional matrix that maps a state and a
     non-terminal symbol to either a state or undefined. By construction, this
     table is sparse: its undefined entries are never looked up. A compression
     technique is free to overlap them with other entries.

     In Menhir, things are slightly different. If a state has a default
     reduction on token [#], then that reduction must be performed without
     consulting the lookahead token. As a result, we must first determine
     whether that is the case, before we can obtain a lookahead token and use it
     as an index in the action table.

     Thus, Menhir's tables are as follows.

     A one-dimensional default reduction table maps a state to either ``no
     default reduction'' (encoded as: 0) or ``by default, reduce prod''
     (encoded as: 1 + prod). The action table is looked up only when there
     is no default reduction. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-default_reduction"><span class="VAL">val</span> <span class="LIDENT">default_reduction</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Menhir follows Dencker, DÃ¼rre and Heuft, who point out that, although the
     action table is not sparse by nature (i.e., the error entries are
     significant), it can be made sparse by first factoring out a binary error
     matrix, then replacing the error entries in the action table with undefined
     entries. Thus:

     A two-dimensional error bitmap maps a state and a terminal to either
     ``fail'' (encoded as: 0) or ``do not fail'' (encoded as: 1). The action
     table, which is now sparse, is looked up only in the latter case. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The error bitmap is flattened into a one-dimensional table; its width is
     recorded so as to allow indexing. The table is then compressed via
     [PackedIntArray]. The bit width of the resulting packed array must be
     [1], so it is not explicitly recorded. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The error bitmap does not contain a column for the [#] pseudo-terminal.
     Thus, its width is [Terminal.n - 1]. We exploit the fact that the integer
     code assigned to [#] is greatest: the fact that the right-most column
     in the bitmap is missing does not affect the code for accessing it. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-error"><span class="VAL">val</span> <span class="LIDENT">error</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="COMMENT">(* width of the bitmap *)</span> <span class="STAR">*</span> <span class="LIDENT">string</span></span> <span class="COMMENT">(* second component of [PackedIntArray.t] *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A two-dimensional action table maps a state and a terminal to one of
     ``shift to state s and discard the current token'' (encoded as: s | 10),
     ``shift to state s without discarding the current token'' (encoded as: s |
     11), or ``reduce prod'' (encoded as: prod | 01). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The action table is first compressed via [RowDisplacement], then packed
     via [PackedIntArray]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Like the error bitmap, the action table does not contain a column for the
     [#] pseudo-terminal. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-action"><span class="VAL">val</span> <span class="LIDENT">action</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A one-dimensional lhs table maps a production to its left-hand side (a
     non-terminal symbol). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-lhs"><span class="VAL">val</span> <span class="LIDENT">lhs</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A two-dimensional goto table maps a state and a non-terminal symbol to
     either undefined (encoded as: 0) or a new state s (encoded as: 1 + s). *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The goto table is first compressed via [RowDisplacement], then packed
     via [PackedIntArray]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-goto"><span class="VAL">val</span> <span class="LIDENT">goto</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The number of start productions. A production [prod] is a start
     production if and only if [prod &lt; start] holds. This is also the
     number of start symbols. A nonterminal symbol [nt] is a start
     symbol if and only if [nt &lt; start] holds. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-start"><span class="VAL">val</span> <span class="LIDENT">start</span><span class="COLON">:</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A one-dimensional semantic action table maps productions to semantic
     actions. The calling convention for semantic actions is described in
     [EngineTypes]. This table contains ONLY NON-START PRODUCTIONS, so the
     indexing is off by [start]. Be careful. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-semantic_action"><span class="VAL">val</span> <span class="LIDENT">semantic_action</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LPAREN">(</span><span class="LIDENT">int</span><span class="COMMA">,</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#type-t"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                        <span class="LPAREN">(</span><span class="LIDENT">int</span><span class="COMMA">,</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#type-t"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span>        <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">stack</span><span class="RPAREN">)</span> <span class="LIDENT">array</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The parser defines its own [Error] exception. This exception can be
     raised by semantic actions and caught by the engine, and raised by the
     engine towards the final user. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.exception-Error"><span class="EXCEPTION">exception</span> <span class="UIDENT">Error</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The parser indicates whether to generate a trace. Generating a
     trace requires two extra tables, which respectively map a
     terminal symbol and a production to a string. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableFormat.module-type-TABLES.val-trace"><span class="VAL">val</span> <span class="LIDENT">trace</span><span class="COLON">:</span> <span class="LPAREN">(</span><span class="LIDENT">string</span> <span class="LIDENT">array</span> <span class="STAR">*</span> <span class="LIDENT">string</span> <span class="LIDENT">array</span><span class="RPAREN">)</span> <span class="LIDENT">option</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-InspectionTableFormat"><span class="MODULE">module</span> <span class="UIDENT">InspectionTableFormat</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* This signature defines the format of the tables that are produced (in
   addition to the tables described in [TableFormat]) when the command line
   switch [--inspection] is enabled. It is used as an argument to
   [InspectionTableInterpreter.Make]. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-InspectionTableFormat.module-type-TABLES"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">TABLES</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The types of symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">IncrementalEngine</span><span class="DOT">.</span><span class="UIDENT">SYMBOLS</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type ['a lr1state] describes an LR(1) state. The generated parser defines
     it internally as [int]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.type-lr1state"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Some of the tables that follow use encodings of (terminal and
     nonterminal) symbols as integers. So, we need functions that
     map the integer encoding of a symbol to its algebraic encoding. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-terminal"><span class="VAL">val</span>    <span class="LIDENT">terminal</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span></span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-nonterminal"><span class="VAL">val</span> <span class="LIDENT">nonterminal</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The left-hand side of every production already appears in the
     signature [TableFormat.TABLES], so we need not repeat it here. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The right-hand side of every production. This a linearized array
     of arrays of integers, whose [data] and [entry] components have
     been packed. The encoding of symbols as integers in described in
     [TableBackend]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-rhs"><span class="VAL">val</span> <span class="LIDENT">rhs</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A mapping of every (non-initial) state to its LR(0) core. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-lr0_core"><span class="VAL">val</span> <span class="LIDENT">lr0_core</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A mapping of every LR(0) state to its set of LR(0) items. Each item is
     represented in its packed form (see [Item]) as an integer. Thus the
     mapping is an array of arrays of integers, which is linearized and
     packed, like [rhs]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-lr0_items"><span class="VAL">val</span> <span class="LIDENT">lr0_items</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A mapping of every LR(0) state to its incoming symbol, if it has one. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-lr0_incoming"><span class="VAL">val</span> <span class="LIDENT">lr0_incoming</span><span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A table that tells which non-terminal symbols are nullable. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-nullable"><span class="VAL">val</span> <span class="LIDENT">nullable</span><span class="COLON">:</span> <span class="LIDENT">string</span></span><span class="EOL">
</span>    <span class="COMMENT">(* This is a packed int array of bit width 1. It can be read
       using [PackedIntArray.get1]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* A two-table dimensional table, indexed by a nonterminal symbol and
     by a terminal symbol (other than [#]), encodes the FIRST sets. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableFormat.module-type-TABLES.val-first"><span class="VAL">val</span> <span class="LIDENT">first</span><span class="COLON">:</span> <span class="LIDENT">int</span> <span class="COMMENT">(* width of the bitmap *)</span> <span class="STAR">*</span> <span class="LIDENT">string</span></span> <span class="COMMENT">(* second component of [PackedIntArray.t] *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-InspectionTableInterpreter"><span class="MODULE">module</span> <span class="UIDENT">InspectionTableInterpreter</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* -------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The type functor. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-InspectionTableInterpreter.module-Symbols"><span class="MODULE">module</span> <span class="UIDENT">Symbols</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableInterpreter.module-Symbols.argument-1-T.type-terminal"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">terminal</span></span><span class="EOL">
</span>  <span id="module-InspectionTableInterpreter.module-Symbols.argument-1-T.type-nonterminal"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">nonterminal</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">T</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This should be the only place in the whole library (and generator!)
     where these types are defined. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableInterpreter.module-Symbols.type-symbol"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Symbols.type-symbol.constructor-T"><span class="BAR">|</span> <span class="UIDENT">T</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">terminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span></span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Symbols.type-symbol.constructor-N"><span class="BAR">|</span> <span class="UIDENT">N</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">nonterminal</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span></span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableInterpreter.module-Symbols.type-xsymbol"><span class="TYPE">type</span> <span class="LIDENT">xsymbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span id="module-InspectionTableInterpreter.module-Symbols.type-xsymbol.constructor-X"><span class="BAR">|</span> <span class="UIDENT">X</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">xsymbol</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* -------------------------------------------------------------------------- *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* The code functor. *)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-InspectionTableInterpreter.module-Make"><span class="MODULE">module</span> <span class="UIDENT">Make</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">TT</span> <span class="COLON">:</span> <span class="UIDENT">TableFormat</span><span class="DOT">.</span><span class="UIDENT">TABLES</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">IT</span> <span class="COLON">:</span> <span class="UIDENT">InspectionTableFormat</span><span class="DOT">.</span><span class="UIDENT">TABLES</span><span class="EOL">
</span>        <span class="WITH">with</span> <span id="def_640"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">lr1state</span> <span class="EQUAL">=</span> <span class="LIDENT">int</span></span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">ET</span> <span class="COLON">:</span> <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="UIDENT">TABLE</span><span class="EOL">
</span>        <span class="WITH">with</span> <span id="def_643"><span class="TYPE">type</span> <span class="LIDENT">terminal</span> <span class="EQUAL">=</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>         <span class="AND">and</span> <span id="def_628"><span class="TYPE">type</span> <span class="LIDENT">nonterminal</span> <span class="EQUAL">=</span> <span class="LIDENT">int</span></span><span class="EOL">
</span>         <span class="AND">and</span> <span id="def_649"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#type-t"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">E</span> <span class="COLON">:</span> <span class="SIG">sig</span><span class="EOL">
</span>     <span id="module-InspectionTableInterpreter.module-Make.argument-4-E.type-env"><span class="TYPE">type</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">env</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="UIDENT">ET</span><span class="DOT">.</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="UIDENT">ET</span><span class="DOT">.</span><span class="LIDENT">semantic_value</span><span class="COMMA">,</span> <span class="UIDENT">ET</span><span class="DOT">.</span><span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">env</span></span><span class="EOL">
</span>   <span class="END">end</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Including [IT] is an easy way of inheriting the definitions of the types
     [symbol] and [xsymbol]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">IT</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This auxiliary function decodes a packed linearized array, as created by
     [TableBackend.linearize_and_marshal1]. Here, we read a row all at once. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-read_packed_linearized"><span class="LIDENT">read_packed_linearized</span></span><span class="EOL">
</span>    <span class="LPAREN">(</span><span id="local_data_451"><span class="LIDENT">data</span></span><span class="COMMA">,</span> <span id="local_entry_452"><span class="LIDENT">entry</span></span> <span class="COLON">:</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_i_453"><span class="LIDENT">i</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="LIDENT">list</span><span class="EOL">
</span>  <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">LinearizedArray</span><span class="DOT">.</span><span class="LIDENT">read_row_via</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <a href="#local_data_451"><span class="LIDENT">data</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <a href="#local_entry_452"><span class="LIDENT">entry</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_i_453"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This auxiliary function decodes a symbol. The encoding was done by
     [encode_symbol] or [encode_symbol_option] in the table back-end. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-decode_symbol"><span class="LIDENT">decode_symbol</span></span> <span class="LPAREN">(</span><span id="local_symbol_454"><span class="LIDENT">symbol</span></span> <span class="COLON">:</span> <span class="LIDENT">int</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">xsymbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* If [symbol] is 0, then we have no symbol. This could mean e.g.
       that the function [incoming_symbol] has been applied to an
       initial state. In principle, this cannot happen. *)</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_symbol_454"><span class="LIDENT">symbol</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;)"><span class="GREATER">&gt;</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="COMMENT">(* The low-order bit distinguishes terminal and nonterminal symbols. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_kind_455"><span class="LIDENT">kind</span></span> <span class="EQUAL">=</span> <a href="#local_symbol_454"><span class="LIDENT">symbol</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_symbol_456"><span class="LIDENT">symbol</span></span> <span class="EQUAL">=</span> <a href="#local_symbol_454"><span class="LIDENT">symbol</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_kind_455"><span class="LIDENT">kind</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">terminal</span> <span class="LPAREN">(</span><a href="#local_symbol_456"><span class="LIDENT">symbol</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">nonterminal</span> <a href="#local_symbol_456"><span class="LIDENT">symbol</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* These auxiliary functions convert a symbol to its integer code. For speed
     and for convenience, we use an unsafe type cast. This relies on the fact
     that the data constructors of the [terminal] and [nonterminal] GADTs are
     declared in an order that reflects their internal code. In the case of
     nonterminal symbols, we add [start] to account for the presence of the
     start symbols. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-n2i"><span class="LIDENT">n2i</span></span> <span class="LPAREN">(</span><span id="local_nt_457"><span class="LIDENT">nt</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">nonterminal</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_answer_458"><span class="LIDENT">answer</span></span> <span class="EQUAL">=</span> <span class="UIDENT">TT</span><span class="DOT">.</span><span class="LIDENT">start</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <a href="#local_nt_457"><span class="LIDENT">nt</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* For safety, check that the above cast produced a correct result. *)</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">nonterminal</span> <a href="#local_answer_458"><span class="LIDENT">answer</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <a href="#local_nt_457"><span class="LIDENT">nt</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_answer_458"><span class="LIDENT">answer</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-t2i"><span class="LIDENT">t2i</span></span> <span class="LPAREN">(</span><span id="local_t_459"><span class="LIDENT">t</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">terminal</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="LIDENT">int</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_answer_460"><span class="LIDENT">answer</span></span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <a href="#local_t_459"><span class="LIDENT">t</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* For safety, check that the above cast produced a correct result. *)</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">terminal</span> <a href="#local_answer_460"><span class="LIDENT">answer</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <a href="#local_t_459"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_answer_460"><span class="LIDENT">answer</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Ordering functions. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-compare_terminals"><span class="LIDENT">compare_terminals</span></span> <span id="local_t1_461"><span class="LIDENT">t1</span></span> <span id="local_t2_462"><span class="LIDENT">t2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Subtraction is safe because overflow is impossible. *)</span><span class="EOL">
</span>    <span class="LIDENT">t2i</span> <a href="#local_t1_461"><span class="LIDENT">t1</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="LIDENT">t2i</span> <a href="#local_t2_462"><span class="LIDENT">t2</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-compare_nonterminals"><span class="LIDENT">compare_nonterminals</span></span> <span id="local_nt1_463"><span class="LIDENT">nt1</span></span> <span id="local_nt2_464"><span class="LIDENT">nt2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Subtraction is safe because overflow is impossible. *)</span><span class="EOL">
</span>    <span class="LIDENT">n2i</span> <a href="#local_nt1_463"><span class="LIDENT">nt1</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="LIDENT">n2i</span> <a href="#local_nt2_464"><span class="LIDENT">nt2</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-compare_symbols"><span class="LIDENT">compare_symbols</span></span> <span id="local_symbol1_465"><span class="LIDENT">symbol1</span></span> <span id="local_symbol2_466"><span class="LIDENT">symbol2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_symbol1_465"><span class="LIDENT">symbol1</span></a><span class="COMMA">,</span> <a href="#local_symbol2_466"><span class="LIDENT">symbol2</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="MINUS">-</span><span class="INT">1</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="INT">1</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span id="local_t1_467"><span class="LIDENT">t1</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span id="local_t2_468"><span class="LIDENT">t2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">compare_terminals</span> <a href="#local_t1_467"><span class="LIDENT">t1</span></a> <a href="#local_t2_468"><span class="LIDENT">t2</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <span id="local_nt1_469"><span class="LIDENT">nt1</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <span id="local_nt2_470"><span class="LIDENT">nt2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">compare_nonterminals</span> <a href="#local_nt1_469"><span class="LIDENT">nt1</span></a> <a href="#local_nt2_470"><span class="LIDENT">nt2</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-compare_productions"><span class="LIDENT">compare_productions</span></span> <span id="local_prod1_471"><span class="LIDENT">prod1</span></span> <span id="local_prod2_472"><span class="LIDENT">prod2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Subtraction is safe because overflow is impossible. *)</span><span class="EOL">
</span>    <a href="#local_prod1_471"><span class="LIDENT">prod1</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_prod2_472"><span class="LIDENT">prod2</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-compare_items"><span class="LIDENT">compare_items</span></span> <span class="LPAREN">(</span><span id="local_prod1_473"><span class="LIDENT">prod1</span></span><span class="COMMA">,</span> <span id="local_index1_474"><span class="LIDENT">index1</span></span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span id="local_prod2_475"><span class="LIDENT">prod2</span></span><span class="COMMA">,</span> <span id="local_index2_476"><span class="LIDENT">index2</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_c_477"><span class="LIDENT">c</span></span> <span class="EQUAL">=</span> <span class="LIDENT">compare_productions</span> <a href="#local_prod1_473"><span class="LIDENT">prod1</span></a> <a href="#local_prod2_475"><span class="LIDENT">prod2</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* Subtraction is safe because overflow is impossible. *)</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_c_477"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;&gt;)"><span class="INFIXOP0">&lt;&gt;</span></a> <span class="INT">0</span> <span class="THEN">then</span> <a href="#local_c_477"><span class="LIDENT">c</span></a> <span class="ELSE">else</span> <a href="#local_index1_474"><span class="LIDENT">index1</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <a href="#local_index2_476"><span class="LIDENT">index2</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [incoming_symbol] goes through the tables [IT.lr0_core] and
     [IT.lr0_incoming]. This yields a representation of type [xsymbol], out of
     which we strip the [X] quantifier, so as to get a naked symbol. This last
     step is ill-typed and potentially dangerous. It is safe only because this
     function is used at type ['a lr1state -&gt; 'a symbol], which forces an
     appropriate choice of ['a]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-incoming_symbol"><span class="LIDENT">incoming_symbol</span></span> <span class="LPAREN">(</span><span id="local_s_478"><span class="LIDENT">s</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">lr1state</span><span class="RPAREN">)</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">symbol</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_core_479"><span class="LIDENT">core</span></span> <span class="EQUAL">=</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">lr0_core</span> <a href="#local_s_478"><span class="LIDENT">s</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_symbol_480"><span class="LIDENT">symbol</span></span> <span class="EQUAL">=</span> <span class="LIDENT">decode_symbol</span> <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">lr0_incoming</span> <a href="#local_core_479"><span class="LIDENT">core</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_symbol_480"><span class="LIDENT">symbol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="UIDENT">X</span> <span id="local_symbol_481"><span class="LIDENT">symbol</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-magic"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">magic</span></a> <a href="#local_symbol_481"><span class="LIDENT">symbol</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [lhs] reads the table [TT.lhs] and uses [IT.nonterminal]
     to decode the symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-lhs"><span class="LIDENT">lhs</span></span> <span id="local_prod_482"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">nonterminal</span> <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">TT</span><span class="DOT">.</span><span class="LIDENT">lhs</span> <a href="#local_prod_482"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [rhs] reads the table [IT.rhs] and uses [decode_symbol]
     to decode the symbol. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-rhs"><span class="LIDENT">rhs</span></span> <span id="local_prod_483"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LIDENT">decode_symbol</span> <span class="LPAREN">(</span><span class="LIDENT">read_packed_linearized</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">rhs</span> <a href="#local_prod_483"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [items] maps the LR(1) state [s] to its LR(0) core,
     then uses [core] as an index into the table [IT.lr0_items]. The
     items are then decoded by the function [export] below, which is
     essentially a copy of [Item.export]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-InspectionTableInterpreter.module-Make.type-item"><span class="TYPE">type</span> <span class="LIDENT">item</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-low_bits"><span class="LIDENT">low_bits</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="INT">10</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-low_limit"><span class="LIDENT">low_limit</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="INT">1</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsl)"><span class="INFIXOP4">lsl</span></a> <span class="LIDENT">low_bits</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-export"><span class="LIDENT">export</span></span> <span id="local_t_484"><span class="LIDENT">t</span></span> <span class="COLON">:</span> <span class="LIDENT">item</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="#local_t_484"><span class="LIDENT">t</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="LIDENT">low_bits</span><span class="COMMA">,</span> <a href="#local_t_484"><span class="LIDENT">t</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(mod)"><span class="INFIXOP3">mod</span></a> <span class="LIDENT">low_limit</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-items"><span class="LIDENT">items</span></span> <span id="local_s_485"><span class="LIDENT">s</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Map [s] to its LR(0) core. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_core_486"><span class="LIDENT">core</span></span> <span class="EQUAL">=</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">lr0_core</span> <a href="#local_s_485"><span class="LIDENT">s</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* Now use [core] to look up the table [IT.lr0_items]. *)</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/list.ml.html#val-map"><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span></a> <span class="LIDENT">export</span> <span class="LPAREN">(</span><span class="LIDENT">read_packed_linearized</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">lr0_items</span> <a href="#local_core_486"><span class="LIDENT">core</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [nullable] maps the nonterminal symbol [nt] to its
     integer code, which it uses to look up the array [IT.nullable].
     This yields 0 or 1, which we map back to a Boolean result. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-decode_bool"><span class="LIDENT">decode_bool</span></span> <span id="local_i_487"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_i_487"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(||)"><span class="BARBAR">||</span></a> <a href="#local_i_487"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_i_487"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">1</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-nullable"><span class="LIDENT">nullable</span></span> <span id="local_nt_488"><span class="LIDENT">nt</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">decode_bool</span> <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get1</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">nullable</span> <span class="LPAREN">(</span><span class="LIDENT">n2i</span> <a href="#local_nt_488"><span class="LIDENT">nt</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [first] maps the symbols [nt] and [t] to their integer
     codes, which it uses to look up the matrix [IT.first]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-first"><span class="LIDENT">first</span></span> <span id="local_nt_489"><span class="LIDENT">nt</span></span> <span id="local_t_490"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">decode_bool</span> <span class="LPAREN">(</span><span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">unflatten1</span> <span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">first</span> <span class="LPAREN">(</span><span class="LIDENT">n2i</span> <a href="#local_nt_489"><span class="LIDENT">nt</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LIDENT">t2i</span> <a href="#local_t_490"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-xfirst"><span class="LIDENT">xfirst</span></span> <span id="local_symbol_491"><span class="LIDENT">symbol</span></span> <span id="local_t_492"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_symbol_491"><span class="LIDENT">symbol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span id="local_t'_493"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">compare_terminals</span> <a href="#local_t_492"><span class="LIDENT">t</span></a> <a href="#local_t'_493"><span class="LIDENT">t'</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">X</span> <span class="LPAREN">(</span><span class="UIDENT">N</span> <span id="local_nt_494"><span class="LIDENT">nt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">first</span> <a href="#local_nt_494"><span class="LIDENT">nt</span></a> <a href="#local_t_492"><span class="LIDENT">t</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [foreach_terminal] exploits the fact that the
     first component of [TT.error] is [Terminal.n - 1], i.e., the
     number of terminal symbols, including [error] but not [#]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-InspectionTableInterpreter.module-Make.val-foldij"><span class="LIDENT">foldij</span></span> <span id="local_i_495"><span class="LIDENT">i</span></span> <span id="local_j_496"><span class="LIDENT">j</span></span> <span id="local_f_497"><span class="LIDENT">f</span></span> <span id="local_accu_498"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_495"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_j_496"><span class="LIDENT">j</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <a href="#local_accu_498"><span class="LIDENT">accu</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="LIDENT">foldij</span> <span class="LPAREN">(</span><a href="#local_i_495"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_j_496"><span class="LIDENT">j</span></a> <a href="#local_f_497"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><a href="#local_f_497"><span class="LIDENT">f</span></a> <a href="#local_i_495"><span class="LIDENT">i</span></a> <a href="#local_accu_498"><span class="LIDENT">accu</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-foreach_terminal"><span class="LIDENT">foreach_terminal</span></span> <span id="local_f_499"><span class="LIDENT">f</span></span> <span id="local_accu_500"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_638"><span id="local_n_501"><span class="LIDENT">n</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span></span> <span class="EQUAL">=</span> <span class="UIDENT">TT</span><span class="DOT">.</span><span class="LIDENT">error</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">foldij</span> <span class="INT">0</span> <a href="#local_n_501"><span class="LIDENT">n</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_502"><span class="LIDENT">i</span></span> <span id="local_accu_503"><span class="LIDENT">accu</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_f_499"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">terminal</span> <a href="#local_i_502"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="#local_accu_503"><span class="LIDENT">accu</span></a><span class="EOL">
</span>    <span class="RPAREN">)</span> <a href="#local_accu_500"><span class="LIDENT">accu</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-foreach_terminal_but_error"><span class="LIDENT">foreach_terminal_but_error</span></span> <span id="local_f_504"><span class="LIDENT">f</span></span> <span id="local_accu_505"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_652"><span id="local_n_506"><span class="LIDENT">n</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span></span> <span class="EQUAL">=</span> <span class="UIDENT">TT</span><span class="DOT">.</span><span class="LIDENT">error</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">foldij</span> <span class="INT">0</span> <a href="#local_n_506"><span class="LIDENT">n</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_507"><span class="LIDENT">i</span></span> <span id="local_accu_508"><span class="LIDENT">accu</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_i_507"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="UIDENT">TT</span><span class="DOT">.</span><span class="LIDENT">error_terminal</span> <span class="THEN">then</span><span class="EOL">
</span>        <a href="#local_accu_508"><span class="LIDENT">accu</span></a><span class="EOL">
</span>      <span class="ELSE">else</span><span class="EOL">
</span>        <a href="#local_f_504"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><span class="UIDENT">IT</span><span class="DOT">.</span><span class="LIDENT">terminal</span> <a href="#local_i_507"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <a href="#local_accu_508"><span class="LIDENT">accu</span></a><span class="EOL">
</span>    <span class="RPAREN">)</span> <a href="#local_accu_505"><span class="LIDENT">accu</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* ------------------------------------------------------------------------ *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The following is the implementation of the function [feed]. This function
     is logically part of the LR engine, so it would be nice if it were placed
     in the module [Engine], but it must be placed here because, to ensure
     type safety, its arguments must be a symbol of type ['a symbol] and a
     semantic value of type ['a]. The type ['a symbol] is not available in
     [Engine]. It is available here. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">EngineTypes</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">ET</span><span class="EOL">
</span>  <span class="OPEN">open</span> <span class="UIDENT">E</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [feed] fails if the current state does not have an outgoing transition
     labeled with the desired symbol. This check is carried out at runtime. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-feed_failure"><span class="LIDENT">feed_failure</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-invalid_arg"><span class="LIDENT">invalid_arg</span></a> <span class="STRING">&quot;feed: outgoing transition does not exist&quot;</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Feeding a nonterminal symbol [nt]. Here, [nt] has type [nonterminal],
     which is a synonym for [int], and [semv] has type [semantic_value],
     which is a synonym for [Obj.t]. This type is unsafe, because pushing
     a semantic value of arbitrary type into the stack can later cause a
     semantic action to crash and burn. The function [feed] is given a safe
     type below. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-feed_nonterminal"><span class="LIDENT">feed_nonterminal</span></span><span class="EOL">
</span>        <span class="LPAREN">(</span><span id="local_nt_509"><span class="LIDENT">nt</span></span> <span class="COLON">:</span> <span class="LIDENT">nonterminal</span><span class="RPAREN">)</span> <span id="local_startp_510"><span class="LIDENT">startp</span></span> <span class="LPAREN">(</span><span id="local_semv_511"><span class="LIDENT">semv</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span id="local_endp_512"><span class="LIDENT">endp</span></span> <span class="LPAREN">(</span><span id="local_env_513"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span><span class="EOL">
</span>  <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Check if the source state has an outgoing transition labeled [nt].
       This is done by consulting the [goto] table. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_source_514"><span class="LIDENT">source</span></span> <span class="EQUAL">=</span> <a href="#local_env_513"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="UIDENT">ET</span><span class="DOT">.</span><span class="LIDENT">maybe_goto_nt</span> <a href="#local_source_514"><span class="LIDENT">source</span></a> <a href="#local_nt_509"><span class="LIDENT">nt</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">feed_failure</span><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_target_515"><span class="LIDENT">target</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* Push a new cell onto the stack, containing the identity of the state
           that we are leaving. The semantic value [semv] and positions [startp]
           and [endp] contained in the new cell are provided by the caller. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_stack_516"><span class="LIDENT">stack</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">state</span> <span class="EQUAL">=</span> <a href="#local_source_514"><span class="LIDENT">source</span></a><span class="SEMI">;</span> <a href="#local_semv_511"><span class="LIDENT">semv</span></a><span class="SEMI">;</span> <a href="#local_startp_510"><span class="LIDENT">startp</span></a><span class="SEMI">;</span> <a href="#local_endp_512"><span class="LIDENT">endp</span></a><span class="SEMI">;</span> <span class="LIDENT">next</span> <span class="EQUAL">=</span> <a href="#local_env_513"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="COMMENT">(* Move to the target state. *)</span><span class="EOL">
</span>        <span class="LBRACE">{</span> <a href="#local_env_513"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <a href="#local_stack_516"><span class="LIDENT">stack</span></a><span class="SEMI">;</span> <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_target_515"><span class="LIDENT">target</span></a> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-reduce"><span class="LIDENT">reduce</span></span>   <span id="local__env_517"><span class="LIDENT">_env</span></span> <span id="local__prod_518"><span class="LIDENT">_prod</span></span> <span class="EQUAL">=</span> <span class="LIDENT">feed_failure</span><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-initiate"><span class="LIDENT">initiate</span></span> <span id="local__env_519"><span class="LIDENT">_env</span></span>       <span class="EQUAL">=</span> <span class="LIDENT">feed_failure</span><span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-feed_terminal"><span class="LIDENT">feed_terminal</span></span><span class="EOL">
</span>        <span class="LPAREN">(</span><span id="local_terminal_520"><span class="LIDENT">terminal</span></span> <span class="COLON">:</span> <span class="LIDENT">terminal</span><span class="RPAREN">)</span> <span id="local_startp_521"><span class="LIDENT">startp</span></span> <span class="LPAREN">(</span><span id="local_semv_522"><span class="LIDENT">semv</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span><span class="RPAREN">)</span> <span id="local_endp_523"><span class="LIDENT">endp</span></span> <span class="LPAREN">(</span><span id="local_env_524"><span class="LIDENT">env</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">b</span> <span class="LIDENT">env</span><span class="EOL">
</span>  <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Check if the source state has an outgoing transition labeled [terminal].
       This is done by consulting the [action] table. *)</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_source_525"><span class="LIDENT">source</span></span> <span class="EQUAL">=</span> <a href="#local_env_524"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">current</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="UIDENT">ET</span><span class="DOT">.</span><span class="LIDENT">action</span> <a href="#local_source_525"><span class="LIDENT">source</span></a> <a href="#local_terminal_520"><span class="LIDENT">terminal</span></a> <a href="#local_semv_522"><span class="LIDENT">semv</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_env_526"><span class="LIDENT">env</span></span> <span id="local__please_discard_527"><span class="LIDENT">_please_discard</span></span> <span id="local__terminal_528"><span class="LIDENT">_terminal</span></span> <span id="local_semv_529"><span class="LIDENT">semv</span></span> <span id="local_target_530"><span class="LIDENT">target</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* There is indeed a transition toward the state [target].
           Push a new cell onto the stack and move to the target state. *)</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_stack_531"><span class="LIDENT">stack</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">state</span> <span class="EQUAL">=</span> <a href="#local_source_525"><span class="LIDENT">source</span></a><span class="SEMI">;</span> <a href="#local_semv_529"><span class="LIDENT">semv</span></a><span class="SEMI">;</span> <a href="#local_startp_521"><span class="LIDENT">startp</span></a><span class="SEMI">;</span> <a href="#local_endp_523"><span class="LIDENT">endp</span></a><span class="SEMI">;</span> <span class="LIDENT">next</span> <span class="EQUAL">=</span> <a href="#local_env_526"><span class="LIDENT">env</span></a><span class="DOT">.</span><span class="LIDENT">stack</span> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="LBRACE">{</span> <a href="#local_env_526"><span class="LIDENT">env</span></a> <span class="WITH">with</span> <a href="#local_stack_531"><span class="LIDENT">stack</span></a><span class="SEMI">;</span> <span class="LIDENT">current</span> <span class="EQUAL">=</span> <a href="#local_target_530"><span class="LIDENT">target</span></a> <span class="RBRACE">}</span><span class="EOL">
</span>      <span class="RPAREN">)</span> <span class="LIDENT">reduce</span> <span class="LIDENT">initiate</span> <a href="#local_env_524"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The type assigned to [feed] ensures that the type of the semantic value
     [semv] is appropriate: it must be the semantic-value type of the symbol
     [symbol]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-InspectionTableInterpreter.module-Make.val-feed"><span class="LIDENT">feed</span></span> <span class="LPAREN">(</span><span id="local_symbol_532"><span class="LIDENT">symbol</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span> <span class="LIDENT">symbol</span><span class="RPAREN">)</span> <span id="local_startp_533"><span class="LIDENT">startp</span></span> <span class="LPAREN">(</span><span id="local_semv_534"><span class="LIDENT">semv</span></span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="RPAREN">)</span> <span id="local_endp_535"><span class="LIDENT">endp</span></span> <span id="local_env_536"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_semv_537"><span class="LIDENT">semv</span></span> <span class="COLON">:</span> <span class="LIDENT">semantic_value</span> <span class="EQUAL">=</span> <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-repr"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">repr</span></a> <a href="#local_semv_534"><span class="LIDENT">semv</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_symbol_532"><span class="LIDENT">symbol</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">N</span> <span id="local_nt_538"><span class="LIDENT">nt</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">feed_nonterminal</span> <span class="LPAREN">(</span><span class="LIDENT">n2i</span> <a href="#local_nt_538"><span class="LIDENT">nt</span></a><span class="RPAREN">)</span> <a href="#local_startp_533"><span class="LIDENT">startp</span></a> <a href="#local_semv_537"><span class="LIDENT">semv</span></a> <a href="#local_endp_535"><span class="LIDENT">endp</span></a> <a href="#local_env_536"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">T</span> <span id="local_terminal_539"><span class="LIDENT">terminal</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">feed_terminal</span> <span class="LPAREN">(</span><span class="LIDENT">t2i</span> <a href="#local_terminal_539"><span class="LIDENT">terminal</span></a><span class="RPAREN">)</span> <a href="#local_startp_533"><span class="LIDENT">startp</span></a> <a href="#local_semv_537"><span class="LIDENT">semv</span></a> <a href="#local_endp_535"><span class="LIDENT">endp</span></a> <a href="#local_env_536"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-TableInterpreter"><span class="MODULE">module</span> <span class="UIDENT">TableInterpreter</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*                                    Menhir                                  *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(*   Copyright Inria. All rights reserved. This file is distributed under     *)</span><span class="EOL">
</span><span class="COMMENT">(*   the terms of the GNU Library General Public License version 2, with a    *)</span><span class="EOL">
</span><span class="COMMENT">(*   special exception on linking, as described in the file LICENSE.          *)</span><span class="EOL">
</span><span class="COMMENT">(*                                                                            *)</span><span class="EOL">
</span><span class="COMMENT">(******************************************************************************)</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-TableInterpreter.module-MakeEngineTable"><span class="MODULE">module</span> <span class="UIDENT">MakeEngineTable</span> <span class="LPAREN">(</span><span class="UIDENT">T</span> <span class="COLON">:</span> <span class="UIDENT">TableFormat</span><span class="DOT">.</span><span class="UIDENT">TABLES</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-state"><span class="TYPE">type</span> <span class="LIDENT">state</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-number"><span class="LIDENT">number</span></span> <span id="local_s_540"><span class="LIDENT">s</span></span> <span class="EQUAL">=</span> <a href="#local_s_540"><span class="LIDENT">s</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-token"><span class="TYPE">type</span> <span class="LIDENT">token</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-terminal"><span class="TYPE">type</span> <span class="LIDENT">terminal</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-nonterminal"><span class="TYPE">type</span> <span class="LIDENT">nonterminal</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-semantic_value"><span class="TYPE">type</span> <span class="LIDENT">semantic_value</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#type-t"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-token2terminal"><span class="LIDENT">token2terminal</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token2terminal</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-token2value"><span class="LIDENT">token2value</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">token2value</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-error_terminal"><span class="LIDENT">error_terminal</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error_terminal</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-error_value"><span class="LIDENT">error_value</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../../../ocaml-base-compiler/src/stdlib/obj.ml.html#val-repr"><span class="UIDENT">Obj</span><span class="DOT">.</span><span class="LIDENT">repr</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* The function [foreach_terminal] exploits the fact that the
     first component of [T.error] is [Terminal.n - 1], i.e., the
     number of terminal symbols, including [error] but not [#]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* There is similar code in [InspectionTableInterpreter]. The
     code there contains an additional conversion of the type
     [terminal] to the type [xsymbol]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-foldij"><span class="LIDENT">foldij</span></span> <span id="local_i_541"><span class="LIDENT">i</span></span> <span id="local_j_542"><span class="LIDENT">j</span></span> <span id="local_f_543"><span class="LIDENT">f</span></span> <span id="local_accu_544"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_i_541"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_j_542"><span class="LIDENT">j</span></a> <span class="THEN">then</span><span class="EOL">
</span>      <a href="#local_accu_544"><span class="LIDENT">accu</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="LIDENT">foldij</span> <span class="LPAREN">(</span><a href="#local_i_541"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(+)"><span class="PLUS">+</span></a> <span class="INT">1</span><span class="RPAREN">)</span> <a href="#local_j_542"><span class="LIDENT">j</span></a> <a href="#local_f_543"><span class="LIDENT">f</span></a> <span class="LPAREN">(</span><a href="#local_f_543"><span class="LIDENT">f</span></a> <a href="#local_i_541"><span class="LIDENT">i</span></a> <a href="#local_accu_544"><span class="LIDENT">accu</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-foreach_terminal"><span class="LIDENT">foreach_terminal</span></span> <span id="local_f_545"><span class="LIDENT">f</span></span> <span id="local_accu_546"><span class="LIDENT">accu</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="def_637"><span id="local_n_547"><span class="LIDENT">n</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span></span> <span class="EQUAL">=</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LIDENT">foldij</span> <span class="INT">0</span> <a href="#local_n_547"><span class="LIDENT">n</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_i_548"><span class="LIDENT">i</span></span> <span id="local_accu_549"><span class="LIDENT">accu</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_f_545"><span class="LIDENT">f</span></a> <a href="#local_i_548"><span class="LIDENT">i</span></a> <a href="#local_accu_549"><span class="LIDENT">accu</span></a><span class="EOL">
</span>    <span class="RPAREN">)</span> <a href="#local_accu_546"><span class="LIDENT">accu</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-production"><span class="TYPE">type</span> <span class="LIDENT">production</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LIDENT">int</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In principle, only non-start productions are exposed to the user,
     at type [production] or at type [int]. This is checked dynamically. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-non_start_production"><span class="LIDENT">non_start_production</span></span> <span id="local_i_550"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">start</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_i_550"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&amp;&amp;)"><span class="AMPERAMPER">&amp;&amp;</span></a> <a href="#local_i_550"><span class="LIDENT">i</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">start</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/array.ml.html#val-length"><span class="UIDENT">Array</span><span class="DOT">.</span><span class="LIDENT">length</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">semantic_action</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-production_index"><span class="LIDENT">production_index</span></span> <span id="local_i_551"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">non_start_production</span> <a href="#local_i_551"><span class="LIDENT">i</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_i_551"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-find_production"><span class="LIDENT">find_production</span></span> <span id="local_i_552"><span class="LIDENT">i</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">non_start_production</span> <a href="#local_i_552"><span class="LIDENT">i</span></a><span class="SEMI">;</span><span class="EOL">
</span>    <a href="#local_i_552"><span class="LIDENT">i</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-default_reduction"><span class="LIDENT">default_reduction</span></span> <span id="local_state_553"><span class="LIDENT">state</span></span> <span id="local_defred_554"><span class="LIDENT">defred</span></span> <span id="local_nodefred_555"><span class="LIDENT">nodefred</span></span> <span id="local_env_556"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_code_557"><span class="LIDENT">code</span></span> <span class="EQUAL">=</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">default_reduction</span> <a href="#local_state_553"><span class="LIDENT">state</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_code_557"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="COMMENT">(* no default reduction *)</span><span class="EOL">
</span>      <a href="#local_nodefred_555"><span class="LIDENT">nodefred</span></a> <a href="#local_env_556"><span class="LIDENT">env</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="COMMENT">(* default reduction *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_prod_558"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span> <a href="#local_code_557"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_defred_554"><span class="LIDENT">defred</span></a> <a href="#local_env_556"><span class="LIDENT">env</span></a> <a href="#local_prod_558"><span class="LIDENT">prod</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-is_start"><span class="LIDENT">is_start</span></span> <span id="local_prod_559"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="#local_prod_559"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;)"><span class="LESS">&lt;</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">start</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* This auxiliary function helps access a compressed, two-dimensional
     matrix, like the action and goto tables. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-unmarshal2"><span class="LIDENT">unmarshal2</span></span> <span id="local_table_560"><span class="LIDENT">table</span></span> <span id="local_i_561"><span class="LIDENT">i</span></span> <span id="local_j_562"><span class="LIDENT">j</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">RowDisplacement</span><span class="DOT">.</span><span class="LIDENT">getget</span><span class="EOL">
</span>      <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span><span class="EOL">
</span>      <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span><span class="EOL">
</span>      <a href="#local_table_560"><span class="LIDENT">table</span></a><span class="EOL">
</span>      <a href="#local_i_561"><span class="LIDENT">i</span></a> <a href="#local_j_562"><span class="LIDENT">j</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-action"><span class="LIDENT">action</span></span> <span id="local_state_563"><span class="LIDENT">state</span></span> <span id="local_terminal_564"><span class="LIDENT">terminal</span></span> <span id="local_value_565"><span class="LIDENT">value</span></span> <span id="local_shift_566"><span class="LIDENT">shift</span></span> <span id="local_reduce_567"><span class="LIDENT">reduce</span></span> <span id="local_fail_568"><span class="LIDENT">fail</span></span> <span id="local_env_569"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">unflatten1</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error</span> <a href="#local_state_563"><span class="LIDENT">state</span></a> <a href="#local_terminal_564"><span class="LIDENT">terminal</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="INT">1</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_action_570"><span class="LIDENT">action</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unmarshal2</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">action</span> <a href="#local_state_563"><span class="LIDENT">state</span></a> <a href="#local_terminal_564"><span class="LIDENT">terminal</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_opcode_571"><span class="LIDENT">opcode</span></span> <span class="EQUAL">=</span> <a href="#local_action_570"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b11</span><span class="EOL">
</span>        <span class="AND">and</span> <span id="local_param_572"><span class="LIDENT">param</span></span> <span class="EQUAL">=</span> <a href="#local_action_570"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">2</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="IF">if</span> <a href="#local_opcode_571"><span class="LIDENT">opcode</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <span class="INT">0b10</span> <span class="THEN">then</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b10 : shift/discard *)</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b11 : shift/nodiscard *)</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_please_discard_573"><span class="LIDENT">please_discard</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="#local_opcode_571"><span class="LIDENT">opcode</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0b10</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>          <a href="#local_shift_566"><span class="LIDENT">shift</span></a> <a href="#local_env_569"><span class="LIDENT">env</span></a> <a href="#local_please_discard_573"><span class="LIDENT">please_discard</span></a> <a href="#local_terminal_564"><span class="LIDENT">terminal</span></a> <a href="#local_value_565"><span class="LIDENT">value</span></a> <a href="#local_param_572"><span class="LIDENT">param</span></a><span class="EOL">
</span>        <span class="ELSE">else</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b01 : reduce *)</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b00 : cannot happen *)</span><span class="EOL">
</span>          <a href="#local_reduce_567"><span class="LIDENT">reduce</span></a> <a href="#local_env_569"><span class="LIDENT">env</span></a> <a href="#local_param_572"><span class="LIDENT">param</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_c_574"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_c_574"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <a href="#local_fail_568"><span class="LIDENT">fail</span></a> <a href="#local_env_569"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-maybe_shift_t"><span class="LIDENT">maybe_shift_t</span></span> <span id="local_state_575"><span class="LIDENT">state</span></span> <span id="local_terminal_576"><span class="LIDENT">terminal</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">unflatten1</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error</span> <a href="#local_state_575"><span class="LIDENT">state</span></a> <a href="#local_terminal_576"><span class="LIDENT">terminal</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="INT">1</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_action_577"><span class="LIDENT">action</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unmarshal2</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">action</span> <a href="#local_state_575"><span class="LIDENT">state</span></a> <a href="#local_terminal_576"><span class="LIDENT">terminal</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_opcode_578"><span class="LIDENT">opcode</span></span> <span class="EQUAL">=</span> <a href="#local_action_577"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b11</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="IF">if</span> <a href="#local_opcode_578"><span class="LIDENT">opcode</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <span class="INT">0b10</span> <span class="THEN">then</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b10 : shift/discard *)</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b11 : shift/nodiscard *)</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_state'_579"><span class="LIDENT">state'</span></span> <span class="EQUAL">=</span> <a href="#local_action_577"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">2</span> <span class="IN">in</span><span class="EOL">
</span>          <span class="UIDENT">Some</span> <a href="#local_state'_579"><span class="LIDENT">state'</span></a><span class="EOL">
</span>        <span class="ELSE">else</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b01 : reduce *)</span><span class="EOL">
</span>          <span class="COMMENT">(* 0b00 : cannot happen *)</span><span class="EOL">
</span>          <span class="UIDENT">None</span><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_c_580"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_c_580"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-may_reduce_prod"><span class="LIDENT">may_reduce_prod</span></span> <span id="local_state_581"><span class="LIDENT">state</span></span> <span id="local_terminal_582"><span class="LIDENT">terminal</span></span> <span id="local_prod_583"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_code_584"><span class="LIDENT">code</span></span> <span class="EQUAL">=</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">default_reduction</span> <a href="#local_state_581"><span class="LIDENT">state</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_code_584"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span><span class="EOL">
</span>      <span class="COMMENT">(* no default reduction *)</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">unflatten1</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">error</span> <a href="#local_state_581"><span class="LIDENT">state</span></a> <a href="#local_terminal_582"><span class="LIDENT">terminal</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="INT">1</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_action_585"><span class="LIDENT">action</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unmarshal2</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">action</span> <a href="#local_state_581"><span class="LIDENT">state</span></a> <a href="#local_terminal_582"><span class="LIDENT">terminal</span></a> <span class="IN">in</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_opcode_586"><span class="LIDENT">opcode</span></span> <span class="EQUAL">=</span> <a href="#local_action_585"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(land)"><span class="INFIXOP3">land</span></a> <span class="INT">0b11</span> <span class="IN">in</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_opcode_586"><span class="LIDENT">opcode</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&gt;=)"><span class="INFIXOP0">&gt;=</span></a> <span class="INT">0b10</span> <span class="THEN">then</span><span class="EOL">
</span>            <span class="COMMENT">(* 0b10 : shift/discard *)</span><span class="EOL">
</span>            <span class="COMMENT">(* 0b11 : shift/nodiscard *)</span><span class="EOL">
</span>            <span class="FALSE">false</span><span class="EOL">
</span>          <span class="ELSE">else</span><span class="EOL">
</span>            <span class="COMMENT">(* 0b01 : reduce *)</span><span class="EOL">
</span>            <span class="COMMENT">(* 0b00 : cannot happen *)</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_prod'_587"><span class="LIDENT">prod'</span></span> <span class="EQUAL">=</span> <a href="#local_action_585"><span class="LIDENT">action</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(lsr)"><span class="INFIXOP4">lsr</span></a> <span class="INT">2</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_prod_583"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_prod'_587"><span class="LIDENT">prod'</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_c_588"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="ASSERT">assert</span> <span class="LPAREN">(</span><a href="#local_c_588"><span class="LIDENT">c</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>          <span class="FALSE">false</span><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="COMMENT">(* default reduction *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_prod'_589"><span class="LIDENT">prod'</span></span> <span class="EQUAL">=</span> <a href="#local_code_584"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span> <span class="IN">in</span><span class="EOL">
</span>      <a href="#local_prod_583"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_prod'_589"><span class="LIDENT">prod'</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-goto_nt"><span class="LIDENT">goto_nt</span></span> <span id="local_state_590"><span class="LIDENT">state</span></span> <span id="local_nt_591"><span class="LIDENT">nt</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_code_592"><span class="LIDENT">code</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unmarshal2</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">goto</span> <a href="#local_state_590"><span class="LIDENT">state</span></a> <a href="#local_nt_591"><span class="LIDENT">nt</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* code = 1 + state *)</span><span class="EOL">
</span>    <a href="#local_code_592"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span><span class="LBRACKETAT">[@</span><span class="LIDENT">inline</span><span class="RBRACKET">]</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-lhs"><span class="LIDENT">lhs</span></span> <span id="local_prod_593"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">PackedIntArray</span><span class="DOT">.</span><span class="LIDENT">get</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">lhs</span> <a href="#local_prod_593"><span class="LIDENT">prod</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-goto_prod"><span class="LIDENT">goto_prod</span></span> <span id="local_state_594"><span class="LIDENT">state</span></span> <span id="local_prod_595"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">goto_nt</span> <a href="#local_state_594"><span class="LIDENT">state</span></a> <span class="LPAREN">(</span><span class="LIDENT">lhs</span> <a href="#local_prod_595"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-maybe_goto_nt"><span class="LIDENT">maybe_goto_nt</span></span> <span id="local_state_596"><span class="LIDENT">state</span></span> <span id="local_nt_597"><span class="LIDENT">nt</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_code_598"><span class="LIDENT">code</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unmarshal2</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">goto</span> <a href="#local_state_596"><span class="LIDENT">state</span></a> <a href="#local_nt_597"><span class="LIDENT">nt</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="COMMENT">(* If [code] is 0, there is no outgoing transition.
       If [code] is [1 + state], there is a transition towards [state]. *)</span><span class="EOL">
</span>    <span class="ASSERT">assert</span> <span class="LPAREN">(</span><span class="INT">0</span> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(&lt;=)"><span class="INFIXOP0">&lt;=</span></a> <a href="#local_code_598"><span class="LIDENT">code</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_code_598"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <span class="INT">0</span> <span class="THEN">then</span> <span class="UIDENT">None</span> <span class="ELSE">else</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_code_598"><span class="LIDENT">code</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="INT">1</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.exception-Error"><span class="EXCEPTION">exception</span> <span class="UIDENT">Error</span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="UIDENT">T</span><span class="DOT">.</span><span class="UIDENT">Error</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.type-semantic_action"><span class="TYPE">type</span> <span class="LIDENT">semantic_action</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="LIDENT">semantic_value</span><span class="COMMA">,</span> <span class="LIDENT">token</span><span class="RPAREN">)</span> <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">env</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">state</span><span class="COMMA">,</span> <span class="LIDENT">semantic_value</span><span class="RPAREN">)</span>        <span class="UIDENT">EngineTypes</span><span class="DOT">.</span><span class="LIDENT">stack</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-semantic_action"><span class="LIDENT">semantic_action</span></span> <span id="local_prod_599"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Indexing into the array [T.semantic_action] is off by [T.start],
       because the start productions do not have entries in this array. *)</span><span class="EOL">
</span>    <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">semantic_action</span><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_prod_599"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(-)"><span class="MINUS">-</span></a> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">start</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [may_reduce state prod] tests whether the state [state] is capable of
     reducing the production [prod]. This information could be determined
     in constant time if we were willing to create a bitmap for it, but
     that would take up a lot of space. Instead, we obtain this information
     by iterating over a line in the action table. This is costly, but this
     function is not normally used by the LR engine anyway; it is supposed
     to be used only by programmers who wish to develop error recovery
     strategies. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* In the future, if desired, we could memoize this function, so as
     to pay the cost in (memory) space only if and where this function
     is actually used. We could also replace [foreach_terminal] with a
     function [exists_terminal] which stops as soon as the accumulator
     is [true]. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-may_reduce"><span class="LIDENT">may_reduce</span></span> <span id="local_state_600"><span class="LIDENT">state</span></span> <span id="local_prod_601"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="COMMENT">(* Test if there is a default reduction of [prod]. *)</span><span class="EOL">
</span>    <span class="LIDENT">default_reduction</span> <a href="#local_state_600"><span class="LIDENT">state</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span id="local_prod'_602"><span class="LIDENT">prod'</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_prod_601"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_prod'_602"><span class="LIDENT">prod'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* If not, then for each terminal [t], ... *)</span><span class="EOL">
</span>        <span class="LIDENT">foreach_terminal</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_t_603"><span class="LIDENT">t</span></span> <span id="local_accu_604"><span class="LIDENT">accu</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="#local_accu_604"><span class="LIDENT">accu</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(||)"><span class="BARBAR">||</span></a><span class="EOL">
</span>          <span class="COMMENT">(* ... test if there is a reduction of [prod] on [t]. *)</span><span class="EOL">
</span>          <span class="LIDENT">action</span> <a href="#local_state_600"><span class="LIDENT">state</span></a> <a href="#local_t_603"><span class="LIDENT">t</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="COMMENT">(* shift:  *)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="UNDERSCORE">_</span> <span class="UNDERSCORE">_</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="COMMENT">(* reduce: *)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span id="local_prod'_605"><span class="LIDENT">prod'</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_prod_601"><span class="LIDENT">prod</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-(=)"><span class="EQUAL">=</span></a> <a href="#local_prod'_605"><span class="LIDENT">prod'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="COMMENT">(* fail:   *)</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="RPAREN">)</span> <span class="FALSE">false</span><span class="EOL">
</span>      <span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* If [T.trace] is [None], then the logging functions do nothing. *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.val-log"><span class="LIDENT">log</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span> <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span>  <span id="module-TableInterpreter.module-MakeEngineTable.module-Log"><span class="MODULE">module</span> <span class="UIDENT">Log</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="OPEN">open</span> <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html"><span class="UIDENT">Printf</span></a><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-state"><span class="LIDENT">state</span></span> <span id="local_state_606"><span class="LIDENT">state</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;State %d:\n%!&quot;</span> <a href="#local_state_606"><span class="LIDENT">state</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-shift"><span class="LIDENT">shift</span></span> <span id="local_terminal_607"><span class="LIDENT">terminal</span></span> <span id="local_state_608"><span class="LIDENT">state</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_terminals_609"><span class="LIDENT">terminals</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;Shifting (%s) to state %d\n%!&quot;</span> <a href="#local_terminals_609"><span class="LIDENT">terminals</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_terminal_607"><span class="LIDENT">terminal</span></a><span class="RPAREN">)</span> <a href="#local_state_608"><span class="LIDENT">state</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-reduce_or_accept"><span class="LIDENT">reduce_or_accept</span></span> <span id="local_prod_610"><span class="LIDENT">prod</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_productions_611"><span class="LIDENT">productions</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;%s\n%!&quot;</span> <a href="#local_productions_611"><span class="LIDENT">productions</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_prod_610"><span class="LIDENT">prod</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-lookahead_token"><span class="LIDENT">lookahead_token</span></span> <span id="local_token_612"><span class="LIDENT">token</span></span> <span id="local_startp_613"><span class="LIDENT">startp</span></span> <span id="local_endp_614"><span class="LIDENT">endp</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_terminals_615"><span class="LIDENT">terminals</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;Lookahead token is now %s (%d-%d)\n%!&quot;</span><span class="EOL">
</span>            <a href="#local_terminals_615"><span class="LIDENT">terminals</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="#local_token_612"><span class="LIDENT">token</span></a><span class="RPAREN">)</span><span class="EOL">
</span>            <a href="#local_startp_613"><span class="LIDENT">startp</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">pos_cnum</span><span class="EOL">
</span>            <a href="#local_endp_614"><span class="LIDENT">endp</span></a><span class="DOT">.</span><span class="UIDENT">Lexing</span><span class="DOT">.</span><span class="LIDENT">pos_cnum</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-initiating_error_handling"><span class="LIDENT">initiating_error_handling</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;Initiating error handling\n%!&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-resuming_error_handling"><span class="LIDENT">resuming_error_handling</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;Resuming error handling\n%!&quot;</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="module-TableInterpreter.module-MakeEngineTable.module-Log.val-handling_error"><span class="LIDENT">handling_error</span></span> <span id="local_state_616"><span class="LIDENT">state</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">T</span><span class="DOT">.</span><span class="LIDENT">trace</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <a href="../../../ocaml-base-compiler/src/stdlib/printf.ml.html#val-fprintf"><span class="LIDENT">fprintf</span></a> <a href="../../../ocaml-base-compiler/src/stdlib/stdlib.ml.html#val-stderr"><span class="LIDENT">stderr</span></a> <span class="STRING">&quot;Handling error in state %d\n%!&quot;</span> <a href="#local_state_616"><span class="LIDENT">state</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span id="module-StaticVersion"><span class="MODULE">module</span> <span class="UIDENT">StaticVersion</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span><span class="LET">let</span> <span id="module-StaticVersion.val-require_20240715"><span class="LIDENT">require_20240715</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span></span></code></pre></body></html>
