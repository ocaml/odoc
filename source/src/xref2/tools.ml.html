<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Source: tools.ml (odoc.source.src.xref2)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.css"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/></head><body class="odoc-src"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="../../../index.html">odoc</a> &#x00BB; <a href="../../index.html">source</a> &#x00BB; <a href="../index.html">src</a> &#x00BB; <a href="index.html">xref2</a> &#x00BB; tools.ml</nav><header class="odoc-preamble"><h1>Source file <code><span>tools.ml</span></code></h1></header><pre class="source_container"><code class="source_line_column"><a id="L1" class="source_line" href="#L1">1</a>
<a id="L2" class="source_line" href="#L2">2</a>
<a id="L3" class="source_line" href="#L3">3</a>
<a id="L4" class="source_line" href="#L4">4</a>
<a id="L5" class="source_line" href="#L5">5</a>
<a id="L6" class="source_line" href="#L6">6</a>
<a id="L7" class="source_line" href="#L7">7</a>
<a id="L8" class="source_line" href="#L8">8</a>
<a id="L9" class="source_line" href="#L9">9</a>
<a id="L10" class="source_line" href="#L10">10</a>
<a id="L11" class="source_line" href="#L11">11</a>
<a id="L12" class="source_line" href="#L12">12</a>
<a id="L13" class="source_line" href="#L13">13</a>
<a id="L14" class="source_line" href="#L14">14</a>
<a id="L15" class="source_line" href="#L15">15</a>
<a id="L16" class="source_line" href="#L16">16</a>
<a id="L17" class="source_line" href="#L17">17</a>
<a id="L18" class="source_line" href="#L18">18</a>
<a id="L19" class="source_line" href="#L19">19</a>
<a id="L20" class="source_line" href="#L20">20</a>
<a id="L21" class="source_line" href="#L21">21</a>
<a id="L22" class="source_line" href="#L22">22</a>
<a id="L23" class="source_line" href="#L23">23</a>
<a id="L24" class="source_line" href="#L24">24</a>
<a id="L25" class="source_line" href="#L25">25</a>
<a id="L26" class="source_line" href="#L26">26</a>
<a id="L27" class="source_line" href="#L27">27</a>
<a id="L28" class="source_line" href="#L28">28</a>
<a id="L29" class="source_line" href="#L29">29</a>
<a id="L30" class="source_line" href="#L30">30</a>
<a id="L31" class="source_line" href="#L31">31</a>
<a id="L32" class="source_line" href="#L32">32</a>
<a id="L33" class="source_line" href="#L33">33</a>
<a id="L34" class="source_line" href="#L34">34</a>
<a id="L35" class="source_line" href="#L35">35</a>
<a id="L36" class="source_line" href="#L36">36</a>
<a id="L37" class="source_line" href="#L37">37</a>
<a id="L38" class="source_line" href="#L38">38</a>
<a id="L39" class="source_line" href="#L39">39</a>
<a id="L40" class="source_line" href="#L40">40</a>
<a id="L41" class="source_line" href="#L41">41</a>
<a id="L42" class="source_line" href="#L42">42</a>
<a id="L43" class="source_line" href="#L43">43</a>
<a id="L44" class="source_line" href="#L44">44</a>
<a id="L45" class="source_line" href="#L45">45</a>
<a id="L46" class="source_line" href="#L46">46</a>
<a id="L47" class="source_line" href="#L47">47</a>
<a id="L48" class="source_line" href="#L48">48</a>
<a id="L49" class="source_line" href="#L49">49</a>
<a id="L50" class="source_line" href="#L50">50</a>
<a id="L51" class="source_line" href="#L51">51</a>
<a id="L52" class="source_line" href="#L52">52</a>
<a id="L53" class="source_line" href="#L53">53</a>
<a id="L54" class="source_line" href="#L54">54</a>
<a id="L55" class="source_line" href="#L55">55</a>
<a id="L56" class="source_line" href="#L56">56</a>
<a id="L57" class="source_line" href="#L57">57</a>
<a id="L58" class="source_line" href="#L58">58</a>
<a id="L59" class="source_line" href="#L59">59</a>
<a id="L60" class="source_line" href="#L60">60</a>
<a id="L61" class="source_line" href="#L61">61</a>
<a id="L62" class="source_line" href="#L62">62</a>
<a id="L63" class="source_line" href="#L63">63</a>
<a id="L64" class="source_line" href="#L64">64</a>
<a id="L65" class="source_line" href="#L65">65</a>
<a id="L66" class="source_line" href="#L66">66</a>
<a id="L67" class="source_line" href="#L67">67</a>
<a id="L68" class="source_line" href="#L68">68</a>
<a id="L69" class="source_line" href="#L69">69</a>
<a id="L70" class="source_line" href="#L70">70</a>
<a id="L71" class="source_line" href="#L71">71</a>
<a id="L72" class="source_line" href="#L72">72</a>
<a id="L73" class="source_line" href="#L73">73</a>
<a id="L74" class="source_line" href="#L74">74</a>
<a id="L75" class="source_line" href="#L75">75</a>
<a id="L76" class="source_line" href="#L76">76</a>
<a id="L77" class="source_line" href="#L77">77</a>
<a id="L78" class="source_line" href="#L78">78</a>
<a id="L79" class="source_line" href="#L79">79</a>
<a id="L80" class="source_line" href="#L80">80</a>
<a id="L81" class="source_line" href="#L81">81</a>
<a id="L82" class="source_line" href="#L82">82</a>
<a id="L83" class="source_line" href="#L83">83</a>
<a id="L84" class="source_line" href="#L84">84</a>
<a id="L85" class="source_line" href="#L85">85</a>
<a id="L86" class="source_line" href="#L86">86</a>
<a id="L87" class="source_line" href="#L87">87</a>
<a id="L88" class="source_line" href="#L88">88</a>
<a id="L89" class="source_line" href="#L89">89</a>
<a id="L90" class="source_line" href="#L90">90</a>
<a id="L91" class="source_line" href="#L91">91</a>
<a id="L92" class="source_line" href="#L92">92</a>
<a id="L93" class="source_line" href="#L93">93</a>
<a id="L94" class="source_line" href="#L94">94</a>
<a id="L95" class="source_line" href="#L95">95</a>
<a id="L96" class="source_line" href="#L96">96</a>
<a id="L97" class="source_line" href="#L97">97</a>
<a id="L98" class="source_line" href="#L98">98</a>
<a id="L99" class="source_line" href="#L99">99</a>
<a id="L100" class="source_line" href="#L100">100</a>
<a id="L101" class="source_line" href="#L101">101</a>
<a id="L102" class="source_line" href="#L102">102</a>
<a id="L103" class="source_line" href="#L103">103</a>
<a id="L104" class="source_line" href="#L104">104</a>
<a id="L105" class="source_line" href="#L105">105</a>
<a id="L106" class="source_line" href="#L106">106</a>
<a id="L107" class="source_line" href="#L107">107</a>
<a id="L108" class="source_line" href="#L108">108</a>
<a id="L109" class="source_line" href="#L109">109</a>
<a id="L110" class="source_line" href="#L110">110</a>
<a id="L111" class="source_line" href="#L111">111</a>
<a id="L112" class="source_line" href="#L112">112</a>
<a id="L113" class="source_line" href="#L113">113</a>
<a id="L114" class="source_line" href="#L114">114</a>
<a id="L115" class="source_line" href="#L115">115</a>
<a id="L116" class="source_line" href="#L116">116</a>
<a id="L117" class="source_line" href="#L117">117</a>
<a id="L118" class="source_line" href="#L118">118</a>
<a id="L119" class="source_line" href="#L119">119</a>
<a id="L120" class="source_line" href="#L120">120</a>
<a id="L121" class="source_line" href="#L121">121</a>
<a id="L122" class="source_line" href="#L122">122</a>
<a id="L123" class="source_line" href="#L123">123</a>
<a id="L124" class="source_line" href="#L124">124</a>
<a id="L125" class="source_line" href="#L125">125</a>
<a id="L126" class="source_line" href="#L126">126</a>
<a id="L127" class="source_line" href="#L127">127</a>
<a id="L128" class="source_line" href="#L128">128</a>
<a id="L129" class="source_line" href="#L129">129</a>
<a id="L130" class="source_line" href="#L130">130</a>
<a id="L131" class="source_line" href="#L131">131</a>
<a id="L132" class="source_line" href="#L132">132</a>
<a id="L133" class="source_line" href="#L133">133</a>
<a id="L134" class="source_line" href="#L134">134</a>
<a id="L135" class="source_line" href="#L135">135</a>
<a id="L136" class="source_line" href="#L136">136</a>
<a id="L137" class="source_line" href="#L137">137</a>
<a id="L138" class="source_line" href="#L138">138</a>
<a id="L139" class="source_line" href="#L139">139</a>
<a id="L140" class="source_line" href="#L140">140</a>
<a id="L141" class="source_line" href="#L141">141</a>
<a id="L142" class="source_line" href="#L142">142</a>
<a id="L143" class="source_line" href="#L143">143</a>
<a id="L144" class="source_line" href="#L144">144</a>
<a id="L145" class="source_line" href="#L145">145</a>
<a id="L146" class="source_line" href="#L146">146</a>
<a id="L147" class="source_line" href="#L147">147</a>
<a id="L148" class="source_line" href="#L148">148</a>
<a id="L149" class="source_line" href="#L149">149</a>
<a id="L150" class="source_line" href="#L150">150</a>
<a id="L151" class="source_line" href="#L151">151</a>
<a id="L152" class="source_line" href="#L152">152</a>
<a id="L153" class="source_line" href="#L153">153</a>
<a id="L154" class="source_line" href="#L154">154</a>
<a id="L155" class="source_line" href="#L155">155</a>
<a id="L156" class="source_line" href="#L156">156</a>
<a id="L157" class="source_line" href="#L157">157</a>
<a id="L158" class="source_line" href="#L158">158</a>
<a id="L159" class="source_line" href="#L159">159</a>
<a id="L160" class="source_line" href="#L160">160</a>
<a id="L161" class="source_line" href="#L161">161</a>
<a id="L162" class="source_line" href="#L162">162</a>
<a id="L163" class="source_line" href="#L163">163</a>
<a id="L164" class="source_line" href="#L164">164</a>
<a id="L165" class="source_line" href="#L165">165</a>
<a id="L166" class="source_line" href="#L166">166</a>
<a id="L167" class="source_line" href="#L167">167</a>
<a id="L168" class="source_line" href="#L168">168</a>
<a id="L169" class="source_line" href="#L169">169</a>
<a id="L170" class="source_line" href="#L170">170</a>
<a id="L171" class="source_line" href="#L171">171</a>
<a id="L172" class="source_line" href="#L172">172</a>
<a id="L173" class="source_line" href="#L173">173</a>
<a id="L174" class="source_line" href="#L174">174</a>
<a id="L175" class="source_line" href="#L175">175</a>
<a id="L176" class="source_line" href="#L176">176</a>
<a id="L177" class="source_line" href="#L177">177</a>
<a id="L178" class="source_line" href="#L178">178</a>
<a id="L179" class="source_line" href="#L179">179</a>
<a id="L180" class="source_line" href="#L180">180</a>
<a id="L181" class="source_line" href="#L181">181</a>
<a id="L182" class="source_line" href="#L182">182</a>
<a id="L183" class="source_line" href="#L183">183</a>
<a id="L184" class="source_line" href="#L184">184</a>
<a id="L185" class="source_line" href="#L185">185</a>
<a id="L186" class="source_line" href="#L186">186</a>
<a id="L187" class="source_line" href="#L187">187</a>
<a id="L188" class="source_line" href="#L188">188</a>
<a id="L189" class="source_line" href="#L189">189</a>
<a id="L190" class="source_line" href="#L190">190</a>
<a id="L191" class="source_line" href="#L191">191</a>
<a id="L192" class="source_line" href="#L192">192</a>
<a id="L193" class="source_line" href="#L193">193</a>
<a id="L194" class="source_line" href="#L194">194</a>
<a id="L195" class="source_line" href="#L195">195</a>
<a id="L196" class="source_line" href="#L196">196</a>
<a id="L197" class="source_line" href="#L197">197</a>
<a id="L198" class="source_line" href="#L198">198</a>
<a id="L199" class="source_line" href="#L199">199</a>
<a id="L200" class="source_line" href="#L200">200</a>
<a id="L201" class="source_line" href="#L201">201</a>
<a id="L202" class="source_line" href="#L202">202</a>
<a id="L203" class="source_line" href="#L203">203</a>
<a id="L204" class="source_line" href="#L204">204</a>
<a id="L205" class="source_line" href="#L205">205</a>
<a id="L206" class="source_line" href="#L206">206</a>
<a id="L207" class="source_line" href="#L207">207</a>
<a id="L208" class="source_line" href="#L208">208</a>
<a id="L209" class="source_line" href="#L209">209</a>
<a id="L210" class="source_line" href="#L210">210</a>
<a id="L211" class="source_line" href="#L211">211</a>
<a id="L212" class="source_line" href="#L212">212</a>
<a id="L213" class="source_line" href="#L213">213</a>
<a id="L214" class="source_line" href="#L214">214</a>
<a id="L215" class="source_line" href="#L215">215</a>
<a id="L216" class="source_line" href="#L216">216</a>
<a id="L217" class="source_line" href="#L217">217</a>
<a id="L218" class="source_line" href="#L218">218</a>
<a id="L219" class="source_line" href="#L219">219</a>
<a id="L220" class="source_line" href="#L220">220</a>
<a id="L221" class="source_line" href="#L221">221</a>
<a id="L222" class="source_line" href="#L222">222</a>
<a id="L223" class="source_line" href="#L223">223</a>
<a id="L224" class="source_line" href="#L224">224</a>
<a id="L225" class="source_line" href="#L225">225</a>
<a id="L226" class="source_line" href="#L226">226</a>
<a id="L227" class="source_line" href="#L227">227</a>
<a id="L228" class="source_line" href="#L228">228</a>
<a id="L229" class="source_line" href="#L229">229</a>
<a id="L230" class="source_line" href="#L230">230</a>
<a id="L231" class="source_line" href="#L231">231</a>
<a id="L232" class="source_line" href="#L232">232</a>
<a id="L233" class="source_line" href="#L233">233</a>
<a id="L234" class="source_line" href="#L234">234</a>
<a id="L235" class="source_line" href="#L235">235</a>
<a id="L236" class="source_line" href="#L236">236</a>
<a id="L237" class="source_line" href="#L237">237</a>
<a id="L238" class="source_line" href="#L238">238</a>
<a id="L239" class="source_line" href="#L239">239</a>
<a id="L240" class="source_line" href="#L240">240</a>
<a id="L241" class="source_line" href="#L241">241</a>
<a id="L242" class="source_line" href="#L242">242</a>
<a id="L243" class="source_line" href="#L243">243</a>
<a id="L244" class="source_line" href="#L244">244</a>
<a id="L245" class="source_line" href="#L245">245</a>
<a id="L246" class="source_line" href="#L246">246</a>
<a id="L247" class="source_line" href="#L247">247</a>
<a id="L248" class="source_line" href="#L248">248</a>
<a id="L249" class="source_line" href="#L249">249</a>
<a id="L250" class="source_line" href="#L250">250</a>
<a id="L251" class="source_line" href="#L251">251</a>
<a id="L252" class="source_line" href="#L252">252</a>
<a id="L253" class="source_line" href="#L253">253</a>
<a id="L254" class="source_line" href="#L254">254</a>
<a id="L255" class="source_line" href="#L255">255</a>
<a id="L256" class="source_line" href="#L256">256</a>
<a id="L257" class="source_line" href="#L257">257</a>
<a id="L258" class="source_line" href="#L258">258</a>
<a id="L259" class="source_line" href="#L259">259</a>
<a id="L260" class="source_line" href="#L260">260</a>
<a id="L261" class="source_line" href="#L261">261</a>
<a id="L262" class="source_line" href="#L262">262</a>
<a id="L263" class="source_line" href="#L263">263</a>
<a id="L264" class="source_line" href="#L264">264</a>
<a id="L265" class="source_line" href="#L265">265</a>
<a id="L266" class="source_line" href="#L266">266</a>
<a id="L267" class="source_line" href="#L267">267</a>
<a id="L268" class="source_line" href="#L268">268</a>
<a id="L269" class="source_line" href="#L269">269</a>
<a id="L270" class="source_line" href="#L270">270</a>
<a id="L271" class="source_line" href="#L271">271</a>
<a id="L272" class="source_line" href="#L272">272</a>
<a id="L273" class="source_line" href="#L273">273</a>
<a id="L274" class="source_line" href="#L274">274</a>
<a id="L275" class="source_line" href="#L275">275</a>
<a id="L276" class="source_line" href="#L276">276</a>
<a id="L277" class="source_line" href="#L277">277</a>
<a id="L278" class="source_line" href="#L278">278</a>
<a id="L279" class="source_line" href="#L279">279</a>
<a id="L280" class="source_line" href="#L280">280</a>
<a id="L281" class="source_line" href="#L281">281</a>
<a id="L282" class="source_line" href="#L282">282</a>
<a id="L283" class="source_line" href="#L283">283</a>
<a id="L284" class="source_line" href="#L284">284</a>
<a id="L285" class="source_line" href="#L285">285</a>
<a id="L286" class="source_line" href="#L286">286</a>
<a id="L287" class="source_line" href="#L287">287</a>
<a id="L288" class="source_line" href="#L288">288</a>
<a id="L289" class="source_line" href="#L289">289</a>
<a id="L290" class="source_line" href="#L290">290</a>
<a id="L291" class="source_line" href="#L291">291</a>
<a id="L292" class="source_line" href="#L292">292</a>
<a id="L293" class="source_line" href="#L293">293</a>
<a id="L294" class="source_line" href="#L294">294</a>
<a id="L295" class="source_line" href="#L295">295</a>
<a id="L296" class="source_line" href="#L296">296</a>
<a id="L297" class="source_line" href="#L297">297</a>
<a id="L298" class="source_line" href="#L298">298</a>
<a id="L299" class="source_line" href="#L299">299</a>
<a id="L300" class="source_line" href="#L300">300</a>
<a id="L301" class="source_line" href="#L301">301</a>
<a id="L302" class="source_line" href="#L302">302</a>
<a id="L303" class="source_line" href="#L303">303</a>
<a id="L304" class="source_line" href="#L304">304</a>
<a id="L305" class="source_line" href="#L305">305</a>
<a id="L306" class="source_line" href="#L306">306</a>
<a id="L307" class="source_line" href="#L307">307</a>
<a id="L308" class="source_line" href="#L308">308</a>
<a id="L309" class="source_line" href="#L309">309</a>
<a id="L310" class="source_line" href="#L310">310</a>
<a id="L311" class="source_line" href="#L311">311</a>
<a id="L312" class="source_line" href="#L312">312</a>
<a id="L313" class="source_line" href="#L313">313</a>
<a id="L314" class="source_line" href="#L314">314</a>
<a id="L315" class="source_line" href="#L315">315</a>
<a id="L316" class="source_line" href="#L316">316</a>
<a id="L317" class="source_line" href="#L317">317</a>
<a id="L318" class="source_line" href="#L318">318</a>
<a id="L319" class="source_line" href="#L319">319</a>
<a id="L320" class="source_line" href="#L320">320</a>
<a id="L321" class="source_line" href="#L321">321</a>
<a id="L322" class="source_line" href="#L322">322</a>
<a id="L323" class="source_line" href="#L323">323</a>
<a id="L324" class="source_line" href="#L324">324</a>
<a id="L325" class="source_line" href="#L325">325</a>
<a id="L326" class="source_line" href="#L326">326</a>
<a id="L327" class="source_line" href="#L327">327</a>
<a id="L328" class="source_line" href="#L328">328</a>
<a id="L329" class="source_line" href="#L329">329</a>
<a id="L330" class="source_line" href="#L330">330</a>
<a id="L331" class="source_line" href="#L331">331</a>
<a id="L332" class="source_line" href="#L332">332</a>
<a id="L333" class="source_line" href="#L333">333</a>
<a id="L334" class="source_line" href="#L334">334</a>
<a id="L335" class="source_line" href="#L335">335</a>
<a id="L336" class="source_line" href="#L336">336</a>
<a id="L337" class="source_line" href="#L337">337</a>
<a id="L338" class="source_line" href="#L338">338</a>
<a id="L339" class="source_line" href="#L339">339</a>
<a id="L340" class="source_line" href="#L340">340</a>
<a id="L341" class="source_line" href="#L341">341</a>
<a id="L342" class="source_line" href="#L342">342</a>
<a id="L343" class="source_line" href="#L343">343</a>
<a id="L344" class="source_line" href="#L344">344</a>
<a id="L345" class="source_line" href="#L345">345</a>
<a id="L346" class="source_line" href="#L346">346</a>
<a id="L347" class="source_line" href="#L347">347</a>
<a id="L348" class="source_line" href="#L348">348</a>
<a id="L349" class="source_line" href="#L349">349</a>
<a id="L350" class="source_line" href="#L350">350</a>
<a id="L351" class="source_line" href="#L351">351</a>
<a id="L352" class="source_line" href="#L352">352</a>
<a id="L353" class="source_line" href="#L353">353</a>
<a id="L354" class="source_line" href="#L354">354</a>
<a id="L355" class="source_line" href="#L355">355</a>
<a id="L356" class="source_line" href="#L356">356</a>
<a id="L357" class="source_line" href="#L357">357</a>
<a id="L358" class="source_line" href="#L358">358</a>
<a id="L359" class="source_line" href="#L359">359</a>
<a id="L360" class="source_line" href="#L360">360</a>
<a id="L361" class="source_line" href="#L361">361</a>
<a id="L362" class="source_line" href="#L362">362</a>
<a id="L363" class="source_line" href="#L363">363</a>
<a id="L364" class="source_line" href="#L364">364</a>
<a id="L365" class="source_line" href="#L365">365</a>
<a id="L366" class="source_line" href="#L366">366</a>
<a id="L367" class="source_line" href="#L367">367</a>
<a id="L368" class="source_line" href="#L368">368</a>
<a id="L369" class="source_line" href="#L369">369</a>
<a id="L370" class="source_line" href="#L370">370</a>
<a id="L371" class="source_line" href="#L371">371</a>
<a id="L372" class="source_line" href="#L372">372</a>
<a id="L373" class="source_line" href="#L373">373</a>
<a id="L374" class="source_line" href="#L374">374</a>
<a id="L375" class="source_line" href="#L375">375</a>
<a id="L376" class="source_line" href="#L376">376</a>
<a id="L377" class="source_line" href="#L377">377</a>
<a id="L378" class="source_line" href="#L378">378</a>
<a id="L379" class="source_line" href="#L379">379</a>
<a id="L380" class="source_line" href="#L380">380</a>
<a id="L381" class="source_line" href="#L381">381</a>
<a id="L382" class="source_line" href="#L382">382</a>
<a id="L383" class="source_line" href="#L383">383</a>
<a id="L384" class="source_line" href="#L384">384</a>
<a id="L385" class="source_line" href="#L385">385</a>
<a id="L386" class="source_line" href="#L386">386</a>
<a id="L387" class="source_line" href="#L387">387</a>
<a id="L388" class="source_line" href="#L388">388</a>
<a id="L389" class="source_line" href="#L389">389</a>
<a id="L390" class="source_line" href="#L390">390</a>
<a id="L391" class="source_line" href="#L391">391</a>
<a id="L392" class="source_line" href="#L392">392</a>
<a id="L393" class="source_line" href="#L393">393</a>
<a id="L394" class="source_line" href="#L394">394</a>
<a id="L395" class="source_line" href="#L395">395</a>
<a id="L396" class="source_line" href="#L396">396</a>
<a id="L397" class="source_line" href="#L397">397</a>
<a id="L398" class="source_line" href="#L398">398</a>
<a id="L399" class="source_line" href="#L399">399</a>
<a id="L400" class="source_line" href="#L400">400</a>
<a id="L401" class="source_line" href="#L401">401</a>
<a id="L402" class="source_line" href="#L402">402</a>
<a id="L403" class="source_line" href="#L403">403</a>
<a id="L404" class="source_line" href="#L404">404</a>
<a id="L405" class="source_line" href="#L405">405</a>
<a id="L406" class="source_line" href="#L406">406</a>
<a id="L407" class="source_line" href="#L407">407</a>
<a id="L408" class="source_line" href="#L408">408</a>
<a id="L409" class="source_line" href="#L409">409</a>
<a id="L410" class="source_line" href="#L410">410</a>
<a id="L411" class="source_line" href="#L411">411</a>
<a id="L412" class="source_line" href="#L412">412</a>
<a id="L413" class="source_line" href="#L413">413</a>
<a id="L414" class="source_line" href="#L414">414</a>
<a id="L415" class="source_line" href="#L415">415</a>
<a id="L416" class="source_line" href="#L416">416</a>
<a id="L417" class="source_line" href="#L417">417</a>
<a id="L418" class="source_line" href="#L418">418</a>
<a id="L419" class="source_line" href="#L419">419</a>
<a id="L420" class="source_line" href="#L420">420</a>
<a id="L421" class="source_line" href="#L421">421</a>
<a id="L422" class="source_line" href="#L422">422</a>
<a id="L423" class="source_line" href="#L423">423</a>
<a id="L424" class="source_line" href="#L424">424</a>
<a id="L425" class="source_line" href="#L425">425</a>
<a id="L426" class="source_line" href="#L426">426</a>
<a id="L427" class="source_line" href="#L427">427</a>
<a id="L428" class="source_line" href="#L428">428</a>
<a id="L429" class="source_line" href="#L429">429</a>
<a id="L430" class="source_line" href="#L430">430</a>
<a id="L431" class="source_line" href="#L431">431</a>
<a id="L432" class="source_line" href="#L432">432</a>
<a id="L433" class="source_line" href="#L433">433</a>
<a id="L434" class="source_line" href="#L434">434</a>
<a id="L435" class="source_line" href="#L435">435</a>
<a id="L436" class="source_line" href="#L436">436</a>
<a id="L437" class="source_line" href="#L437">437</a>
<a id="L438" class="source_line" href="#L438">438</a>
<a id="L439" class="source_line" href="#L439">439</a>
<a id="L440" class="source_line" href="#L440">440</a>
<a id="L441" class="source_line" href="#L441">441</a>
<a id="L442" class="source_line" href="#L442">442</a>
<a id="L443" class="source_line" href="#L443">443</a>
<a id="L444" class="source_line" href="#L444">444</a>
<a id="L445" class="source_line" href="#L445">445</a>
<a id="L446" class="source_line" href="#L446">446</a>
<a id="L447" class="source_line" href="#L447">447</a>
<a id="L448" class="source_line" href="#L448">448</a>
<a id="L449" class="source_line" href="#L449">449</a>
<a id="L450" class="source_line" href="#L450">450</a>
<a id="L451" class="source_line" href="#L451">451</a>
<a id="L452" class="source_line" href="#L452">452</a>
<a id="L453" class="source_line" href="#L453">453</a>
<a id="L454" class="source_line" href="#L454">454</a>
<a id="L455" class="source_line" href="#L455">455</a>
<a id="L456" class="source_line" href="#L456">456</a>
<a id="L457" class="source_line" href="#L457">457</a>
<a id="L458" class="source_line" href="#L458">458</a>
<a id="L459" class="source_line" href="#L459">459</a>
<a id="L460" class="source_line" href="#L460">460</a>
<a id="L461" class="source_line" href="#L461">461</a>
<a id="L462" class="source_line" href="#L462">462</a>
<a id="L463" class="source_line" href="#L463">463</a>
<a id="L464" class="source_line" href="#L464">464</a>
<a id="L465" class="source_line" href="#L465">465</a>
<a id="L466" class="source_line" href="#L466">466</a>
<a id="L467" class="source_line" href="#L467">467</a>
<a id="L468" class="source_line" href="#L468">468</a>
<a id="L469" class="source_line" href="#L469">469</a>
<a id="L470" class="source_line" href="#L470">470</a>
<a id="L471" class="source_line" href="#L471">471</a>
<a id="L472" class="source_line" href="#L472">472</a>
<a id="L473" class="source_line" href="#L473">473</a>
<a id="L474" class="source_line" href="#L474">474</a>
<a id="L475" class="source_line" href="#L475">475</a>
<a id="L476" class="source_line" href="#L476">476</a>
<a id="L477" class="source_line" href="#L477">477</a>
<a id="L478" class="source_line" href="#L478">478</a>
<a id="L479" class="source_line" href="#L479">479</a>
<a id="L480" class="source_line" href="#L480">480</a>
<a id="L481" class="source_line" href="#L481">481</a>
<a id="L482" class="source_line" href="#L482">482</a>
<a id="L483" class="source_line" href="#L483">483</a>
<a id="L484" class="source_line" href="#L484">484</a>
<a id="L485" class="source_line" href="#L485">485</a>
<a id="L486" class="source_line" href="#L486">486</a>
<a id="L487" class="source_line" href="#L487">487</a>
<a id="L488" class="source_line" href="#L488">488</a>
<a id="L489" class="source_line" href="#L489">489</a>
<a id="L490" class="source_line" href="#L490">490</a>
<a id="L491" class="source_line" href="#L491">491</a>
<a id="L492" class="source_line" href="#L492">492</a>
<a id="L493" class="source_line" href="#L493">493</a>
<a id="L494" class="source_line" href="#L494">494</a>
<a id="L495" class="source_line" href="#L495">495</a>
<a id="L496" class="source_line" href="#L496">496</a>
<a id="L497" class="source_line" href="#L497">497</a>
<a id="L498" class="source_line" href="#L498">498</a>
<a id="L499" class="source_line" href="#L499">499</a>
<a id="L500" class="source_line" href="#L500">500</a>
<a id="L501" class="source_line" href="#L501">501</a>
<a id="L502" class="source_line" href="#L502">502</a>
<a id="L503" class="source_line" href="#L503">503</a>
<a id="L504" class="source_line" href="#L504">504</a>
<a id="L505" class="source_line" href="#L505">505</a>
<a id="L506" class="source_line" href="#L506">506</a>
<a id="L507" class="source_line" href="#L507">507</a>
<a id="L508" class="source_line" href="#L508">508</a>
<a id="L509" class="source_line" href="#L509">509</a>
<a id="L510" class="source_line" href="#L510">510</a>
<a id="L511" class="source_line" href="#L511">511</a>
<a id="L512" class="source_line" href="#L512">512</a>
<a id="L513" class="source_line" href="#L513">513</a>
<a id="L514" class="source_line" href="#L514">514</a>
<a id="L515" class="source_line" href="#L515">515</a>
<a id="L516" class="source_line" href="#L516">516</a>
<a id="L517" class="source_line" href="#L517">517</a>
<a id="L518" class="source_line" href="#L518">518</a>
<a id="L519" class="source_line" href="#L519">519</a>
<a id="L520" class="source_line" href="#L520">520</a>
<a id="L521" class="source_line" href="#L521">521</a>
<a id="L522" class="source_line" href="#L522">522</a>
<a id="L523" class="source_line" href="#L523">523</a>
<a id="L524" class="source_line" href="#L524">524</a>
<a id="L525" class="source_line" href="#L525">525</a>
<a id="L526" class="source_line" href="#L526">526</a>
<a id="L527" class="source_line" href="#L527">527</a>
<a id="L528" class="source_line" href="#L528">528</a>
<a id="L529" class="source_line" href="#L529">529</a>
<a id="L530" class="source_line" href="#L530">530</a>
<a id="L531" class="source_line" href="#L531">531</a>
<a id="L532" class="source_line" href="#L532">532</a>
<a id="L533" class="source_line" href="#L533">533</a>
<a id="L534" class="source_line" href="#L534">534</a>
<a id="L535" class="source_line" href="#L535">535</a>
<a id="L536" class="source_line" href="#L536">536</a>
<a id="L537" class="source_line" href="#L537">537</a>
<a id="L538" class="source_line" href="#L538">538</a>
<a id="L539" class="source_line" href="#L539">539</a>
<a id="L540" class="source_line" href="#L540">540</a>
<a id="L541" class="source_line" href="#L541">541</a>
<a id="L542" class="source_line" href="#L542">542</a>
<a id="L543" class="source_line" href="#L543">543</a>
<a id="L544" class="source_line" href="#L544">544</a>
<a id="L545" class="source_line" href="#L545">545</a>
<a id="L546" class="source_line" href="#L546">546</a>
<a id="L547" class="source_line" href="#L547">547</a>
<a id="L548" class="source_line" href="#L548">548</a>
<a id="L549" class="source_line" href="#L549">549</a>
<a id="L550" class="source_line" href="#L550">550</a>
<a id="L551" class="source_line" href="#L551">551</a>
<a id="L552" class="source_line" href="#L552">552</a>
<a id="L553" class="source_line" href="#L553">553</a>
<a id="L554" class="source_line" href="#L554">554</a>
<a id="L555" class="source_line" href="#L555">555</a>
<a id="L556" class="source_line" href="#L556">556</a>
<a id="L557" class="source_line" href="#L557">557</a>
<a id="L558" class="source_line" href="#L558">558</a>
<a id="L559" class="source_line" href="#L559">559</a>
<a id="L560" class="source_line" href="#L560">560</a>
<a id="L561" class="source_line" href="#L561">561</a>
<a id="L562" class="source_line" href="#L562">562</a>
<a id="L563" class="source_line" href="#L563">563</a>
<a id="L564" class="source_line" href="#L564">564</a>
<a id="L565" class="source_line" href="#L565">565</a>
<a id="L566" class="source_line" href="#L566">566</a>
<a id="L567" class="source_line" href="#L567">567</a>
<a id="L568" class="source_line" href="#L568">568</a>
<a id="L569" class="source_line" href="#L569">569</a>
<a id="L570" class="source_line" href="#L570">570</a>
<a id="L571" class="source_line" href="#L571">571</a>
<a id="L572" class="source_line" href="#L572">572</a>
<a id="L573" class="source_line" href="#L573">573</a>
<a id="L574" class="source_line" href="#L574">574</a>
<a id="L575" class="source_line" href="#L575">575</a>
<a id="L576" class="source_line" href="#L576">576</a>
<a id="L577" class="source_line" href="#L577">577</a>
<a id="L578" class="source_line" href="#L578">578</a>
<a id="L579" class="source_line" href="#L579">579</a>
<a id="L580" class="source_line" href="#L580">580</a>
<a id="L581" class="source_line" href="#L581">581</a>
<a id="L582" class="source_line" href="#L582">582</a>
<a id="L583" class="source_line" href="#L583">583</a>
<a id="L584" class="source_line" href="#L584">584</a>
<a id="L585" class="source_line" href="#L585">585</a>
<a id="L586" class="source_line" href="#L586">586</a>
<a id="L587" class="source_line" href="#L587">587</a>
<a id="L588" class="source_line" href="#L588">588</a>
<a id="L589" class="source_line" href="#L589">589</a>
<a id="L590" class="source_line" href="#L590">590</a>
<a id="L591" class="source_line" href="#L591">591</a>
<a id="L592" class="source_line" href="#L592">592</a>
<a id="L593" class="source_line" href="#L593">593</a>
<a id="L594" class="source_line" href="#L594">594</a>
<a id="L595" class="source_line" href="#L595">595</a>
<a id="L596" class="source_line" href="#L596">596</a>
<a id="L597" class="source_line" href="#L597">597</a>
<a id="L598" class="source_line" href="#L598">598</a>
<a id="L599" class="source_line" href="#L599">599</a>
<a id="L600" class="source_line" href="#L600">600</a>
<a id="L601" class="source_line" href="#L601">601</a>
<a id="L602" class="source_line" href="#L602">602</a>
<a id="L603" class="source_line" href="#L603">603</a>
<a id="L604" class="source_line" href="#L604">604</a>
<a id="L605" class="source_line" href="#L605">605</a>
<a id="L606" class="source_line" href="#L606">606</a>
<a id="L607" class="source_line" href="#L607">607</a>
<a id="L608" class="source_line" href="#L608">608</a>
<a id="L609" class="source_line" href="#L609">609</a>
<a id="L610" class="source_line" href="#L610">610</a>
<a id="L611" class="source_line" href="#L611">611</a>
<a id="L612" class="source_line" href="#L612">612</a>
<a id="L613" class="source_line" href="#L613">613</a>
<a id="L614" class="source_line" href="#L614">614</a>
<a id="L615" class="source_line" href="#L615">615</a>
<a id="L616" class="source_line" href="#L616">616</a>
<a id="L617" class="source_line" href="#L617">617</a>
<a id="L618" class="source_line" href="#L618">618</a>
<a id="L619" class="source_line" href="#L619">619</a>
<a id="L620" class="source_line" href="#L620">620</a>
<a id="L621" class="source_line" href="#L621">621</a>
<a id="L622" class="source_line" href="#L622">622</a>
<a id="L623" class="source_line" href="#L623">623</a>
<a id="L624" class="source_line" href="#L624">624</a>
<a id="L625" class="source_line" href="#L625">625</a>
<a id="L626" class="source_line" href="#L626">626</a>
<a id="L627" class="source_line" href="#L627">627</a>
<a id="L628" class="source_line" href="#L628">628</a>
<a id="L629" class="source_line" href="#L629">629</a>
<a id="L630" class="source_line" href="#L630">630</a>
<a id="L631" class="source_line" href="#L631">631</a>
<a id="L632" class="source_line" href="#L632">632</a>
<a id="L633" class="source_line" href="#L633">633</a>
<a id="L634" class="source_line" href="#L634">634</a>
<a id="L635" class="source_line" href="#L635">635</a>
<a id="L636" class="source_line" href="#L636">636</a>
<a id="L637" class="source_line" href="#L637">637</a>
<a id="L638" class="source_line" href="#L638">638</a>
<a id="L639" class="source_line" href="#L639">639</a>
<a id="L640" class="source_line" href="#L640">640</a>
<a id="L641" class="source_line" href="#L641">641</a>
<a id="L642" class="source_line" href="#L642">642</a>
<a id="L643" class="source_line" href="#L643">643</a>
<a id="L644" class="source_line" href="#L644">644</a>
<a id="L645" class="source_line" href="#L645">645</a>
<a id="L646" class="source_line" href="#L646">646</a>
<a id="L647" class="source_line" href="#L647">647</a>
<a id="L648" class="source_line" href="#L648">648</a>
<a id="L649" class="source_line" href="#L649">649</a>
<a id="L650" class="source_line" href="#L650">650</a>
<a id="L651" class="source_line" href="#L651">651</a>
<a id="L652" class="source_line" href="#L652">652</a>
<a id="L653" class="source_line" href="#L653">653</a>
<a id="L654" class="source_line" href="#L654">654</a>
<a id="L655" class="source_line" href="#L655">655</a>
<a id="L656" class="source_line" href="#L656">656</a>
<a id="L657" class="source_line" href="#L657">657</a>
<a id="L658" class="source_line" href="#L658">658</a>
<a id="L659" class="source_line" href="#L659">659</a>
<a id="L660" class="source_line" href="#L660">660</a>
<a id="L661" class="source_line" href="#L661">661</a>
<a id="L662" class="source_line" href="#L662">662</a>
<a id="L663" class="source_line" href="#L663">663</a>
<a id="L664" class="source_line" href="#L664">664</a>
<a id="L665" class="source_line" href="#L665">665</a>
<a id="L666" class="source_line" href="#L666">666</a>
<a id="L667" class="source_line" href="#L667">667</a>
<a id="L668" class="source_line" href="#L668">668</a>
<a id="L669" class="source_line" href="#L669">669</a>
<a id="L670" class="source_line" href="#L670">670</a>
<a id="L671" class="source_line" href="#L671">671</a>
<a id="L672" class="source_line" href="#L672">672</a>
<a id="L673" class="source_line" href="#L673">673</a>
<a id="L674" class="source_line" href="#L674">674</a>
<a id="L675" class="source_line" href="#L675">675</a>
<a id="L676" class="source_line" href="#L676">676</a>
<a id="L677" class="source_line" href="#L677">677</a>
<a id="L678" class="source_line" href="#L678">678</a>
<a id="L679" class="source_line" href="#L679">679</a>
<a id="L680" class="source_line" href="#L680">680</a>
<a id="L681" class="source_line" href="#L681">681</a>
<a id="L682" class="source_line" href="#L682">682</a>
<a id="L683" class="source_line" href="#L683">683</a>
<a id="L684" class="source_line" href="#L684">684</a>
<a id="L685" class="source_line" href="#L685">685</a>
<a id="L686" class="source_line" href="#L686">686</a>
<a id="L687" class="source_line" href="#L687">687</a>
<a id="L688" class="source_line" href="#L688">688</a>
<a id="L689" class="source_line" href="#L689">689</a>
<a id="L690" class="source_line" href="#L690">690</a>
<a id="L691" class="source_line" href="#L691">691</a>
<a id="L692" class="source_line" href="#L692">692</a>
<a id="L693" class="source_line" href="#L693">693</a>
<a id="L694" class="source_line" href="#L694">694</a>
<a id="L695" class="source_line" href="#L695">695</a>
<a id="L696" class="source_line" href="#L696">696</a>
<a id="L697" class="source_line" href="#L697">697</a>
<a id="L698" class="source_line" href="#L698">698</a>
<a id="L699" class="source_line" href="#L699">699</a>
<a id="L700" class="source_line" href="#L700">700</a>
<a id="L701" class="source_line" href="#L701">701</a>
<a id="L702" class="source_line" href="#L702">702</a>
<a id="L703" class="source_line" href="#L703">703</a>
<a id="L704" class="source_line" href="#L704">704</a>
<a id="L705" class="source_line" href="#L705">705</a>
<a id="L706" class="source_line" href="#L706">706</a>
<a id="L707" class="source_line" href="#L707">707</a>
<a id="L708" class="source_line" href="#L708">708</a>
<a id="L709" class="source_line" href="#L709">709</a>
<a id="L710" class="source_line" href="#L710">710</a>
<a id="L711" class="source_line" href="#L711">711</a>
<a id="L712" class="source_line" href="#L712">712</a>
<a id="L713" class="source_line" href="#L713">713</a>
<a id="L714" class="source_line" href="#L714">714</a>
<a id="L715" class="source_line" href="#L715">715</a>
<a id="L716" class="source_line" href="#L716">716</a>
<a id="L717" class="source_line" href="#L717">717</a>
<a id="L718" class="source_line" href="#L718">718</a>
<a id="L719" class="source_line" href="#L719">719</a>
<a id="L720" class="source_line" href="#L720">720</a>
<a id="L721" class="source_line" href="#L721">721</a>
<a id="L722" class="source_line" href="#L722">722</a>
<a id="L723" class="source_line" href="#L723">723</a>
<a id="L724" class="source_line" href="#L724">724</a>
<a id="L725" class="source_line" href="#L725">725</a>
<a id="L726" class="source_line" href="#L726">726</a>
<a id="L727" class="source_line" href="#L727">727</a>
<a id="L728" class="source_line" href="#L728">728</a>
<a id="L729" class="source_line" href="#L729">729</a>
<a id="L730" class="source_line" href="#L730">730</a>
<a id="L731" class="source_line" href="#L731">731</a>
<a id="L732" class="source_line" href="#L732">732</a>
<a id="L733" class="source_line" href="#L733">733</a>
<a id="L734" class="source_line" href="#L734">734</a>
<a id="L735" class="source_line" href="#L735">735</a>
<a id="L736" class="source_line" href="#L736">736</a>
<a id="L737" class="source_line" href="#L737">737</a>
<a id="L738" class="source_line" href="#L738">738</a>
<a id="L739" class="source_line" href="#L739">739</a>
<a id="L740" class="source_line" href="#L740">740</a>
<a id="L741" class="source_line" href="#L741">741</a>
<a id="L742" class="source_line" href="#L742">742</a>
<a id="L743" class="source_line" href="#L743">743</a>
<a id="L744" class="source_line" href="#L744">744</a>
<a id="L745" class="source_line" href="#L745">745</a>
<a id="L746" class="source_line" href="#L746">746</a>
<a id="L747" class="source_line" href="#L747">747</a>
<a id="L748" class="source_line" href="#L748">748</a>
<a id="L749" class="source_line" href="#L749">749</a>
<a id="L750" class="source_line" href="#L750">750</a>
<a id="L751" class="source_line" href="#L751">751</a>
<a id="L752" class="source_line" href="#L752">752</a>
<a id="L753" class="source_line" href="#L753">753</a>
<a id="L754" class="source_line" href="#L754">754</a>
<a id="L755" class="source_line" href="#L755">755</a>
<a id="L756" class="source_line" href="#L756">756</a>
<a id="L757" class="source_line" href="#L757">757</a>
<a id="L758" class="source_line" href="#L758">758</a>
<a id="L759" class="source_line" href="#L759">759</a>
<a id="L760" class="source_line" href="#L760">760</a>
<a id="L761" class="source_line" href="#L761">761</a>
<a id="L762" class="source_line" href="#L762">762</a>
<a id="L763" class="source_line" href="#L763">763</a>
<a id="L764" class="source_line" href="#L764">764</a>
<a id="L765" class="source_line" href="#L765">765</a>
<a id="L766" class="source_line" href="#L766">766</a>
<a id="L767" class="source_line" href="#L767">767</a>
<a id="L768" class="source_line" href="#L768">768</a>
<a id="L769" class="source_line" href="#L769">769</a>
<a id="L770" class="source_line" href="#L770">770</a>
<a id="L771" class="source_line" href="#L771">771</a>
<a id="L772" class="source_line" href="#L772">772</a>
<a id="L773" class="source_line" href="#L773">773</a>
<a id="L774" class="source_line" href="#L774">774</a>
<a id="L775" class="source_line" href="#L775">775</a>
<a id="L776" class="source_line" href="#L776">776</a>
<a id="L777" class="source_line" href="#L777">777</a>
<a id="L778" class="source_line" href="#L778">778</a>
<a id="L779" class="source_line" href="#L779">779</a>
<a id="L780" class="source_line" href="#L780">780</a>
<a id="L781" class="source_line" href="#L781">781</a>
<a id="L782" class="source_line" href="#L782">782</a>
<a id="L783" class="source_line" href="#L783">783</a>
<a id="L784" class="source_line" href="#L784">784</a>
<a id="L785" class="source_line" href="#L785">785</a>
<a id="L786" class="source_line" href="#L786">786</a>
<a id="L787" class="source_line" href="#L787">787</a>
<a id="L788" class="source_line" href="#L788">788</a>
<a id="L789" class="source_line" href="#L789">789</a>
<a id="L790" class="source_line" href="#L790">790</a>
<a id="L791" class="source_line" href="#L791">791</a>
<a id="L792" class="source_line" href="#L792">792</a>
<a id="L793" class="source_line" href="#L793">793</a>
<a id="L794" class="source_line" href="#L794">794</a>
<a id="L795" class="source_line" href="#L795">795</a>
<a id="L796" class="source_line" href="#L796">796</a>
<a id="L797" class="source_line" href="#L797">797</a>
<a id="L798" class="source_line" href="#L798">798</a>
<a id="L799" class="source_line" href="#L799">799</a>
<a id="L800" class="source_line" href="#L800">800</a>
<a id="L801" class="source_line" href="#L801">801</a>
<a id="L802" class="source_line" href="#L802">802</a>
<a id="L803" class="source_line" href="#L803">803</a>
<a id="L804" class="source_line" href="#L804">804</a>
<a id="L805" class="source_line" href="#L805">805</a>
<a id="L806" class="source_line" href="#L806">806</a>
<a id="L807" class="source_line" href="#L807">807</a>
<a id="L808" class="source_line" href="#L808">808</a>
<a id="L809" class="source_line" href="#L809">809</a>
<a id="L810" class="source_line" href="#L810">810</a>
<a id="L811" class="source_line" href="#L811">811</a>
<a id="L812" class="source_line" href="#L812">812</a>
<a id="L813" class="source_line" href="#L813">813</a>
<a id="L814" class="source_line" href="#L814">814</a>
<a id="L815" class="source_line" href="#L815">815</a>
<a id="L816" class="source_line" href="#L816">816</a>
<a id="L817" class="source_line" href="#L817">817</a>
<a id="L818" class="source_line" href="#L818">818</a>
<a id="L819" class="source_line" href="#L819">819</a>
<a id="L820" class="source_line" href="#L820">820</a>
<a id="L821" class="source_line" href="#L821">821</a>
<a id="L822" class="source_line" href="#L822">822</a>
<a id="L823" class="source_line" href="#L823">823</a>
<a id="L824" class="source_line" href="#L824">824</a>
<a id="L825" class="source_line" href="#L825">825</a>
<a id="L826" class="source_line" href="#L826">826</a>
<a id="L827" class="source_line" href="#L827">827</a>
<a id="L828" class="source_line" href="#L828">828</a>
<a id="L829" class="source_line" href="#L829">829</a>
<a id="L830" class="source_line" href="#L830">830</a>
<a id="L831" class="source_line" href="#L831">831</a>
<a id="L832" class="source_line" href="#L832">832</a>
<a id="L833" class="source_line" href="#L833">833</a>
<a id="L834" class="source_line" href="#L834">834</a>
<a id="L835" class="source_line" href="#L835">835</a>
<a id="L836" class="source_line" href="#L836">836</a>
<a id="L837" class="source_line" href="#L837">837</a>
<a id="L838" class="source_line" href="#L838">838</a>
<a id="L839" class="source_line" href="#L839">839</a>
<a id="L840" class="source_line" href="#L840">840</a>
<a id="L841" class="source_line" href="#L841">841</a>
<a id="L842" class="source_line" href="#L842">842</a>
<a id="L843" class="source_line" href="#L843">843</a>
<a id="L844" class="source_line" href="#L844">844</a>
<a id="L845" class="source_line" href="#L845">845</a>
<a id="L846" class="source_line" href="#L846">846</a>
<a id="L847" class="source_line" href="#L847">847</a>
<a id="L848" class="source_line" href="#L848">848</a>
<a id="L849" class="source_line" href="#L849">849</a>
<a id="L850" class="source_line" href="#L850">850</a>
<a id="L851" class="source_line" href="#L851">851</a>
<a id="L852" class="source_line" href="#L852">852</a>
<a id="L853" class="source_line" href="#L853">853</a>
<a id="L854" class="source_line" href="#L854">854</a>
<a id="L855" class="source_line" href="#L855">855</a>
<a id="L856" class="source_line" href="#L856">856</a>
<a id="L857" class="source_line" href="#L857">857</a>
<a id="L858" class="source_line" href="#L858">858</a>
<a id="L859" class="source_line" href="#L859">859</a>
<a id="L860" class="source_line" href="#L860">860</a>
<a id="L861" class="source_line" href="#L861">861</a>
<a id="L862" class="source_line" href="#L862">862</a>
<a id="L863" class="source_line" href="#L863">863</a>
<a id="L864" class="source_line" href="#L864">864</a>
<a id="L865" class="source_line" href="#L865">865</a>
<a id="L866" class="source_line" href="#L866">866</a>
<a id="L867" class="source_line" href="#L867">867</a>
<a id="L868" class="source_line" href="#L868">868</a>
<a id="L869" class="source_line" href="#L869">869</a>
<a id="L870" class="source_line" href="#L870">870</a>
<a id="L871" class="source_line" href="#L871">871</a>
<a id="L872" class="source_line" href="#L872">872</a>
<a id="L873" class="source_line" href="#L873">873</a>
<a id="L874" class="source_line" href="#L874">874</a>
<a id="L875" class="source_line" href="#L875">875</a>
<a id="L876" class="source_line" href="#L876">876</a>
<a id="L877" class="source_line" href="#L877">877</a>
<a id="L878" class="source_line" href="#L878">878</a>
<a id="L879" class="source_line" href="#L879">879</a>
<a id="L880" class="source_line" href="#L880">880</a>
<a id="L881" class="source_line" href="#L881">881</a>
<a id="L882" class="source_line" href="#L882">882</a>
<a id="L883" class="source_line" href="#L883">883</a>
<a id="L884" class="source_line" href="#L884">884</a>
<a id="L885" class="source_line" href="#L885">885</a>
<a id="L886" class="source_line" href="#L886">886</a>
<a id="L887" class="source_line" href="#L887">887</a>
<a id="L888" class="source_line" href="#L888">888</a>
<a id="L889" class="source_line" href="#L889">889</a>
<a id="L890" class="source_line" href="#L890">890</a>
<a id="L891" class="source_line" href="#L891">891</a>
<a id="L892" class="source_line" href="#L892">892</a>
<a id="L893" class="source_line" href="#L893">893</a>
<a id="L894" class="source_line" href="#L894">894</a>
<a id="L895" class="source_line" href="#L895">895</a>
<a id="L896" class="source_line" href="#L896">896</a>
<a id="L897" class="source_line" href="#L897">897</a>
<a id="L898" class="source_line" href="#L898">898</a>
<a id="L899" class="source_line" href="#L899">899</a>
<a id="L900" class="source_line" href="#L900">900</a>
<a id="L901" class="source_line" href="#L901">901</a>
<a id="L902" class="source_line" href="#L902">902</a>
<a id="L903" class="source_line" href="#L903">903</a>
<a id="L904" class="source_line" href="#L904">904</a>
<a id="L905" class="source_line" href="#L905">905</a>
<a id="L906" class="source_line" href="#L906">906</a>
<a id="L907" class="source_line" href="#L907">907</a>
<a id="L908" class="source_line" href="#L908">908</a>
<a id="L909" class="source_line" href="#L909">909</a>
<a id="L910" class="source_line" href="#L910">910</a>
<a id="L911" class="source_line" href="#L911">911</a>
<a id="L912" class="source_line" href="#L912">912</a>
<a id="L913" class="source_line" href="#L913">913</a>
<a id="L914" class="source_line" href="#L914">914</a>
<a id="L915" class="source_line" href="#L915">915</a>
<a id="L916" class="source_line" href="#L916">916</a>
<a id="L917" class="source_line" href="#L917">917</a>
<a id="L918" class="source_line" href="#L918">918</a>
<a id="L919" class="source_line" href="#L919">919</a>
<a id="L920" class="source_line" href="#L920">920</a>
<a id="L921" class="source_line" href="#L921">921</a>
<a id="L922" class="source_line" href="#L922">922</a>
<a id="L923" class="source_line" href="#L923">923</a>
<a id="L924" class="source_line" href="#L924">924</a>
<a id="L925" class="source_line" href="#L925">925</a>
<a id="L926" class="source_line" href="#L926">926</a>
<a id="L927" class="source_line" href="#L927">927</a>
<a id="L928" class="source_line" href="#L928">928</a>
<a id="L929" class="source_line" href="#L929">929</a>
<a id="L930" class="source_line" href="#L930">930</a>
<a id="L931" class="source_line" href="#L931">931</a>
<a id="L932" class="source_line" href="#L932">932</a>
<a id="L933" class="source_line" href="#L933">933</a>
<a id="L934" class="source_line" href="#L934">934</a>
<a id="L935" class="source_line" href="#L935">935</a>
<a id="L936" class="source_line" href="#L936">936</a>
<a id="L937" class="source_line" href="#L937">937</a>
<a id="L938" class="source_line" href="#L938">938</a>
<a id="L939" class="source_line" href="#L939">939</a>
<a id="L940" class="source_line" href="#L940">940</a>
<a id="L941" class="source_line" href="#L941">941</a>
<a id="L942" class="source_line" href="#L942">942</a>
<a id="L943" class="source_line" href="#L943">943</a>
<a id="L944" class="source_line" href="#L944">944</a>
<a id="L945" class="source_line" href="#L945">945</a>
<a id="L946" class="source_line" href="#L946">946</a>
<a id="L947" class="source_line" href="#L947">947</a>
<a id="L948" class="source_line" href="#L948">948</a>
<a id="L949" class="source_line" href="#L949">949</a>
<a id="L950" class="source_line" href="#L950">950</a>
<a id="L951" class="source_line" href="#L951">951</a>
<a id="L952" class="source_line" href="#L952">952</a>
<a id="L953" class="source_line" href="#L953">953</a>
<a id="L954" class="source_line" href="#L954">954</a>
<a id="L955" class="source_line" href="#L955">955</a>
<a id="L956" class="source_line" href="#L956">956</a>
<a id="L957" class="source_line" href="#L957">957</a>
<a id="L958" class="source_line" href="#L958">958</a>
<a id="L959" class="source_line" href="#L959">959</a>
<a id="L960" class="source_line" href="#L960">960</a>
<a id="L961" class="source_line" href="#L961">961</a>
<a id="L962" class="source_line" href="#L962">962</a>
<a id="L963" class="source_line" href="#L963">963</a>
<a id="L964" class="source_line" href="#L964">964</a>
<a id="L965" class="source_line" href="#L965">965</a>
<a id="L966" class="source_line" href="#L966">966</a>
<a id="L967" class="source_line" href="#L967">967</a>
<a id="L968" class="source_line" href="#L968">968</a>
<a id="L969" class="source_line" href="#L969">969</a>
<a id="L970" class="source_line" href="#L970">970</a>
<a id="L971" class="source_line" href="#L971">971</a>
<a id="L972" class="source_line" href="#L972">972</a>
<a id="L973" class="source_line" href="#L973">973</a>
<a id="L974" class="source_line" href="#L974">974</a>
<a id="L975" class="source_line" href="#L975">975</a>
<a id="L976" class="source_line" href="#L976">976</a>
<a id="L977" class="source_line" href="#L977">977</a>
<a id="L978" class="source_line" href="#L978">978</a>
<a id="L979" class="source_line" href="#L979">979</a>
<a id="L980" class="source_line" href="#L980">980</a>
<a id="L981" class="source_line" href="#L981">981</a>
<a id="L982" class="source_line" href="#L982">982</a>
<a id="L983" class="source_line" href="#L983">983</a>
<a id="L984" class="source_line" href="#L984">984</a>
<a id="L985" class="source_line" href="#L985">985</a>
<a id="L986" class="source_line" href="#L986">986</a>
<a id="L987" class="source_line" href="#L987">987</a>
<a id="L988" class="source_line" href="#L988">988</a>
<a id="L989" class="source_line" href="#L989">989</a>
<a id="L990" class="source_line" href="#L990">990</a>
<a id="L991" class="source_line" href="#L991">991</a>
<a id="L992" class="source_line" href="#L992">992</a>
<a id="L993" class="source_line" href="#L993">993</a>
<a id="L994" class="source_line" href="#L994">994</a>
<a id="L995" class="source_line" href="#L995">995</a>
<a id="L996" class="source_line" href="#L996">996</a>
<a id="L997" class="source_line" href="#L997">997</a>
<a id="L998" class="source_line" href="#L998">998</a>
<a id="L999" class="source_line" href="#L999">999</a>
<a id="L1000" class="source_line" href="#L1000">1000</a>
<a id="L1001" class="source_line" href="#L1001">1001</a>
<a id="L1002" class="source_line" href="#L1002">1002</a>
<a id="L1003" class="source_line" href="#L1003">1003</a>
<a id="L1004" class="source_line" href="#L1004">1004</a>
<a id="L1005" class="source_line" href="#L1005">1005</a>
<a id="L1006" class="source_line" href="#L1006">1006</a>
<a id="L1007" class="source_line" href="#L1007">1007</a>
<a id="L1008" class="source_line" href="#L1008">1008</a>
<a id="L1009" class="source_line" href="#L1009">1009</a>
<a id="L1010" class="source_line" href="#L1010">1010</a>
<a id="L1011" class="source_line" href="#L1011">1011</a>
<a id="L1012" class="source_line" href="#L1012">1012</a>
<a id="L1013" class="source_line" href="#L1013">1013</a>
<a id="L1014" class="source_line" href="#L1014">1014</a>
<a id="L1015" class="source_line" href="#L1015">1015</a>
<a id="L1016" class="source_line" href="#L1016">1016</a>
<a id="L1017" class="source_line" href="#L1017">1017</a>
<a id="L1018" class="source_line" href="#L1018">1018</a>
<a id="L1019" class="source_line" href="#L1019">1019</a>
<a id="L1020" class="source_line" href="#L1020">1020</a>
<a id="L1021" class="source_line" href="#L1021">1021</a>
<a id="L1022" class="source_line" href="#L1022">1022</a>
<a id="L1023" class="source_line" href="#L1023">1023</a>
<a id="L1024" class="source_line" href="#L1024">1024</a>
<a id="L1025" class="source_line" href="#L1025">1025</a>
<a id="L1026" class="source_line" href="#L1026">1026</a>
<a id="L1027" class="source_line" href="#L1027">1027</a>
<a id="L1028" class="source_line" href="#L1028">1028</a>
<a id="L1029" class="source_line" href="#L1029">1029</a>
<a id="L1030" class="source_line" href="#L1030">1030</a>
<a id="L1031" class="source_line" href="#L1031">1031</a>
<a id="L1032" class="source_line" href="#L1032">1032</a>
<a id="L1033" class="source_line" href="#L1033">1033</a>
<a id="L1034" class="source_line" href="#L1034">1034</a>
<a id="L1035" class="source_line" href="#L1035">1035</a>
<a id="L1036" class="source_line" href="#L1036">1036</a>
<a id="L1037" class="source_line" href="#L1037">1037</a>
<a id="L1038" class="source_line" href="#L1038">1038</a>
<a id="L1039" class="source_line" href="#L1039">1039</a>
<a id="L1040" class="source_line" href="#L1040">1040</a>
<a id="L1041" class="source_line" href="#L1041">1041</a>
<a id="L1042" class="source_line" href="#L1042">1042</a>
<a id="L1043" class="source_line" href="#L1043">1043</a>
<a id="L1044" class="source_line" href="#L1044">1044</a>
<a id="L1045" class="source_line" href="#L1045">1045</a>
<a id="L1046" class="source_line" href="#L1046">1046</a>
<a id="L1047" class="source_line" href="#L1047">1047</a>
<a id="L1048" class="source_line" href="#L1048">1048</a>
<a id="L1049" class="source_line" href="#L1049">1049</a>
<a id="L1050" class="source_line" href="#L1050">1050</a>
<a id="L1051" class="source_line" href="#L1051">1051</a>
<a id="L1052" class="source_line" href="#L1052">1052</a>
<a id="L1053" class="source_line" href="#L1053">1053</a>
<a id="L1054" class="source_line" href="#L1054">1054</a>
<a id="L1055" class="source_line" href="#L1055">1055</a>
<a id="L1056" class="source_line" href="#L1056">1056</a>
<a id="L1057" class="source_line" href="#L1057">1057</a>
<a id="L1058" class="source_line" href="#L1058">1058</a>
<a id="L1059" class="source_line" href="#L1059">1059</a>
<a id="L1060" class="source_line" href="#L1060">1060</a>
<a id="L1061" class="source_line" href="#L1061">1061</a>
<a id="L1062" class="source_line" href="#L1062">1062</a>
<a id="L1063" class="source_line" href="#L1063">1063</a>
<a id="L1064" class="source_line" href="#L1064">1064</a>
<a id="L1065" class="source_line" href="#L1065">1065</a>
<a id="L1066" class="source_line" href="#L1066">1066</a>
<a id="L1067" class="source_line" href="#L1067">1067</a>
<a id="L1068" class="source_line" href="#L1068">1068</a>
<a id="L1069" class="source_line" href="#L1069">1069</a>
<a id="L1070" class="source_line" href="#L1070">1070</a>
<a id="L1071" class="source_line" href="#L1071">1071</a>
<a id="L1072" class="source_line" href="#L1072">1072</a>
<a id="L1073" class="source_line" href="#L1073">1073</a>
<a id="L1074" class="source_line" href="#L1074">1074</a>
<a id="L1075" class="source_line" href="#L1075">1075</a>
<a id="L1076" class="source_line" href="#L1076">1076</a>
<a id="L1077" class="source_line" href="#L1077">1077</a>
<a id="L1078" class="source_line" href="#L1078">1078</a>
<a id="L1079" class="source_line" href="#L1079">1079</a>
<a id="L1080" class="source_line" href="#L1080">1080</a>
<a id="L1081" class="source_line" href="#L1081">1081</a>
<a id="L1082" class="source_line" href="#L1082">1082</a>
<a id="L1083" class="source_line" href="#L1083">1083</a>
<a id="L1084" class="source_line" href="#L1084">1084</a>
<a id="L1085" class="source_line" href="#L1085">1085</a>
<a id="L1086" class="source_line" href="#L1086">1086</a>
<a id="L1087" class="source_line" href="#L1087">1087</a>
<a id="L1088" class="source_line" href="#L1088">1088</a>
<a id="L1089" class="source_line" href="#L1089">1089</a>
<a id="L1090" class="source_line" href="#L1090">1090</a>
<a id="L1091" class="source_line" href="#L1091">1091</a>
<a id="L1092" class="source_line" href="#L1092">1092</a>
<a id="L1093" class="source_line" href="#L1093">1093</a>
<a id="L1094" class="source_line" href="#L1094">1094</a>
<a id="L1095" class="source_line" href="#L1095">1095</a>
<a id="L1096" class="source_line" href="#L1096">1096</a>
<a id="L1097" class="source_line" href="#L1097">1097</a>
<a id="L1098" class="source_line" href="#L1098">1098</a>
<a id="L1099" class="source_line" href="#L1099">1099</a>
<a id="L1100" class="source_line" href="#L1100">1100</a>
<a id="L1101" class="source_line" href="#L1101">1101</a>
<a id="L1102" class="source_line" href="#L1102">1102</a>
<a id="L1103" class="source_line" href="#L1103">1103</a>
<a id="L1104" class="source_line" href="#L1104">1104</a>
<a id="L1105" class="source_line" href="#L1105">1105</a>
<a id="L1106" class="source_line" href="#L1106">1106</a>
<a id="L1107" class="source_line" href="#L1107">1107</a>
<a id="L1108" class="source_line" href="#L1108">1108</a>
<a id="L1109" class="source_line" href="#L1109">1109</a>
<a id="L1110" class="source_line" href="#L1110">1110</a>
<a id="L1111" class="source_line" href="#L1111">1111</a>
<a id="L1112" class="source_line" href="#L1112">1112</a>
<a id="L1113" class="source_line" href="#L1113">1113</a>
<a id="L1114" class="source_line" href="#L1114">1114</a>
<a id="L1115" class="source_line" href="#L1115">1115</a>
<a id="L1116" class="source_line" href="#L1116">1116</a>
<a id="L1117" class="source_line" href="#L1117">1117</a>
<a id="L1118" class="source_line" href="#L1118">1118</a>
<a id="L1119" class="source_line" href="#L1119">1119</a>
<a id="L1120" class="source_line" href="#L1120">1120</a>
<a id="L1121" class="source_line" href="#L1121">1121</a>
<a id="L1122" class="source_line" href="#L1122">1122</a>
<a id="L1123" class="source_line" href="#L1123">1123</a>
<a id="L1124" class="source_line" href="#L1124">1124</a>
<a id="L1125" class="source_line" href="#L1125">1125</a>
<a id="L1126" class="source_line" href="#L1126">1126</a>
<a id="L1127" class="source_line" href="#L1127">1127</a>
<a id="L1128" class="source_line" href="#L1128">1128</a>
<a id="L1129" class="source_line" href="#L1129">1129</a>
<a id="L1130" class="source_line" href="#L1130">1130</a>
<a id="L1131" class="source_line" href="#L1131">1131</a>
<a id="L1132" class="source_line" href="#L1132">1132</a>
<a id="L1133" class="source_line" href="#L1133">1133</a>
<a id="L1134" class="source_line" href="#L1134">1134</a>
<a id="L1135" class="source_line" href="#L1135">1135</a>
<a id="L1136" class="source_line" href="#L1136">1136</a>
<a id="L1137" class="source_line" href="#L1137">1137</a>
<a id="L1138" class="source_line" href="#L1138">1138</a>
<a id="L1139" class="source_line" href="#L1139">1139</a>
<a id="L1140" class="source_line" href="#L1140">1140</a>
<a id="L1141" class="source_line" href="#L1141">1141</a>
<a id="L1142" class="source_line" href="#L1142">1142</a>
<a id="L1143" class="source_line" href="#L1143">1143</a>
<a id="L1144" class="source_line" href="#L1144">1144</a>
<a id="L1145" class="source_line" href="#L1145">1145</a>
<a id="L1146" class="source_line" href="#L1146">1146</a>
<a id="L1147" class="source_line" href="#L1147">1147</a>
<a id="L1148" class="source_line" href="#L1148">1148</a>
<a id="L1149" class="source_line" href="#L1149">1149</a>
<a id="L1150" class="source_line" href="#L1150">1150</a>
<a id="L1151" class="source_line" href="#L1151">1151</a>
<a id="L1152" class="source_line" href="#L1152">1152</a>
<a id="L1153" class="source_line" href="#L1153">1153</a>
<a id="L1154" class="source_line" href="#L1154">1154</a>
<a id="L1155" class="source_line" href="#L1155">1155</a>
<a id="L1156" class="source_line" href="#L1156">1156</a>
<a id="L1157" class="source_line" href="#L1157">1157</a>
<a id="L1158" class="source_line" href="#L1158">1158</a>
<a id="L1159" class="source_line" href="#L1159">1159</a>
<a id="L1160" class="source_line" href="#L1160">1160</a>
<a id="L1161" class="source_line" href="#L1161">1161</a>
<a id="L1162" class="source_line" href="#L1162">1162</a>
<a id="L1163" class="source_line" href="#L1163">1163</a>
<a id="L1164" class="source_line" href="#L1164">1164</a>
<a id="L1165" class="source_line" href="#L1165">1165</a>
<a id="L1166" class="source_line" href="#L1166">1166</a>
<a id="L1167" class="source_line" href="#L1167">1167</a>
<a id="L1168" class="source_line" href="#L1168">1168</a>
<a id="L1169" class="source_line" href="#L1169">1169</a>
<a id="L1170" class="source_line" href="#L1170">1170</a>
<a id="L1171" class="source_line" href="#L1171">1171</a>
<a id="L1172" class="source_line" href="#L1172">1172</a>
<a id="L1173" class="source_line" href="#L1173">1173</a>
<a id="L1174" class="source_line" href="#L1174">1174</a>
<a id="L1175" class="source_line" href="#L1175">1175</a>
<a id="L1176" class="source_line" href="#L1176">1176</a>
<a id="L1177" class="source_line" href="#L1177">1177</a>
<a id="L1178" class="source_line" href="#L1178">1178</a>
<a id="L1179" class="source_line" href="#L1179">1179</a>
<a id="L1180" class="source_line" href="#L1180">1180</a>
<a id="L1181" class="source_line" href="#L1181">1181</a>
<a id="L1182" class="source_line" href="#L1182">1182</a>
<a id="L1183" class="source_line" href="#L1183">1183</a>
<a id="L1184" class="source_line" href="#L1184">1184</a>
<a id="L1185" class="source_line" href="#L1185">1185</a>
<a id="L1186" class="source_line" href="#L1186">1186</a>
<a id="L1187" class="source_line" href="#L1187">1187</a>
<a id="L1188" class="source_line" href="#L1188">1188</a>
<a id="L1189" class="source_line" href="#L1189">1189</a>
<a id="L1190" class="source_line" href="#L1190">1190</a>
<a id="L1191" class="source_line" href="#L1191">1191</a>
<a id="L1192" class="source_line" href="#L1192">1192</a>
<a id="L1193" class="source_line" href="#L1193">1193</a>
<a id="L1194" class="source_line" href="#L1194">1194</a>
<a id="L1195" class="source_line" href="#L1195">1195</a>
<a id="L1196" class="source_line" href="#L1196">1196</a>
<a id="L1197" class="source_line" href="#L1197">1197</a>
<a id="L1198" class="source_line" href="#L1198">1198</a>
<a id="L1199" class="source_line" href="#L1199">1199</a>
<a id="L1200" class="source_line" href="#L1200">1200</a>
<a id="L1201" class="source_line" href="#L1201">1201</a>
<a id="L1202" class="source_line" href="#L1202">1202</a>
<a id="L1203" class="source_line" href="#L1203">1203</a>
<a id="L1204" class="source_line" href="#L1204">1204</a>
<a id="L1205" class="source_line" href="#L1205">1205</a>
<a id="L1206" class="source_line" href="#L1206">1206</a>
<a id="L1207" class="source_line" href="#L1207">1207</a>
<a id="L1208" class="source_line" href="#L1208">1208</a>
<a id="L1209" class="source_line" href="#L1209">1209</a>
<a id="L1210" class="source_line" href="#L1210">1210</a>
<a id="L1211" class="source_line" href="#L1211">1211</a>
<a id="L1212" class="source_line" href="#L1212">1212</a>
<a id="L1213" class="source_line" href="#L1213">1213</a>
<a id="L1214" class="source_line" href="#L1214">1214</a>
<a id="L1215" class="source_line" href="#L1215">1215</a>
<a id="L1216" class="source_line" href="#L1216">1216</a>
<a id="L1217" class="source_line" href="#L1217">1217</a>
<a id="L1218" class="source_line" href="#L1218">1218</a>
<a id="L1219" class="source_line" href="#L1219">1219</a>
<a id="L1220" class="source_line" href="#L1220">1220</a>
<a id="L1221" class="source_line" href="#L1221">1221</a>
<a id="L1222" class="source_line" href="#L1222">1222</a>
<a id="L1223" class="source_line" href="#L1223">1223</a>
<a id="L1224" class="source_line" href="#L1224">1224</a>
<a id="L1225" class="source_line" href="#L1225">1225</a>
<a id="L1226" class="source_line" href="#L1226">1226</a>
<a id="L1227" class="source_line" href="#L1227">1227</a>
<a id="L1228" class="source_line" href="#L1228">1228</a>
<a id="L1229" class="source_line" href="#L1229">1229</a>
<a id="L1230" class="source_line" href="#L1230">1230</a>
<a id="L1231" class="source_line" href="#L1231">1231</a>
<a id="L1232" class="source_line" href="#L1232">1232</a>
<a id="L1233" class="source_line" href="#L1233">1233</a>
<a id="L1234" class="source_line" href="#L1234">1234</a>
<a id="L1235" class="source_line" href="#L1235">1235</a>
<a id="L1236" class="source_line" href="#L1236">1236</a>
<a id="L1237" class="source_line" href="#L1237">1237</a>
<a id="L1238" class="source_line" href="#L1238">1238</a>
<a id="L1239" class="source_line" href="#L1239">1239</a>
<a id="L1240" class="source_line" href="#L1240">1240</a>
<a id="L1241" class="source_line" href="#L1241">1241</a>
<a id="L1242" class="source_line" href="#L1242">1242</a>
<a id="L1243" class="source_line" href="#L1243">1243</a>
<a id="L1244" class="source_line" href="#L1244">1244</a>
<a id="L1245" class="source_line" href="#L1245">1245</a>
<a id="L1246" class="source_line" href="#L1246">1246</a>
<a id="L1247" class="source_line" href="#L1247">1247</a>
<a id="L1248" class="source_line" href="#L1248">1248</a>
<a id="L1249" class="source_line" href="#L1249">1249</a>
<a id="L1250" class="source_line" href="#L1250">1250</a>
<a id="L1251" class="source_line" href="#L1251">1251</a>
<a id="L1252" class="source_line" href="#L1252">1252</a>
<a id="L1253" class="source_line" href="#L1253">1253</a>
<a id="L1254" class="source_line" href="#L1254">1254</a>
<a id="L1255" class="source_line" href="#L1255">1255</a>
<a id="L1256" class="source_line" href="#L1256">1256</a>
<a id="L1257" class="source_line" href="#L1257">1257</a>
<a id="L1258" class="source_line" href="#L1258">1258</a>
<a id="L1259" class="source_line" href="#L1259">1259</a>
<a id="L1260" class="source_line" href="#L1260">1260</a>
<a id="L1261" class="source_line" href="#L1261">1261</a>
<a id="L1262" class="source_line" href="#L1262">1262</a>
<a id="L1263" class="source_line" href="#L1263">1263</a>
<a id="L1264" class="source_line" href="#L1264">1264</a>
<a id="L1265" class="source_line" href="#L1265">1265</a>
<a id="L1266" class="source_line" href="#L1266">1266</a>
<a id="L1267" class="source_line" href="#L1267">1267</a>
<a id="L1268" class="source_line" href="#L1268">1268</a>
<a id="L1269" class="source_line" href="#L1269">1269</a>
<a id="L1270" class="source_line" href="#L1270">1270</a>
<a id="L1271" class="source_line" href="#L1271">1271</a>
<a id="L1272" class="source_line" href="#L1272">1272</a>
<a id="L1273" class="source_line" href="#L1273">1273</a>
<a id="L1274" class="source_line" href="#L1274">1274</a>
<a id="L1275" class="source_line" href="#L1275">1275</a>
<a id="L1276" class="source_line" href="#L1276">1276</a>
<a id="L1277" class="source_line" href="#L1277">1277</a>
<a id="L1278" class="source_line" href="#L1278">1278</a>
<a id="L1279" class="source_line" href="#L1279">1279</a>
<a id="L1280" class="source_line" href="#L1280">1280</a>
<a id="L1281" class="source_line" href="#L1281">1281</a>
<a id="L1282" class="source_line" href="#L1282">1282</a>
<a id="L1283" class="source_line" href="#L1283">1283</a>
<a id="L1284" class="source_line" href="#L1284">1284</a>
<a id="L1285" class="source_line" href="#L1285">1285</a>
<a id="L1286" class="source_line" href="#L1286">1286</a>
<a id="L1287" class="source_line" href="#L1287">1287</a>
<a id="L1288" class="source_line" href="#L1288">1288</a>
<a id="L1289" class="source_line" href="#L1289">1289</a>
<a id="L1290" class="source_line" href="#L1290">1290</a>
<a id="L1291" class="source_line" href="#L1291">1291</a>
<a id="L1292" class="source_line" href="#L1292">1292</a>
<a id="L1293" class="source_line" href="#L1293">1293</a>
<a id="L1294" class="source_line" href="#L1294">1294</a>
<a id="L1295" class="source_line" href="#L1295">1295</a>
<a id="L1296" class="source_line" href="#L1296">1296</a>
<a id="L1297" class="source_line" href="#L1297">1297</a>
<a id="L1298" class="source_line" href="#L1298">1298</a>
<a id="L1299" class="source_line" href="#L1299">1299</a>
<a id="L1300" class="source_line" href="#L1300">1300</a>
<a id="L1301" class="source_line" href="#L1301">1301</a>
<a id="L1302" class="source_line" href="#L1302">1302</a>
<a id="L1303" class="source_line" href="#L1303">1303</a>
<a id="L1304" class="source_line" href="#L1304">1304</a>
<a id="L1305" class="source_line" href="#L1305">1305</a>
<a id="L1306" class="source_line" href="#L1306">1306</a>
<a id="L1307" class="source_line" href="#L1307">1307</a>
<a id="L1308" class="source_line" href="#L1308">1308</a>
<a id="L1309" class="source_line" href="#L1309">1309</a>
<a id="L1310" class="source_line" href="#L1310">1310</a>
<a id="L1311" class="source_line" href="#L1311">1311</a>
<a id="L1312" class="source_line" href="#L1312">1312</a>
<a id="L1313" class="source_line" href="#L1313">1313</a>
<a id="L1314" class="source_line" href="#L1314">1314</a>
<a id="L1315" class="source_line" href="#L1315">1315</a>
<a id="L1316" class="source_line" href="#L1316">1316</a>
<a id="L1317" class="source_line" href="#L1317">1317</a>
<a id="L1318" class="source_line" href="#L1318">1318</a>
<a id="L1319" class="source_line" href="#L1319">1319</a>
<a id="L1320" class="source_line" href="#L1320">1320</a>
<a id="L1321" class="source_line" href="#L1321">1321</a>
<a id="L1322" class="source_line" href="#L1322">1322</a>
<a id="L1323" class="source_line" href="#L1323">1323</a>
<a id="L1324" class="source_line" href="#L1324">1324</a>
<a id="L1325" class="source_line" href="#L1325">1325</a>
<a id="L1326" class="source_line" href="#L1326">1326</a>
<a id="L1327" class="source_line" href="#L1327">1327</a>
<a id="L1328" class="source_line" href="#L1328">1328</a>
<a id="L1329" class="source_line" href="#L1329">1329</a>
<a id="L1330" class="source_line" href="#L1330">1330</a>
<a id="L1331" class="source_line" href="#L1331">1331</a>
<a id="L1332" class="source_line" href="#L1332">1332</a>
<a id="L1333" class="source_line" href="#L1333">1333</a>
<a id="L1334" class="source_line" href="#L1334">1334</a>
<a id="L1335" class="source_line" href="#L1335">1335</a>
<a id="L1336" class="source_line" href="#L1336">1336</a>
<a id="L1337" class="source_line" href="#L1337">1337</a>
<a id="L1338" class="source_line" href="#L1338">1338</a>
<a id="L1339" class="source_line" href="#L1339">1339</a>
<a id="L1340" class="source_line" href="#L1340">1340</a>
<a id="L1341" class="source_line" href="#L1341">1341</a>
<a id="L1342" class="source_line" href="#L1342">1342</a>
<a id="L1343" class="source_line" href="#L1343">1343</a>
<a id="L1344" class="source_line" href="#L1344">1344</a>
<a id="L1345" class="source_line" href="#L1345">1345</a>
<a id="L1346" class="source_line" href="#L1346">1346</a>
<a id="L1347" class="source_line" href="#L1347">1347</a>
<a id="L1348" class="source_line" href="#L1348">1348</a>
<a id="L1349" class="source_line" href="#L1349">1349</a>
<a id="L1350" class="source_line" href="#L1350">1350</a>
<a id="L1351" class="source_line" href="#L1351">1351</a>
<a id="L1352" class="source_line" href="#L1352">1352</a>
<a id="L1353" class="source_line" href="#L1353">1353</a>
<a id="L1354" class="source_line" href="#L1354">1354</a>
<a id="L1355" class="source_line" href="#L1355">1355</a>
<a id="L1356" class="source_line" href="#L1356">1356</a>
<a id="L1357" class="source_line" href="#L1357">1357</a>
<a id="L1358" class="source_line" href="#L1358">1358</a>
<a id="L1359" class="source_line" href="#L1359">1359</a>
<a id="L1360" class="source_line" href="#L1360">1360</a>
<a id="L1361" class="source_line" href="#L1361">1361</a>
<a id="L1362" class="source_line" href="#L1362">1362</a>
<a id="L1363" class="source_line" href="#L1363">1363</a>
<a id="L1364" class="source_line" href="#L1364">1364</a>
<a id="L1365" class="source_line" href="#L1365">1365</a>
<a id="L1366" class="source_line" href="#L1366">1366</a>
<a id="L1367" class="source_line" href="#L1367">1367</a>
<a id="L1368" class="source_line" href="#L1368">1368</a>
<a id="L1369" class="source_line" href="#L1369">1369</a>
<a id="L1370" class="source_line" href="#L1370">1370</a>
<a id="L1371" class="source_line" href="#L1371">1371</a>
<a id="L1372" class="source_line" href="#L1372">1372</a>
<a id="L1373" class="source_line" href="#L1373">1373</a>
<a id="L1374" class="source_line" href="#L1374">1374</a>
<a id="L1375" class="source_line" href="#L1375">1375</a>
<a id="L1376" class="source_line" href="#L1376">1376</a>
<a id="L1377" class="source_line" href="#L1377">1377</a>
<a id="L1378" class="source_line" href="#L1378">1378</a>
<a id="L1379" class="source_line" href="#L1379">1379</a>
<a id="L1380" class="source_line" href="#L1380">1380</a>
<a id="L1381" class="source_line" href="#L1381">1381</a>
<a id="L1382" class="source_line" href="#L1382">1382</a>
<a id="L1383" class="source_line" href="#L1383">1383</a>
<a id="L1384" class="source_line" href="#L1384">1384</a>
<a id="L1385" class="source_line" href="#L1385">1385</a>
<a id="L1386" class="source_line" href="#L1386">1386</a>
<a id="L1387" class="source_line" href="#L1387">1387</a>
<a id="L1388" class="source_line" href="#L1388">1388</a>
<a id="L1389" class="source_line" href="#L1389">1389</a>
<a id="L1390" class="source_line" href="#L1390">1390</a>
<a id="L1391" class="source_line" href="#L1391">1391</a>
<a id="L1392" class="source_line" href="#L1392">1392</a>
<a id="L1393" class="source_line" href="#L1393">1393</a>
<a id="L1394" class="source_line" href="#L1394">1394</a>
<a id="L1395" class="source_line" href="#L1395">1395</a>
<a id="L1396" class="source_line" href="#L1396">1396</a>
<a id="L1397" class="source_line" href="#L1397">1397</a>
<a id="L1398" class="source_line" href="#L1398">1398</a>
<a id="L1399" class="source_line" href="#L1399">1399</a>
<a id="L1400" class="source_line" href="#L1400">1400</a>
<a id="L1401" class="source_line" href="#L1401">1401</a>
<a id="L1402" class="source_line" href="#L1402">1402</a>
<a id="L1403" class="source_line" href="#L1403">1403</a>
<a id="L1404" class="source_line" href="#L1404">1404</a>
<a id="L1405" class="source_line" href="#L1405">1405</a>
<a id="L1406" class="source_line" href="#L1406">1406</a>
<a id="L1407" class="source_line" href="#L1407">1407</a>
<a id="L1408" class="source_line" href="#L1408">1408</a>
<a id="L1409" class="source_line" href="#L1409">1409</a>
<a id="L1410" class="source_line" href="#L1410">1410</a>
<a id="L1411" class="source_line" href="#L1411">1411</a>
<a id="L1412" class="source_line" href="#L1412">1412</a>
<a id="L1413" class="source_line" href="#L1413">1413</a>
<a id="L1414" class="source_line" href="#L1414">1414</a>
<a id="L1415" class="source_line" href="#L1415">1415</a>
<a id="L1416" class="source_line" href="#L1416">1416</a>
<a id="L1417" class="source_line" href="#L1417">1417</a>
<a id="L1418" class="source_line" href="#L1418">1418</a>
<a id="L1419" class="source_line" href="#L1419">1419</a>
<a id="L1420" class="source_line" href="#L1420">1420</a>
<a id="L1421" class="source_line" href="#L1421">1421</a>
<a id="L1422" class="source_line" href="#L1422">1422</a>
<a id="L1423" class="source_line" href="#L1423">1423</a>
<a id="L1424" class="source_line" href="#L1424">1424</a>
<a id="L1425" class="source_line" href="#L1425">1425</a>
<a id="L1426" class="source_line" href="#L1426">1426</a>
<a id="L1427" class="source_line" href="#L1427">1427</a>
<a id="L1428" class="source_line" href="#L1428">1428</a>
<a id="L1429" class="source_line" href="#L1429">1429</a>
<a id="L1430" class="source_line" href="#L1430">1430</a>
<a id="L1431" class="source_line" href="#L1431">1431</a>
<a id="L1432" class="source_line" href="#L1432">1432</a>
<a id="L1433" class="source_line" href="#L1433">1433</a>
<a id="L1434" class="source_line" href="#L1434">1434</a>
<a id="L1435" class="source_line" href="#L1435">1435</a>
<a id="L1436" class="source_line" href="#L1436">1436</a>
<a id="L1437" class="source_line" href="#L1437">1437</a>
<a id="L1438" class="source_line" href="#L1438">1438</a>
<a id="L1439" class="source_line" href="#L1439">1439</a>
<a id="L1440" class="source_line" href="#L1440">1440</a>
<a id="L1441" class="source_line" href="#L1441">1441</a>
<a id="L1442" class="source_line" href="#L1442">1442</a>
<a id="L1443" class="source_line" href="#L1443">1443</a>
<a id="L1444" class="source_line" href="#L1444">1444</a>
<a id="L1445" class="source_line" href="#L1445">1445</a>
<a id="L1446" class="source_line" href="#L1446">1446</a>
<a id="L1447" class="source_line" href="#L1447">1447</a>
<a id="L1448" class="source_line" href="#L1448">1448</a>
<a id="L1449" class="source_line" href="#L1449">1449</a>
<a id="L1450" class="source_line" href="#L1450">1450</a>
<a id="L1451" class="source_line" href="#L1451">1451</a>
<a id="L1452" class="source_line" href="#L1452">1452</a>
<a id="L1453" class="source_line" href="#L1453">1453</a>
<a id="L1454" class="source_line" href="#L1454">1454</a>
<a id="L1455" class="source_line" href="#L1455">1455</a>
<a id="L1456" class="source_line" href="#L1456">1456</a>
<a id="L1457" class="source_line" href="#L1457">1457</a>
<a id="L1458" class="source_line" href="#L1458">1458</a>
<a id="L1459" class="source_line" href="#L1459">1459</a>
<a id="L1460" class="source_line" href="#L1460">1460</a>
<a id="L1461" class="source_line" href="#L1461">1461</a>
<a id="L1462" class="source_line" href="#L1462">1462</a>
<a id="L1463" class="source_line" href="#L1463">1463</a>
<a id="L1464" class="source_line" href="#L1464">1464</a>
<a id="L1465" class="source_line" href="#L1465">1465</a>
<a id="L1466" class="source_line" href="#L1466">1466</a>
<a id="L1467" class="source_line" href="#L1467">1467</a>
<a id="L1468" class="source_line" href="#L1468">1468</a>
<a id="L1469" class="source_line" href="#L1469">1469</a>
<a id="L1470" class="source_line" href="#L1470">1470</a>
<a id="L1471" class="source_line" href="#L1471">1471</a>
<a id="L1472" class="source_line" href="#L1472">1472</a>
<a id="L1473" class="source_line" href="#L1473">1473</a>
<a id="L1474" class="source_line" href="#L1474">1474</a>
<a id="L1475" class="source_line" href="#L1475">1475</a>
<a id="L1476" class="source_line" href="#L1476">1476</a>
<a id="L1477" class="source_line" href="#L1477">1477</a>
<a id="L1478" class="source_line" href="#L1478">1478</a>
<a id="L1479" class="source_line" href="#L1479">1479</a>
<a id="L1480" class="source_line" href="#L1480">1480</a>
<a id="L1481" class="source_line" href="#L1481">1481</a>
<a id="L1482" class="source_line" href="#L1482">1482</a>
<a id="L1483" class="source_line" href="#L1483">1483</a>
<a id="L1484" class="source_line" href="#L1484">1484</a>
<a id="L1485" class="source_line" href="#L1485">1485</a>
<a id="L1486" class="source_line" href="#L1486">1486</a>
<a id="L1487" class="source_line" href="#L1487">1487</a>
<a id="L1488" class="source_line" href="#L1488">1488</a>
<a id="L1489" class="source_line" href="#L1489">1489</a>
<a id="L1490" class="source_line" href="#L1490">1490</a>
<a id="L1491" class="source_line" href="#L1491">1491</a>
<a id="L1492" class="source_line" href="#L1492">1492</a>
<a id="L1493" class="source_line" href="#L1493">1493</a>
<a id="L1494" class="source_line" href="#L1494">1494</a>
<a id="L1495" class="source_line" href="#L1495">1495</a>
<a id="L1496" class="source_line" href="#L1496">1496</a>
<a id="L1497" class="source_line" href="#L1497">1497</a>
<a id="L1498" class="source_line" href="#L1498">1498</a>
<a id="L1499" class="source_line" href="#L1499">1499</a>
<a id="L1500" class="source_line" href="#L1500">1500</a>
<a id="L1501" class="source_line" href="#L1501">1501</a>
<a id="L1502" class="source_line" href="#L1502">1502</a>
<a id="L1503" class="source_line" href="#L1503">1503</a>
<a id="L1504" class="source_line" href="#L1504">1504</a>
<a id="L1505" class="source_line" href="#L1505">1505</a>
<a id="L1506" class="source_line" href="#L1506">1506</a>
<a id="L1507" class="source_line" href="#L1507">1507</a>
<a id="L1508" class="source_line" href="#L1508">1508</a>
<a id="L1509" class="source_line" href="#L1509">1509</a>
<a id="L1510" class="source_line" href="#L1510">1510</a>
<a id="L1511" class="source_line" href="#L1511">1511</a>
<a id="L1512" class="source_line" href="#L1512">1512</a>
<a id="L1513" class="source_line" href="#L1513">1513</a>
<a id="L1514" class="source_line" href="#L1514">1514</a>
<a id="L1515" class="source_line" href="#L1515">1515</a>
<a id="L1516" class="source_line" href="#L1516">1516</a>
<a id="L1517" class="source_line" href="#L1517">1517</a>
<a id="L1518" class="source_line" href="#L1518">1518</a>
<a id="L1519" class="source_line" href="#L1519">1519</a>
<a id="L1520" class="source_line" href="#L1520">1520</a>
<a id="L1521" class="source_line" href="#L1521">1521</a>
<a id="L1522" class="source_line" href="#L1522">1522</a>
<a id="L1523" class="source_line" href="#L1523">1523</a>
<a id="L1524" class="source_line" href="#L1524">1524</a>
<a id="L1525" class="source_line" href="#L1525">1525</a>
<a id="L1526" class="source_line" href="#L1526">1526</a>
<a id="L1527" class="source_line" href="#L1527">1527</a>
<a id="L1528" class="source_line" href="#L1528">1528</a>
<a id="L1529" class="source_line" href="#L1529">1529</a>
<a id="L1530" class="source_line" href="#L1530">1530</a>
<a id="L1531" class="source_line" href="#L1531">1531</a>
<a id="L1532" class="source_line" href="#L1532">1532</a>
<a id="L1533" class="source_line" href="#L1533">1533</a>
<a id="L1534" class="source_line" href="#L1534">1534</a>
<a id="L1535" class="source_line" href="#L1535">1535</a>
<a id="L1536" class="source_line" href="#L1536">1536</a>
<a id="L1537" class="source_line" href="#L1537">1537</a>
<a id="L1538" class="source_line" href="#L1538">1538</a>
<a id="L1539" class="source_line" href="#L1539">1539</a>
<a id="L1540" class="source_line" href="#L1540">1540</a>
<a id="L1541" class="source_line" href="#L1541">1541</a>
<a id="L1542" class="source_line" href="#L1542">1542</a>
<a id="L1543" class="source_line" href="#L1543">1543</a>
<a id="L1544" class="source_line" href="#L1544">1544</a>
<a id="L1545" class="source_line" href="#L1545">1545</a>
<a id="L1546" class="source_line" href="#L1546">1546</a>
<a id="L1547" class="source_line" href="#L1547">1547</a>
<a id="L1548" class="source_line" href="#L1548">1548</a>
<a id="L1549" class="source_line" href="#L1549">1549</a>
<a id="L1550" class="source_line" href="#L1550">1550</a>
<a id="L1551" class="source_line" href="#L1551">1551</a>
<a id="L1552" class="source_line" href="#L1552">1552</a>
<a id="L1553" class="source_line" href="#L1553">1553</a>
<a id="L1554" class="source_line" href="#L1554">1554</a>
<a id="L1555" class="source_line" href="#L1555">1555</a>
<a id="L1556" class="source_line" href="#L1556">1556</a>
<a id="L1557" class="source_line" href="#L1557">1557</a>
<a id="L1558" class="source_line" href="#L1558">1558</a>
<a id="L1559" class="source_line" href="#L1559">1559</a>
<a id="L1560" class="source_line" href="#L1560">1560</a>
<a id="L1561" class="source_line" href="#L1561">1561</a>
<a id="L1562" class="source_line" href="#L1562">1562</a>
<a id="L1563" class="source_line" href="#L1563">1563</a>
<a id="L1564" class="source_line" href="#L1564">1564</a>
<a id="L1565" class="source_line" href="#L1565">1565</a>
<a id="L1566" class="source_line" href="#L1566">1566</a>
<a id="L1567" class="source_line" href="#L1567">1567</a>
<a id="L1568" class="source_line" href="#L1568">1568</a>
<a id="L1569" class="source_line" href="#L1569">1569</a>
<a id="L1570" class="source_line" href="#L1570">1570</a>
<a id="L1571" class="source_line" href="#L1571">1571</a>
<a id="L1572" class="source_line" href="#L1572">1572</a>
<a id="L1573" class="source_line" href="#L1573">1573</a>
<a id="L1574" class="source_line" href="#L1574">1574</a>
<a id="L1575" class="source_line" href="#L1575">1575</a>
<a id="L1576" class="source_line" href="#L1576">1576</a>
<a id="L1577" class="source_line" href="#L1577">1577</a>
<a id="L1578" class="source_line" href="#L1578">1578</a>
<a id="L1579" class="source_line" href="#L1579">1579</a>
<a id="L1580" class="source_line" href="#L1580">1580</a>
<a id="L1581" class="source_line" href="#L1581">1581</a>
<a id="L1582" class="source_line" href="#L1582">1582</a>
<a id="L1583" class="source_line" href="#L1583">1583</a>
<a id="L1584" class="source_line" href="#L1584">1584</a>
<a id="L1585" class="source_line" href="#L1585">1585</a>
<a id="L1586" class="source_line" href="#L1586">1586</a>
<a id="L1587" class="source_line" href="#L1587">1587</a>
<a id="L1588" class="source_line" href="#L1588">1588</a>
<a id="L1589" class="source_line" href="#L1589">1589</a>
<a id="L1590" class="source_line" href="#L1590">1590</a>
<a id="L1591" class="source_line" href="#L1591">1591</a>
<a id="L1592" class="source_line" href="#L1592">1592</a>
<a id="L1593" class="source_line" href="#L1593">1593</a>
<a id="L1594" class="source_line" href="#L1594">1594</a>
<a id="L1595" class="source_line" href="#L1595">1595</a>
<a id="L1596" class="source_line" href="#L1596">1596</a>
<a id="L1597" class="source_line" href="#L1597">1597</a>
<a id="L1598" class="source_line" href="#L1598">1598</a>
<a id="L1599" class="source_line" href="#L1599">1599</a>
<a id="L1600" class="source_line" href="#L1600">1600</a>
<a id="L1601" class="source_line" href="#L1601">1601</a>
<a id="L1602" class="source_line" href="#L1602">1602</a>
<a id="L1603" class="source_line" href="#L1603">1603</a>
<a id="L1604" class="source_line" href="#L1604">1604</a>
<a id="L1605" class="source_line" href="#L1605">1605</a>
<a id="L1606" class="source_line" href="#L1606">1606</a>
<a id="L1607" class="source_line" href="#L1607">1607</a>
<a id="L1608" class="source_line" href="#L1608">1608</a>
<a id="L1609" class="source_line" href="#L1609">1609</a>
<a id="L1610" class="source_line" href="#L1610">1610</a>
<a id="L1611" class="source_line" href="#L1611">1611</a>
<a id="L1612" class="source_line" href="#L1612">1612</a>
<a id="L1613" class="source_line" href="#L1613">1613</a>
<a id="L1614" class="source_line" href="#L1614">1614</a>
<a id="L1615" class="source_line" href="#L1615">1615</a>
<a id="L1616" class="source_line" href="#L1616">1616</a>
<a id="L1617" class="source_line" href="#L1617">1617</a>
<a id="L1618" class="source_line" href="#L1618">1618</a>
<a id="L1619" class="source_line" href="#L1619">1619</a>
<a id="L1620" class="source_line" href="#L1620">1620</a>
<a id="L1621" class="source_line" href="#L1621">1621</a>
<a id="L1622" class="source_line" href="#L1622">1622</a>
<a id="L1623" class="source_line" href="#L1623">1623</a>
<a id="L1624" class="source_line" href="#L1624">1624</a>
<a id="L1625" class="source_line" href="#L1625">1625</a>
<a id="L1626" class="source_line" href="#L1626">1626</a>
<a id="L1627" class="source_line" href="#L1627">1627</a>
<a id="L1628" class="source_line" href="#L1628">1628</a>
<a id="L1629" class="source_line" href="#L1629">1629</a>
<a id="L1630" class="source_line" href="#L1630">1630</a>
<a id="L1631" class="source_line" href="#L1631">1631</a>
<a id="L1632" class="source_line" href="#L1632">1632</a>
<a id="L1633" class="source_line" href="#L1633">1633</a>
<a id="L1634" class="source_line" href="#L1634">1634</a>
<a id="L1635" class="source_line" href="#L1635">1635</a>
<a id="L1636" class="source_line" href="#L1636">1636</a>
<a id="L1637" class="source_line" href="#L1637">1637</a>
<a id="L1638" class="source_line" href="#L1638">1638</a>
<a id="L1639" class="source_line" href="#L1639">1639</a>
<a id="L1640" class="source_line" href="#L1640">1640</a>
<a id="L1641" class="source_line" href="#L1641">1641</a>
<a id="L1642" class="source_line" href="#L1642">1642</a>
<a id="L1643" class="source_line" href="#L1643">1643</a>
<a id="L1644" class="source_line" href="#L1644">1644</a>
<a id="L1645" class="source_line" href="#L1645">1645</a>
<a id="L1646" class="source_line" href="#L1646">1646</a>
<a id="L1647" class="source_line" href="#L1647">1647</a>
<a id="L1648" class="source_line" href="#L1648">1648</a>
<a id="L1649" class="source_line" href="#L1649">1649</a>
<a id="L1650" class="source_line" href="#L1650">1650</a>
<a id="L1651" class="source_line" href="#L1651">1651</a>
<a id="L1652" class="source_line" href="#L1652">1652</a>
<a id="L1653" class="source_line" href="#L1653">1653</a>
<a id="L1654" class="source_line" href="#L1654">1654</a>
<a id="L1655" class="source_line" href="#L1655">1655</a>
<a id="L1656" class="source_line" href="#L1656">1656</a>
<a id="L1657" class="source_line" href="#L1657">1657</a>
<a id="L1658" class="source_line" href="#L1658">1658</a>
<a id="L1659" class="source_line" href="#L1659">1659</a>
<a id="L1660" class="source_line" href="#L1660">1660</a>
<a id="L1661" class="source_line" href="#L1661">1661</a>
<a id="L1662" class="source_line" href="#L1662">1662</a>
<a id="L1663" class="source_line" href="#L1663">1663</a>
<a id="L1664" class="source_line" href="#L1664">1664</a>
<a id="L1665" class="source_line" href="#L1665">1665</a>
<a id="L1666" class="source_line" href="#L1666">1666</a>
<a id="L1667" class="source_line" href="#L1667">1667</a>
<a id="L1668" class="source_line" href="#L1668">1668</a>
<a id="L1669" class="source_line" href="#L1669">1669</a>
<a id="L1670" class="source_line" href="#L1670">1670</a>
<a id="L1671" class="source_line" href="#L1671">1671</a>
<a id="L1672" class="source_line" href="#L1672">1672</a>
<a id="L1673" class="source_line" href="#L1673">1673</a>
<a id="L1674" class="source_line" href="#L1674">1674</a>
<a id="L1675" class="source_line" href="#L1675">1675</a>
<a id="L1676" class="source_line" href="#L1676">1676</a>
<a id="L1677" class="source_line" href="#L1677">1677</a>
<a id="L1678" class="source_line" href="#L1678">1678</a>
<a id="L1679" class="source_line" href="#L1679">1679</a>
<a id="L1680" class="source_line" href="#L1680">1680</a>
<a id="L1681" class="source_line" href="#L1681">1681</a>
<a id="L1682" class="source_line" href="#L1682">1682</a>
<a id="L1683" class="source_line" href="#L1683">1683</a>
<a id="L1684" class="source_line" href="#L1684">1684</a>
<a id="L1685" class="source_line" href="#L1685">1685</a>
<a id="L1686" class="source_line" href="#L1686">1686</a>
<a id="L1687" class="source_line" href="#L1687">1687</a>
<a id="L1688" class="source_line" href="#L1688">1688</a>
<a id="L1689" class="source_line" href="#L1689">1689</a>
<a id="L1690" class="source_line" href="#L1690">1690</a>
<a id="L1691" class="source_line" href="#L1691">1691</a>
<a id="L1692" class="source_line" href="#L1692">1692</a>
<a id="L1693" class="source_line" href="#L1693">1693</a>
<a id="L1694" class="source_line" href="#L1694">1694</a>
<a id="L1695" class="source_line" href="#L1695">1695</a>
<a id="L1696" class="source_line" href="#L1696">1696</a>
<a id="L1697" class="source_line" href="#L1697">1697</a>
<a id="L1698" class="source_line" href="#L1698">1698</a>
<a id="L1699" class="source_line" href="#L1699">1699</a>
<a id="L1700" class="source_line" href="#L1700">1700</a>
<a id="L1701" class="source_line" href="#L1701">1701</a>
<a id="L1702" class="source_line" href="#L1702">1702</a>
<a id="L1703" class="source_line" href="#L1703">1703</a>
<a id="L1704" class="source_line" href="#L1704">1704</a>
<a id="L1705" class="source_line" href="#L1705">1705</a>
<a id="L1706" class="source_line" href="#L1706">1706</a>
<a id="L1707" class="source_line" href="#L1707">1707</a>
<a id="L1708" class="source_line" href="#L1708">1708</a>
<a id="L1709" class="source_line" href="#L1709">1709</a>
<a id="L1710" class="source_line" href="#L1710">1710</a>
<a id="L1711" class="source_line" href="#L1711">1711</a>
<a id="L1712" class="source_line" href="#L1712">1712</a>
<a id="L1713" class="source_line" href="#L1713">1713</a>
<a id="L1714" class="source_line" href="#L1714">1714</a>
<a id="L1715" class="source_line" href="#L1715">1715</a>
<a id="L1716" class="source_line" href="#L1716">1716</a>
<a id="L1717" class="source_line" href="#L1717">1717</a>
<a id="L1718" class="source_line" href="#L1718">1718</a>
<a id="L1719" class="source_line" href="#L1719">1719</a>
<a id="L1720" class="source_line" href="#L1720">1720</a>
<a id="L1721" class="source_line" href="#L1721">1721</a>
<a id="L1722" class="source_line" href="#L1722">1722</a>
<a id="L1723" class="source_line" href="#L1723">1723</a>
<a id="L1724" class="source_line" href="#L1724">1724</a>
<a id="L1725" class="source_line" href="#L1725">1725</a>
<a id="L1726" class="source_line" href="#L1726">1726</a>
<a id="L1727" class="source_line" href="#L1727">1727</a>
<a id="L1728" class="source_line" href="#L1728">1728</a>
<a id="L1729" class="source_line" href="#L1729">1729</a>
<a id="L1730" class="source_line" href="#L1730">1730</a>
<a id="L1731" class="source_line" href="#L1731">1731</a>
<a id="L1732" class="source_line" href="#L1732">1732</a>
<a id="L1733" class="source_line" href="#L1733">1733</a>
<a id="L1734" class="source_line" href="#L1734">1734</a>
<a id="L1735" class="source_line" href="#L1735">1735</a>
<a id="L1736" class="source_line" href="#L1736">1736</a>
<a id="L1737" class="source_line" href="#L1737">1737</a>
<a id="L1738" class="source_line" href="#L1738">1738</a>
<a id="L1739" class="source_line" href="#L1739">1739</a>
<a id="L1740" class="source_line" href="#L1740">1740</a>
<a id="L1741" class="source_line" href="#L1741">1741</a>
<a id="L1742" class="source_line" href="#L1742">1742</a>
<a id="L1743" class="source_line" href="#L1743">1743</a>
<a id="L1744" class="source_line" href="#L1744">1744</a>
<a id="L1745" class="source_line" href="#L1745">1745</a>
<a id="L1746" class="source_line" href="#L1746">1746</a>
<a id="L1747" class="source_line" href="#L1747">1747</a>
<a id="L1748" class="source_line" href="#L1748">1748</a>
<a id="L1749" class="source_line" href="#L1749">1749</a>
<a id="L1750" class="source_line" href="#L1750">1750</a>
<a id="L1751" class="source_line" href="#L1751">1751</a>
<a id="L1752" class="source_line" href="#L1752">1752</a>
<a id="L1753" class="source_line" href="#L1753">1753</a>
<a id="L1754" class="source_line" href="#L1754">1754</a>
<a id="L1755" class="source_line" href="#L1755">1755</a>
<a id="L1756" class="source_line" href="#L1756">1756</a>
<a id="L1757" class="source_line" href="#L1757">1757</a>
<a id="L1758" class="source_line" href="#L1758">1758</a>
<a id="L1759" class="source_line" href="#L1759">1759</a>
<a id="L1760" class="source_line" href="#L1760">1760</a>
<a id="L1761" class="source_line" href="#L1761">1761</a>
<a id="L1762" class="source_line" href="#L1762">1762</a>
<a id="L1763" class="source_line" href="#L1763">1763</a>
<a id="L1764" class="source_line" href="#L1764">1764</a>
<a id="L1765" class="source_line" href="#L1765">1765</a>
<a id="L1766" class="source_line" href="#L1766">1766</a>
<a id="L1767" class="source_line" href="#L1767">1767</a>
<a id="L1768" class="source_line" href="#L1768">1768</a>
<a id="L1769" class="source_line" href="#L1769">1769</a>
<a id="L1770" class="source_line" href="#L1770">1770</a>
<a id="L1771" class="source_line" href="#L1771">1771</a>
<a id="L1772" class="source_line" href="#L1772">1772</a>
<a id="L1773" class="source_line" href="#L1773">1773</a>
<a id="L1774" class="source_line" href="#L1774">1774</a>
<a id="L1775" class="source_line" href="#L1775">1775</a>
<a id="L1776" class="source_line" href="#L1776">1776</a>
<a id="L1777" class="source_line" href="#L1777">1777</a>
<a id="L1778" class="source_line" href="#L1778">1778</a>
<a id="L1779" class="source_line" href="#L1779">1779</a>
<a id="L1780" class="source_line" href="#L1780">1780</a>
<a id="L1781" class="source_line" href="#L1781">1781</a>
<a id="L1782" class="source_line" href="#L1782">1782</a>
<a id="L1783" class="source_line" href="#L1783">1783</a>
<a id="L1784" class="source_line" href="#L1784">1784</a>
<a id="L1785" class="source_line" href="#L1785">1785</a>
<a id="L1786" class="source_line" href="#L1786">1786</a>
<a id="L1787" class="source_line" href="#L1787">1787</a>
<a id="L1788" class="source_line" href="#L1788">1788</a>
<a id="L1789" class="source_line" href="#L1789">1789</a>
<a id="L1790" class="source_line" href="#L1790">1790</a>
<a id="L1791" class="source_line" href="#L1791">1791</a>
<a id="L1792" class="source_line" href="#L1792">1792</a>
<a id="L1793" class="source_line" href="#L1793">1793</a>
<a id="L1794" class="source_line" href="#L1794">1794</a>
<a id="L1795" class="source_line" href="#L1795">1795</a>
<a id="L1796" class="source_line" href="#L1796">1796</a>
<a id="L1797" class="source_line" href="#L1797">1797</a>
<a id="L1798" class="source_line" href="#L1798">1798</a>
<a id="L1799" class="source_line" href="#L1799">1799</a>
<a id="L1800" class="source_line" href="#L1800">1800</a>
<a id="L1801" class="source_line" href="#L1801">1801</a>
<a id="L1802" class="source_line" href="#L1802">1802</a>
<a id="L1803" class="source_line" href="#L1803">1803</a>
<a id="L1804" class="source_line" href="#L1804">1804</a>
<a id="L1805" class="source_line" href="#L1805">1805</a>
<a id="L1806" class="source_line" href="#L1806">1806</a>
<a id="L1807" class="source_line" href="#L1807">1807</a>
<a id="L1808" class="source_line" href="#L1808">1808</a>
<a id="L1809" class="source_line" href="#L1809">1809</a>
<a id="L1810" class="source_line" href="#L1810">1810</a>
<a id="L1811" class="source_line" href="#L1811">1811</a>
<a id="L1812" class="source_line" href="#L1812">1812</a>
<a id="L1813" class="source_line" href="#L1813">1813</a>
<a id="L1814" class="source_line" href="#L1814">1814</a>
<a id="L1815" class="source_line" href="#L1815">1815</a>
<a id="L1816" class="source_line" href="#L1816">1816</a>
<a id="L1817" class="source_line" href="#L1817">1817</a>
<a id="L1818" class="source_line" href="#L1818">1818</a>
<a id="L1819" class="source_line" href="#L1819">1819</a>
<a id="L1820" class="source_line" href="#L1820">1820</a>
<a id="L1821" class="source_line" href="#L1821">1821</a>
<a id="L1822" class="source_line" href="#L1822">1822</a>
<a id="L1823" class="source_line" href="#L1823">1823</a>
<a id="L1824" class="source_line" href="#L1824">1824</a>
<a id="L1825" class="source_line" href="#L1825">1825</a>
<a id="L1826" class="source_line" href="#L1826">1826</a>
<a id="L1827" class="source_line" href="#L1827">1827</a>
<a id="L1828" class="source_line" href="#L1828">1828</a>
<a id="L1829" class="source_line" href="#L1829">1829</a>
<a id="L1830" class="source_line" href="#L1830">1830</a>
<a id="L1831" class="source_line" href="#L1831">1831</a>
<a id="L1832" class="source_line" href="#L1832">1832</a>
<a id="L1833" class="source_line" href="#L1833">1833</a>
<a id="L1834" class="source_line" href="#L1834">1834</a>
<a id="L1835" class="source_line" href="#L1835">1835</a>
<a id="L1836" class="source_line" href="#L1836">1836</a>
<a id="L1837" class="source_line" href="#L1837">1837</a>
<a id="L1838" class="source_line" href="#L1838">1838</a>
<a id="L1839" class="source_line" href="#L1839">1839</a>
<a id="L1840" class="source_line" href="#L1840">1840</a>
<a id="L1841" class="source_line" href="#L1841">1841</a>
<a id="L1842" class="source_line" href="#L1842">1842</a>
<a id="L1843" class="source_line" href="#L1843">1843</a>
<a id="L1844" class="source_line" href="#L1844">1844</a>
<a id="L1845" class="source_line" href="#L1845">1845</a>
<a id="L1846" class="source_line" href="#L1846">1846</a>
<a id="L1847" class="source_line" href="#L1847">1847</a>
<a id="L1848" class="source_line" href="#L1848">1848</a>
<a id="L1849" class="source_line" href="#L1849">1849</a>
<a id="L1850" class="source_line" href="#L1850">1850</a>
<a id="L1851" class="source_line" href="#L1851">1851</a>
<a id="L1852" class="source_line" href="#L1852">1852</a>
<a id="L1853" class="source_line" href="#L1853">1853</a>
<a id="L1854" class="source_line" href="#L1854">1854</a>
<a id="L1855" class="source_line" href="#L1855">1855</a>
<a id="L1856" class="source_line" href="#L1856">1856</a>
<a id="L1857" class="source_line" href="#L1857">1857</a>
<a id="L1858" class="source_line" href="#L1858">1858</a>
<a id="L1859" class="source_line" href="#L1859">1859</a>
<a id="L1860" class="source_line" href="#L1860">1860</a>
<a id="L1861" class="source_line" href="#L1861">1861</a>
<a id="L1862" class="source_line" href="#L1862">1862</a>
<a id="L1863" class="source_line" href="#L1863">1863</a>
<a id="L1864" class="source_line" href="#L1864">1864</a>
<a id="L1865" class="source_line" href="#L1865">1865</a>
<a id="L1866" class="source_line" href="#L1866">1866</a>
<a id="L1867" class="source_line" href="#L1867">1867</a>
<a id="L1868" class="source_line" href="#L1868">1868</a>
<a id="L1869" class="source_line" href="#L1869">1869</a>
<a id="L1870" class="source_line" href="#L1870">1870</a>
<a id="L1871" class="source_line" href="#L1871">1871</a>
<a id="L1872" class="source_line" href="#L1872">1872</a>
<a id="L1873" class="source_line" href="#L1873">1873</a>
<a id="L1874" class="source_line" href="#L1874">1874</a>
<a id="L1875" class="source_line" href="#L1875">1875</a>
<a id="L1876" class="source_line" href="#L1876">1876</a>
<a id="L1877" class="source_line" href="#L1877">1877</a>
<a id="L1878" class="source_line" href="#L1878">1878</a>
<a id="L1879" class="source_line" href="#L1879">1879</a>
<a id="L1880" class="source_line" href="#L1880">1880</a>
<a id="L1881" class="source_line" href="#L1881">1881</a>
<a id="L1882" class="source_line" href="#L1882">1882</a>
<a id="L1883" class="source_line" href="#L1883">1883</a>
<a id="L1884" class="source_line" href="#L1884">1884</a>
<a id="L1885" class="source_line" href="#L1885">1885</a>
<a id="L1886" class="source_line" href="#L1886">1886</a>
<a id="L1887" class="source_line" href="#L1887">1887</a>
<a id="L1888" class="source_line" href="#L1888">1888</a>
<a id="L1889" class="source_line" href="#L1889">1889</a>
<a id="L1890" class="source_line" href="#L1890">1890</a>
<a id="L1891" class="source_line" href="#L1891">1891</a>
<a id="L1892" class="source_line" href="#L1892">1892</a>
<a id="L1893" class="source_line" href="#L1893">1893</a>
<a id="L1894" class="source_line" href="#L1894">1894</a>
<a id="L1895" class="source_line" href="#L1895">1895</a>
<a id="L1896" class="source_line" href="#L1896">1896</a>
<a id="L1897" class="source_line" href="#L1897">1897</a>
<a id="L1898" class="source_line" href="#L1898">1898</a>
<a id="L1899" class="source_line" href="#L1899">1899</a>
<a id="L1900" class="source_line" href="#L1900">1900</a>
<a id="L1901" class="source_line" href="#L1901">1901</a>
<a id="L1902" class="source_line" href="#L1902">1902</a>
<a id="L1903" class="source_line" href="#L1903">1903</a>
<a id="L1904" class="source_line" href="#L1904">1904</a>
<a id="L1905" class="source_line" href="#L1905">1905</a>
<a id="L1906" class="source_line" href="#L1906">1906</a>
<a id="L1907" class="source_line" href="#L1907">1907</a>
<a id="L1908" class="source_line" href="#L1908">1908</a>
<a id="L1909" class="source_line" href="#L1909">1909</a>
<a id="L1910" class="source_line" href="#L1910">1910</a>
<a id="L1911" class="source_line" href="#L1911">1911</a>
<a id="L1912" class="source_line" href="#L1912">1912</a>
<a id="L1913" class="source_line" href="#L1913">1913</a>
<a id="L1914" class="source_line" href="#L1914">1914</a>
<a id="L1915" class="source_line" href="#L1915">1915</a>
<a id="L1916" class="source_line" href="#L1916">1916</a>
<a id="L1917" class="source_line" href="#L1917">1917</a>
<a id="L1918" class="source_line" href="#L1918">1918</a>
<a id="L1919" class="source_line" href="#L1919">1919</a>
<a id="L1920" class="source_line" href="#L1920">1920</a>
<a id="L1921" class="source_line" href="#L1921">1921</a>
<a id="L1922" class="source_line" href="#L1922">1922</a>
<a id="L1923" class="source_line" href="#L1923">1923</a>
<a id="L1924" class="source_line" href="#L1924">1924</a>
<a id="L1925" class="source_line" href="#L1925">1925</a>
<a id="L1926" class="source_line" href="#L1926">1926</a>
<a id="L1927" class="source_line" href="#L1927">1927</a>
<a id="L1928" class="source_line" href="#L1928">1928</a>
<a id="L1929" class="source_line" href="#L1929">1929</a>
<a id="L1930" class="source_line" href="#L1930">1930</a>
<a id="L1931" class="source_line" href="#L1931">1931</a>
<a id="L1932" class="source_line" href="#L1932">1932</a>
<a id="L1933" class="source_line" href="#L1933">1933</a>
<a id="L1934" class="source_line" href="#L1934">1934</a>
<a id="L1935" class="source_line" href="#L1935">1935</a>
<a id="L1936" class="source_line" href="#L1936">1936</a>
<a id="L1937" class="source_line" href="#L1937">1937</a>
<a id="L1938" class="source_line" href="#L1938">1938</a>
<a id="L1939" class="source_line" href="#L1939">1939</a>
<a id="L1940" class="source_line" href="#L1940">1940</a>
<a id="L1941" class="source_line" href="#L1941">1941</a>
<a id="L1942" class="source_line" href="#L1942">1942</a>
<a id="L1943" class="source_line" href="#L1943">1943</a>
<a id="L1944" class="source_line" href="#L1944">1944</a>
<a id="L1945" class="source_line" href="#L1945">1945</a>
<a id="L1946" class="source_line" href="#L1946">1946</a>
<a id="L1947" class="source_line" href="#L1947">1947</a>
<a id="L1948" class="source_line" href="#L1948">1948</a>
<a id="L1949" class="source_line" href="#L1949">1949</a>
<a id="L1950" class="source_line" href="#L1950">1950</a>
<a id="L1951" class="source_line" href="#L1951">1951</a>
<a id="L1952" class="source_line" href="#L1952">1952</a>
<a id="L1953" class="source_line" href="#L1953">1953</a>
<a id="L1954" class="source_line" href="#L1954">1954</a>
<a id="L1955" class="source_line" href="#L1955">1955</a>
<a id="L1956" class="source_line" href="#L1956">1956</a>
<a id="L1957" class="source_line" href="#L1957">1957</a>
<a id="L1958" class="source_line" href="#L1958">1958</a>
<a id="L1959" class="source_line" href="#L1959">1959</a>
<a id="L1960" class="source_line" href="#L1960">1960</a>
<a id="L1961" class="source_line" href="#L1961">1961</a>
<a id="L1962" class="source_line" href="#L1962">1962</a>
<a id="L1963" class="source_line" href="#L1963">1963</a>
<a id="L1964" class="source_line" href="#L1964">1964</a>
<a id="L1965" class="source_line" href="#L1965">1965</a>
<a id="L1966" class="source_line" href="#L1966">1966</a>
<a id="L1967" class="source_line" href="#L1967">1967</a>
<a id="L1968" class="source_line" href="#L1968">1968</a>
<a id="L1969" class="source_line" href="#L1969">1969</a>
<a id="L1970" class="source_line" href="#L1970">1970</a>
<a id="L1971" class="source_line" href="#L1971">1971</a>
<a id="L1972" class="source_line" href="#L1972">1972</a>
<a id="L1973" class="source_line" href="#L1973">1973</a>
<a id="L1974" class="source_line" href="#L1974">1974</a>
<a id="L1975" class="source_line" href="#L1975">1975</a>
<a id="L1976" class="source_line" href="#L1976">1976</a>
<a id="L1977" class="source_line" href="#L1977">1977</a>
<a id="L1978" class="source_line" href="#L1978">1978</a>
<a id="L1979" class="source_line" href="#L1979">1979</a>
<a id="L1980" class="source_line" href="#L1980">1980</a>
<a id="L1981" class="source_line" href="#L1981">1981</a>
<a id="L1982" class="source_line" href="#L1982">1982</a>
<a id="L1983" class="source_line" href="#L1983">1983</a>
<a id="L1984" class="source_line" href="#L1984">1984</a>
<a id="L1985" class="source_line" href="#L1985">1985</a>
<a id="L1986" class="source_line" href="#L1986">1986</a>
<a id="L1987" class="source_line" href="#L1987">1987</a>
<a id="L1988" class="source_line" href="#L1988">1988</a>
<a id="L1989" class="source_line" href="#L1989">1989</a>
<a id="L1990" class="source_line" href="#L1990">1990</a>
<a id="L1991" class="source_line" href="#L1991">1991</a>
<a id="L1992" class="source_line" href="#L1992">1992</a>
<a id="L1993" class="source_line" href="#L1993">1993</a>
<a id="L1994" class="source_line" href="#L1994">1994</a>
<a id="L1995" class="source_line" href="#L1995">1995</a>
<a id="L1996" class="source_line" href="#L1996">1996</a>
<a id="L1997" class="source_line" href="#L1997">1997</a>
<a id="L1998" class="source_line" href="#L1998">1998</a>
<a id="L1999" class="source_line" href="#L1999">1999</a>
<a id="L2000" class="source_line" href="#L2000">2000</a>
<a id="L2001" class="source_line" href="#L2001">2001</a>
<a id="L2002" class="source_line" href="#L2002">2002</a>
<a id="L2003" class="source_line" href="#L2003">2003</a>
<a id="L2004" class="source_line" href="#L2004">2004</a>
<a id="L2005" class="source_line" href="#L2005">2005</a>
<a id="L2006" class="source_line" href="#L2006">2006</a>
<a id="L2007" class="source_line" href="#L2007">2007</a>
<a id="L2008" class="source_line" href="#L2008">2008</a>
<a id="L2009" class="source_line" href="#L2009">2009</a>
<a id="L2010" class="source_line" href="#L2010">2010</a>
<a id="L2011" class="source_line" href="#L2011">2011</a>
<a id="L2012" class="source_line" href="#L2012">2012</a>
<a id="L2013" class="source_line" href="#L2013">2013</a>
<a id="L2014" class="source_line" href="#L2014">2014</a>
<a id="L2015" class="source_line" href="#L2015">2015</a>
<a id="L2016" class="source_line" href="#L2016">2016</a>
<a id="L2017" class="source_line" href="#L2017">2017</a>
<a id="L2018" class="source_line" href="#L2018">2018</a>
<a id="L2019" class="source_line" href="#L2019">2019</a>
<a id="L2020" class="source_line" href="#L2020">2020</a>
<a id="L2021" class="source_line" href="#L2021">2021</a>
<a id="L2022" class="source_line" href="#L2022">2022</a>
<a id="L2023" class="source_line" href="#L2023">2023</a>
<a id="L2024" class="source_line" href="#L2024">2024</a>
<a id="L2025" class="source_line" href="#L2025">2025</a>
<a id="L2026" class="source_line" href="#L2026">2026</a>
<a id="L2027" class="source_line" href="#L2027">2027</a>
<a id="L2028" class="source_line" href="#L2028">2028</a>
<a id="L2029" class="source_line" href="#L2029">2029</a>
<a id="L2030" class="source_line" href="#L2030">2030</a>
<a id="L2031" class="source_line" href="#L2031">2031</a>
<a id="L2032" class="source_line" href="#L2032">2032</a>
<a id="L2033" class="source_line" href="#L2033">2033</a>
<a id="L2034" class="source_line" href="#L2034">2034</a>
<a id="L2035" class="source_line" href="#L2035">2035</a>
<a id="L2036" class="source_line" href="#L2036">2036</a>
<a id="L2037" class="source_line" href="#L2037">2037</a>
<a id="L2038" class="source_line" href="#L2038">2038</a>
<a id="L2039" class="source_line" href="#L2039">2039</a>
<a id="L2040" class="source_line" href="#L2040">2040</a>
<a id="L2041" class="source_line" href="#L2041">2041</a>
<a id="L2042" class="source_line" href="#L2042">2042</a>
<a id="L2043" class="source_line" href="#L2043">2043</a>
<a id="L2044" class="source_line" href="#L2044">2044</a>
<a id="L2045" class="source_line" href="#L2045">2045</a>
<a id="L2046" class="source_line" href="#L2046">2046</a>
<a id="L2047" class="source_line" href="#L2047">2047</a>
<a id="L2048" class="source_line" href="#L2048">2048</a>
<a id="L2049" class="source_line" href="#L2049">2049</a>
<a id="L2050" class="source_line" href="#L2050">2050</a>
<a id="L2051" class="source_line" href="#L2051">2051</a>
<a id="L2052" class="source_line" href="#L2052">2052</a>
<a id="L2053" class="source_line" href="#L2053">2053</a>
<a id="L2054" class="source_line" href="#L2054">2054</a>
<a id="L2055" class="source_line" href="#L2055">2055</a>
<a id="L2056" class="source_line" href="#L2056">2056</a>
<a id="L2057" class="source_line" href="#L2057">2057</a>
<a id="L2058" class="source_line" href="#L2058">2058</a>
<a id="L2059" class="source_line" href="#L2059">2059</a>
<a id="L2060" class="source_line" href="#L2060">2060</a>
<a id="L2061" class="source_line" href="#L2061">2061</a>
<a id="L2062" class="source_line" href="#L2062">2062</a>
<a id="L2063" class="source_line" href="#L2063">2063</a>
<a id="L2064" class="source_line" href="#L2064">2064</a>
<a id="L2065" class="source_line" href="#L2065">2065</a>
<a id="L2066" class="source_line" href="#L2066">2066</a>
<a id="L2067" class="source_line" href="#L2067">2067</a>
<a id="L2068" class="source_line" href="#L2068">2068</a>
<a id="L2069" class="source_line" href="#L2069">2069</a>
<a id="L2070" class="source_line" href="#L2070">2070</a>
<a id="L2071" class="source_line" href="#L2071">2071</a>
<a id="L2072" class="source_line" href="#L2072">2072</a>
<a id="L2073" class="source_line" href="#L2073">2073</a>
<a id="L2074" class="source_line" href="#L2074">2074</a>
<a id="L2075" class="source_line" href="#L2075">2075</a>
<a id="L2076" class="source_line" href="#L2076">2076</a>
<a id="L2077" class="source_line" href="#L2077">2077</a>
<a id="L2078" class="source_line" href="#L2078">2078</a>
<a id="L2079" class="source_line" href="#L2079">2079</a>
<a id="L2080" class="source_line" href="#L2080">2080</a>
<a id="L2081" class="source_line" href="#L2081">2081</a>
<a id="L2082" class="source_line" href="#L2082">2082</a>
<a id="L2083" class="source_line" href="#L2083">2083</a>
<a id="L2084" class="source_line" href="#L2084">2084</a>
<a id="L2085" class="source_line" href="#L2085">2085</a>
<a id="L2086" class="source_line" href="#L2086">2086</a>
<a id="L2087" class="source_line" href="#L2087">2087</a>
<a id="L2088" class="source_line" href="#L2088">2088</a>
<a id="L2089" class="source_line" href="#L2089">2089</a>
<a id="L2090" class="source_line" href="#L2090">2090</a>
<a id="L2091" class="source_line" href="#L2091">2091</a>
<a id="L2092" class="source_line" href="#L2092">2092</a>
<a id="L2093" class="source_line" href="#L2093">2093</a>
<a id="L2094" class="source_line" href="#L2094">2094</a>
<a id="L2095" class="source_line" href="#L2095">2095</a>
<a id="L2096" class="source_line" href="#L2096">2096</a>
<a id="L2097" class="source_line" href="#L2097">2097</a>
<a id="L2098" class="source_line" href="#L2098">2098</a>
<a id="L2099" class="source_line" href="#L2099">2099</a>
<a id="L2100" class="source_line" href="#L2100">2100</a>
<a id="L2101" class="source_line" href="#L2101">2101</a>
<a id="L2102" class="source_line" href="#L2102">2102</a>
<a id="L2103" class="source_line" href="#L2103">2103</a>
<a id="L2104" class="source_line" href="#L2104">2104</a>
<a id="L2105" class="source_line" href="#L2105">2105</a>
<a id="L2106" class="source_line" href="#L2106">2106</a>
<a id="L2107" class="source_line" href="#L2107">2107</a>
<a id="L2108" class="source_line" href="#L2108">2108</a>
<a id="L2109" class="source_line" href="#L2109">2109</a>
<a id="L2110" class="source_line" href="#L2110">2110</a>
<a id="L2111" class="source_line" href="#L2111">2111</a>
<a id="L2112" class="source_line" href="#L2112">2112</a>
<a id="L2113" class="source_line" href="#L2113">2113</a>
<a id="L2114" class="source_line" href="#L2114">2114</a>
<a id="L2115" class="source_line" href="#L2115">2115</a>
<a id="L2116" class="source_line" href="#L2116">2116</a>
<a id="L2117" class="source_line" href="#L2117">2117</a>
<a id="L2118" class="source_line" href="#L2118">2118</a>
<a id="L2119" class="source_line" href="#L2119">2119</a>
<a id="L2120" class="source_line" href="#L2120">2120</a>
<a id="L2121" class="source_line" href="#L2121">2121</a>
<a id="L2122" class="source_line" href="#L2122">2122</a>
<a id="L2123" class="source_line" href="#L2123">2123</a>
<a id="L2124" class="source_line" href="#L2124">2124</a>
<a id="L2125" class="source_line" href="#L2125">2125</a>
<a id="L2126" class="source_line" href="#L2126">2126</a>
<a id="L2127" class="source_line" href="#L2127">2127</a>
<a id="L2128" class="source_line" href="#L2128">2128</a>
<a id="L2129" class="source_line" href="#L2129">2129</a>
<a id="L2130" class="source_line" href="#L2130">2130</a>
<a id="L2131" class="source_line" href="#L2131">2131</a>
<a id="L2132" class="source_line" href="#L2132">2132</a>
<a id="L2133" class="source_line" href="#L2133">2133</a>
<a id="L2134" class="source_line" href="#L2134">2134</a>
<a id="L2135" class="source_line" href="#L2135">2135</a>
<a id="L2136" class="source_line" href="#L2136">2136</a>
<a id="L2137" class="source_line" href="#L2137">2137</a>
<a id="L2138" class="source_line" href="#L2138">2138</a>
<a id="L2139" class="source_line" href="#L2139">2139</a>
<a id="L2140" class="source_line" href="#L2140">2140</a>
<a id="L2141" class="source_line" href="#L2141">2141</a>
<a id="L2142" class="source_line" href="#L2142">2142</a>
<a id="L2143" class="source_line" href="#L2143">2143</a>
<a id="L2144" class="source_line" href="#L2144">2144</a>
<a id="L2145" class="source_line" href="#L2145">2145</a>
<a id="L2146" class="source_line" href="#L2146">2146</a>
<a id="L2147" class="source_line" href="#L2147">2147</a>
<a id="L2148" class="source_line" href="#L2148">2148</a>
<a id="L2149" class="source_line" href="#L2149">2149</a>
<a id="L2150" class="source_line" href="#L2150">2150</a>
<a id="L2151" class="source_line" href="#L2151">2151</a>
<a id="L2152" class="source_line" href="#L2152">2152</a>
<a id="L2153" class="source_line" href="#L2153">2153</a>
<a id="L2154" class="source_line" href="#L2154">2154</a>
<a id="L2155" class="source_line" href="#L2155">2155</a>
<a id="L2156" class="source_line" href="#L2156">2156</a>
<a id="L2157" class="source_line" href="#L2157">2157</a>
<a id="L2158" class="source_line" href="#L2158">2158</a>
<a id="L2159" class="source_line" href="#L2159">2159</a>
<a id="L2160" class="source_line" href="#L2160">2160</a>
<a id="L2161" class="source_line" href="#L2161">2161</a>
<a id="L2162" class="source_line" href="#L2162">2162</a>
<a id="L2163" class="source_line" href="#L2163">2163</a>
<a id="L2164" class="source_line" href="#L2164">2164</a>
<a id="L2165" class="source_line" href="#L2165">2165</a>
<a id="L2166" class="source_line" href="#L2166">2166</a>
<a id="L2167" class="source_line" href="#L2167">2167</a>
<a id="L2168" class="source_line" href="#L2168">2168</a>
<a id="L2169" class="source_line" href="#L2169">2169</a>
<a id="L2170" class="source_line" href="#L2170">2170</a>
<a id="L2171" class="source_line" href="#L2171">2171</a>
<a id="L2172" class="source_line" href="#L2172">2172</a>
<a id="L2173" class="source_line" href="#L2173">2173</a>
<a id="L2174" class="source_line" href="#L2174">2174</a>
<a id="L2175" class="source_line" href="#L2175">2175</a>
<a id="L2176" class="source_line" href="#L2176">2176</a>
<a id="L2177" class="source_line" href="#L2177">2177</a>
<a id="L2178" class="source_line" href="#L2178">2178</a>
<a id="L2179" class="source_line" href="#L2179">2179</a>
<a id="L2180" class="source_line" href="#L2180">2180</a>
<a id="L2181" class="source_line" href="#L2181">2181</a>
<a id="L2182" class="source_line" href="#L2182">2182</a>
<a id="L2183" class="source_line" href="#L2183">2183</a>
<a id="L2184" class="source_line" href="#L2184">2184</a>
<a id="L2185" class="source_line" href="#L2185">2185</a>
<a id="L2186" class="source_line" href="#L2186">2186</a>
<a id="L2187" class="source_line" href="#L2187">2187</a>
<a id="L2188" class="source_line" href="#L2188">2188</a>
<a id="L2189" class="source_line" href="#L2189">2189</a>
<a id="L2190" class="source_line" href="#L2190">2190</a>
<a id="L2191" class="source_line" href="#L2191">2191</a>
<a id="L2192" class="source_line" href="#L2192">2192</a>
<a id="L2193" class="source_line" href="#L2193">2193</a>
<a id="L2194" class="source_line" href="#L2194">2194</a>
<a id="L2195" class="source_line" href="#L2195">2195</a>
<a id="L2196" class="source_line" href="#L2196">2196</a>
<a id="L2197" class="source_line" href="#L2197">2197</a>
<a id="L2198" class="source_line" href="#L2198">2198</a>
<a id="L2199" class="source_line" href="#L2199">2199</a>
<a id="L2200" class="source_line" href="#L2200">2200</a>
<a id="L2201" class="source_line" href="#L2201">2201</a>
<a id="L2202" class="source_line" href="#L2202">2202</a>
<a id="L2203" class="source_line" href="#L2203">2203</a>
<a id="L2204" class="source_line" href="#L2204">2204</a>
<a id="L2205" class="source_line" href="#L2205">2205</a>
<a id="L2206" class="source_line" href="#L2206">2206</a>
<a id="L2207" class="source_line" href="#L2207">2207</a>
<a id="L2208" class="source_line" href="#L2208">2208</a>
<a id="L2209" class="source_line" href="#L2209">2209</a>
<a id="L2210" class="source_line" href="#L2210">2210</a>
<a id="L2211" class="source_line" href="#L2211">2211</a>
<a id="L2212" class="source_line" href="#L2212">2212</a>
<a id="L2213" class="source_line" href="#L2213">2213</a>
<a id="L2214" class="source_line" href="#L2214">2214</a>
<a id="L2215" class="source_line" href="#L2215">2215</a>
<a id="L2216" class="source_line" href="#L2216">2216</a>
<a id="L2217" class="source_line" href="#L2217">2217</a>
<a id="L2218" class="source_line" href="#L2218">2218</a>
<a id="L2219" class="source_line" href="#L2219">2219</a>
<a id="L2220" class="source_line" href="#L2220">2220</a>
<a id="L2221" class="source_line" href="#L2221">2221</a>
<a id="L2222" class="source_line" href="#L2222">2222</a>
<a id="L2223" class="source_line" href="#L2223">2223</a>
<a id="L2224" class="source_line" href="#L2224">2224</a>
<a id="L2225" class="source_line" href="#L2225">2225</a>
<a id="L2226" class="source_line" href="#L2226">2226</a>
<a id="L2227" class="source_line" href="#L2227">2227</a>
<a id="L2228" class="source_line" href="#L2228">2228</a>
<a id="L2229" class="source_line" href="#L2229">2229</a>
<a id="L2230" class="source_line" href="#L2230">2230</a>
<a id="L2231" class="source_line" href="#L2231">2231</a>
<a id="L2232" class="source_line" href="#L2232">2232</a>
<a id="L2233" class="source_line" href="#L2233">2233</a>
<a id="L2234" class="source_line" href="#L2234">2234</a>
<a id="L2235" class="source_line" href="#L2235">2235</a>
<a id="L2236" class="source_line" href="#L2236">2236</a>
<a id="L2237" class="source_line" href="#L2237">2237</a>
<a id="L2238" class="source_line" href="#L2238">2238</a>
<a id="L2239" class="source_line" href="#L2239">2239</a>
<a id="L2240" class="source_line" href="#L2240">2240</a>
<a id="L2241" class="source_line" href="#L2241">2241</a>
<a id="L2242" class="source_line" href="#L2242">2242</a>
<a id="L2243" class="source_line" href="#L2243">2243</a>
<a id="L2244" class="source_line" href="#L2244">2244</a>
<a id="L2245" class="source_line" href="#L2245">2245</a>
<a id="L2246" class="source_line" href="#L2246">2246</a>
<a id="L2247" class="source_line" href="#L2247">2247</a>
<a id="L2248" class="source_line" href="#L2248">2248</a>
<a id="L2249" class="source_line" href="#L2249">2249</a>
<a id="L2250" class="source_line" href="#L2250">2250</a>
<a id="L2251" class="source_line" href="#L2251">2251</a>
<a id="L2252" class="source_line" href="#L2252">2252</a>
<a id="L2253" class="source_line" href="#L2253">2253</a>
<a id="L2254" class="source_line" href="#L2254">2254</a>
<a id="L2255" class="source_line" href="#L2255">2255</a>
<a id="L2256" class="source_line" href="#L2256">2256</a>
<a id="L2257" class="source_line" href="#L2257">2257</a>
<a id="L2258" class="source_line" href="#L2258">2258</a>
<a id="L2259" class="source_line" href="#L2259">2259</a>
<a id="L2260" class="source_line" href="#L2260">2260</a>
<a id="L2261" class="source_line" href="#L2261">2261</a>
<a id="L2262" class="source_line" href="#L2262">2262</a>
<a id="L2263" class="source_line" href="#L2263">2263</a>
<a id="L2264" class="source_line" href="#L2264">2264</a>
<a id="L2265" class="source_line" href="#L2265">2265</a>
<a id="L2266" class="source_line" href="#L2266">2266</a>
<a id="L2267" class="source_line" href="#L2267">2267</a>
<a id="L2268" class="source_line" href="#L2268">2268</a>
<a id="L2269" class="source_line" href="#L2269">2269</a>
<a id="L2270" class="source_line" href="#L2270">2270</a>
<a id="L2271" class="source_line" href="#L2271">2271</a>
<a id="L2272" class="source_line" href="#L2272">2272</a>
<a id="L2273" class="source_line" href="#L2273">2273</a>
<a id="L2274" class="source_line" href="#L2274">2274</a>
<a id="L2275" class="source_line" href="#L2275">2275</a>
<a id="L2276" class="source_line" href="#L2276">2276</a>
<a id="L2277" class="source_line" href="#L2277">2277</a>
<a id="L2278" class="source_line" href="#L2278">2278</a>
<a id="L2279" class="source_line" href="#L2279">2279</a>
<a id="L2280" class="source_line" href="#L2280">2280</a>
<a id="L2281" class="source_line" href="#L2281">2281</a>
<a id="L2282" class="source_line" href="#L2282">2282</a>
<a id="L2283" class="source_line" href="#L2283">2283</a>
<a id="L2284" class="source_line" href="#L2284">2284</a>
<a id="L2285" class="source_line" href="#L2285">2285</a>
<a id="L2286" class="source_line" href="#L2286">2286</a>
<a id="L2287" class="source_line" href="#L2287">2287</a>
<a id="L2288" class="source_line" href="#L2288">2288</a>
<a id="L2289" class="source_line" href="#L2289">2289</a>
<a id="L2290" class="source_line" href="#L2290">2290</a>
<a id="L2291" class="source_line" href="#L2291">2291</a>
<a id="L2292" class="source_line" href="#L2292">2292</a>
<a id="L2293" class="source_line" href="#L2293">2293</a>
<a id="L2294" class="source_line" href="#L2294">2294</a>
<a id="L2295" class="source_line" href="#L2295">2295</a>
<a id="L2296" class="source_line" href="#L2296">2296</a>
<a id="L2297" class="source_line" href="#L2297">2297</a>
<a id="L2298" class="source_line" href="#L2298">2298</a>
<a id="L2299" class="source_line" href="#L2299">2299</a>
<a id="L2300" class="source_line" href="#L2300">2300</a>
<a id="L2301" class="source_line" href="#L2301">2301</a>
<a id="L2302" class="source_line" href="#L2302">2302</a>
<a id="L2303" class="source_line" href="#L2303">2303</a>
<a id="L2304" class="source_line" href="#L2304">2304</a>
<a id="L2305" class="source_line" href="#L2305">2305</a>
<a id="L2306" class="source_line" href="#L2306">2306</a>
<a id="L2307" class="source_line" href="#L2307">2307</a>
<a id="L2308" class="source_line" href="#L2308">2308</a>
<a id="L2309" class="source_line" href="#L2309">2309</a>
<a id="L2310" class="source_line" href="#L2310">2310</a>
<a id="L2311" class="source_line" href="#L2311">2311</a>
<a id="L2312" class="source_line" href="#L2312">2312</a>
<a id="L2313" class="source_line" href="#L2313">2313</a>
<a id="L2314" class="source_line" href="#L2314">2314</a>
<a id="L2315" class="source_line" href="#L2315">2315</a>
<a id="L2316" class="source_line" href="#L2316">2316</a>
<a id="L2317" class="source_line" href="#L2317">2317</a>
<a id="L2318" class="source_line" href="#L2318">2318</a>
<a id="L2319" class="source_line" href="#L2319">2319</a>
<a id="L2320" class="source_line" href="#L2320">2320</a>
<a id="L2321" class="source_line" href="#L2321">2321</a>
<a id="L2322" class="source_line" href="#L2322">2322</a>
<a id="L2323" class="source_line" href="#L2323">2323</a>
<a id="L2324" class="source_line" href="#L2324">2324</a>
<a id="L2325" class="source_line" href="#L2325">2325</a>
<a id="L2326" class="source_line" href="#L2326">2326</a>
<a id="L2327" class="source_line" href="#L2327">2327</a>
<a id="L2328" class="source_line" href="#L2328">2328</a>
<a id="L2329" class="source_line" href="#L2329">2329</a>
<a id="L2330" class="source_line" href="#L2330">2330</a>
<a id="L2331" class="source_line" href="#L2331">2331</a>
<a id="L2332" class="source_line" href="#L2332">2332</a>
<a id="L2333" class="source_line" href="#L2333">2333</a>
<a id="L2334" class="source_line" href="#L2334">2334</a>
<a id="L2335" class="source_line" href="#L2335">2335</a>
<a id="L2336" class="source_line" href="#L2336">2336</a>
<a id="L2337" class="source_line" href="#L2337">2337</a>
<a id="L2338" class="source_line" href="#L2338">2338</a>
<a id="L2339" class="source_line" href="#L2339">2339</a>
<a id="L2340" class="source_line" href="#L2340">2340</a>
<a id="L2341" class="source_line" href="#L2341">2341</a>
<a id="L2342" class="source_line" href="#L2342">2342</a>
<a id="L2343" class="source_line" href="#L2343">2343</a>
<a id="L2344" class="source_line" href="#L2344">2344</a>
<a id="L2345" class="source_line" href="#L2345">2345</a>
<a id="L2346" class="source_line" href="#L2346">2346</a>
<a id="L2347" class="source_line" href="#L2347">2347</a>
<a id="L2348" class="source_line" href="#L2348">2348</a>
<a id="L2349" class="source_line" href="#L2349">2349</a>
<a id="L2350" class="source_line" href="#L2350">2350</a>
<a id="L2351" class="source_line" href="#L2351">2351</a>
<a id="L2352" class="source_line" href="#L2352">2352</a>
<a id="L2353" class="source_line" href="#L2353">2353</a>
<a id="L2354" class="source_line" href="#L2354">2354</a>
<a id="L2355" class="source_line" href="#L2355">2355</a>
<a id="L2356" class="source_line" href="#L2356">2356</a>
<a id="L2357" class="source_line" href="#L2357">2357</a>
<a id="L2358" class="source_line" href="#L2358">2358</a>
<a id="L2359" class="source_line" href="#L2359">2359</a>
<a id="L2360" class="source_line" href="#L2360">2360</a>
<a id="L2361" class="source_line" href="#L2361">2361</a>
<a id="L2362" class="source_line" href="#L2362">2362</a>
<a id="L2363" class="source_line" href="#L2363">2363</a>
<a id="L2364" class="source_line" href="#L2364">2364</a>
<a id="L2365" class="source_line" href="#L2365">2365</a>
<a id="L2366" class="source_line" href="#L2366">2366</a>
<a id="L2367" class="source_line" href="#L2367">2367</a>
<a id="L2368" class="source_line" href="#L2368">2368</a>
<a id="L2369" class="source_line" href="#L2369">2369</a>
<a id="L2370" class="source_line" href="#L2370">2370</a>
<a id="L2371" class="source_line" href="#L2371">2371</a>
<a id="L2372" class="source_line" href="#L2372">2372</a>
<a id="L2373" class="source_line" href="#L2373">2373</a>
<a id="L2374" class="source_line" href="#L2374">2374</a>
<a id="L2375" class="source_line" href="#L2375">2375</a>
<a id="L2376" class="source_line" href="#L2376">2376</a>
<a id="L2377" class="source_line" href="#L2377">2377</a>
<a id="L2378" class="source_line" href="#L2378">2378</a>
<a id="L2379" class="source_line" href="#L2379">2379</a>
<a id="L2380" class="source_line" href="#L2380">2380</a>
<a id="L2381" class="source_line" href="#L2381">2381</a>
<a id="L2382" class="source_line" href="#L2382">2382</a>
<a id="L2383" class="source_line" href="#L2383">2383</a>
<a id="L2384" class="source_line" href="#L2384">2384</a>
<a id="L2385" class="source_line" href="#L2385">2385</a>
<a id="L2386" class="source_line" href="#L2386">2386</a>
</code><code class="source_code"><span><span class="OPEN">open</span> <a href="../model/names.ml.html"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Names</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Add [result] and a bind operator over it in scope *)</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="utils.ml.html"><span class="UIDENT">Utils</span></a><span class="EOL">
</span><span class="OPEN">open</span> <a href="utils.ml.html#module-ResultMonad"><span class="UIDENT">ResultMonad</span></a><span class="EOL">
</span><span class="EOL">
</span><span id="type-expansion"><span class="TYPE">type</span> <span class="LIDENT">expansion</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span id="type-expansion.constructor-Signature"><span class="BAR">|</span> <span class="UIDENT">Signature</span> <span class="OF">of</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></span><span class="EOL">
</span>  <span id="type-expansion.constructor-Functor"><span class="BAR">|</span> <span class="UIDENT">Functor</span> <span class="OF">of</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">FunctorParameter</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-either"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">b</span><span class="RPAREN">)</span> <span class="LIDENT">either</span> <span class="EQUAL">=</span> <span id="type-either.constructor-Left"><span class="UIDENT">Left</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">a</span></span> <span id="type-either.constructor-Right"><span class="BAR">|</span> <span class="UIDENT">Right</span> <span class="OF">of</span> <span class="QUOTE">'</span><span class="LIDENT">b</span></span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-filter_map"><span class="LIDENT">filter_map</span></span> <span id="local_f_1"><span class="LIDENT">f</span></span> <span id="local_x_2"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">rev</span><span class="EOL">
</span>  <span class="INFIXOP1">@@</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_left</span><span class="EOL">
</span>       <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_acc_3"><span class="LIDENT">acc</span></span> <span id="local_x_4"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="MATCH">match</span> <a href="#local_f_1"><span class="LIDENT">f</span></a> <a href="#local_x_4"><span class="LIDENT">x</span></a> <span class="WITH">with</span> <span class="UIDENT">Some</span> <span id="local_x_5"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_5"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <a href="#local_acc_3"><span class="LIDENT">acc</span></a> <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_acc_3"><span class="LIDENT">acc</span></a><span class="RPAREN">)</span><span class="EOL">
</span>       <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <a href="#local_x_2"><span class="LIDENT">x</span></a><span class="EOL">
</span><span class="EOL">
</span><span id="type-module_modifiers"><span class="TYPE">type</span> <span class="LIDENT">module_modifiers</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Aliased</span> <span class="OF">of</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstMT</span> <span class="OF">of</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-module_type_modifiers"><span class="TYPE">type</span> <span class="LIDENT">module_type_modifiers</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="OF">of</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="RBRACKET">]</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* These three functions take a fully-qualified canonical path and return
   a list of shorter possibilities to test *)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-c_mod_poss"><span class="LIDENT">c_mod_poss</span></span> <span id="local_env_6"><span class="LIDENT">env</span></span> <span id="local_p_7"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* canonical module paths *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_inner_8"><span class="LIDENT">inner</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_p_9"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_10"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_rest_11"><span class="LIDENT">rest</span></span> <span class="EQUAL">=</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_p_12"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><a href="#local_p_12"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_10"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="#local_inner_8"><span class="LIDENT">inner</span></a> <a href="#local_p_9"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_by_name"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_by_name</span></a> <a href="env.ml.html#val-s_module"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">s_module</span></a> <a href="#local_n_10"><span class="LIDENT">n</span></a> <a href="#local_env_6"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_id_13"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_m_14"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_m_15"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_14"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>            <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><a href="#local_id_13"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_m_15"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">hidden</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_rest_11"><span class="LIDENT">rest</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_rest_11"><span class="LIDENT">rest</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_p_16"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span> <a href="#local_p_16"><span class="LIDENT">p</span></a> <span class="RBRACKET">]</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_inner_8"><span class="LIDENT">inner</span></a> <a href="#local_p_7"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-c_modty_poss"><span class="LIDENT">c_modty_poss</span></span> <span id="local_env_17"><span class="LIDENT">env</span></span> <span id="local_p_18"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* canonical module type paths *)</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_18"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_p_19"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_20"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_rest_21"><span class="LIDENT">rest</span></span> <span class="EQUAL">=</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_p_22"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><a href="#local_p_22"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_20"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LIDENT">c_mod_poss</span> <a href="#local_env_17"><span class="LIDENT">env</span></a> <a href="#local_p_19"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_by_name"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_by_name</span></a> <a href="env.ml.html#val-s_module_type"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">s_module_type</span></a> <a href="#local_n_20"><span class="LIDENT">n</span></a> <a href="#local_env_17"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_id_23"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><a href="#local_id_23"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <span class="FALSE">false</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_rest_21"><span class="LIDENT">rest</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_rest_21"><span class="LIDENT">rest</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span id="local_p_24"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span> <a href="#local_p_24"><span class="LIDENT">p</span></a> <span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-c_ty_poss"><span class="LIDENT">c_ty_poss</span></span> <span id="local_env_25"><span class="LIDENT">env</span></span> <span id="local_p_26"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* canonical type paths *)</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_26"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_p_27"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_28"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_rest_29"><span class="LIDENT">rest</span></span> <span class="EQUAL">=</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_p_30"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><a href="#local_p_30"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_28"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="LIDENT">c_mod_poss</span> <a href="#local_env_25"><span class="LIDENT">env</span></a> <a href="#local_p_27"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_by_name"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_by_name</span></a> <a href="env.ml.html#val-s_datatype"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">s_datatype</span></a> <a href="#local_n_28"><span class="LIDENT">n</span></a> <a href="#local_env_25"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_id_31"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="#local_id_31"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-Type.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="COLONCOLON">::</span> <a href="#local_rest_29"><span class="LIDENT">rest</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_rest_29"><span class="LIDENT">rest</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span id="local_p_32"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACKET">[</span> <a href="#local_p_32"><span class="LIDENT">p</span></a> <span class="RBRACKET">]</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* Small helper function for resolving canonical paths.
   [canonical_helper env resolve lang_of possibilities p2] takes the
   fully-qualified path [p2] and returns the shortest resolved path
   whose identifier is the same as the resolved fully qualified path.
   [resolve] is a function that resolves an arbitrary unresolved path,
   [lang_of] turns a resolved path into a generic resolved Lang path
   and [possibilities] is a function that, given the fully qualified
   unresolved path, returns an ordered list of all possible unresolved
   paths starting with the shortest and including the longest one. *)</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-canonical_helper"><span class="LIDENT">canonical_helper</span></span> <span class="COLON">:</span><span class="EOL">
</span>      <span class="QUOTE">'</span><span class="LIDENT">unresolved</span> <span class="QUOTE">'</span><span class="LIDENT">resolved</span><span class="DOT">.</span><span class="EOL">
</span>      <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">unresolved</span> <span class="MINUSGREATER">-&gt;</span> <a href="utils.ml.html#module-ResultMonad.type-result"><span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">resolved</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">result</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="LIDENT">result</span></a><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">resolved</span> <span class="MINUSGREATER">-&gt;</span> <a href="../model/paths.ml.html#module-Path.module-Resolved.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">unresolved</span> <span class="MINUSGREATER">-&gt;</span> <span class="QUOTE">'</span><span class="LIDENT">unresolved</span> <span class="LIDENT">list</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="QUOTE">'</span><span class="LIDENT">unresolved</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">resolved</span> <span class="STAR">*</span> <span class="QUOTE">'</span><span class="LIDENT">result</span><span class="RPAREN">)</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_33"><span class="LIDENT">env</span></span> <span id="local_resolve_34"><span class="LIDENT">resolve</span></span> <span id="local_lang_of_35"><span class="LIDENT">lang_of</span></span> <span id="local_possibilities_36"><span class="LIDENT">possibilities</span></span> <span id="local_p2_37"><span class="LIDENT">p2</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_resolve_38"><span class="LIDENT">resolve</span></span> <span id="local_p_39"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_resolve_34"><span class="LIDENT">resolve</span></a> <a href="#local_env_33"><span class="LIDENT">env</span></a> <a href="#local_p_39"><span class="LIDENT">p</span></a> <span class="WITH">with</span> <span class="UIDENT">Ok</span> <span id="local_rp_40"><span class="LIDENT">rp</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_rp_40"><span class="LIDENT">rp</span></a> <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_get_identifier_41"><span class="LIDENT">get_identifier</span></span> <span id="local_cpath_42"><span class="LIDENT">cpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.val-identifier"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">identifier</span></a> <span class="LPAREN">(</span><a href="#local_lang_of_35"><span class="LIDENT">lang_of</span></a> <a href="#local_cpath_42"><span class="LIDENT">cpath</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_resolve_38"><span class="LIDENT">resolve</span></a> <a href="#local_p2_37"><span class="LIDENT">p2</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_rp2_43"><span class="LIDENT">rp2</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_fallback_id_44"><span class="LIDENT">fallback_id</span></span> <span class="EQUAL">=</span> <a href="#local_get_identifier_41"><span class="LIDENT">get_identifier</span></a> <a href="#local_rp2_43"><span class="LIDENT">rp2</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_resolved_45"><span class="LIDENT">resolved</span></span> <span class="EQUAL">=</span> <span class="LIDENT">filter_map</span> <a href="#local_resolve_38"><span class="LIDENT">resolve</span></a> <span class="LPAREN">(</span><a href="#local_possibilities_36"><span class="LIDENT">possibilities</span></a> <a href="#local_env_33"><span class="LIDENT">env</span></a> <a href="#local_p2_37"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_find_fn_46"><span class="LIDENT">find_fn</span></span> <span class="LPAREN">(</span><span id="local_r_47"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <a href="#local_get_identifier_41"><span class="LIDENT">get_identifier</span></a> <a href="#local_r_47"><span class="LIDENT">r</span></a> <span class="EQUAL">=</span> <a href="#local_fallback_id_44"><span class="LIDENT">fallback_id</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="TRY">try</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">find</span> <a href="#local_find_fn_46"><span class="LIDENT">find_fn</span></a> <a href="#local_resolved_45"><span class="LIDENT">resolved</span></a><span class="RPAREN">)</span> <span class="WITH">with</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-prefix_substitution"><span class="LIDENT">prefix_substitution</span></span> <span id="local_path_48"><span class="LIDENT">path</span></span> <span id="local_sg_49"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Signature"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_get_sub_50"><span class="LIDENT">get_sub</span></span> <span id="local_sub'_51"><span class="LIDENT">sub'</span></span> <span id="local_is_52"><span class="LIDENT">is</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_is_52"><span class="LIDENT">is</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_id_53"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_54"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_55"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_type</span></a> <a href="#local_id_53"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_type</span></a> <a href="#local_id_53"><span class="LIDENT">id</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_55"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_55"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_54"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_id_56"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_57"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_58"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module</span></a> <a href="#local_id_56"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module</span></a><span class="EOL">
</span>             <span class="LPAREN">(</span><a href="#local_id_56"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_58"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_58"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_57"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_id_59"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_60"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_61"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module_type</span></a> <a href="#local_id_59"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module_type</span></a> <a href="#local_id_59"><span class="LIDENT">id</span></a><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_61"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_61"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_60"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleTypeSubstitution</span> <span class="LPAREN">(</span><span id="local_id_62"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_63"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_64"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module_type</span></a> <a href="#local_id_62"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module_type</span></a> <a href="#local_id_62"><span class="LIDENT">id</span></a><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_64"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_64"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_63"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleSubstitution</span> <span class="LPAREN">(</span><span id="local_id_65"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_66"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_67"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module</span></a> <a href="#local_id_65"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module</span></a><span class="EOL">
</span>             <span class="LPAREN">(</span><a href="#local_id_65"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_67"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_67"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_66"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">TypeSubstitution</span> <span class="LPAREN">(</span><span id="local_id_68"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_69"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_70"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_type</span></a> <a href="#local_id_68"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_type</span></a> <a href="#local_id_68"><span class="LIDENT">id</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_70"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_70"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_69"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Exception</span> <span class="UNDERSCORE">_</span> <span class="COLONCOLON">::</span> <span id="local_rest_71"><span class="LIDENT">rest</span></span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">TypExt</span> <span class="UNDERSCORE">_</span> <span class="COLONCOLON">::</span> <span id="local_rest_72"><span class="LIDENT">rest</span></span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Value</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_73"><span class="LIDENT">rest</span></span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Comment</span> <span class="UNDERSCORE">_</span> <span class="COLONCOLON">::</span> <span id="local_rest_74"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a> <a href="#local_rest_74"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_id_75"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_76"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_77"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_class"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_class</span></a> <a href="#local_id_75"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_class"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_class</span></a> <a href="#local_id_75"><span class="LIDENT">id</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_77"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_77"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_76"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_id_78"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_rest_79"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_name_80"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_class_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_class_type</span></a> <a href="#local_id_78"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>        <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="subst.ml.html#val-add_class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_class_type</span></a> <a href="#local_id_78"><span class="LIDENT">id</span></a><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_80"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_80"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>             <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <a href="#local_rest_79"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Include</span> <span id="local_i_81"><span class="LIDENT">i</span></span> <span class="COLONCOLON">::</span> <span id="local_rest_82"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <span class="LPAREN">(</span><a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a> <a href="#local_i_81"><span class="LIDENT">i</span></a><span class="DOT">.</span><span class="LIDENT">expansion_</span><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span> <a href="#local_rest_82"><span class="LIDENT">rest</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Open</span> <span id="local_o_83"><span class="LIDENT">o</span></span> <span class="COLONCOLON">::</span> <span id="local_rest_84"><span class="LIDENT">rest</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <span class="LPAREN">(</span><a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <a href="#local_sub'_51"><span class="LIDENT">sub'</span></a> <a href="#local_o_83"><span class="LIDENT">o</span></a><span class="DOT">.</span><span class="LIDENT">expansion</span><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span> <a href="#local_rest_84"><span class="LIDENT">rest</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_extend_sub_removed_85"><span class="LIDENT">extend_sub_removed</span></span> <span id="local_removed_86"><span class="LIDENT">removed</span></span> <span id="local_sub_87"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_right</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_item_88"><span class="LIDENT">item</span></span> <span id="local_map_89"><span class="LIDENT">map</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_item_88"><span class="LIDENT">item</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModule</span> <span class="LPAREN">(</span><span id="local_id_90"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_name_91"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module</span></a> <a href="#local_id_90"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>            <a href="subst.ml.html#val-add_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module</span></a><span class="EOL">
</span>              <span class="LPAREN">(</span><a href="#local_id_90"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_91"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_91"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <a href="#local_map_89"><span class="LIDENT">map</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModuleType</span> <span class="LPAREN">(</span><span id="local_id_92"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_name_93"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_module_type</span></a> <a href="#local_id_92"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>            <a href="subst.ml.html#val-add_module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module_type</span></a><span class="EOL">
</span>              <span class="LPAREN">(</span><a href="#local_id_92"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_93"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_93"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>              <a href="#local_map_89"><span class="LIDENT">map</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RType</span> <span class="LPAREN">(</span><span id="local_id_94"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_name_95"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span> <a href="ident.ml.html#module-Name.val-typed_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">typed_type</span></a> <a href="#local_id_94"><span class="LIDENT">id</span></a> <span class="IN">in</span><span class="EOL">
</span>            <a href="subst.ml.html#val-add_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_type</span></a> <a href="#local_id_94"><span class="LIDENT">id</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_95"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_path_48"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_name_95"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_map_89"><span class="LIDENT">map</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_removed_86"><span class="LIDENT">removed</span></a> <a href="#local_sub_87"><span class="LIDENT">sub</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_get_sub_50"><span class="LIDENT">get_sub</span></a> <a href="subst.ml.html#val-identity"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">identity</span></a> <a href="#local_sg_49"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span> <span class="INFIXOP0">|&gt;</span> <a href="#local_extend_sub_removed_85"><span class="LIDENT">extend_sub_removed</span></a> <a href="#local_sg_49"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">removed</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-prefix_signature"><span class="LIDENT">prefix_signature</span></span> <span class="LPAREN">(</span><span id="local_path_96"><span class="LIDENT">path</span></span><span class="COMMA">,</span> <span id="local_sg_97"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Signature"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_sub_98"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span> <span class="LIDENT">prefix_substitution</span> <a href="#local_path_96"><span class="LIDENT">path</span></a> <a href="#local_sg_97"><span class="LIDENT">sg</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_items_99"><span class="LIDENT">items</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUNCTION">function</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_id_100"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_101"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_m_102"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Module</span><span class="EOL">
</span>              <span class="LPAREN">(</span> <a href="ident.ml.html#module-Rename.val-module_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_id_100"><span class="LIDENT">id</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="#local_r_101"><span class="LIDENT">r</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                    <a href="subst.ml.html#val-module_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_102"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_id_103"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_mt_104"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">ModuleType</span><span class="EOL">
</span>              <span class="LPAREN">(</span> <a href="ident.ml.html#module-Rename.val-module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_id_103"><span class="LIDENT">id</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                    <a href="subst.ml.html#val-module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_mt_104"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_id_105"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_106"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_t_107"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Type</span><span class="EOL">
</span>              <span class="LPAREN">(</span> <a href="ident.ml.html#module-Rename.val-type_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_id_105"><span class="LIDENT">id</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="#local_r_106"><span class="LIDENT">r</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                    <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_t_107"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">TypeSubstitution</span> <span class="LPAREN">(</span><span id="local_id_108"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_t_109"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">TypeSubstitution</span> <span class="LPAREN">(</span><a href="ident.ml.html#module-Rename.val-type_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_id_108"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_t_109"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">ModuleSubstitution</span> <span class="LPAREN">(</span><span id="local_id_110"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_m_111"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">ModuleSubstitution</span><span class="EOL">
</span>              <span class="LPAREN">(</span><a href="ident.ml.html#module-Rename.val-module_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_id_110"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-module_substitution"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_substitution</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_m_111"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">ModuleTypeSubstitution</span> <span class="LPAREN">(</span><span id="local_id_112"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_m_113"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">ModuleTypeSubstitution</span><span class="EOL">
</span>              <span class="LPAREN">(</span><a href="ident.ml.html#module-Rename.val-module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_id_112"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-module_type_substitution"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_type_substitution</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_m_113"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Exception</span> <span class="LPAREN">(</span><span id="local_id_114"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_e_115"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Exception</span> <span class="LPAREN">(</span><a href="#local_id_114"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-exception_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">exception_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_e_115"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">TypExt</span> <span id="local_t_116"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">TypExt</span> <span class="LPAREN">(</span><a href="subst.ml.html#val-extension"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">extension</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_t_116"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_id_117"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_v_118"><span class="LIDENT">v</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Value</span><span class="EOL">
</span>              <span class="LPAREN">(</span> <a href="#local_id_117"><span class="LIDENT">id</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                    <a href="subst.ml.html#val-value"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_v_118"><span class="LIDENT">v</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_id_119"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_120"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_c_121"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="ident.ml.html#module-Rename.val-class_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_id_119"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_r_120"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_c_121"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_id_122"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_123"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_c_124"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><a href="ident.ml.html#module-Rename.val-class_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Rename</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_id_122"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_r_123"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_c_124"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Include</span> <span id="local_i_125"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Include</span> <span class="LPAREN">(</span><a href="subst.ml.html#val-include_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">include_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_i_125"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Open</span> <span id="local_o_126"><span class="LIDENT">o</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Open</span> <span class="LPAREN">(</span><a href="subst.ml.html#val-open_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">open_</span></a> <a href="#local_sub_98"><span class="LIDENT">sub</span></a> <a href="#local_o_126"><span class="LIDENT">o</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Comment</span> <span id="local_c_127"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Comment</span> <a href="#local_c_127"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_sg_97"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LBRACE">{</span> <a href="#local_sg_97"><span class="LIDENT">sg</span></a> <span class="WITH">with</span> <a href="#local_items_99"><span class="LIDENT">items</span></a> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span class="OPEN">open</span> <a href="errors.ml.html#module-Tools_error"><span class="UIDENT">Errors</span><span class="DOT">.</span><span class="UIDENT">Tools_error</span></a><span class="EOL">
</span><span class="EOL">
</span><span id="type-resolve_module_result"><span class="TYPE">type</span> <span class="LIDENT">resolve_module_result</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LPAREN">(</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="STAR">*</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>    <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>  <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-resolve_module_type_result"><span class="TYPE">type</span> <span class="LIDENT">resolve_module_type_result</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LPAREN">(</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span><span class="EOL">
</span>    <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>  <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-resolve_type_result"><span class="TYPE">type</span> <span class="LIDENT">resolve_type_result</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LPAREN">(</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="STAR">*</span> <a href="find.ml.html#type-careful_type"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_type</span></a><span class="COMMA">,</span><span class="EOL">
</span>    <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>  <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-resolve_value_result"><span class="TYPE">type</span> <span class="LIDENT">resolve_value_result</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LPAREN">(</span><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">value</span> <span class="STAR">*</span> <a href="find.ml.html#type-value"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">value</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-resolve_class_type_result"><span class="TYPE">type</span> <span class="LIDENT">resolve_class_type_result</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LPAREN">(</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">class_type</span> <span class="STAR">*</span> <a href="find.ml.html#type-careful_class"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_class</span></a><span class="COMMA">,</span><span class="EOL">
</span>    <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>  <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="type-sig_map"><span class="TYPE">type</span> <span class="LPAREN">(</span><span class="QUOTE">'</span><span class="LIDENT">a</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">b</span><span class="COMMA">,</span> <span class="QUOTE">'</span><span class="LIDENT">c</span><span class="RPAREN">)</span> <span class="LIDENT">sig_map</span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">type_</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">a</span><span class="SEMI">;</span> <span class="LIDENT">module_</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">b</span><span class="SEMI">;</span> <span class="LIDENT">module_type</span> <span class="COLON">:</span> <span class="QUOTE">'</span><span class="LIDENT">c</span> <span class="RBRACE">}</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-id_map"><span class="LIDENT">id_map</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <span class="LIDENT">type_</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span><span class="SEMI">;</span> <span class="LIDENT">module_</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span><span class="SEMI">;</span> <span class="LIDENT">module_type</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span> <span class="RBRACE">}</span><span class="EOL">
</span><span class="EOL">
</span><span id="module-type-MEMO"><span class="MODULE">module</span> <span class="TYPE">type</span> <span class="UIDENT">MEMO</span> <span class="EQUAL">=</span> <span class="SIG">sig</span><span class="EOL">
</span>  <span id="module-type-MEMO.type-result"><span class="TYPE">type</span> <span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="INCLUDE">include</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="UIDENT">HashedType</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-MakeMemo"><span class="MODULE">module</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="UIDENT">X</span> <span class="COLON">:</span> <span class="UIDENT">MEMO</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="module-MakeMemo.module-M"><span class="MODULE">module</span> <span class="UIDENT">M</span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="UIDENT">Make</span> <span class="LPAREN">(</span><span class="UIDENT">X</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-MakeMemo.val-cache"><span class="LIDENT">cache</span></span> <span class="COLON">:</span> <span class="LPAREN">(</span><span class="UIDENT">X</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="STAR">*</span> <span class="LIDENT">int</span> <span class="STAR">*</span> <span class="UIDENT">Env</span><span class="DOT">.</span><span class="UIDENT">LookupTypeSet</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RPAREN">)</span> <span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">create</span> <span class="INT">10000</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-MakeMemo.val-enabled"><span class="LIDENT">enabled</span></span> <span class="EQUAL">=</span> <span class="LIDENT">ref</span> <span class="TRUE">true</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-MakeMemo.val-memoize"><span class="LIDENT">memoize</span></span> <span id="local_f_128"><span class="LIDENT">f</span></span> <span id="local_env_129"><span class="LIDENT">env</span></span> <span id="local_arg_130"><span class="LIDENT">arg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <span class="LIDENT">not</span> <span class="BANG">!</span><span class="LIDENT">enabled</span> <span class="THEN">then</span> <a href="#local_f_128"><span class="LIDENT">f</span></a> <a href="#local_env_129"><span class="LIDENT">env</span></a> <a href="#local_arg_130"><span class="LIDENT">arg</span></a><span class="EOL">
</span>    <span class="ELSE">else</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_env_id_131"><span class="LIDENT">env_id</span></span> <span class="EQUAL">=</span> <a href="env.ml.html#val-id"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">id</span></a> <a href="#local_env_129"><span class="LIDENT">env</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_no_memo_132"><span class="LIDENT">no_memo</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_lookups_133"><span class="LIDENT">lookups</span></span><span class="COMMA">,</span> <span id="local_result_134"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <a href="env.ml.html#val-with_recorded_lookups"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">with_recorded_lookups</span></a> <a href="#local_env_129"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_env'_135"><span class="LIDENT">env'</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_f_128"><span class="LIDENT">f</span></a> <a href="#local_env'_135"><span class="LIDENT">env'</span></a> <a href="#local_arg_130"><span class="LIDENT">arg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">add</span> <span class="LIDENT">cache</span> <a href="#local_arg_130"><span class="LIDENT">arg</span></a> <span class="LPAREN">(</span><a href="#local_result_134"><span class="LIDENT">result</span></a><span class="COMMA">,</span> <a href="#local_env_id_131"><span class="LIDENT">env_id</span></a><span class="COMMA">,</span> <a href="#local_lookups_133"><span class="LIDENT">lookups</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>        <a href="#local_result_134"><span class="LIDENT">result</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">find_all</span> <span class="LIDENT">cache</span> <a href="#local_arg_130"><span class="LIDENT">arg</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_no_memo_132"><span class="LIDENT">no_memo</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_xs_136"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span class="REC">rec</span> <span id="local_find_fast_137"><span class="LIDENT">find_fast</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_result_138"><span class="LIDENT">result</span></span><span class="COMMA">,</span> <span id="local_env_id'_139"><span class="LIDENT">env_id'</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span class="UNDERSCORE">_</span> <span class="WHEN">when</span> <a href="#local_env_id'_139"><span class="LIDENT">env_id'</span></a> <span class="EQUAL">=</span> <a href="#local_env_id_131"><span class="LIDENT">env_id</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="#local_result_138"><span class="LIDENT">result</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="COLONCOLON">::</span> <span id="local_ys_140"><span class="LIDENT">ys</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_fast_137"><span class="LIDENT">find_fast</span></a> <a href="#local_ys_140"><span class="LIDENT">ys</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_141"><span class="LIDENT">find</span></a> <a href="#local_xs_136"><span class="LIDENT">xs</span></a><span class="EOL">
</span>          <span class="AND">and</span> <span id="local_find_141"><span class="LIDENT">find</span></span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="LPAREN">(</span><span id="local_m_142"><span class="LIDENT">m</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_lookups_143"><span class="LIDENT">lookups</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span id="local_xs_144"><span class="LIDENT">xs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="IF">if</span> <a href="env.ml.html#val-verify_lookups"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">verify_lookups</span></a> <a href="#local_env_129"><span class="LIDENT">env</span></a> <a href="#local_lookups_143"><span class="LIDENT">lookups</span></a> <span class="THEN">then</span> <a href="#local_m_142"><span class="LIDENT">m</span></a> <span class="ELSE">else</span> <a href="#local_find_141"><span class="LIDENT">find</span></a> <a href="#local_xs_144"><span class="LIDENT">xs</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_no_memo_132"><span class="LIDENT">no_memo</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="IN">in</span><span class="EOL">
</span>          <a href="#local_find_fast_137"><span class="LIDENT">find_fast</span></a> <a href="#local_xs_136"><span class="LIDENT">xs</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="module-MakeMemo.val-clear"><span class="LIDENT">clear</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">clear</span> <span class="LIDENT">cache</span><span class="EOL">
</span><span class="END">end</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-LookupModuleMemo"><span class="MODULE">module</span> <span class="UIDENT">LookupModuleMemo</span> <span class="EQUAL">=</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="def_1431"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="LIDENT">bool</span> <span class="STAR">*</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_1435"><span class="TYPE">type</span> <span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_equal_145"><span class="LIDENT">equal</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span> <span class="EQUAL">=</span> <span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_hash_146"><span class="LIDENT">hash</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="LIDENT">hash</span><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-LookupParentMemo"><span class="MODULE">module</span> <span class="UIDENT">LookupParentMemo</span> <span class="EQUAL">=</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="def_1428"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="LIDENT">bool</span> <span class="STAR">*</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_1434"><span class="TYPE">type</span> <span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Substitution</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span><span class="EOL">
</span>      <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="OF">of</span> <a href="errors.ml.html#module-Tools_error.type-parent_lookup_error"><span class="LIDENT">parent_lookup_error</span></a> <span class="RBRACKET">]</span> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_equal_147"><span class="LIDENT">equal</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span> <span class="EQUAL">=</span> <span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_hash_148"><span class="LIDENT">hash</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="LIDENT">hash</span><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-LookupAndResolveMemo"><span class="MODULE">module</span> <span class="UIDENT">LookupAndResolveMemo</span> <span class="EQUAL">=</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="def_1429"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="LIDENT">bool</span> <span class="STAR">*</span> <span class="LIDENT">bool</span> <span class="STAR">*</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">module_</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_1430"><span class="TYPE">type</span> <span class="LIDENT">result</span> <span class="EQUAL">=</span> <span class="LIDENT">resolve_module_result</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_equal_149"><span class="LIDENT">equal</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span> <span class="EQUAL">=</span> <span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_hash_150"><span class="LIDENT">hash</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="LIDENT">hash</span><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-HandleCanonicalModuleMemo"><span class="MODULE">module</span> <span class="UIDENT">HandleCanonicalModuleMemo</span> <span class="EQUAL">=</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="def_1436"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <a href="../model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_1433"><span class="TYPE">type</span> <span class="LIDENT">result</span> <span class="EQUAL">=</span> <a href="../model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_equal_151"><span class="LIDENT">equal</span></span> <span id="local_x3_152"><span class="LIDENT">x3</span></span> <span id="local_y3_153"><span class="LIDENT">y3</span></span> <span class="EQUAL">=</span> <a href="#local_x3_152"><span class="LIDENT">x3</span></a> <span class="EQUAL">=</span> <a href="#local_y3_153"><span class="LIDENT">y3</span></a><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_hash_154"><span class="LIDENT">hash</span></span> <span id="local_y_155"><span class="LIDENT">y</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="LIDENT">hash</span> <a href="#local_y_155"><span class="LIDENT">y</span></a><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span><span id="module-ExpansionOfModuleMemo"><span class="MODULE">module</span> <span class="UIDENT">ExpansionOfModuleMemo</span> <span class="EQUAL">=</span> <span class="UIDENT">MakeMemo</span> <span class="LPAREN">(</span><span class="STRUCT">struct</span><span class="EOL">
</span>  <span id="def_1432"><span class="TYPE">type</span> <span class="LIDENT">t</span> <span class="EQUAL">=</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span id="def_1437"><span class="TYPE">type</span> <span class="LIDENT">result</span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span></span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_equal_156"><span class="LIDENT">equal</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span> <span class="EQUAL">=</span> <span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_hash_157"><span class="LIDENT">hash</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Hashtbl</span><span class="DOT">.</span><span class="LIDENT">hash</span><span class="EOL">
</span><span class="END">end</span><span class="RPAREN">)</span></span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-disable_all_caches"><span class="LIDENT">disable_all_caches</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="UIDENT">LookupModuleMemo</span><span class="DOT">.</span><span class="LIDENT">enabled</span> <span class="COLONEQUAL">:=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">LookupAndResolveMemo</span><span class="DOT">.</span><span class="LIDENT">enabled</span> <span class="COLONEQUAL">:=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">ExpansionOfModuleMemo</span><span class="DOT">.</span><span class="LIDENT">enabled</span> <span class="COLONEQUAL">:=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">LookupParentMemo</span><span class="DOT">.</span><span class="LIDENT">enabled</span> <span class="COLONEQUAL">:=</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-reset_caches"><span class="LIDENT">reset_caches</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="UIDENT">LookupModuleMemo</span><span class="DOT">.</span><span class="LIDENT">clear</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">LookupAndResolveMemo</span><span class="DOT">.</span><span class="LIDENT">clear</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">ExpansionOfModuleMemo</span><span class="DOT">.</span><span class="LIDENT">clear</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>  <span class="UIDENT">LookupParentMemo</span><span class="DOT">.</span><span class="LIDENT">clear</span> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-simplify_module"><span class="LIDENT">simplify_module</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span><span class="EOL">
</span>    <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_158"><span class="LIDENT">env</span></span> <span id="local_m_159"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="../model/paths.ml.html#module-Identifier"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_159"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span id="local_p_160"><span class="LIDENT">p</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_name_161"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_ident_162"><span class="LIDENT">ident</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="../model/paths.ml.html#module-Identifier.module-Mk.val-module_"><span class="UIDENT">Mk</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="#local_p_160"><span class="LIDENT">p</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Signature.type-t"><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_name_161"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-Module.type-t"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module"><span class="LIDENT">s_module</span></a> <span class="LPAREN">(</span><a href="#local_ident_162"><span class="LIDENT">ident</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Signature.type-t"><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <a href="#local_env_158"><span class="LIDENT">env</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_ident_162"><span class="LIDENT">ident</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_159"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_159"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-simplify_module_type"><span class="LIDENT">simplify_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_163"><span class="LIDENT">env</span></span> <span id="local_m_164"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="../model/paths.ml.html#module-Identifier"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_164"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span id="local_p_165"><span class="LIDENT">p</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_name_166"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_ident_167"><span class="LIDENT">ident</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="LPAREN">(</span><a href="../model/paths.ml.html#module-Identifier.module-Mk.val-module_type"><span class="UIDENT">Mk</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="#local_p_165"><span class="LIDENT">p</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Signature.type-t"><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_name_166"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-ModuleType.type-t"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module_type"><span class="LIDENT">s_module_type</span></a> <span class="LPAREN">(</span><a href="#local_ident_167"><span class="LIDENT">ident</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Signature.type-t"><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <a href="#local_env_163"><span class="LIDENT">env</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_ident_167"><span class="LIDENT">ident</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_164"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_164"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-simplify_type"><span class="LIDENT">simplify_type</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_168"><span class="LIDENT">env</span></span> <span id="local_m_169"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="../model/paths.ml.html#module-Identifier"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_169"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span id="local_p_170"><span class="LIDENT">p</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span id="local_name_171"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_ident_172"><span class="LIDENT">ident</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="../model/paths.ml.html#module-Identifier.module-Mk.val-type_"><span class="UIDENT">Mk</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <span class="LPAREN">(</span><span class="LPAREN">(</span><a href="#local_p_170"><span class="LIDENT">p</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Signature.type-t"><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_name_171"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-Type.type-t"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_datatype"><span class="LIDENT">s_datatype</span></a> <span class="LPAREN">(</span><a href="#local_ident_172"><span class="LIDENT">ident</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-Type.type-t"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <a href="#local_env_168"><span class="LIDENT">env</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_ident_172"><span class="LIDENT">ident</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_169"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_m_169"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-handle_apply"><span class="LIDENT">handle_apply</span></span> <span class="TILDE">~</span><span id="local_mark_substituted_173"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_174"><span class="LIDENT">env</span></span> <span id="local_func_path_175"><span class="LIDENT">func_path</span></span> <span id="local_arg_path_176"><span class="LIDENT">arg_path</span></span> <span id="local_m_177"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_find_functor_178"><span class="LIDENT">find_functor</span></span> <span id="local_mty_179"><span class="LIDENT">mty</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_mty_179"><span class="LIDENT">mty</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Functor</span> <span class="LPAREN">(</span><span class="UIDENT">Named</span> <span id="local_arg_180"><span class="LIDENT">arg</span></span><span class="COMMA">,</span> <span id="local_expr_181"><span class="LIDENT">expr</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_arg_180"><span class="LIDENT">arg</span></a><span class="DOT">.</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">FunctorParameter</span><span class="DOT">.</span><span class="LIDENT">id</span><span class="COMMA">,</span> <a href="#local_expr_181"><span class="LIDENT">expr</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Path</span> <span class="LBRACE">{</span> <span id="local_p_path_182"><span class="LIDENT">p_path</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span><span class="EOL">
</span>          <span class="LIDENT">resolve_module_type</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_174"><span class="LIDENT">env</span></a><span class="EOL">
</span>            <a href="#local_p_path_182"><span class="LIDENT">p_path</span></a><span class="EOL">
</span>        <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span id="local_mty'_183"><span class="LIDENT">mty'</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <a href="#local_find_functor_178"><span class="LIDENT">find_functor</span></a> <a href="#local_mty'_183"><span class="LIDENT">mty'</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ApplyNotFunctor</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LIDENT">module_type_expr_of_module</span> <a href="#local_env_174"><span class="LIDENT">env</span></a> <a href="#local_m_177"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_mty'_184"><span class="LIDENT">mty'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <a href="#local_find_functor_178"><span class="LIDENT">find_functor</span></a> <a href="#local_mty'_184"><span class="LIDENT">mty'</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_arg_id_185"><span class="LIDENT">arg_id</span></span><span class="COMMA">,</span> <span id="local_result_186"><span class="LIDENT">result</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_new_module_187"><span class="LIDENT">new_module</span></span> <span class="EQUAL">=</span> <span class="LBRACE">{</span> <a href="#local_m_177"><span class="LIDENT">m</span></a> <span class="WITH">with</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="EQUAL">=</span> <span class="UIDENT">ModuleType</span> <a href="#local_result_186"><span class="LIDENT">result</span></a> <span class="RBRACE">}</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_substitution_188"><span class="LIDENT">substitution</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="IF">if</span> <a href="#local_mark_substituted_173"><span class="LIDENT">mark_substituted</span></a> <span class="THEN">then</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_arg_path_176"><span class="LIDENT">arg_path</span></a> <span class="ELSE">else</span> <a href="#local_arg_path_176"><span class="LIDENT">arg_path</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_path_189"><span class="LIDENT">path</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><a href="#local_func_path_175"><span class="LIDENT">func_path</span></a><span class="COMMA">,</span> <a href="#local_arg_path_176"><span class="LIDENT">arg_path</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_subst_190"><span class="LIDENT">subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="subst.ml.html#val-add_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><a href="#local_arg_id_185"><span class="LIDENT">arg_id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_substitution_188"><span class="LIDENT">substitution</span></a><span class="RPAREN">)</span> <a href="#local_substitution_188"><span class="LIDENT">substitution</span></a> <a href="subst.ml.html#val-identity"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">identity</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_subst_191"><span class="LIDENT">subst</span></span> <span class="EQUAL">=</span> <a href="subst.ml.html#val-unresolve_opaque_paths"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">unresolve_opaque_paths</span></a> <a href="#local_subst_190"><span class="LIDENT">subst</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_path_189"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-module_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_subst_191"><span class="LIDENT">subst</span></a> <a href="#local_new_module_187"><span class="LIDENT">new_module</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-add_canonical_path"><span class="LIDENT">add_canonical_path</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_m_192"><span class="LIDENT">m</span></span> <span id="local_p_193"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_193"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_193"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_m_192"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">canonical</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_cp_194"><span class="LIDENT">cp</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><a href="#local_p_193"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_cp_194"><span class="LIDENT">cp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_193"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-add_canonical_path_mt"><span class="LIDENT">add_canonical_path_mt</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_m_195"><span class="LIDENT">m</span></span> <span id="local_p_196"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_196"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_196"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_m_195"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">canonical</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_cp_197"><span class="LIDENT">cp</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><a href="#local_p_196"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_cp_197"><span class="LIDENT">cp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_196"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-get_substituted_module_type"><span class="LIDENT">get_substituted_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_198"><span class="LIDENT">env</span></span> <span id="local_expr_199"><span class="LIDENT">expr</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_expr_199"><span class="LIDENT">expr</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Path</span> <span class="LBRACE">{</span> <span id="local_p_path_200"><span class="LIDENT">p_path</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="cpath.ml.html#val-is_module_type_substituted"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_module_type_substituted</span></a> <a href="#local_p_path_200"><span class="LIDENT">p_path</span></a> <span class="THEN">then</span><span class="EOL">
</span>        <span class="MATCH">match</span><span class="EOL">
</span>          <span class="LIDENT">resolve_module_type</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_198"><span class="LIDENT">env</span></a><span class="EOL">
</span>            <a href="#local_p_path_200"><span class="LIDENT">p_path</span></a><span class="EOL">
</span>        <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_resolved_path_201"><span class="LIDENT">resolved_path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_resolved_path_201"><span class="LIDENT">resolved_path</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>      <span class="ELSE">else</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-get_module_type_path_modifiers"><span class="LIDENT">get_module_type_path_modifiers</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">module_type_modifiers</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_202"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_203"><span class="LIDENT">add_canonical</span></span> <span id="local_m_204"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_alias_of_205"><span class="LIDENT">alias_of</span></span> <span id="local_expr_206"><span class="LIDENT">expr</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_expr_206"><span class="LIDENT">expr</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Path</span> <span id="local_alias_path_207"><span class="LIDENT">alias_path</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span><span class="EOL">
</span>          <span class="LIDENT">resolve_module_type</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="TILDE">~</span><a href="#local_add_canonical_203"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_202"><span class="LIDENT">env</span></a><span class="EOL">
</span>            <a href="#local_alias_path_207"><span class="LIDENT">alias_path</span></a><span class="DOT">.</span><span class="LIDENT">p_path</span><span class="EOL">
</span>        <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_resolved_alias_path_208"><span class="LIDENT">resolved_alias_path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_resolved_alias_path_208"><span class="LIDENT">resolved_alias_path</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="COMMENT">(* | Functor (_arg, res) -&gt; alias_of res *)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_204"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_e_209"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_alias_of_205"><span class="LIDENT">alias_of</span></a> <a href="#local_e_209"><span class="LIDENT">e</span></a> <span class="WITH">with</span> <span class="UIDENT">Some</span> <span id="local_e_210"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <a href="#local_e_210"><span class="LIDENT">e</span></a><span class="RPAREN">)</span> <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-process_module_type"><span class="LIDENT">process_module_type</span></span> <span id="local_env_211"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_212"><span class="LIDENT">add_canonical</span></span> <span id="local_m_213"><span class="LIDENT">m</span></span> <span id="local_p'_214"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-ModuleType"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="COMMENT">(* Loop through potential chains of module_type equalities, looking for substitutions *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_substpath_215"><span class="LIDENT">substpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="#local_m_213"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">expr</span> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">get_substituted_module_type</span> <a href="#local_env_211"><span class="LIDENT">env</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_p_216"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><a href="#local_p_216"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_p'_214"><span class="LIDENT">p'</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p'_217"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="MATCH">match</span> <a href="#local_substpath_215"><span class="LIDENT">substpath</span></a> <span class="WITH">with</span> <span class="UIDENT">Some</span> <span id="local_p_218"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_218"><span class="LIDENT">p</span></a> <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p'_214"><span class="LIDENT">p'</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p''_219"><span class="LIDENT">p''</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">get_module_type_path_modifiers</span> <a href="#local_env_211"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_212"><span class="LIDENT">add_canonical</span></a> <a href="#local_m_213"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span id="local_e_220"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><a href="#local_e_220"><span class="LIDENT">e</span></a><span class="COMMA">,</span> <a href="#local_p'_217"><span class="LIDENT">p'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p'_217"><span class="LIDENT">p'</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p'''_221"><span class="LIDENT">p'''</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="#local_add_canonical_212"><span class="LIDENT">add_canonical</span></a> <span class="THEN">then</span> <span class="LIDENT">add_canonical_path_mt</span> <a href="#local_m_213"><span class="LIDENT">m</span></a> <a href="#local_p''_219"><span class="LIDENT">p''</span></a> <span class="ELSE">else</span> <a href="#local_p''_219"><span class="LIDENT">p''</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_p'''_221"><span class="LIDENT">p'''</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-get_module_path_modifiers"><span class="LIDENT">get_module_path_modifiers</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <span class="UNDERSCORE">_</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_222"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_223"><span class="LIDENT">add_canonical</span></span> <span id="local_m_224"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_224"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_alias_path_225"><span class="LIDENT">alias_path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="TILDE">~</span><a href="#local_add_canonical_223"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_222"><span class="LIDENT">env</span></a> <a href="#local_alias_path_225"><span class="LIDENT">alias_path</span></a><span class="EOL">
</span>      <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_resolved_alias_path_226"><span class="LIDENT">resolved_alias_path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Aliased</span> <a href="#local_resolved_alias_path_226"><span class="LIDENT">resolved_alias_path</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span id="local_t_227"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">get_substituted_module_type</span> <a href="#local_env_222"><span class="LIDENT">env</span></a> <a href="#local_t_227"><span class="LIDENT">t</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_s_228"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstMT</span> <a href="#local_s_228"><span class="LIDENT">s</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-process_module_path"><span class="LIDENT">process_module_path</span></span> <span id="local_env_229"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_230"><span class="LIDENT">add_canonical</span></span> <span id="local_m_231"><span class="LIDENT">m</span></span> <span id="local_rp_232"><span class="LIDENT">rp</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_rp_233"><span class="LIDENT">rp</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="#local_m_231"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">hidden</span> <span class="THEN">then</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <a href="#local_rp_232"><span class="LIDENT">rp</span></a> <span class="ELSE">else</span> <a href="#local_rp_232"><span class="LIDENT">rp</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_rp'_234"><span class="LIDENT">rp'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">get_module_path_modifiers</span> <a href="#local_env_229"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_230"><span class="LIDENT">add_canonical</span></a> <a href="#local_m_231"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_rp_233"><span class="LIDENT">rp</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Aliased</span> <span id="local_rp'_235"><span class="LIDENT">rp'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_dest_hidden_236"><span class="LIDENT">dest_hidden</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <a href="cpath.ml.html#val-is_resolved_module_hidden"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_resolved_module_hidden</span></a> <span class="LABEL">~weak_canonical_test:</span><span class="TRUE">true</span> <a href="#local_rp'_235"><span class="LIDENT">rp'</span></a><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="IF">if</span> <a href="#local_dest_hidden_236"><span class="LIDENT">dest_hidden</span></a> <span class="THEN">then</span> <a href="#local_rp_233"><span class="LIDENT">rp</span></a><span class="EOL">
</span>        <span class="ELSE">else</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_unresolved_rp_237"><span class="LIDENT">unresolved_rp</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>            <span class="TRY">try</span> <a href="cpath.ml.html#val-unresolve_resolved_module_path"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">unresolve_resolved_module_path</span></a> <a href="#local_rp_233"><span class="LIDENT">rp</span></a> <span class="WITH">with</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_rp_233"><span class="LIDENT">rp</span></a><span class="EOL">
</span>          <span class="IN">in</span><span class="EOL">
</span>          <span class="COMMENT">(* Keep the resolved path for the canonical processing below in handle_canonical_module.strip_alias *)</span><span class="EOL">
</span>          <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_rp'_235"><span class="LIDENT">rp'</span></a><span class="COMMA">,</span> <a href="#local_unresolved_rp_237"><span class="LIDENT">unresolved_rp</span></a><span class="COMMA">,</span> <span class="UIDENT">Some</span> <a href="#local_rp_233"><span class="LIDENT">rp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstMT</span> <span id="local_p'_238"><span class="LIDENT">p'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p'_238"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_rp_233"><span class="LIDENT">rp</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p''_239"><span class="LIDENT">p''</span></span> <span class="EQUAL">=</span> <span class="IF">if</span> <a href="#local_add_canonical_230"><span class="LIDENT">add_canonical</span></a> <span class="THEN">then</span> <span class="LIDENT">add_canonical_path</span> <a href="#local_m_231"><span class="LIDENT">m</span></a> <a href="#local_rp'_234"><span class="LIDENT">rp'</span></a> <span class="ELSE">else</span> <a href="#local_rp'_234"><span class="LIDENT">rp'</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_p''_239"><span class="LIDENT">p''</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_module_lookup"><span class="LIDENT">handle_module_lookup</span></span> <span id="local_env_240"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_241"><span class="LIDENT">add_canonical</span></span> <span id="local_id_242"><span class="LIDENT">id</span></span> <span id="local_rparent_243"><span class="LIDENT">rparent</span></span> <span id="local_sg_244"><span class="LIDENT">sg</span></span> <span id="local_sub_245"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-careful_module_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_module_in_sig</span></a> <a href="#local_sg_244"><span class="LIDENT">sg</span></a> <a href="#local_id_242"><span class="LIDENT">id</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule</span> <span class="LPAREN">(</span><span id="local_name_246"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_m_247"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_rp'_248"><span class="LIDENT">rp'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">simplify_module</span> <a href="#local_env_240"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_rparent_243"><span class="LIDENT">rparent</span></a><span class="COMMA">,</span> <a href="#local_name_246"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m'_249"><span class="LIDENT">m'</span></span> <span class="EQUAL">=</span> <a href="subst.ml.html#val-module_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_sub_245"><span class="LIDENT">sub</span></a> <a href="#local_m_247"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_md'_250"><span class="LIDENT">md'</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m'_249"><span class="LIDENT">m'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LIDENT">process_module_path</span> <a href="#local_env_240"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_241"><span class="LIDENT">add_canonical</span></a> <a href="#local_m'_249"><span class="LIDENT">m'</span></a> <a href="#local_rp'_248"><span class="LIDENT">rp'</span></a><span class="COMMA">,</span> <a href="#local_md'_250"><span class="LIDENT">md'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule_removed</span> <span id="local_p_251"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_240"><span class="LIDENT">env</span></a> <a href="#local_p_251"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_252"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p_251"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_m_252"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_module_type_lookup"><span class="LIDENT">handle_module_type_lookup</span></span> <span id="local_env_253"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_254"><span class="LIDENT">add_canonical</span></span> <span id="local_id_255"><span class="LIDENT">id</span></span> <span id="local_p_256"><span class="LIDENT">p</span></span> <span id="local_sg_257"><span class="LIDENT">sg</span></span> <span id="local_sub_258"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <a href="find.ml.html#val-module_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">module_type_in_sig</span></a> <a href="#local_sg_257"><span class="LIDENT">sg</span></a> <a href="#local_id_255"><span class="LIDENT">id</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModuleType</span> <span class="LPAREN">(</span><span id="local_name_259"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_mt_260"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_mt_261"><span class="LIDENT">mt</span></span> <span class="EQUAL">=</span> <a href="subst.ml.html#val-module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_sub_258"><span class="LIDENT">sub</span></a> <a href="#local_mt_260"><span class="LIDENT">mt</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p'_262"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">simplify_module_type</span> <a href="#local_env_253"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_p_256"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_259"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_p''_263"><span class="LIDENT">p''</span></span> <span class="EQUAL">=</span> <span class="LIDENT">process_module_type</span> <a href="#local_env_253"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_254"><span class="LIDENT">add_canonical</span></a> <a href="#local_mt_261"><span class="LIDENT">mt</span></a> <a href="#local_p'_262"><span class="LIDENT">p'</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_p''_263"><span class="LIDENT">p''</span></a><span class="COMMA">,</span> <a href="#local_mt_261"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_type_lookup"><span class="LIDENT">handle_type_lookup</span></span> <span id="local_env_264"><span class="LIDENT">env</span></span> <span id="local_id_265"><span class="LIDENT">id</span></span> <span id="local_p_266"><span class="LIDENT">p</span></span> <span id="local_sg_267"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-careful_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_type_in_sig</span></a> <a href="#local_sg_267"><span class="LIDENT">sg</span></a> <a href="#local_id_265"><span class="LIDENT">id</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_269"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_268"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_p_266"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_269"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_268"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_271"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_270"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><a href="#local_p_266"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_271"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_270"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_273"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_272"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LIDENT">simplify_type</span> <a href="#local_env_264"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_p_266"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_273"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_272"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_275"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_274"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_p_266"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_275"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_274"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_value_lookup"><span class="LIDENT">handle_value_lookup</span></span> <span id="local__env_276"><span class="LIDENT">_env</span></span> <span id="local_id_277"><span class="LIDENT">id</span></span> <span id="local_p_278"><span class="LIDENT">p</span></span> <span id="local_sg_279"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-value_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">value_in_sig</span></a> <a href="#local_sg_279"><span class="LIDENT">sg</span></a> <a href="#local_id_277"><span class="LIDENT">id</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><span id="local_name_281"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_v_280"><span class="LIDENT">v</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><a href="#local_p_278"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_281"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_v_280"><span class="LIDENT">v</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_class_type_lookup"><span class="LIDENT">handle_class_type_lookup</span></span> <span id="local_id_282"><span class="LIDENT">id</span></span> <span id="local_p_283"><span class="LIDENT">p</span></span> <span id="local_sg_284"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-careful_class_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_class_in_sig</span></a> <a href="#local_sg_284"><span class="LIDENT">sg</span></a> <a href="#local_id_282"><span class="LIDENT">id</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_286"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_285"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_p_283"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_286"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_285"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_288"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_t_287"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><a href="#local_p_283"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_288"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_287"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local__name_290"><span class="LIDENT">_name</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local__t_289"><span class="LIDENT">_t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class_replaced</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_module_gpath"><span class="LIDENT">lookup_module_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_292"><span class="LIDENT">env</span></span> <span id="local_path_293"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_293"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span id="local_i_294"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failure</span> <a href="#local_i_294"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module"><span class="LIDENT">s_module</span></a><span class="RPAREN">)</span> <a href="#local_i_294"><span class="LIDENT">i</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_295"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_m_295"><span class="LIDENT">m</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_functor_path_296"><span class="LIDENT">functor_path</span></span><span class="COMMA">,</span> <span id="local_argument_path_297"><span class="LIDENT">argument_path</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_functor_path_296"><span class="LIDENT">functor_path</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_functor_module_298"><span class="LIDENT">functor_module</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_functor_module_299"><span class="LIDENT">functor_module</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_functor_module_298"><span class="LIDENT">functor_module</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">handle_apply</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_functor_path_296"><span class="LIDENT">functor_path</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_argument_path_297"><span class="LIDENT">argument_path</span></a><span class="RPAREN">)</span> <a href="#local_functor_module_299"><span class="LIDENT">functor_module</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_300"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_expr</span> <a href="#local_e_300"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_301"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_301"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_302"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_303"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_find_in_sg_304"><span class="LIDENT">find_in_sg</span></span> <span id="local_sg_305"><span class="LIDENT">sg</span></span> <span id="local_sub_306"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="find.ml.html#val-careful_module_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_module_in_sig</span></a> <a href="#local_sg_305"><span class="LIDENT">sg</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_303"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_307"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <span class="LPAREN">(</span><a href="subst.ml.html#val-module_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_sub_306"><span class="LIDENT">sub</span></a> <a href="#local_m_307"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule_removed</span> <span id="local_p_308"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_p_308"><span class="LIDENT">p</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_parent_302"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_309"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_309"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_310"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_311"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_in_sg_304"><span class="LIDENT">find_in_sg</span></a> <a href="#local_sg_310"><span class="LIDENT">sg</span></a> <a href="#local_sub_311"><span class="LIDENT">sub</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p_312"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_p_312"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_p_313"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_p_313"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_p_314"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_p_314"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_315"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_p_315"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_316"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_291"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_292"><span class="LIDENT">env</span></a> <a href="#local_m_316"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_module"><span class="LIDENT">lookup_module</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="LABEL">~mark_substituted:</span><span id="local_m_317"><span class="LIDENT">m</span></span> <span id="local_env'_318"><span class="LIDENT">env'</span></span> <span id="local_path'_319"><span class="LIDENT">path'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lookup_320"><span class="LIDENT">lookup</span></span> <span id="local_env_321"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></span><span class="COMMA">,</span> <span class="LPAREN">(</span><span id="local_path_323"><span class="LIDENT">path</span></span> <span class="COLON">:</span> <span class="UIDENT">ExpansionOfModuleMemo</span><span class="DOT">.</span><span class="UIDENT">M</span><span class="DOT">.</span><span class="LIDENT">key</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_323"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span id="local_lpath_324"><span class="LIDENT">lpath</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><a href="#local_env_321"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_lpath_324"><span class="LIDENT">lpath</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_325"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_p_325"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_326"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_x_326"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_functor_path_327"><span class="LIDENT">functor_path</span></span><span class="COMMA">,</span> <span id="local_argument_path_328"><span class="LIDENT">argument_path</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_functor_path_327"><span class="LIDENT">functor_path</span></a><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_functor_module_329"><span class="LIDENT">functor_module</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_functor_module_330"><span class="LIDENT">functor_module</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_functor_module_329"><span class="LIDENT">functor_module</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">handle_apply</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_functor_path_327"><span class="LIDENT">functor_path</span></a> <a href="#local_argument_path_328"><span class="LIDENT">argument_path</span></a><span class="EOL">
</span>          <a href="#local_functor_module_330"><span class="LIDENT">functor_module</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_331"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_expr</span> <a href="#local_e_331"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_332"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_332"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_333"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_334"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_find_in_sg_335"><span class="LIDENT">find_in_sg</span></span> <span id="local_sg_336"><span class="LIDENT">sg</span></span> <span id="local_sub_337"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="find.ml.html#val-careful_module_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_module_in_sig</span></a> <a href="#local_sg_336"><span class="LIDENT">sg</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_334"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_338"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <span class="LPAREN">(</span><a href="subst.ml.html#val-module_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_sub_337"><span class="LIDENT">sub</span></a> <a href="#local_m_338"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule_removed</span> <span id="local_p_339"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_p_339"><span class="LIDENT">p</span></a><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_parent_333"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_340"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_340"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_341"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_342"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_in_sg_335"><span class="LIDENT">find_in_sg</span></a> <a href="#local_sg_341"><span class="LIDENT">sg</span></a> <a href="#local_sub_342"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_cs_343"><span class="LIDENT">cs</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_cs_343"><span class="LIDENT">cs</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_r_344"><span class="LIDENT">r</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_r_344"><span class="LIDENT">r</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_345"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <a href="#local_e_345"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_p_346"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_p_346"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_p_347"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_p_347"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_348"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_p_348"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_349"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_322"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_321"><span class="LIDENT">env</span></a> <a href="#local_m_349"><span class="LIDENT">m</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">LookupModuleMemo</span><span class="DOT">.</span><span class="LIDENT">memoize</span> <a href="#local_lookup_320"><span class="LIDENT">lookup</span></a> <a href="#local_env'_318"><span class="LIDENT">env'</span></a> <span class="LPAREN">(</span><a href="#local_m_317"><span class="LIDENT">m</span></a><span class="COMMA">,</span> <a href="#local_path'_319"><span class="LIDENT">path'</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_module_type_gpath"><span class="LIDENT">lookup_module_type_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-ModuleType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_350"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_351"><span class="LIDENT">env</span></span> <span id="local_path_352"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_352"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span id="local_i_353"><span class="LIDENT">i</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureMT</span> <a href="#local_i_353"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module_type"><span class="LIDENT">s_module_type</span></a><span class="RPAREN">)</span> <a href="#local_i_353"><span class="LIDENT">i</span></a> <a href="#local_env_351"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_354"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_mt_354"><span class="LIDENT">mt</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_s_355"><span class="LIDENT">s</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_s_356"><span class="LIDENT">s</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module_type_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_350"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_351"><span class="LIDENT">env</span></a> <a href="#local_s_356"><span class="LIDENT">s</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_357"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_358"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_find_in_sg_359"><span class="LIDENT">find_in_sg</span></span> <span id="local_sg_360"><span class="LIDENT">sg</span></span> <span id="local_sub_361"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="find.ml.html#val-module_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">module_type_in_sig</span></a> <a href="#local_sg_360"><span class="LIDENT">sg</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_358"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_362"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="subst.ml.html#val-module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_sub_361"><span class="LIDENT">sub</span></a> <a href="#local_mt_362"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_350"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_351"><span class="LIDENT">env</span></a> <a href="#local_parent_357"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_363"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_363"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_364"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_365"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_in_sg_359"><span class="LIDENT">find_in_sg</span></a> <a href="#local_sg_364"><span class="LIDENT">sg</span></a> <a href="#local_sub_365"><span class="LIDENT">sub</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_366"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module_type_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_350"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_351"><span class="LIDENT">env</span></a> <a href="#local_mt_366"><span class="LIDENT">mt</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span id="local_m_367"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_type_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_350"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_351"><span class="LIDENT">env</span></a> <a href="#local_m_367"><span class="LIDENT">m</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_module_type"><span class="LIDENT">lookup_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_368"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_369"><span class="LIDENT">env</span></span> <span id="local_path_370"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lookup_371"><span class="LIDENT">lookup</span></span> <span id="local_env_372"><span class="LIDENT">env</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_370"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span id="local_l_373"><span class="LIDENT">l</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalMT</span> <span class="LPAREN">(</span><a href="#local_env_372"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_l_373"><span class="LIDENT">l</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_374"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_type_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_368"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_372"><span class="LIDENT">env</span></a> <a href="#local_p_374"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_375"><span class="LIDENT">s</span></span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_s_376"><span class="LIDENT">s</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_s_377"><span class="LIDENT">s</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_368"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_372"><span class="LIDENT">env</span></a> <a href="#local_s_377"><span class="LIDENT">s</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_378"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_379"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_find_in_sg_380"><span class="LIDENT">find_in_sg</span></span> <span id="local_sg_381"><span class="LIDENT">sg</span></span> <span id="local_sub_382"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="find.ml.html#val-module_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">module_type_in_sig</span></a> <a href="#local_sg_381"><span class="LIDENT">sg</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_379"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_383"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="subst.ml.html#val-module_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_sub_382"><span class="LIDENT">sub</span></a> <a href="#local_mt_383"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_372"><span class="LIDENT">env</span></a> <a href="#local_parent_378"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_384"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_384"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_385"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_386"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_find_in_sg_380"><span class="LIDENT">find_in_sg</span></a> <a href="#local_sg_385"><span class="LIDENT">sg</span></a> <a href="#local_sub_386"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_387"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_368"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_372"><span class="LIDENT">env</span></a> <a href="#local_mt_387"><span class="LIDENT">mt</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span id="local_m_388"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_368"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_372"><span class="LIDENT">env</span></a> <a href="#local_m_388"><span class="LIDENT">m</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_lookup_371"><span class="LIDENT">lookup</span></a> <a href="#local_env_369"><span class="LIDENT">env</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_parent"><span class="LIDENT">lookup_parent</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Substitution</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span><span class="EOL">
</span>      <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="OF">of</span> <a href="errors.ml.html#module-Tools_error.type-parent_lookup_error"><span class="LIDENT">parent_lookup_error</span></a> <span class="RBRACKET">]</span> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="LABEL">~mark_substituted:</span><span id="local_m_389"><span class="LIDENT">m</span></span> <span id="local_env'_390"><span class="LIDENT">env'</span></span> <span id="local_parent'_391"><span class="LIDENT">parent'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lookup_392"><span class="LIDENT">lookup</span></span> <span id="local_env_393"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_mark_substituted_394"><span class="LIDENT">mark_substituted</span></span><span class="COMMA">,</span> <span id="local_parent_395"><span class="LIDENT">parent</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_parent_395"><span class="LIDENT">parent</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span id="local_p_396"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_394"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_393"><span class="LIDENT">env</span></a> <a href="#local_p_396"><span class="LIDENT">p</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_397"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_397"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_398"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_m_399"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_398"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">expansion_of_module</span> <a href="#local_env_393"><span class="LIDENT">env</span></a> <a href="#local_m_399"><span class="LIDENT">m</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_400"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_sig</span> <a href="#local_e_400"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_401"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_sg_401"><span class="LIDENT">sg</span></a><span class="COMMA">,</span> <span class="LIDENT">prefix_substitution</span> <a href="#local_parent_395"><span class="LIDENT">parent</span></a> <a href="#local_sg_401"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span id="local_p_402"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_394"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_393"><span class="LIDENT">env</span></a> <a href="#local_p_402"><span class="LIDENT">p</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_403"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module_type</span> <a href="#local_e_403"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_mt_404"><span class="LIDENT">mt</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">expansion_of_module_type</span> <a href="#local_env_393"><span class="LIDENT">env</span></a> <a href="#local_mt_404"><span class="LIDENT">mt</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_405"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_sig</span> <a href="#local_e_405"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_406"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_sg_406"><span class="LIDENT">sg</span></a><span class="COMMA">,</span> <span class="LIDENT">prefix_substitution</span> <a href="#local_parent_395"><span class="LIDENT">parent</span></a> <a href="#local_sg_406"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FragmentRoot</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="env.ml.html#val-lookup_fragment_root"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_fragment_root</span></a> <a href="#local_env_393"><span class="LIDENT">env</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Fragment_root</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_sg_407"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_sg_407"><span class="LIDENT">sg</span></a><span class="COMMA">,</span> <span class="LIDENT">prefix_substitution</span> <a href="#local_parent_395"><span class="LIDENT">parent</span></a> <a href="#local_sg_407"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">LookupParentMemo</span><span class="DOT">.</span><span class="LIDENT">memoize</span> <a href="#local_lookup_392"><span class="LIDENT">lookup</span></a> <a href="#local_env'_390"><span class="LIDENT">env'</span></a> <span class="LPAREN">(</span><a href="#local_m_389"><span class="LIDENT">m</span></a><span class="COMMA">,</span> <a href="#local_parent'_391"><span class="LIDENT">parent'</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_parent_gpath"><span class="LIDENT">lookup_parent_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Substitution</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span><span class="EOL">
</span>      <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="OF">of</span> <a href="errors.ml.html#module-Tools_error.type-parent_lookup_error"><span class="LIDENT">parent_lookup_error</span></a> <span class="RBRACKET">]</span> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_408"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_409"><span class="LIDENT">env</span></span> <span id="local_parent_410"><span class="LIDENT">parent</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LIDENT">lookup_module_gpath</span> <span class="TILDE">~</span><a href="#local_mark_substituted_408"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_409"><span class="LIDENT">env</span></a> <a href="#local_parent_410"><span class="LIDENT">parent</span></a><span class="EOL">
</span>  <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_411"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_411"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_412"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_m_413"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_412"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LIDENT">expansion_of_module</span> <a href="#local_env_409"><span class="LIDENT">env</span></a> <a href="#local_m_413"><span class="LIDENT">m</span></a><span class="EOL">
</span>  <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_414"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_sig</span> <a href="#local_e_414"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_415"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_sg_415"><span class="LIDENT">sg</span></a><span class="COMMA">,</span> <span class="LIDENT">prefix_substitution</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_parent_410"><span class="LIDENT">parent</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_sg_415"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_type_gpath"><span class="LIDENT">lookup_type_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Type.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="find.ml.html#type-careful_type"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_type</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_416"><span class="LIDENT">env</span></span> <span id="local_p_417"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_do_type_418"><span class="LIDENT">do_type</span></span> <span id="local_p_419"><span class="LIDENT">p</span></span> <span id="local_name_420"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">lookup_parent_gpath</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_416"><span class="LIDENT">env</span></a> <a href="#local_p_419"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_421"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_421"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_422"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_423"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="find.ml.html#val-careful_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_type_in_sig</span></a> <a href="#local_sg_422"><span class="LIDENT">sg</span></a> <a href="#local_name_420"><span class="LIDENT">name</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_424"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_425"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_424"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_423"><span class="LIDENT">sub</span></a> <a href="#local_c_425"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_426"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_427"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_426"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_423"><span class="LIDENT">sub</span></a> <a href="#local_ct_427"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_428"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_429"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_428"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_423"><span class="LIDENT">sub</span></a> <a href="#local_t_429"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_430"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_431"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_432"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_430"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_423"><span class="LIDENT">sub</span></a> <a href="#local_texpr_431"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_432"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_433"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_417"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CoreType</span> <span id="local_name_434"><span class="LIDENT">name</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* CoreTypes aren't put into the environment, so they can't be handled
           by the next clause. They are already resolved. *)</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span><span class="EOL">
</span>            <span class="LPAREN">(</span> <a href="#local_name_434"><span class="LIDENT">name</span></a><span class="COMMA">,</span><span class="EOL">
</span>              <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><span class="EOL">
</span>                <a href="component.ml.html#module-Of_Lang.val-type_decl"><span class="LIDENT">type_decl</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                  <span class="LPAREN">(</span><a href="../model/predefined.ml.html#val-type_of_core_type"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Predefined</span><span class="DOT">.</span><span class="LIDENT">type_of_core_type</span></a><span class="EOL">
</span>                     <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_name_434"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_435"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureT</span> <a href="#local_i_435"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_datatype"><span class="LIDENT">s_datatype</span></a><span class="RPAREN">)</span> <a href="#local_i_435"><span class="LIDENT">i</span></a> <a href="#local_env_416"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CoreType</span> <span id="local_name_436"><span class="LIDENT">name</span></span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_437"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_438"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_437"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_438"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_439"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureT</span> <a href="#local_i_439"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_class"><span class="LIDENT">s_class</span></a><span class="RPAREN">)</span> <a href="#local_i_439"><span class="LIDENT">i</span></a> <a href="#local_env_416"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_440"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_441"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_440"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_441"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_442"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureT</span> <a href="#local_i_442"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_class_type"><span class="LIDENT">s_class_type</span></a><span class="RPAREN">)</span> <a href="#local_i_442"><span class="LIDENT">i</span></a> <a href="#local_env_416"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_443"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_444"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_443"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_444"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalType</span> <span class="LPAREN">(</span><span id="local_t1_445"><span class="LIDENT">t1</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_type_gpath</span> <a href="#local_env_416"><span class="LIDENT">env</span></a> <a href="#local_t1_445"><span class="LIDENT">t1</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_p_446"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_447"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_418"><span class="LIDENT">do_type</span></a> <a href="#local_p_446"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_447"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_448"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_449"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_418"><span class="LIDENT">do_type</span></a> <a href="#local_p_448"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_449"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_450"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_451"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_418"><span class="LIDENT">do_type</span></a> <a href="#local_p_450"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_451"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_res_433"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_value_gpath"><span class="LIDENT">lookup_value_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Value.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Value</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="find.ml.html#type-value"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">value</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_452"><span class="LIDENT">env</span></span> <span id="local_p_453"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_do_value_454"><span class="LIDENT">do_value</span></span> <span id="local_p_455"><span class="LIDENT">p</span></span> <span id="local_name_456"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">lookup_parent_gpath</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_452"><span class="LIDENT">env</span></a> <a href="#local_p_455"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_457"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_457"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_458"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_459"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="find.ml.html#val-value_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">value_in_sig</span></a> <a href="#local_sg_458"><span class="LIDENT">sg</span></a> <a href="#local_name_456"><span class="LIDENT">name</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><span id="local_name_460"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_461"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><a href="#local_name_460"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-value"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <a href="#local_sub_459"><span class="LIDENT">sub</span></a> <a href="#local_t_461"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_462"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_453"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_463"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureV</span> <a href="#local_i_463"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_value"><span class="LIDENT">s_value</span></a><span class="RPAREN">)</span> <a href="#local_i_463"><span class="LIDENT">i</span></a> <a href="#local_env_452"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_464"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_465"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><a href="#local_name_464"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_465"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_p_466"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_467"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_value_454"><span class="LIDENT">do_value</span></a> <a href="#local_p_466"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ValueName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_467"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_res_462"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_class_type_gpath"><span class="LIDENT">lookup_class_type_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-ClassType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">ClassType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="find.ml.html#type-careful_class"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_class</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_468"><span class="LIDENT">env</span></span> <span id="local_p_469"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_do_type_470"><span class="LIDENT">do_type</span></span> <span id="local_p_471"><span class="LIDENT">p</span></span> <span id="local_name_472"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">lookup_parent_gpath</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_468"><span class="LIDENT">env</span></a> <a href="#local_p_471"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_473"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_473"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_474"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_475"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="find.ml.html#val-careful_class_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_class_in_sig</span></a> <a href="#local_sg_474"><span class="LIDENT">sg</span></a> <a href="#local_name_472"><span class="LIDENT">name</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_476"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_477"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_476"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_475"><span class="LIDENT">sub</span></a> <a href="#local_c_477"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_478"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_479"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_478"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_475"><span class="LIDENT">sub</span></a> <a href="#local_ct_479"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_480"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_481"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_482"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_480"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_475"><span class="LIDENT">sub</span></a> <a href="#local_texpr_481"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_482"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_483"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_469"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_484"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureT</span> <a href="#local_i_484"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_class"><span class="LIDENT">s_class</span></a><span class="RPAREN">)</span> <a href="#local_i_484"><span class="LIDENT">i</span></a> <a href="#local_env_468"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_485"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_486"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_485"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_486"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_487"><span class="LIDENT">i</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureT</span> <a href="#local_i_487"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_class_type"><span class="LIDENT">s_class_type</span></a><span class="RPAREN">)</span> <a href="#local_i_487"><span class="LIDENT">i</span></a> <a href="#local_env_468"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_name_488"><span class="LIDENT">name</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="COMMA">,</span> <span id="local_t_489"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_488"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_t_489"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_490"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_491"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_470"><span class="LIDENT">do_type</span></a> <a href="#local_p_490"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_491"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_492"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_493"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_470"><span class="LIDENT">do_type</span></a> <a href="#local_p_492"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_493"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_res_483"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_type"><span class="LIDENT">lookup_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="find.ml.html#type-careful_type"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_type</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_494"><span class="LIDENT">env</span></span> <span id="local_p_495"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_do_type_496"><span class="LIDENT">do_type</span></span> <span id="local_p_497"><span class="LIDENT">p</span></span> <span id="local_name_498"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_494"><span class="LIDENT">env</span></a> <a href="#local_p_497"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_499"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_499"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_500"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_501"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">handle_type_lookup</span> <a href="#local_env_494"><span class="LIDENT">env</span></a> <a href="#local_name_498"><span class="LIDENT">name</span></a> <a href="#local_p_497"><span class="LIDENT">p</span></a> <a href="#local_sg_500"><span class="LIDENT">sg</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_t'_502"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_t_503"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_t'_502"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_504"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_505"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_504"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_501"><span class="LIDENT">sub</span></a> <a href="#local_c_505"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_506"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_507"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_506"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_501"><span class="LIDENT">sub</span></a> <a href="#local_ct_507"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_508"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_509"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_508"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_501"><span class="LIDENT">sub</span></a> <a href="#local_t_509"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_510"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_511"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_512"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_510"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_501"><span class="LIDENT">sub</span></a> <a href="#local_texpr_511"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_512"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <span class="UIDENT">Ok</span> <a href="#local_t_503"><span class="LIDENT">t</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_513"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_495"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span id="local_id_514"><span class="LIDENT">id</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalType</span> <span class="LPAREN">(</span><a href="#local_env_494"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_id_514"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_515"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_type_gpath</span> <a href="#local_env_494"><span class="LIDENT">env</span></a> <a href="#local_p_515"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalType</span> <span class="LPAREN">(</span><span id="local_t1_516"><span class="LIDENT">t1</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_type</span> <a href="#local_env_494"><span class="LIDENT">env</span></a> <a href="#local_t1_516"><span class="LIDENT">t1</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_517"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_type</span> <a href="#local_env_494"><span class="LIDENT">env</span></a> <a href="#local_s_517"><span class="LIDENT">s</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_p_518"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_519"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_496"><span class="LIDENT">do_type</span></a> <a href="#local_p_518"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_519"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_520"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_521"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_496"><span class="LIDENT">do_type</span></a> <a href="#local_p_520"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_521"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_522"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_523"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_496"><span class="LIDENT">do_type</span></a> <a href="#local_p_522"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_523"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_res_513"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_value"><span class="LIDENT">lookup_value</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">value</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_524"><span class="LIDENT">env</span></span> <span id="local_p_525"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_525"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_p_526"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_527"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_524"><span class="LIDENT">env</span></a> <a href="#local_p_526"><span class="LIDENT">p</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_528"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_528"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_529"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_530"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">handle_value_lookup</span> <a href="#local_env_524"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ValueName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_527"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <a href="#local_p_526"><span class="LIDENT">p</span></a> <a href="#local_sg_529"><span class="LIDENT">sg</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><span id="local_name_531"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_532"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><a href="#local_name_531"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-value"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <a href="#local_sub_530"><span class="LIDENT">sub</span></a> <a href="#local_c_532"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_533"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_value_gpath</span> <a href="#local_env_524"><span class="LIDENT">env</span></a> <a href="#local_p_533"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-lookup_class_type"><span class="LIDENT">lookup_class_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">class_type</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="find.ml.html#type-careful_class"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_class</span></a><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_534"><span class="LIDENT">env</span></span> <span id="local_p_535"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_do_type_536"><span class="LIDENT">do_type</span></span> <span id="local_p_537"><span class="LIDENT">p</span></span> <span id="local_name_538"><span class="LIDENT">name</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_534"><span class="LIDENT">env</span></a> <a href="#local_p_537"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_539"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_539"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_sg_540"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_sub_541"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">handle_class_type_lookup</span> <a href="#local_name_538"><span class="LIDENT">name</span></a> <a href="#local_p_537"><span class="LIDENT">p</span></a> <a href="#local_sg_540"><span class="LIDENT">sg</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_t'_542"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_t_543"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>      <span class="MATCH">match</span> <a href="#local_t'_542"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_544"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_545"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_544"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_541"><span class="LIDENT">sub</span></a> <a href="#local_c_545"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_546"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_547"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_546"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_541"><span class="LIDENT">sub</span></a> <a href="#local_ct_547"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_548"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_549"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_550"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_548"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_541"><span class="LIDENT">sub</span></a> <a href="#local_texpr_549"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_550"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="IN">in</span><span class="EOL">
</span>    <span class="UIDENT">Ok</span> <a href="#local_t_543"><span class="LIDENT">t</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_551"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_535"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span id="local_id_552"><span class="LIDENT">id</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalType</span> <span class="LPAREN">(</span><a href="#local_env_534"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <span class="LPAREN">(</span><a href="#local_id_552"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_type</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_553"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_class_type_gpath</span> <a href="#local_env_534"><span class="LIDENT">env</span></a> <a href="#local_p_553"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_554"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_class_type</span> <a href="#local_env_534"><span class="LIDENT">env</span></a> <a href="#local_s_554"><span class="LIDENT">s</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_555"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_556"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_536"><span class="LIDENT">do_type</span></a> <a href="#local_p_555"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_556"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_557"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_id_558"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_do_type_536"><span class="LIDENT">do_type</span></a> <a href="#local_p_557"><span class="LIDENT">p</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_558"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_res_551"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_and_lookup_parent"><span class="LIDENT">resolve_and_lookup_parent</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.type-result"><span class="LPAREN">(</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Substitution</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span><span class="EOL">
</span>      <span class="LBRACKET">[</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="OF">of</span> <a href="errors.ml.html#module-Tools_error.type-parent_lookup_error"><span class="LIDENT">parent_lookup_error</span></a> <span class="RBRACKET">]</span> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LIDENT">result</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_559"><span class="LIDENT">mark_substituted</span></span> <span class="TILDE">~</span><span id="local_add_canonical_560"><span class="LIDENT">add_canonical</span></span> <span id="local_env_561"><span class="LIDENT">env</span></span> <span id="local_parent_562"><span class="LIDENT">parent</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_559"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_560"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_561"><span class="LIDENT">env</span></a> <a href="#local_parent_562"><span class="LIDENT">parent</span></a><span class="EOL">
</span>  <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_563"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_563"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_564"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LIDENT">lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_559"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_561"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_parent_564"><span class="LIDENT">parent</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_565"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_566"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_parent_564"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_parent_sig_565"><span class="LIDENT">parent_sig</span></a><span class="COMMA">,</span> <a href="#local_sub_566"><span class="LIDENT">sub</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_module"><span class="LIDENT">resolve_module</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">resolve_module_result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_567"><span class="LIDENT">mark_substituted</span></span> <span class="TILDE">~</span><span id="local_add_canonical_568"><span class="LIDENT">add_canonical</span></span> <span id="local_env'_569"><span class="LIDENT">env'</span></span> <span id="local_path_570"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_id_571"><span class="LIDENT">id</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="#local_mark_substituted_567"><span class="LIDENT">mark_substituted</span></a><span class="COMMA">,</span> <a href="#local_add_canonical_568"><span class="LIDENT">add_canonical</span></a><span class="COMMA">,</span> <a href="#local_path_570"><span class="LIDENT">path</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_resolve_572"><span class="LIDENT">resolve</span></span> <span id="local_env_573"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></span><span class="COMMA">,</span> <span id="local_add_canonical_575"><span class="LIDENT">add_canonical</span></span><span class="COMMA">,</span> <span id="local_p_576"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_576"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_577"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_578"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_and_lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_parent_577"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_579"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_579"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_580"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_parent_sig_581"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_582"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">handle_module_lookup</span> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_id_578"><span class="LIDENT">id</span></a> <a href="#local_parent_580"><span class="LIDENT">parent</span></a> <a href="#local_parent_sig_581"><span class="LIDENT">parent_sig</span></a> <a href="#local_sub_582"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_583"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_584"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_parent_583"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_585"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_585"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_586"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_587"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">handle_module_lookup</span> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_584"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <a href="#local_parent_583"><span class="LIDENT">parent</span></a><span class="EOL">
</span>          <a href="#local_parent_sig_586"><span class="LIDENT">parent_sig</span></a> <a href="#local_sub_587"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_m1_588"><span class="LIDENT">m1</span></span><span class="COMMA">,</span> <span id="local_m2_589"><span class="LIDENT">m2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_func_590"><span class="LIDENT">func</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_m1_588"><span class="LIDENT">m1</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_arg_591"><span class="LIDENT">arg</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_m2_589"><span class="LIDENT">m2</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="MATCH">match</span> <span class="LPAREN">(</span><a href="#local_func_590"><span class="LIDENT">func</span></a><span class="COMMA">,</span> <a href="#local_arg_591"><span class="LIDENT">arg</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_func_path'_592"><span class="LIDENT">func_path'</span></span><span class="COMMA">,</span> <span id="local_m_593"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_arg_path'_594"><span class="LIDENT">arg_path'</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_m_595"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_593"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>            <span class="MATCH">match</span> <span class="LIDENT">handle_apply</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_func_path'_592"><span class="LIDENT">func_path'</span></a> <a href="#local_arg_path'_594"><span class="LIDENT">arg_path'</span></a> <a href="#local_m_595"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_p_596"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_597"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p_596"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_597"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_598"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_expr</span> <a href="#local_e_598"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_599"><span class="LIDENT">e</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <a href="#local_e_599"><span class="LIDENT">e</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UIDENT">Error</span> <span id="local_e_600"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <a href="#local_e_600"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_i_601"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span id="local_hidden_602"><span class="LIDENT">hidden</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failure</span> <a href="#local_i_601"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module"><span class="LIDENT">s_module</span></a><span class="RPAREN">)</span> <a href="#local_i_601"><span class="LIDENT">i</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_603"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_rp_604"><span class="LIDENT">rp</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_hidden_602"><span class="LIDENT">hidden</span></a> <span class="THEN">then</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_601"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_601"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span><span class="EOL">
</span>          <span class="LPAREN">(</span> <span class="LIDENT">process_module_path</span> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_603"><span class="LIDENT">m</span></a><span class="RPAREN">)</span> <a href="#local_rp_604"><span class="LIDENT">rp</span></a><span class="COMMA">,</span><span class="EOL">
</span>            <a href="#local_m_603"><span class="LIDENT">m</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><span id="local_p_605"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><a href="#local_env_573"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_p_605"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_606"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_r_606"><span class="LIDENT">r</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_607"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_r_606"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="#local_m_607"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_608"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <a href="#local_s_608"><span class="LIDENT">s</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_609"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_609"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_610"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_611"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_p_610"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_m_611"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span id="local_r_612"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="env.ml.html#val-lookup_root_module"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">lookup_root_module</span></a> <a href="#local_r_612"><span class="LIDENT">r</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Env</span><span class="DOT">.</span><span class="UIDENT">Resolved</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_p_613"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_614"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_p_615"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span><span class="EOL">
</span>                <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><a href="#local_p_613"><span class="LIDENT">p</span></a> <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Identifier.module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Identifier</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_p_616"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">process_module_path</span> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_m_614"><span class="LIDENT">m</span></a> <a href="#local_p_615"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>            <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p_616"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_614"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UIDENT">Env</span><span class="DOT">.</span><span class="UIDENT">Forward</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_sig</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failure_root</span> <a href="#local_r_612"><span class="LIDENT">r</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Forward</span> <span id="local_f_617"><span class="LIDENT">f</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_574"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_575"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_573"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <a href="#local_f_617"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_618"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_618"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">LookupAndResolveMemo</span><span class="DOT">.</span><span class="LIDENT">memoize</span> <a href="#local_resolve_572"><span class="LIDENT">resolve</span></a> <a href="#local_env'_569"><span class="LIDENT">env'</span></a> <a href="#local_id_571"><span class="LIDENT">id</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_module_type"><span class="LIDENT">resolve_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">resolve_module_type_result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_619"><span class="LIDENT">mark_substituted</span></span> <span class="TILDE">~</span><span id="local_add_canonical_620"><span class="LIDENT">add_canonical</span></span> <span id="local_env_621"><span class="LIDENT">env</span></span> <span id="local_p_622"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_622"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_623"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_624"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">resolve_and_lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_619"><span class="LIDENT">mark_substituted</span></a> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_621"><span class="LIDENT">env</span></a> <a href="#local_parent_623"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_625"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_625"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_626"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_parent_sig_627"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_628"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">handle_module_type_lookup</span> <a href="#local_env_621"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_620"><span class="LIDENT">add_canonical</span></a> <a href="#local_id_624"><span class="LIDENT">id</span></a> <a href="#local_parent_626"><span class="LIDENT">parent</span></a> <a href="#local_parent_sig_627"><span class="LIDENT">parent_sig</span></a> <a href="#local_sub_628"><span class="LIDENT">sub</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_629"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_mt_630"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_629"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_mt_630"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_631"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_632"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent</span> <span class="TILDE">~</span><a href="#local_mark_substituted_619"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_621"><span class="LIDENT">env</span></a> <a href="#local_parent_631"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_633"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_633"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_634"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_635"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">handle_module_type_lookup</span> <a href="#local_env_621"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_620"><span class="LIDENT">add_canonical</span></a><span class="EOL">
</span>        <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_632"><span class="LIDENT">id</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="#local_parent_631"><span class="LIDENT">parent</span></a> <a href="#local_parent_sig_634"><span class="LIDENT">parent_sig</span></a> <a href="#local_sub_635"><span class="LIDENT">sub</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_i_636"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Lookup_failureMT</span> <a href="#local_i_636"><span class="LIDENT">i</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="LPAREN">(</span><a href="env.ml.html"><span class="UIDENT">Env</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="env.ml.html#val-lookup_by_id"><span class="LIDENT">lookup_by_id</span></a> <a href="env.ml.html#val-s_module_type"><span class="LIDENT">s_module_type</span></a><span class="RPAREN">)</span> <a href="#local_i_636"><span class="LIDENT">i</span></a> <a href="#local_env_621"><span class="LIDENT">env</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_637"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p_638"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_636"><span class="LIDENT">i</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p'_639"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">process_module_type</span> <a href="#local_env_621"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_620"><span class="LIDENT">add_canonical</span></a> <a href="#local_mt_637"><span class="LIDENT">mt</span></a> <a href="#local_p_638"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_639"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_mt_637"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><span id="local_l_640"><span class="LIDENT">l</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalMT</span> <span class="LPAREN">(</span><a href="#local_env_621"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_l_640"><span class="LIDENT">l</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_641"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_619"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_621"><span class="LIDENT">env</span></a> <a href="#local_r_641"><span class="LIDENT">r</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_642"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_r_641"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="#local_m_642"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_643"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">resolve_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_619"><span class="LIDENT">mark_substituted</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_620"><span class="LIDENT">add_canonical</span></a> <a href="#local_env_621"><span class="LIDENT">env</span></a> <a href="#local_s_643"><span class="LIDENT">s</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_644"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module_type</span> <a href="#local_e_644"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_645"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_646"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_p_645"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_m_646"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_type"><span class="LIDENT">resolve_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">add_canonical</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">resolve_type_result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_647"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_add_canonical_648"><span class="LIDENT">add_canonical</span></span> <span id="local_p_649"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_result_650"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_649"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_651"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_652"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_and_lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_647"><span class="LIDENT">env</span></a><span class="EOL">
</span>          <a href="#local_parent_651"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_653"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_653"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_654"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_parent_sig_655"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_656"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">handle_type_lookup</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <a href="#local_id_652"><span class="LIDENT">id</span></a> <a href="#local_parent_654"><span class="LIDENT">parent</span></a> <a href="#local_parent_sig_655"><span class="LIDENT">parent_sig</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_657"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_t'_658"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_t_659"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="#local_t'_658"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_660"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_661"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_660"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_656"><span class="LIDENT">sub</span></a> <a href="#local_c_661"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_662"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_663"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_662"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_656"><span class="LIDENT">sub</span></a> <a href="#local_ct_663"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_664"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_665"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_664"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_656"><span class="LIDENT">sub</span></a> <a href="#local_t_665"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_666"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_667"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_668"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_666"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_656"><span class="LIDENT">sub</span></a> <a href="#local_texpr_667"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_668"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_657"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_t_659"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_parent_669"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_670"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <a href="#local_parent_669"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_671"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_671"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_672"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_673"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_result_674"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="find.ml.html#val-datatype_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">datatype_in_sig</span></a> <a href="#local_parent_sig_672"><span class="LIDENT">parent_sig</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_670"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_675"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_676"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_parent_669"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_675"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_675"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_673"><span class="LIDENT">sub</span></a> <a href="#local_t_676"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span> <a href="#local_result_674"><span class="LIDENT">result</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_parent_677"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_678"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <a href="#local_parent_677"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_679"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_679"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_680"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_681"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_t_682"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="find.ml.html#val-type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">type_in_sig</span></a> <a href="#local_parent_sig_680"><span class="LIDENT">parent_sig</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_678"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_683"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_684"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_parent_677"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_683"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_683"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_681"><span class="LIDENT">sub</span></a> <a href="#local_t_684"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span> <a href="#local_t_682"><span class="LIDENT">t</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_parent_685"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_686"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <a href="#local_parent_685"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_687"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_687"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sg_688"><span class="LIDENT">parent_sg</span></span><span class="COMMA">,</span> <span id="local_sub_689"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">handle_type_lookup</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_686"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <a href="#local_parent_685"><span class="LIDENT">parent</span></a> <a href="#local_parent_sg_688"><span class="LIDENT">parent_sg</span></a><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_690"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_t'_691"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_t_692"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="#local_t'_691"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_693"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_694"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_693"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_689"><span class="LIDENT">sub</span></a> <a href="#local_c_694"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_695"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_696"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_695"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_689"><span class="LIDENT">sub</span></a> <a href="#local_ct_696"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span id="local_name_697"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_698"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><a href="#local_name_697"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_sub_689"><span class="LIDENT">sub</span></a> <a href="#local_t_698"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_699"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_700"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_701"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_699"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_689"><span class="LIDENT">sub</span></a> <a href="#local_texpr_700"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_701"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_690"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_t_692"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_i_702"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_i'_703"><span class="LIDENT">i'</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_702"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">lookup_type</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_i'_703"><span class="LIDENT">i'</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_704"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_i'_703"><span class="LIDENT">i'</span></a><span class="COMMA">,</span> <a href="#local_t_704"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_705"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_type</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <a href="#local_r_705"><span class="LIDENT">r</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_706"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_r_705"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="#local_t_706"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><span id="local_l_707"><span class="LIDENT">l</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalType</span> <span class="LPAREN">(</span><a href="#local_env_647"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <a href="#local_l_707"><span class="LIDENT">l</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_708"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_type</span> <a href="#local_env_647"><span class="LIDENT">env</span></a> <span class="TILDE">~</span><a href="#local_add_canonical_648"><span class="LIDENT">add_canonical</span></a> <a href="#local_s_708"><span class="LIDENT">s</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_709"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_710"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_p_709"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_m_710"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_result_650"><span class="LIDENT">result</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_711"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_t_712"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_t_712"><span class="LIDENT">t</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="LIDENT">canonical</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span id="local_c_713"><span class="LIDENT">c</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="#local_add_canonical_648"><span class="LIDENT">add_canonical</span></a> <span class="THEN">then</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalType</span> <span class="LPAREN">(</span><a href="#local_p_711"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_c_713"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_t_712"><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <span class="ELSE">else</span> <a href="#local_result_650"><span class="LIDENT">result</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_result_650"><span class="LIDENT">result</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_value"><span class="LIDENT">resolve_value</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">value</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">resolve_value_result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_714"><span class="LIDENT">env</span></span> <span id="local_p_715"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_result_716"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_p_715"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_717"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_718"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <a href="#local_parent_717"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_719"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_719"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_720"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_721"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_m_722"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_721"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">expansion_of_module_cached</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <a href="#local_p_720"><span class="LIDENT">p</span></a> <a href="#local_m_722"><span class="LIDENT">m</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_723"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_sig</span> <a href="#local_e_723"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_724"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_sub_725"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span> <span class="LIDENT">prefix_substitution</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_p_720"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <a href="#local_sg_724"><span class="LIDENT">sg</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">handle_value_lookup</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <a href="#local_id_718"><span class="LIDENT">id</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_p_720"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <a href="#local_sg_724"><span class="LIDENT">sg</span></a><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_726"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><span id="local_name_727"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_728"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_726"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><a href="#local_name_727"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-value"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <a href="#local_sub_725"><span class="LIDENT">sub</span></a> <a href="#local_c_728"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_parent_729"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_730"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <a href="#local_parent_729"><span class="LIDENT">parent</span></a><span class="EOL">
</span>        <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_731"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_731"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_value_lookup_error"><span class="LIDENT">simple_value_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_732"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_733"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_result_734"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>          <span class="MATCH">match</span> <a href="find.ml.html#val-value_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">value_in_sig</span></a> <a href="#local_parent_sig_732"><span class="LIDENT">parent_sig</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ValueName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_730"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><span id="local_name_735"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_736"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>              <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><a href="#local_parent_729"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_735"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FValue</span> <span class="LPAREN">(</span><a href="#local_name_735"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-value"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">value</span></a> <a href="#local_sub_733"><span class="LIDENT">sub</span></a> <a href="#local_t_736"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>        <span class="IN">in</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span> <a href="#local_result_734"><span class="LIDENT">result</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_737"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_value</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <a href="#local_r_737"><span class="LIDENT">r</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_738"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_r_737"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="#local_t_738"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_i_739"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_i'_740"><span class="LIDENT">i'</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_739"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>        <span class="LIDENT">lookup_value</span> <a href="#local_env_714"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_i'_740"><span class="LIDENT">i'</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_741"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_i'_740"><span class="LIDENT">i'</span></a><span class="COMMA">,</span> <a href="#local_t_741"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_result_716"><span class="LIDENT">result</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_class_type"><span class="LIDENT">resolve_class_type</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">class_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">resolve_class_type_result</span><span class="EOL">
</span>    <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_742"><span class="LIDENT">env</span></span> <span id="local_p_743"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_743"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_744"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_745"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">resolve_and_lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_742"><span class="LIDENT">env</span></a><span class="EOL">
</span>        <a href="#local_parent_744"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_746"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_746"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_747"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_parent_sig_748"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_749"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">handle_class_type_lookup</span> <a href="#local_id_745"><span class="LIDENT">id</span></a> <a href="#local_parent_747"><span class="LIDENT">parent</span></a> <a href="#local_parent_sig_748"><span class="LIDENT">parent_sig</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_750"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_t'_751"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_t_752"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_t'_751"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_753"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_754"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_753"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_749"><span class="LIDENT">sub</span></a> <a href="#local_c_754"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_755"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_756"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_755"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_749"><span class="LIDENT">sub</span></a> <a href="#local_ct_756"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_757"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_758"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_759"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_757"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_749"><span class="LIDENT">sub</span></a> <a href="#local_texpr_758"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_759"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_750"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_t_752"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LPAREN">(</span><span id="local_i_760"><span class="LIDENT">i</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_i'_761"><span class="LIDENT">i'</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <a href="#local_i_760"><span class="LIDENT">i</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_id_762"><span class="LIDENT">id</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_i'_761"><span class="LIDENT">i'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">lookup_class_type</span> <a href="#local_env_742"><span class="LIDENT">env</span></a> <a href="#local_id_762"><span class="LIDENT">id</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_763"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_id_762"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_t_763"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_764"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">lookup_class_type</span> <a href="#local_env_742"><span class="LIDENT">env</span></a> <a href="#local_r_764"><span class="LIDENT">r</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_t_765"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_r_764"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="#local_t_765"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="LPAREN">(</span><span id="local_l_766"><span class="LIDENT">l</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">LocalType</span> <span class="LPAREN">(</span><a href="#local_env_742"><span class="LIDENT">env</span></a><span class="COMMA">,</span> <span class="LPAREN">(</span><a href="#local_l_766"><span class="LIDENT">l</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_type</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_767"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">resolve_class_type</span> <a href="#local_env_742"><span class="LIDENT">env</span></a> <a href="#local_s_767"><span class="LIDENT">s</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_768"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_769"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_p_768"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_m_769"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_parent_770"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_771"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_742"><span class="LIDENT">env</span></a> <a href="#local_parent_770"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_772"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_772"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sig_773"><span class="LIDENT">parent_sig</span></span><span class="COMMA">,</span> <span id="local_sub_774"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_t_775"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="find.ml.html#val-type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">type_in_sig</span></a> <a href="#local_parent_sig_773"><span class="LIDENT">parent_sig</span></a> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_771"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_776"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_t_777"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><a href="#local_parent_770"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_776"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_776"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_774"><span class="LIDENT">sub</span></a> <a href="#local_t_777"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-of_option"><span class="LIDENT">of_option</span></a> <span class="LABEL">~error:</span><span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span> <a href="#local_t_775"><span class="LIDENT">t</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_parent_778"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_id_779"><span class="LIDENT">id</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_parent</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <a href="#local_env_742"><span class="LIDENT">env</span></a> <a href="#local_parent_778"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_780"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_e_780"><span class="LIDENT">e</span></a> <span class="COLONGREATER">:&gt;</span> <a href="errors.ml.html#module-Tools_error.type-simple_type_lookup_error"><span class="LIDENT">simple_type_lookup_error</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_parent_sg_781"><span class="LIDENT">parent_sg</span></span><span class="COMMA">,</span> <span id="local_sub_782"><span class="LIDENT">sub</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">handle_class_type_lookup</span> <span class="LPAREN">(</span><a href="../model/names.ml.html#module-Name.val-to_string"><span class="UIDENT">ClassTypeName</span><span class="DOT">.</span><span class="LIDENT">to_string</span></a> <a href="#local_id_779"><span class="LIDENT">id</span></a><span class="RPAREN">)</span> <a href="#local_parent_778"><span class="LIDENT">parent</span></a> <a href="#local_parent_sg_781"><span class="LIDENT">parent_sg</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p'_783"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_t'_784"><span class="LIDENT">t'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_t_785"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_t'_784"><span class="LIDENT">t'</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span id="local_name_786"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_c_787"><span class="LIDENT">c</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><a href="#local_name_786"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_</span></a> <a href="#local_sub_782"><span class="LIDENT">sub</span></a> <a href="#local_c_787"><span class="LIDENT">c</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span id="local_name_788"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_ct_789"><span class="LIDENT">ct</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><a href="#local_name_788"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-class_type"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">class_type</span></a> <a href="#local_sub_782"><span class="LIDENT">sub</span></a> <a href="#local_ct_789"><span class="LIDENT">ct</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><span id="local_name_790"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span id="local_texpr_791"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_792"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="LPAREN">(</span><a href="#local_name_790"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="subst.ml.html#val-type_expr"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">type_expr</span></a> <a href="#local_sub_782"><span class="LIDENT">sub</span></a> <a href="#local_texpr_791"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_792"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_p'_783"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_t_785"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module_gpath"><span class="LIDENT">reresolve_module_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_793"><span class="LIDENT">env</span></span> <span id="local_path_794"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_794"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_794"><span class="LIDENT">path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_functor_path_795"><span class="LIDENT">functor_path</span></span><span class="COMMA">,</span> <span id="local_argument_path_796"><span class="LIDENT">argument_path</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span><span class="EOL">
</span>        <span class="LPAREN">(</span> <span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_functor_path_795"><span class="LIDENT">functor_path</span></a><span class="COMMA">,</span><span class="EOL">
</span>          <span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_argument_path_796"><span class="LIDENT">argument_path</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_797"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_798"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_parent_797"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_798"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p1_799"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_800"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_dest'_801"><span class="LIDENT">dest'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p1_799"><span class="LIDENT">p1</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="IF">if</span><span class="EOL">
</span>        <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.val-is_hidden"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">is_hidden</span></a><span class="EOL">
</span>          <span class="LABEL">~weak_canonical_test:</span><span class="FALSE">false</span> <a href="#local_dest'_801"><span class="LIDENT">dest'</span></a><span class="EOL">
</span>      <span class="THEN">then</span><span class="EOL">
</span>        <span class="LET">let</span> <span id="local_cp2_802"><span class="LIDENT">cp2</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-module_path"><span class="LIDENT">module_path</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p2_800"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>        <span class="MATCH">match</span><span class="EOL">
</span>          <span class="LIDENT">resolve_module</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_cp2_802"><span class="LIDENT">cp2</span></a><span class="EOL">
</span>        <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_p3_803"><span class="LIDENT">p3</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_p_804"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p3_803"><span class="LIDENT">p3</span></a> <span class="IN">in</span><span class="EOL">
</span>            <a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_module"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p_804"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_dest'_801"><span class="LIDENT">dest'</span></a><span class="COMMA">,</span> <a href="#local_p2_800"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="ELSE">else</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_dest'_801"><span class="LIDENT">dest'</span></a><span class="COMMA">,</span> <a href="#local_p2_800"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_p1_805"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_806"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p1_805"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p2_806"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_p_807"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p'_808"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p_807"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <a href="#local_p'_808"><span class="LIDENT">p'</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_809"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_p2_810"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p_809"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p2_810"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_811"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_p2_812"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p_811"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <span class="LIDENT">handle_canonical_module</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_p2_812"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_813"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_793"><span class="LIDENT">env</span></a> <a href="#local_m_813"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-strip_canonical"><span class="LIDENT">strip_canonical</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">c</span><span class="COLON">:</span><a href="../model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_c_814"><span class="LIDENT">c</span></span> <span id="local_path_815"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_815"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_x_816"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_817"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="WHEN">when</span> <a href="#local_y_817"><span class="LIDENT">y</span></a> <span class="EQUAL">=</span> <a href="#local_c_814"><span class="LIDENT">c</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_816"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_x_818"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_819"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_818"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_819"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_x_820"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_821"><span class="LIDENT">y</span></span><span class="COMMA">,</span> <span id="local_z_822"><span class="LIDENT">z</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_820"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_821"><span class="LIDENT">y</span></a><span class="COMMA">,</span> <a href="#local_z_822"><span class="LIDENT">z</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_x_823"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_824"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_x_823"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_y_824"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_x_825"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_825"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_x_826"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_826"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_827"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_x_827"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_p_828"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_814"><span class="LIDENT">c</span></a> <a href="#local_p_828"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_815"><span class="LIDENT">path</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-strip_canonical_gpath"><span class="LIDENT">strip_canonical_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">c</span><span class="COLON">:</span><a href="../model/paths.ml.html#module-Path.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-Module.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_c_829"><span class="LIDENT">c</span></span> <span id="local_path_830"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_830"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_x_831"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_832"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="WHEN">when</span> <a href="#local_y_832"><span class="LIDENT">y</span></a> <span class="EQUAL">=</span> <a href="#local_c_829"><span class="LIDENT">c</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_x_831"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_x_833"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_834"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_x_833"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_834"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_x_835"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_836"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_x_835"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_836"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_x_837"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_838"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_x_837"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_y_838"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_x_839"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_x_839"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_x_840"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">strip_canonical_gpath</span> <span class="TILDE">~</span><a href="#local_c_829"><span class="LIDENT">c</span></a> <a href="#local_x_840"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_830"><span class="LIDENT">path</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module"><span class="LIDENT">reresolve_module</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span><span class="EOL">
</span>    <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_841"><span class="LIDENT">env</span></span> <span id="local_path_842"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_842"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_842"><span class="LIDENT">path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_g_843"><span class="LIDENT">g</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_g_843"><span class="LIDENT">g</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_844"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_x_844"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_functor_path_845"><span class="LIDENT">functor_path</span></span><span class="COMMA">,</span> <span id="local_argument_path_846"><span class="LIDENT">argument_path</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_functor_path_845"><span class="LIDENT">functor_path</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_argument_path_846"><span class="LIDENT">argument_path</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_847"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_848"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_parent_847"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_848"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p1_849"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_850"><span class="LIDENT">p2</span></span><span class="COMMA">,</span> <span id="local_p3opt_851"><span class="LIDENT">p3opt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_dest'_852"><span class="LIDENT">dest'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p1_849"><span class="LIDENT">p1</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="IF">if</span> <a href="cpath.ml.html#val-is_resolved_module_hidden"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_resolved_module_hidden</span></a> <span class="LABEL">~weak_canonical_test:</span><span class="FALSE">false</span> <a href="#local_dest'_852"><span class="LIDENT">dest'</span></a> <span class="THEN">then</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_p3opt_851"><span class="LIDENT">p3opt</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_p3_853"><span class="LIDENT">p3</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p3_853"><span class="LIDENT">p3</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <span class="MATCH">match</span><span class="EOL">
</span>              <span class="LIDENT">resolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_p2_850"><span class="LIDENT">p2</span></a><span class="EOL">
</span>            <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_p3_854"><span class="LIDENT">p3</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p3_854"><span class="LIDENT">p3</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_dest'_852"><span class="LIDENT">dest'</span></a><span class="COMMA">,</span> <a href="#local_p2_850"><span class="LIDENT">p2</span></a><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="ELSE">else</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_dest'_852"><span class="LIDENT">dest'</span></a><span class="COMMA">,</span> <a href="#local_p2_850"><span class="LIDENT">p2</span></a><span class="COMMA">,</span> <a href="#local_p3opt_851"><span class="LIDENT">p3opt</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_p1_855"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_856"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p1_855"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p2_856"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_p_857"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p'_858"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p_857"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <a href="#local_p'_858"><span class="LIDENT">p'</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_859"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_p2_860"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cp2_861"><span class="LIDENT">cp2</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-resolved_module_path"><span class="LIDENT">resolved_module_path</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p2_860"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cp2'_862"><span class="LIDENT">cp2'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_cp2_861"><span class="LIDENT">cp2</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p2'_863"><span class="LIDENT">p2'</span></span> <span class="EQUAL">=</span> <a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_module"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_cp2'_862"><span class="LIDENT">cp2'</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p_859"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_p2'_863"><span class="LIDENT">p2'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_p_864"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_p2_865"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">handle_canonical_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p2_865"><span class="LIDENT">p2</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_r_866"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><a href="#local_p_864"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_r_866"><span class="LIDENT">r</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_r_867"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_p_864"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_r_867"><span class="LIDENT">r</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_868"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_841"><span class="LIDENT">env</span></a> <a href="#local_m_868"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_canonical_module_real"><span class="LIDENT">handle_canonical_module_real</span></span> <span id="local_env_869"><span class="LIDENT">env</span></span> <span id="local_p2_870"><span class="LIDENT">p2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="COMMENT">(* Canonical paths are always fully qualified, but this isn't
     necessarily good for rendering, as the full path would
     always be written out whenever a canonical module path is
     encountered.

     Instead the intent of this code is to try to find the shortest
     path that still correctly references the canonical module.

     It works by starting with the fully qualified path, e.g.
     A.B.C.D where A is a root module. It then makes the list
     of possibilities (A).B.C.D (A.B).C.D (A.B.C).D and (A.B.C.D)
     where brackets represent the part that's an identifier.
     It then resolved each one in turn and calculates the
     identifier of the resolved path. The shortest path that
     has the same identifier as the fully-qualified path is
     chosen as the canonical path.

     When doing this, we end up resolving each possibility.
     Additionally, we need to 'reresolve' - resolve the canonical
     references - while we're doing this. This is because the
     parent parts of the resolved path can contain aliases and
     canonical paths themselves which require resolving in order
     to check the identifier is the same.

     However, we first need to strip off any alias/canonical paths
     in the resolved module, as we want the identifier for the
     module itself, not any aliased module, and the canonical path
     _ought_ to be the same as the one we're _currently_ resolving
     anyway, so we'd end up looping forever. Note that it's not
     sufficient to simply ask not to add on the canonical paths
     at this point (ie, ~add_canonical=false) as the alias chain
     may include modules that have already been resolved and hence
     have canonical constructors in their resolved paths.
  *)</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* [strip p] strips the top-level aliases and canonical paths from
     the path [p]. Any aliases/canonicals in parents are left as is. *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_strip_871"><span class="LIDENT">strip</span></span> <span class="COLON">:</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="EQUAL">=</span><span class="EOL">
</span>   <span class="FUN">fun</span> <span id="local_x_872"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_x_872"><span class="LIDENT">x</span></a> <span class="WITH">with</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_p_873"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">strip_canonical</span> <span class="LABEL">~c:</span><a href="#local_p2_870"><span class="LIDENT">p2</span></a> <a href="#local_p_873"><span class="LIDENT">p</span></a> <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_872"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Resolve the path, then 'reresolve', making sure to strip off the
     top-level alias and canonicals to avoid looping forever *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_resolve_874"><span class="LIDENT">resolve</span></span> <span id="local_env_875"><span class="LIDENT">env</span></span> <span id="local_p_876"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">resolve_module</span> <a href="#local_env_875"><span class="LIDENT">env</span></a> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_p_876"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_877"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_878"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_875"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_strip_871"><span class="LIDENT">strip</span></a> <a href="#local_p_877"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_m_878"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lang_of_879"><span class="LIDENT">lang_of</span></span> <span id="local_cpath_880"><span class="LIDENT">cpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_module"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_cpath_880"><span class="LIDENT">cpath</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Path.module-Resolved.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_cp2_881"><span class="LIDENT">cp2</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-module_path"><span class="LIDENT">module_path</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p2_870"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">canonical_helper</span> <a href="#local_env_869"><span class="LIDENT">env</span></a> <a href="#local_resolve_874"><span class="LIDENT">resolve</span></a> <a href="#local_lang_of_879"><span class="LIDENT">lang_of</span></a> <span class="LIDENT">c_mod_poss</span> <a href="#local_cp2_881"><span class="LIDENT">cp2</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p2_870"><span class="LIDENT">p2</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_rp_882"><span class="LIDENT">rp</span></span><span class="COMMA">,</span> <span id="local_m_883"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m_884"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_883"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="COMMENT">(* Need to check if the module we're going to link to has been expanded.
         ModuleTypes are always expanded if possible, but Aliases are only expanded
         if they're an alias to a hidden module or if they're self canonical.

         Checking if a module is self canonical is a bit tricky, since this function
         is itself part of the process of resolving any canonical reference. Hence
         what we do here is to look through alias chains looking for one that's marked
         with the same _unresolved_ canonical path that we're currently trying to resolve.

         This is particularly important because some modules don't know they're canonical!
         For example the module Caml in base, which is marked as the canonical path for
         all references to the standard library in the file [import0.ml], but is itself just
         defined by including [Stdlib].

         If a module doesn't know it's canonical, it will fail the self-canonical check, and
         therefore not necessarily be expanded. If this happens, we call [process_module_path]
         to stick the [`Alias] constructor back on so we'll link to the correct place. *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_expanded_885"><span class="LIDENT">expanded</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_m_884"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p_886"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <span class="MATCH">match</span><span class="EOL">
</span>              <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_env_869"><span class="LIDENT">env</span></a> <a href="#local_p_886"><span class="LIDENT">p</span></a><span class="EOL">
</span>            <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_rp_887"><span class="LIDENT">rp</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="COMMENT">(* we're an alias - check to see if we're marked as the canonical path.
                   If not, check for an alias chain with us as canonical in it... *)</span><span class="EOL">
</span>                <span class="LET">let</span> <span class="REC">rec</span> <span id="local_check_888"><span class="LIDENT">check</span></span> <span id="local_m_889"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>                  <span class="MATCH">match</span> <a href="#local_m_889"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">canonical</span> <span class="WITH">with</span><span class="EOL">
</span>                  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_p_890"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                      <a href="#local_p_890"><span class="LIDENT">p</span></a> <span class="EQUAL">=</span> <a href="#local_p2_870"><span class="LIDENT">p2</span></a><span class="EOL">
</span>                      <span class="COMMENT">(* The canonical path is the same one we're trying to resolve *)</span><span class="EOL">
</span>                  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>                      <span class="MATCH">match</span> <a href="#local_m_889"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="WITH">with</span><span class="EOL">
</span>                      <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p_891"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>                          <span class="MATCH">match</span><span class="EOL">
</span>                            <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span><span class="EOL">
</span>                              <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_env_869"><span class="LIDENT">env</span></a> <a href="#local_p_891"><span class="LIDENT">p</span></a><span class="EOL">
</span>                          <span class="WITH">with</span><span class="EOL">
</span>                          <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_rp_892"><span class="LIDENT">rp</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>                              <span class="MATCH">match</span><span class="EOL">
</span>                                <span class="LIDENT">lookup_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_869"><span class="LIDENT">env</span></a> <a href="#local_rp_892"><span class="LIDENT">rp</span></a><span class="EOL">
</span>                              <span class="WITH">with</span><span class="EOL">
</span>                              <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="EOL">
</span>                              <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span id="local_m_893"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                                  <span class="LET">let</span> <span id="local_m_894"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_893"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>                                  <a href="#local_check_888"><span class="LIDENT">check</span></a> <a href="#local_m_894"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>                          <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>                      <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>                <span class="IN">in</span><span class="EOL">
</span>                <span class="LET">let</span> <span id="local_self_canonical_895"><span class="LIDENT">self_canonical</span></span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="EQUAL">=</span> <a href="#local_check_888"><span class="LIDENT">check</span></a> <a href="#local_m_884"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>                <span class="LET">let</span> <span id="local_hidden_896"><span class="LIDENT">hidden</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>                  <a href="cpath.ml.html#val-is_resolved_module_hidden"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_resolved_module_hidden</span></a> <span class="LABEL">~weak_canonical_test:</span><span class="TRUE">true</span> <a href="#local_rp_887"><span class="LIDENT">rp</span></a><span class="EOL">
</span>                <span class="IN">in</span><span class="EOL">
</span>                <a href="#local_hidden_896"><span class="LIDENT">hidden</span></a> <span class="BARBAR">||</span> <a href="#local_self_canonical_895"><span class="LIDENT">self_canonical</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="FALSE">false</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="TRUE">true</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cpath_897"><span class="LIDENT">cpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="IF">if</span> <a href="#local_expanded_885"><span class="LIDENT">expanded</span></a> <span class="THEN">then</span> <a href="#local_rp_882"><span class="LIDENT">rp</span></a><span class="EOL">
</span>        <span class="ELSE">else</span> <span class="LIDENT">process_module_path</span> <a href="#local_env_869"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_m_884"><span class="LIDENT">m</span></a> <a href="#local_rp_882"><span class="LIDENT">rp</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-module_"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_cpath_897"><span class="LIDENT">cpath</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_canonical_module"><span class="LIDENT">handle_canonical_module</span></span> <span id="local_env_898"><span class="LIDENT">env</span></span> <span id="local_p2_899"><span class="LIDENT">p2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="UIDENT">HandleCanonicalModuleMemo</span><span class="DOT">.</span><span class="LIDENT">memoize</span> <span class="LIDENT">handle_canonical_module_real</span> <a href="#local_env_898"><span class="LIDENT">env</span></a> <a href="#local_p2_899"><span class="LIDENT">p2</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_canonical_module_type"><span class="LIDENT">handle_canonical_module_type</span></span> <span id="local_env_900"><span class="LIDENT">env</span></span> <span id="local_p2_901"><span class="LIDENT">p2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_cp2_902"><span class="LIDENT">cp2</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-module_type_path"><span class="LIDENT">module_type_path</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p2_901"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_strip_alias_903"><span class="LIDENT">strip_alias</span></span> <span class="COLON">:</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="FUNCTION">function</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_p_904"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_904"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span id="local_p_905"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_905"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_resolve_906"><span class="LIDENT">resolve</span></span> <span id="local_env_907"><span class="LIDENT">env</span></span> <span id="local_p_908"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LIDENT">resolve_module_type</span> <a href="#local_env_907"><span class="LIDENT">env</span></a> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_p_908"><span class="LIDENT">p</span></a><span class="EOL">
</span>    <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_909"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_910"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="COMMENT">(* Note, we reresolve here in case any parent module has a canonical
       constructor to deal with - we know there's no canonicalmoduletype as we've
       explicitly asked for it not to be added *)</span><span class="EOL">
</span>    <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_907"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_strip_alias_903"><span class="LIDENT">strip_alias</span></a> <a href="#local_p_909"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <a href="#local_m_910"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lang_of_911"><span class="LIDENT">lang_of</span></span> <span id="local_cpath_912"><span class="LIDENT">cpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_module_type"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_cpath_912"><span class="LIDENT">cpath</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Path.module-Resolved.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">canonical_helper</span> <a href="#local_env_900"><span class="LIDENT">env</span></a> <a href="#local_resolve_906"><span class="LIDENT">resolve</span></a> <a href="#local_lang_of_911"><span class="LIDENT">lang_of</span></a> <span class="LIDENT">c_modty_poss</span> <a href="#local_cp2_902"><span class="LIDENT">cp2</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p2_901"><span class="LIDENT">p2</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_rp_913"><span class="LIDENT">rp</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_module_type"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_rp_913"><span class="LIDENT">rp</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_canonical_type"><span class="LIDENT">handle_canonical_type</span></span> <span id="local_env_914"><span class="LIDENT">env</span></span> <span id="local_p2_915"><span class="LIDENT">p2</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_cp2_916"><span class="LIDENT">cp2</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Of_Lang"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Of_Lang</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-type_path"><span class="LIDENT">type_path</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Of_Lang.val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_p2_915"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_lang_of_917"><span class="LIDENT">lang_of</span></span> <span id="local_cpath_918"><span class="LIDENT">cpath</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_type"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_cpath_918"><span class="LIDENT">cpath</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="COLONGREATER">:&gt;</span> <a href="../model/paths.ml.html#module-Path.module-Resolved.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_resolve_919"><span class="LIDENT">resolve</span></span> <span id="local_env_920"><span class="LIDENT">env</span></span> <span id="local_p_921"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <span class="LIDENT">resolve_type</span> <a href="#local_env_920"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_p_921"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FType_removed</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_x_922"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_923"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="COMMENT">(* See comment in handle_canonical_module_type for why we're reresolving here *)</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_type</span> <a href="#local_env_920"><span class="LIDENT">env</span></a> <a href="#local_x_922"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_923"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_y_924"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <a href="#local_y_924"><span class="LIDENT">y</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">canonical_helper</span> <a href="#local_env_914"><span class="LIDENT">env</span></a> <a href="#local_resolve_919"><span class="LIDENT">resolve</span></a> <a href="#local_lang_of_917"><span class="LIDENT">lang_of</span></a> <span class="LIDENT">c_ty_poss</span> <a href="#local_cp2_916"><span class="LIDENT">cp2</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p2_915"><span class="LIDENT">p2</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_rp_925"><span class="LIDENT">rp</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="lang_of.ml.html"><span class="UIDENT">Lang_of</span></a><span class="DOT">.</span><span class="LPAREN">(</span><a href="lang_of.ml.html#module-Path.val-resolved_type"><span class="UIDENT">Path</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="LPAREN">(</span><a href="lang_of.ml.html#val-empty"><span class="LIDENT">empty</span></a> <span class="LPAREN">(</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <a href="#local_rp_925"><span class="LIDENT">rp</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module_type_gpath"><span class="LIDENT">reresolve_module_type_gpath</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-ModuleType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="../model/paths.ml.html#module-Path.module-Resolved.module-ModuleType.type-t"><span class="UIDENT">Odoc_model</span><span class="DOT">.</span><span class="UIDENT">Paths</span><span class="DOT">.</span><span class="UIDENT">Path</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_926"><span class="LIDENT">env</span></span> <span id="local_path_927"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_927"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_927"><span class="LIDENT">path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_928"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_929"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_parent_928"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_929"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_p1_930"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_p2_931"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p1_930"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <a href="#local_p2_931"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_p1_932"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_933"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p1_932"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">handle_canonical_module_type</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p2_933"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span id="local_p1_934"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_935"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p1_934"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p2_935"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span id="local_p1_936"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_937"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p1_936"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_p2_937"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span id="local_m_938"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_926"><span class="LIDENT">env</span></a> <a href="#local_m_938"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module_type"><span class="LIDENT">reresolve_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_939"><span class="LIDENT">env</span></span> <span id="local_path_940"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_940"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_940"><span class="LIDENT">path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_g_941"><span class="LIDENT">g</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type_gpath</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_g_941"><span class="LIDENT">g</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_942"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_x_942"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_943"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_944"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_parent_943"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_944"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_p1_945"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_p2'_946"><span class="LIDENT">p2'</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p1_945"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <a href="#local_p2'_946"><span class="LIDENT">p2'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_p1_947"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_948"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p1_947"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">handle_canonical_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p2_948"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span id="local_p1_949"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_950"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p1_949"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p2_950"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span id="local_p1_951"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_952"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p1_951"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_p2_952"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span id="local_m_953"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_939"><span class="LIDENT">env</span></a> <a href="#local_m_953"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_type"><span class="LIDENT">reresolve_type</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">type_</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_954"><span class="LIDENT">env</span></span> <span id="local_path_955"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_result_956"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_955"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_955"><span class="LIDENT">path</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_957"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_type</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_s_957"><span class="LIDENT">s</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalType</span> <span class="LPAREN">(</span><span id="local_p1_958"><span class="LIDENT">p1</span></span><span class="COMMA">,</span> <span id="local_p2_959"><span class="LIDENT">p2</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_type</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_p1_958"><span class="LIDENT">p1</span></a><span class="COMMA">,</span> <span class="LIDENT">handle_canonical_type</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_p2_959"><span class="LIDENT">p2</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_p_960"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_961"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_p_960"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_961"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_962"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_963"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_p_962"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_963"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_964"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_965"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_954"><span class="LIDENT">env</span></a> <a href="#local_p_964"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_965"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_result_956"><span class="LIDENT">result</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_value"><span class="LIDENT">reresolve_value</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">value</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">value</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_966"><span class="LIDENT">env</span></span> <span id="local_p_967"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_967"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span id="local_p_968"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_969"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Value</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_966"><span class="LIDENT">env</span></a> <a href="#local_p_968"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_969"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_p_967"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_class_type"><span class="LIDENT">reresolve_class_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">class_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">class_type</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_970"><span class="LIDENT">env</span></span> <span id="local_path_971"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_result_972"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_path_971"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_971"><span class="LIDENT">path</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_s_973"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_class_type</span> <a href="#local_env_970"><span class="LIDENT">env</span></a> <a href="#local_s_973"><span class="LIDENT">s</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_974"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_975"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_970"><span class="LIDENT">env</span></a> <a href="#local_p_974"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_975"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_976"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_977"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_parent</span> <a href="#local_env_970"><span class="LIDENT">env</span></a> <a href="#local_p_976"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_977"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_result_972"><span class="LIDENT">result</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_parent"><span class="LIDENT">reresolve_parent</span></span> <span class="COLON">:</span> <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_978"><span class="LIDENT">env</span></span> <span id="local_path_979"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_path_979"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span id="local_m_980"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_978"><span class="LIDENT">env</span></a> <a href="#local_m_980"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span id="local_mty_981"><span class="LIDENT">mty</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_978"><span class="LIDENT">env</span></a> <a href="#local_mty_981"><span class="LIDENT">mty</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FragmentRoot</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_path_979"><span class="LIDENT">path</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* *)</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-module_type_expr_of_module_decl"><span class="LIDENT">module_type_expr_of_module_decl</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">decl</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_type_expr_of_module_error"><span class="LIDENT">simple_module_type_expr_of_module_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_982"><span class="LIDENT">env</span></span> <span id="local_decl_983"><span class="LIDENT">decl</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_decl_983"><span class="LIDENT">decl</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_984"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_982"><span class="LIDENT">env</span></a> <a href="#local_r_984"><span class="LIDENT">r</span></a><span class="EOL">
</span>      <span class="INFIXOP0">|&gt;</span> <a href="utils.ml.html#module-ResultMonad.val-map_error"><span class="LIDENT">map_error</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_e_985"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Parent</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Parent_module</span> <a href="#local_e_985"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_986"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m_987"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_986"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">module_type_expr_of_module_decl</span> <a href="#local_env_982"><span class="LIDENT">env</span></a> <a href="#local_m_987"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_path_988"><span class="LIDENT">path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_982"><span class="LIDENT">env</span></a> <a href="#local_path_988"><span class="LIDENT">path</span></a><span class="EOL">
</span>      <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_989"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_m_990"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_989"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>          <span class="LIDENT">module_type_expr_of_module</span> <a href="#local_env_982"><span class="LIDENT">env</span></a> <a href="#local_m_990"><span class="LIDENT">m</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="WHEN">when</span> <a href="cpath.ml.html#val-is_module_forward"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_module_forward</span></a> <a href="#local_path_988"><span class="LIDENT">path</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_991"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_988"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_e_991"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span> <span id="local_expr_992"><span class="LIDENT">expr</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_expr_992"><span class="LIDENT">expr</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-module_type_expr_of_module"><span class="LIDENT">module_type_expr_of_module</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_type_expr_of_module_error"><span class="LIDENT">simple_module_type_expr_of_module_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_993"><span class="LIDENT">env</span></span> <span id="local_m_994"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">module_type_expr_of_module_decl</span> <a href="#local_env_993"><span class="LIDENT">env</span></a> <a href="#local_m_994"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module_path"><span class="LIDENT">expansion_of_module_path</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">strengthen</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_995"><span class="LIDENT">env</span></span> <span class="TILDE">~</span><span id="local_strengthen_996"><span class="LIDENT">strengthen</span></span> <span id="local_path_997"><span class="LIDENT">path</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_995"><span class="LIDENT">env</span></a> <a href="#local_path_997"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_p'_998"><span class="LIDENT">p'</span></span><span class="COMMA">,</span> <span id="local_m_999"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m_1000"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_999"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="COMMENT">(* p' is the path to the aliased module *)</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_strengthen_1001"><span class="LIDENT">strengthen</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <a href="#local_strengthen_996"><span class="LIDENT">strengthen</span></a><span class="EOL">
</span>        <span class="AMPERAMPER">&amp;&amp;</span> <span class="LIDENT">not</span> <span class="LPAREN">(</span><a href="cpath.ml.html#val-is_resolved_module_hidden"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_resolved_module_hidden</span></a> <span class="LABEL">~weak_canonical_test:</span><span class="TRUE">true</span> <a href="#local_p'_998"><span class="LIDENT">p'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">expansion_of_module_cached</span> <a href="#local_env_995"><span class="LIDENT">env</span></a> <a href="#local_p'_998"><span class="LIDENT">p'</span></a> <a href="#local_m_1000"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUNCTION">function</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Signature</span> <span id="local_sg_1002"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="LET">let</span> <span id="local_sg'_1003"><span class="LIDENT">sg'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>            <span class="MATCH">match</span> <a href="#local_m_1000"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">doc</span> <span class="WITH">with</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_sg_1002"><span class="LIDENT">sg</span></a><span class="EOL">
</span>            <span class="BAR">|</span> <span id="local_docs_1004"><span class="LIDENT">docs</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LBRACE">{</span> <a href="#local_sg_1002"><span class="LIDENT">sg</span></a> <span class="WITH">with</span> <span class="LIDENT">items</span> <span class="EQUAL">=</span> <span class="UIDENT">Comment</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Docs</span> <a href="#local_docs_1004"><span class="LIDENT">docs</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_sg_1002"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span> <span class="RBRACE">}</span><span class="EOL">
</span>          <span class="IN">in</span><span class="EOL">
</span>          <span class="IF">if</span> <a href="#local_strengthen_1001"><span class="LIDENT">strengthen</span></a> <span class="THEN">then</span><span class="EOL">
</span>            <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <span class="LPAREN">(</span><a href="strengthen.ml.html#val-signature"><span class="UIDENT">Strengthen</span><span class="DOT">.</span><span class="LIDENT">signature</span></a> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_p'_998"><span class="LIDENT">p'</span></a><span class="RPAREN">)</span> <a href="#local_sg'_1003"><span class="LIDENT">sg'</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>          <span class="ELSE">else</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_sg'_1003"><span class="LIDENT">sg'</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Functor</span> <span class="UNDERSCORE">_</span> <span class="AS">as</span> <span id="local_f_1005"><span class="LIDENT">f</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_f_1005"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="UNDERSCORE">_</span> <span class="WHEN">when</span> <a href="cpath.ml.html#val-is_module_forward"><span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">is_module_forward</span></a> <a href="#local_path_997"><span class="LIDENT">path</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_1006"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_path_997"><span class="LIDENT">path</span></a><span class="COMMA">,</span> <a href="#local_e_1006"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-handle_signature_with_subs"><span class="LIDENT">handle_signature_with_subs</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">substitution</span> <span class="LIDENT">list</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_1007"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_1008"><span class="LIDENT">env</span></span> <span id="local_sg_1009"><span class="LIDENT">sg</span></span> <span id="local_subs_1010"><span class="LIDENT">subs</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-ResultMonad"><span class="UIDENT">ResultMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_left</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_sg_opt_1011"><span class="LIDENT">sg_opt</span></span> <span id="local_sub_1012"><span class="LIDENT">sub</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="#local_sg_opt_1011"><span class="LIDENT">sg_opt</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1013"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">fragmap</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1007"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1008"><span class="LIDENT">env</span></a> <a href="#local_sub_1012"><span class="LIDENT">sub</span></a> <a href="#local_sg_1013"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Ok</span> <a href="#local_sg_1009"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <a href="#local_subs_1010"><span class="LIDENT">subs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-assert_not_functor"><span class="LIDENT">assert_not_functor</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="TYPE">type</span> <span class="LIDENT">err</span><span class="DOT">.</span> <span class="LIDENT">expansion</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <span class="LIDENT">err</span><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span> <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Signature</span> <span id="local_sg_1014"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_sg_1014"><span class="LIDENT">sg</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-unresolve_subs"><span class="LIDENT">unresolve_subs</span></span> <span id="local_subs_1015"><span class="LIDENT">subs</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">map</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="FUNCTION">function</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleEq</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_f_1016"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_m_1017"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>          <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleEq</span> <span class="LPAREN">(</span><a href="cfrag.ml.html#val-unresolve_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">unresolve_module</span></a> <a href="#local_f_1016"><span class="LIDENT">f</span></a><span class="COMMA">,</span> <a href="#local_m_1017"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">ModuleSubst</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_f_1018"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_m_1019"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">ModuleSubst</span> <span class="LPAREN">(</span><a href="cfrag.ml.html#val-unresolve_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">unresolve_module</span></a> <a href="#local_f_1018"><span class="LIDENT">f</span></a><span class="COMMA">,</span> <a href="#local_m_1019"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">TypeEq</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_f_1020"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_t_1021"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">TypeEq</span> <span class="LPAREN">(</span><a href="cfrag.ml.html#val-unresolve_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">unresolve_type</span></a> <a href="#local_f_1020"><span class="LIDENT">f</span></a><span class="COMMA">,</span> <a href="#local_t_1021"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">TypeSubst</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_f_1022"><span class="LIDENT">f</span></span><span class="COMMA">,</span> <span id="local_t_1023"><span class="LIDENT">t</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">TypeSubst</span> <span class="LPAREN">(</span><a href="cfrag.ml.html#val-unresolve_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">unresolve_type</span></a> <a href="#local_f_1022"><span class="LIDENT">f</span></a><span class="COMMA">,</span> <a href="#local_t_1023"><span class="LIDENT">t</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span id="local_x_1024"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_1024"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <a href="#local_subs_1015"><span class="LIDENT">subs</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-signature_of_u_module_type_expr"><span class="LIDENT">signature_of_u_module_type_expr</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">U</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_1025"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_1026"><span class="LIDENT">env</span></span> <span id="local_m_1027"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1027"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">U</span><span class="DOT">.</span><span class="UIDENT">Path</span> <span id="local_p_1028"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">resolve_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1025"><span class="LIDENT">mark_substituted</span></a> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_1026"><span class="LIDENT">env</span></a> <a href="#local_p_1028"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_1029"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">expansion_of_module_type</span> <a href="#local_env_1026"><span class="LIDENT">env</span></a> <a href="#local_mt_1029"><span class="LIDENT">mt</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_1030"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_p_1028"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_e_1030"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Signature</span> <span id="local_s_1031"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_s_1031"><span class="LIDENT">s</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">With</span> <span class="LPAREN">(</span><span id="local_subs_1032"><span class="LIDENT">subs</span></span><span class="COMMA">,</span> <span id="local_s_1033"><span class="LIDENT">s</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">signature_of_u_module_type_expr</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1025"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1026"><span class="LIDENT">env</span></a> <a href="#local_s_1033"><span class="LIDENT">s</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1034"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_subs_1035"><span class="LIDENT">subs</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unresolve_subs</span> <a href="#local_subs_1032"><span class="LIDENT">subs</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">handle_signature_with_subs</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1025"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1026"><span class="LIDENT">env</span></a> <a href="#local_sg_1034"><span class="LIDENT">sg</span></a> <a href="#local_subs_1035"><span class="LIDENT">subs</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">TypeOf</span> <span class="LBRACE">{</span> <span class="LIDENT">t_expansion</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <span id="local_sg_1036"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_sg_1036"><span class="LIDENT">sg</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">TypeOf</span> <span class="LBRACE">{</span> <span id="local_t_desc_1037"><span class="LIDENT">t_desc</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <a href="#local_t_desc_1037"><span class="LIDENT">t_desc</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="COMMENT">(* and expansion_of_simple_expansion :
     Component.ModuleType.simple_expansion -&gt; expansion =
     let rec helper :
     Component.ModuleType.simple_expansion -&gt; Component.ModuleType.expr =
     function
     | Signature sg -&gt; Signature sg
     | Functor (arg, e) -&gt; Functor (arg, helper e)
       in
     function
   | Signature sg -&gt; Signature sg
   | Functor (arg, e) -&gt; Functor (arg, helper e) *)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module_type_expr"><span class="LIDENT">expansion_of_module_type_expr</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_1038"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_1039"><span class="LIDENT">env</span></span> <span id="local_m_1040"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1040"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="COMMENT">(* | Component.ModuleType.Path { p_expansion = Some e; _ } -&gt;
      Ok (expansion_of_simple_expansion e) *)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Path</span> <span class="LBRACE">{</span> <span id="local_p_path_1041"><span class="LIDENT">p_path</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span><span class="EOL">
</span>        <span class="LIDENT">resolve_module_type</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1038"><span class="LIDENT">mark_substituted</span></a> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_1039"><span class="LIDENT">env</span></a> <a href="#local_p_path_1041"><span class="LIDENT">p_path</span></a><span class="EOL">
</span>      <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_mt_1042"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">expansion_of_module_type</span> <a href="#local_env_1039"><span class="LIDENT">env</span></a> <a href="#local_mt_1042"><span class="LIDENT">mt</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_1043"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_p_path_1041"><span class="LIDENT">p_path</span></a><span class="COMMA">,</span> <a href="#local_e_1043"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Signature</span> <span id="local_s_1044"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_s_1044"><span class="LIDENT">s</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="COMMENT">(* | Component.ModuleType.With { w_expansion = Some e; _ } -&gt;
      Ok (signature_of_simple_expansion e)

      Recalculate 'With' expressions always, as we need to know which
      items have been removed
  *)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">With</span> <span class="LBRACE">{</span> <span id="local_w_substitutions_1045"><span class="LIDENT">w_substitutions</span></span><span class="SEMI">;</span> <span id="local_w_expr_1046"><span class="LIDENT">w_expr</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">signature_of_u_module_type_expr</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1038"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1039"><span class="LIDENT">env</span></a> <a href="#local_w_expr_1046"><span class="LIDENT">w_expr</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1047"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_subs_1048"><span class="LIDENT">subs</span></span> <span class="EQUAL">=</span> <span class="LIDENT">unresolve_subs</span> <a href="#local_w_substitutions_1045"><span class="LIDENT">w_substitutions</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">handle_signature_with_subs</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1038"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1039"><span class="LIDENT">env</span></a> <a href="#local_sg_1047"><span class="LIDENT">sg</span></a> <a href="#local_subs_1048"><span class="LIDENT">subs</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1049"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_sg_1049"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">Functor</span> <span class="LPAREN">(</span><span id="local_arg_1050"><span class="LIDENT">arg</span></span><span class="COMMA">,</span> <span id="local_expr_1051"><span class="LIDENT">expr</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Functor</span> <span class="LPAREN">(</span><a href="#local_arg_1050"><span class="LIDENT">arg</span></a><span class="COMMA">,</span> <a href="#local_expr_1051"><span class="LIDENT">expr</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">TypeOf</span> <span class="LBRACE">{</span> <span class="LIDENT">t_expansion</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <span id="local_sg_1052"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_sg_1052"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">TypeOf</span> <span class="LBRACE">{</span> <span id="local_t_desc_1053"><span class="LIDENT">t_desc</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <a href="#local_t_desc_1053"><span class="LIDENT">t_desc</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module_type"><span class="LIDENT">expansion_of_module_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1054"><span class="LIDENT">env</span></span> <span id="local_m_1055"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1055"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_expr_1056"><span class="LIDENT">expr</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">expansion_of_module_type_expr</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_1054"><span class="LIDENT">env</span></a> <a href="#local_expr_1056"><span class="LIDENT">expr</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module_decl"><span class="LIDENT">expansion_of_module_decl</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">decl</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1057"><span class="LIDENT">env</span></span> <span id="local_decl_1058"><span class="LIDENT">decl</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_decl_1058"><span class="LIDENT">decl</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="COMMENT">(* | Component.Module.Alias (_, Some e) -&gt; Ok (expansion_of_simple_expansion e) *)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p_1059"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">expansion_of_module_path</span> <a href="#local_env_1057"><span class="LIDENT">env</span></a> <span class="LABEL">~strengthen:</span><span class="TRUE">true</span> <a href="#local_p_1059"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span> <span id="local_expr_1060"><span class="LIDENT">expr</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">expansion_of_module_type_expr</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_1057"><span class="LIDENT">env</span></a> <a href="#local_expr_1060"><span class="LIDENT">expr</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module"><span class="LIDENT">expansion_of_module</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1061"><span class="LIDENT">env</span></span> <span id="local_m_1062"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">expansion_of_module_decl</span> <a href="#local_env_1061"><span class="LIDENT">env</span></a> <a href="#local_m_1062"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-expansion_of_module_cached"><span class="LIDENT">expansion_of_module_cached</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="LIDENT">expansion</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env'_1063"><span class="LIDENT">env'</span></span> <span id="local_path_1064"><span class="LIDENT">path</span></span> <span id="local_m_1065"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_id_1066"><span class="LIDENT">id</span></span> <span class="EQUAL">=</span> <a href="#local_path_1064"><span class="LIDENT">path</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_run_1067"><span class="LIDENT">run</span></span> <span id="local_env_1068"><span class="LIDENT">env</span></span> <span id="local__id_1069"><span class="LIDENT">_id</span></span> <span class="EQUAL">=</span> <span class="LIDENT">expansion_of_module</span> <a href="#local_env_1068"><span class="LIDENT">env</span></a> <a href="#local_m_1065"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">ExpansionOfModuleMemo</span><span class="DOT">.</span><span class="LIDENT">memoize</span> <a href="#local_run_1067"><span class="LIDENT">run</span></a> <a href="#local_env'_1063"><span class="LIDENT">env'</span></a> <a href="#local_id_1066"><span class="LIDENT">id</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-umty_of_mty"><span class="LIDENT">umty_of_mty</span></span> <span class="COLON">:</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">U</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="FUNCTION">function</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Signature</span> <span id="local_sg_1070"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Signature</span> <a href="#local_sg_1070"><span class="LIDENT">sg</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Path</span> <span class="LBRACE">{</span> <span id="local_p_path_1071"><span class="LIDENT">p_path</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Path</span> <a href="#local_p_path_1071"><span class="LIDENT">p_path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">TypeOf</span> <span id="local_t_1072"><span class="LIDENT">t</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">TypeOf</span> <a href="#local_t_1072"><span class="LIDENT">t</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">With</span> <span class="LBRACE">{</span> <span id="local_w_substitutions_1073"><span class="LIDENT">w_substitutions</span></span><span class="SEMI">;</span> <span id="local_w_expr_1074"><span class="LIDENT">w_expr</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">With</span> <span class="LPAREN">(</span><a href="#local_w_substitutions_1073"><span class="LIDENT">w_substitutions</span></a><span class="COMMA">,</span> <a href="#local_w_expr_1074"><span class="LIDENT">w_expr</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Functor</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="ASSERT">assert</span> <span class="FALSE">false</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-fragmap"><span class="LIDENT">fragmap</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="LIDENT">mark_substituted</span><span class="COLON">:</span><span class="LIDENT">bool</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">substitution</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="COMMA">,</span> <a href="errors.ml.html#module-Tools_error.type-expansion_of_module_error"><span class="LIDENT">expansion_of_module_error</span></a><span class="RPAREN">)</span> <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span class="TILDE">~</span><span id="local_mark_substituted_1075"><span class="LIDENT">mark_substituted</span></span> <span id="local_env_1076"><span class="LIDENT">env</span></span> <span id="local_sub_1077"><span class="LIDENT">sub</span></span> <span id="local_sg_1078"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="COMMENT">(* Used when we haven't finished the substitution. For example, if the
     substitution is `M.t = u`, this function is used to map the declaration
     of `M` to be `M : ... with type t = u` *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_map_module_decl_1079"><span class="LIDENT">map_module_decl</span></span> <span id="local_decl_1080"><span class="LIDENT">decl</span></span> <span id="local_subst_1081"><span class="LIDENT">subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Module"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_decl_1080"><span class="LIDENT">decl</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_path_1082"><span class="LIDENT">path</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">expansion_of_module_path</span> <a href="#local_env_1076"><span class="LIDENT">env</span></a> <span class="LABEL">~strengthen:</span><span class="TRUE">true</span> <a href="#local_path_1082"><span class="LIDENT">path</span></a><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1083"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="UIDENT">ModuleType</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="UIDENT">With</span><span class="EOL">
</span>                <span class="LBRACE">{</span><span class="EOL">
</span>                  <span class="LIDENT">w_substitutions</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <a href="#local_subst_1081"><span class="LIDENT">subst</span></a> <span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LIDENT">w_expansion</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LIDENT">w_expr</span> <span class="EQUAL">=</span><span class="EOL">
</span>                    <span class="UIDENT">TypeOf</span><span class="EOL">
</span>                      <span class="LBRACE">{</span><span class="EOL">
</span>                        <span class="LIDENT">t_desc</span> <span class="EQUAL">=</span> <span class="UIDENT">StructInclude</span> <a href="#local_path_1082"><span class="LIDENT">path</span></a><span class="SEMI">;</span><span class="EOL">
</span>                        <span class="LIDENT">t_expansion</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_sg_1083"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="SEMI">;</span><span class="EOL">
</span>                      <span class="RBRACE">}</span><span class="SEMI">;</span><span class="EOL">
</span>                <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span id="local_mty'_1084"><span class="LIDENT">mty'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="UIDENT">ModuleType</span><span class="EOL">
</span>             <span class="LPAREN">(</span><span class="UIDENT">With</span><span class="EOL">
</span>                <span class="LBRACE">{</span><span class="EOL">
</span>                  <span class="LIDENT">w_substitutions</span> <span class="EQUAL">=</span> <span class="LBRACKET">[</span> <a href="#local_subst_1081"><span class="LIDENT">subst</span></a> <span class="RBRACKET">]</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LIDENT">w_expansion</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span><span class="SEMI">;</span><span class="EOL">
</span>                  <span class="LIDENT">w_expr</span> <span class="EQUAL">=</span> <span class="LIDENT">umty_of_mty</span> <a href="#local_mty'_1084"><span class="LIDENT">mty'</span></a><span class="SEMI">;</span><span class="EOL">
</span>                <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_map_include_decl_1085"><span class="LIDENT">map_include_decl</span></span> <span id="local_decl_1086"><span class="LIDENT">decl</span></span> <span id="local_subst_1087"><span class="LIDENT">subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Include"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Include</span></a> <span class="IN">in</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_decl_1086"><span class="LIDENT">decl</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span id="local_p_1088"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">expansion_of_module_path</span> <a href="#local_env_1076"><span class="LIDENT">env</span></a> <span class="LABEL">~strengthen:</span><span class="TRUE">true</span> <a href="#local_p_1088"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="EOL">
</span>        <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1089"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="LIDENT">fragmap</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1075"><span class="LIDENT">mark_substituted</span></a> <a href="#local_env_1076"><span class="LIDENT">env</span></a> <a href="#local_subst_1087"><span class="LIDENT">subst</span></a> <a href="#local_sg_1089"><span class="LIDENT">sg</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_sg_1090"><span class="LIDENT">sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="UIDENT">Signature</span> <a href="#local_sg_1090"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span id="local_mty'_1091"><span class="LIDENT">mty'</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="UIDENT">With</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span> <a href="#local_subst_1087"><span class="LIDENT">subst</span></a> <span class="RBRACKET">]</span><span class="COMMA">,</span> <a href="#local_mty'_1091"><span class="LIDENT">mty'</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_map_module_1092"><span class="LIDENT">map_module</span></span> <span id="local_m_1093"><span class="LIDENT">m</span></span> <span id="local_new_subst_1094"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Module"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span></a> <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_map_module_decl_1079"><span class="LIDENT">map_module_decl</span></a> <a href="#local_m_1093"><span class="LIDENT">m</span></a><span class="DOT">.</span><span class="LIDENT">type_</span> <a href="#local_new_subst_1094"><span class="LIDENT">new_subst</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_type__1095"><span class="LIDENT">type_</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Left</span> <span class="LBRACE">{</span> <a href="#local_m_1093"><span class="LIDENT">m</span></a> <span class="WITH">with</span> <a href="#local_type__1095"><span class="LIDENT">type_</span></a> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_map_signature_1096"><span class="LIDENT">map_signature</span></span> <span id="local_map_1097"><span class="LIDENT">map</span></span> <span id="local_items_1098"><span class="LIDENT">items</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_right</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="FUN">fun</span> <span id="local_item_1099"><span class="LIDENT">item</span></span> <span id="local_acc_1100"><span class="LIDENT">acc</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="#local_acc_1100"><span class="LIDENT">acc</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_items_1101"><span class="LIDENT">items</span></span><span class="COMMA">,</span> <span id="local_handled_1102"><span class="LIDENT">handled</span></span><span class="COMMA">,</span> <span id="local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></span><span class="COMMA">,</span> <span id="local_removed_1104"><span class="LIDENT">removed</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="MATCH">match</span> <span class="LPAREN">(</span><a href="#local_item_1099"><span class="LIDENT">item</span></a><span class="COMMA">,</span> <a href="#local_map_1097"><span class="LIDENT">map</span></a><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_id_1105"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_1106"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_t_1107"><span class="LIDENT">t</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="LIDENT">type_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_id'_1108"><span class="LIDENT">id'</span></span><span class="COMMA">,</span> <span id="local_fn_1109"><span class="LIDENT">fn</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="EOL">
</span>          <span class="WHEN">when</span> <a href="ident.ml.html#module-Name.val-type_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <a href="#local_id_1105"><span class="LIDENT">id</span></a> <span class="EQUAL">=</span> <a href="#local_id'_1108"><span class="LIDENT">id'</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <a href="#local_fn_1109"><span class="LIDENT">fn</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_t_1107"><span class="LIDENT">t</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUNCTION">function</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Left</span> <span id="local_x_1110"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Type</span><span class="EOL">
</span>                      <span class="LPAREN">(</span><a href="#local_id_1105"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_r_1106"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_1110"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                    <span class="COLONCOLON">::</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Right</span> <span class="LPAREN">(</span><span id="local_texpr_1111"><span class="LIDENT">texpr</span></span><span class="COMMA">,</span> <span id="local_eq_1112"><span class="LIDENT">eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RType</span> <span class="LPAREN">(</span><a href="#local_id_1105"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_texpr_1111"><span class="LIDENT">texpr</span></a><span class="COMMA">,</span> <a href="#local_eq_1112"><span class="LIDENT">eq</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_id_1113"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_1114"><span class="LIDENT">r</span></span><span class="COMMA">,</span> <span id="local_m_1115"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="LIDENT">module_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_id'_1116"><span class="LIDENT">id'</span></span><span class="COMMA">,</span> <span id="local_fn_1117"><span class="LIDENT">fn</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="EOL">
</span>          <span class="WHEN">when</span> <a href="ident.ml.html#module-Name.val-module_"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <a href="#local_id_1113"><span class="LIDENT">id</span></a> <span class="EQUAL">=</span> <a href="#local_id'_1116"><span class="LIDENT">id'</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <a href="#local_fn_1117"><span class="LIDENT">fn</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_1115"><span class="LIDENT">m</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUNCTION">function</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Left</span> <span id="local_x_1118"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="EOL">
</span>                      <span class="LPAREN">(</span><a href="#local_id_1113"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_r_1114"><span class="LIDENT">r</span></a><span class="COMMA">,</span> <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_1118"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                    <span class="COLONCOLON">::</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_id_1113"><span class="LIDENT">id</span></a> <span class="COLONCOLON">::</span> <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Right</span> <span id="local_y_1119"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModule</span> <span class="LPAREN">(</span><a href="#local_id_1113"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_y_1119"><span class="LIDENT">y</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Include</span> <span class="LPAREN">(</span><span class="LBRACE">{</span> <span id="local_expansion__1121"><span class="LIDENT">expansion_</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_i_1120"><span class="LIDENT">i</span></span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <a href="#local_map_1097"><span class="LIDENT">map</span></a> <a href="#local_expansion__1121"><span class="LIDENT">expansion_</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="EOL">
</span>            <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_items'_1122"><span class="LIDENT">items'</span></span><span class="COMMA">,</span> <span id="local_handled'_1123"><span class="LIDENT">handled'</span></span><span class="COMMA">,</span> <span id="local_subbed_modules'_1124"><span class="LIDENT">subbed_modules'</span></span><span class="COMMA">,</span> <span id="local_removed'_1125"><span class="LIDENT">removed'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_component_1126"><span class="LIDENT">component</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="IF">if</span> <a href="#local_handled'_1123"><span class="LIDENT">handled'</span></a> <span class="THEN">then</span><span class="EOL">
</span>                <a href="#local_map_include_decl_1085"><span class="LIDENT">map_include_decl</span></a> <a href="#local_i_1120"><span class="LIDENT">i</span></a><span class="DOT">.</span><span class="LIDENT">decl</span> <a href="#local_sub_1077"><span class="LIDENT">sub</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_decl_1127"><span class="LIDENT">decl</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="LET">let</span> <span id="local_expansion__1128"><span class="LIDENT">expansion_</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>                  <a href="component.ml.html#module-Signature"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span></a><span class="DOT">.</span><span class="EOL">
</span>                    <span class="LBRACE">{</span><span class="EOL">
</span>                      <a href="#local_expansion__1121"><span class="LIDENT">expansion_</span></a> <span class="WITH">with</span><span class="EOL">
</span>                      <span class="LIDENT">items</span> <span class="EQUAL">=</span> <a href="#local_items'_1122"><span class="LIDENT">items'</span></a><span class="SEMI">;</span><span class="EOL">
</span>                      <span class="LIDENT">removed</span> <span class="EQUAL">=</span> <a href="#local_removed'_1125"><span class="LIDENT">removed'</span></a><span class="SEMI">;</span><span class="EOL">
</span>                      <span class="LIDENT">compiled</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>                    <span class="RBRACE">}</span><span class="EOL">
</span>                <span class="IN">in</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">Include</span><span class="EOL">
</span>                     <span class="LBRACE">{</span> <a href="#local_i_1120"><span class="LIDENT">i</span></a> <span class="WITH">with</span> <a href="#local_decl_1127"><span class="LIDENT">decl</span></a><span class="SEMI">;</span> <a href="#local_expansion__1128"><span class="LIDENT">expansion_</span></a><span class="SEMI">;</span> <span class="LIDENT">strengthened</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="ELSE">else</span> <span class="UIDENT">Ok</span> <a href="#local_item_1099"><span class="LIDENT">item</span></a><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_component_1126"><span class="LIDENT">component</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_c_1129"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="UIDENT">Ok</span><span class="EOL">
</span>              <span class="LPAREN">(</span> <a href="#local_c_1129"><span class="LIDENT">c</span></a> <span class="COLONCOLON">::</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="#local_handled'_1123"><span class="LIDENT">handled'</span></a> <span class="BARBAR">||</span> <a href="#local_handled_1102"><span class="LIDENT">handled</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="#local_subbed_modules'_1124"><span class="LIDENT">subbed_modules'</span></a> <span class="INFIXOP1">@</span> <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                <a href="#local_removed'_1125"><span class="LIDENT">removed'</span></a> <span class="INFIXOP1">@</span> <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_id_1130"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_mt_1131"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span><span class="COMMA">,</span><span class="EOL">
</span>            <span class="LBRACE">{</span> <span class="LIDENT">module_type</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span id="local_id'_1132"><span class="LIDENT">id'</span></span><span class="COMMA">,</span> <span id="local_fn_1133"><span class="LIDENT">fn</span></span><span class="RPAREN">)</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="RPAREN">)</span><span class="EOL">
</span>          <span class="WHEN">when</span> <a href="ident.ml.html#module-Name.val-module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="UIDENT">Name</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <a href="#local_id_1130"><span class="LIDENT">id</span></a> <span class="EQUAL">=</span> <a href="#local_id'_1132"><span class="LIDENT">id'</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>            <a href="#local_fn_1133"><span class="LIDENT">fn</span></a> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_mt_1131"><span class="LIDENT">mt</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUNCTION">function</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Left</span> <span id="local_x_1134"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="EOL">
</span>                      <span class="LPAREN">(</span><a href="#local_id_1130"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="component.ml.html#module-Delayed.val-put"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put</span></a> <span class="LPAREN">(</span><span class="FUN">fun</span> <span class="LPAREN">(</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_x_1134"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>                    <span class="COLONCOLON">::</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="UIDENT">Right</span> <span id="local_y_1135"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                <span class="UIDENT">Ok</span><span class="EOL">
</span>                  <span class="LPAREN">(</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="TRUE">true</span><span class="COMMA">,</span><span class="EOL">
</span>                    <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span><span class="EOL">
</span>                    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModuleType</span> <span class="LPAREN">(</span><a href="#local_id_1130"><span class="LIDENT">id</span></a><span class="COMMA">,</span> <a href="#local_y_1135"><span class="LIDENT">y</span></a><span class="RPAREN">)</span> <span class="COLONCOLON">::</span> <a href="#local_removed_1104"><span class="LIDENT">removed</span></a> <span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_x_1136"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="#local_x_1136"><span class="LIDENT">x</span></a> <span class="COLONCOLON">::</span> <a href="#local_items_1101"><span class="LIDENT">items</span></a><span class="COMMA">,</span> <a href="#local_handled_1102"><span class="LIDENT">handled</span></a><span class="COMMA">,</span> <a href="#local_subbed_modules_1103"><span class="LIDENT">subbed_modules</span></a><span class="COMMA">,</span> <a href="#local_removed_1104"><span class="LIDENT">removed</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="#local_items_1098"><span class="LIDENT">items</span></a><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="FALSE">false</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="COMMA">,</span> <span class="LBRACKET">[</span><span class="RBRACKET">]</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></span> <span id="local_name_1138"><span class="LIDENT">name</span></span> <span id="local_new_subst_1139"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_modmaps_1140"><span class="LIDENT">modmaps</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1138"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <span class="FUN">fun</span> <span id="local_m_1141"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_map_module_1092"><span class="LIDENT">map_module</span></a> <a href="#local_m_1141"><span class="LIDENT">m</span></a> <a href="#local_new_subst_1139"><span class="LIDENT">new_subst</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">module_</span> <span class="EQUAL">=</span> <a href="#local_modmaps_1140"><span class="LIDENT">modmaps</span></a> <span class="RBRACE">}</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_new_sg_1142"><span class="LIDENT">new_sg</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_sub_1077"><span class="LIDENT">sub</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleEq</span> <span class="LPAREN">(</span><span id="local_frag_1143"><span class="LIDENT">frag</span></span><span class="COMMA">,</span> <span id="local_type__1144"><span class="LIDENT">type_</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-module_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_split</span></a> <a href="#local_frag_1143"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1145"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1146"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1147"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleEq</span> <span class="LPAREN">(</span><a href="#local_frag'_1146"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_type__1144"><span class="LIDENT">type_</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1145"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1147"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1148"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1149"><span class="LIDENT">mapfn</span></span> <span id="local_m_1150"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="LET">let</span> <span id="local_type__1151"><span class="LIDENT">type_</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>                <span class="LET">let</span> <span class="OPEN">open</span> <a href="component.ml.html#module-Module"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span></a> <span class="IN">in</span><span class="EOL">
</span>                <span class="MATCH">match</span> <a href="#local_type__1144"><span class="LIDENT">type_</span></a> <span class="WITH">with</span><span class="EOL">
</span>                <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_p_1152"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>                    <span class="LET">let</span> <span id="local_new_p_1153"><span class="LIDENT">new_p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>                      <span class="IF">if</span> <a href="#local_mark_substituted_1075"><span class="LIDENT">mark_substituted</span></a> <span class="THEN">then</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_p_1152"><span class="LIDENT">p</span></a> <span class="ELSE">else</span> <a href="#local_p_1152"><span class="LIDENT">p</span></a><span class="EOL">
</span>                    <span class="IN">in</span><span class="EOL">
</span>                    <span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_new_p_1153"><span class="LIDENT">new_p</span></a><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>                <span class="BAR">|</span> <span class="UIDENT">Alias</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="UIDENT">ModuleType</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_type__1144"><span class="LIDENT">type_</span></a><span class="EOL">
</span>              <span class="IN">in</span><span class="EOL">
</span>              <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Left</span> <span class="LBRACE">{</span> <a href="#local_m_1150"><span class="LIDENT">m</span></a> <span class="WITH">with</span> <a href="#local_type__1151"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">module_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1148"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1149"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleSubst</span> <span class="LPAREN">(</span><span id="local_frag_1154"><span class="LIDENT">frag</span></span><span class="COMMA">,</span> <span id="local_p_1155"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-module_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_split</span></a> <a href="#local_frag_1154"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1156"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1157"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1158"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleSubst</span> <span class="LPAREN">(</span><a href="#local_frag'_1157"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_p_1155"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1156"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1158"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1159"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1160"><span class="LIDENT">mapfn</span></span> <span class="UNDERSCORE">_</span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="MATCH">match</span><span class="EOL">
</span>                <span class="LIDENT">resolve_module</span> <span class="TILDE">~</span><a href="#local_mark_substituted_1075"><span class="LIDENT">mark_substituted</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_env_1076"><span class="LIDENT">env</span></a> <a href="#local_p_1155"><span class="LIDENT">p</span></a><span class="EOL">
</span>              <span class="WITH">with</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local_p_1161"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Right</span> <a href="#local_p_1161"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>              <span class="BAR">|</span> <span class="UIDENT">Error</span> <span id="local_e_1162"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_p_1155"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_e_1162"><span class="LIDENT">e</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">module_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1159"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1160"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleTypeEq</span> <span class="LPAREN">(</span><span id="local_frag_1163"><span class="LIDENT">frag</span></span><span class="COMMA">,</span> <span id="local_mtye_1164"><span class="LIDENT">mtye</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-module_type_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_type_split</span></a> <a href="#local_frag_1163"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1165"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1166"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1167"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleTypeEq</span> <span class="LPAREN">(</span><a href="#local_frag'_1166"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_mtye_1164"><span class="LIDENT">mtye</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1165"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1167"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1168"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1169"><span class="LIDENT">mapfn</span></span> <span id="local_t_1170"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Left</span> <span class="LBRACE">{</span> <a href="#local_t_1170"><span class="LIDENT">t</span></a> <span class="WITH">with</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <a href="#local_mtye_1164"><span class="LIDENT">mtye</span></a> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a><span class="EOL">
</span>              <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">module_type</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1168"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1169"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span><span class="EOL">
</span>              <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">ModuleTypeSubst</span> <span class="LPAREN">(</span><span id="local_frag_1171"><span class="LIDENT">frag</span></span><span class="COMMA">,</span> <span id="local_mtye_1172"><span class="LIDENT">mtye</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-module_type_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_type_split</span></a> <a href="#local_frag_1171"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1173"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1174"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1175"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>              <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">ModuleTypeSubst</span> <span class="LPAREN">(</span><a href="#local_frag'_1174"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_mtye_1172"><span class="LIDENT">mtye</span></a><span class="RPAREN">)</span><span class="EOL">
</span>            <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1173"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1175"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1176"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1177"><span class="LIDENT">mapfn</span></span> <span id="local__t_1178"><span class="LIDENT">_t</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Right</span> <a href="#local_mtye_1172"><span class="LIDENT">mtye</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a><span class="EOL">
</span>              <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">module_type</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1176"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1177"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span><span class="EOL">
</span>              <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">TypeEq</span> <span class="LPAREN">(</span><span id="local_frag_1179"><span class="LIDENT">frag</span></span><span class="COMMA">,</span> <span id="local_equation_1180"><span class="LIDENT">equation</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-type_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">type_split</span></a> <a href="#local_frag_1179"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1181"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1182"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1183"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">TypeEq</span> <span class="LPAREN">(</span><a href="#local_frag'_1182"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_equation_1180"><span class="LIDENT">equation</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1181"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1183"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1184"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1185"><span class="LIDENT">mapfn</span></span> <span id="local_t_1186"><span class="LIDENT">t</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Left</span> <span class="LBRACE">{</span> <a href="#local_t_1186"><span class="LIDENT">t</span></a> <span class="WITH">with</span> <a href="#local_equation_1180"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">TypeDecl</span><span class="DOT">.</span><span class="LIDENT">equation</span></a> <span class="RBRACE">}</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">type_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1184"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1185"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">TypeSubst</span><span class="EOL">
</span>        <span class="LPAREN">(</span> <span id="local_frag_1187"><span class="LIDENT">frag</span></span><span class="COMMA">,</span><span class="EOL">
</span>          <span class="LPAREN">(</span><span class="LBRACE">{</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">TypeDecl</span><span class="DOT">.</span><span class="UIDENT">Equation</span><span class="DOT">.</span><span class="LIDENT">manifest</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span id="local_x_1189"><span class="LIDENT">x</span></span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span> <span class="AS">as</span> <span id="local_equation_1188"><span class="LIDENT">equation</span></span><span class="RPAREN">)</span> <span class="RPAREN">)</span><span class="EOL">
</span>      <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="cfrag.ml.html#val-type_split"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">type_split</span></a> <a href="#local_frag_1187"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1190"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_frag'_1191"><span class="LIDENT">frag'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_new_subst_1192"><span class="LIDENT">new_subst</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="UIDENT">TypeSubst</span> <span class="LPAREN">(</span><a href="#local_frag'_1191"><span class="LIDENT">frag'</span></a><span class="COMMA">,</span> <a href="#local_equation_1188"><span class="LIDENT">equation</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_handle_intermediate_1137"><span class="LIDENT">handle_intermediate</span></a> <a href="#local_name_1190"><span class="LIDENT">name</span></a> <a href="#local_new_subst_1192"><span class="LIDENT">new_subst</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span id="local_name_1193"><span class="LIDENT">name</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LET">let</span> <span id="local_mapfn_1194"><span class="LIDENT">mapfn</span></span> <span id="local__t_1195"><span class="LIDENT">_t</span></span> <span class="EQUAL">=</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UIDENT">Right</span> <span class="LPAREN">(</span><a href="#local_x_1189"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_equation_1188"><span class="LIDENT">equation</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>            <a href="#local_map_signature_1096"><span class="LIDENT">map_signature</span></a> <span class="LBRACE">{</span> <span class="LIDENT">id_map</span> <span class="WITH">with</span> <span class="LIDENT">type_</span> <span class="EQUAL">=</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_name_1193"><span class="LIDENT">name</span></a><span class="COMMA">,</span> <a href="#local_mapfn_1194"><span class="LIDENT">mapfn</span></a><span class="RPAREN">)</span> <span class="RBRACE">}</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">items</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">TypeSubst</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="LBRACE">{</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">TypeDecl</span><span class="DOT">.</span><span class="UIDENT">Equation</span><span class="DOT">.</span><span class="LIDENT">manifest</span> <span class="EQUAL">=</span> <span class="UIDENT">None</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <span class="failwith">failwith</span> <span class="STRING">&quot;Unhandled condition: TypeSubst with no manifest&quot;</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_new_sg_1142"><span class="LIDENT">new_sg</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_items_1196"><span class="LIDENT">items</span></span><span class="COMMA">,</span> <span id="local__handled_1197"><span class="LIDENT">_handled</span></span><span class="COMMA">,</span> <span id="local_subbed_modules_1198"><span class="LIDENT">subbed_modules</span></span><span class="COMMA">,</span> <span id="local_removed_1199"><span class="LIDENT">removed</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_sub_of_removed_1200"><span class="LIDENT">sub_of_removed</span></span> <span id="local_removed_1201"><span class="LIDENT">removed</span></span> <span id="local_sub_1202"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_removed_1201"><span class="LIDENT">removed</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModule</span> <span class="LPAREN">(</span><span id="local_id_1203"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_p_1204"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="subst.ml.html#val-add_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module</span></a> <span class="LPAREN">(</span><a href="#local_id_1203"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_p_1204"><span class="LIDENT">p</span></a><span class="RPAREN">)</span> <a href="#local_p_1204"><span class="LIDENT">p</span></a> <a href="#local_sub_1202"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RType</span> <span class="LPAREN">(</span><span id="local_id_1205"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_r_texpr_1206"><span class="LIDENT">r_texpr</span></span><span class="COMMA">,</span> <span id="local_r_eq_1207"><span class="LIDENT">r_eq</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="subst.ml.html#val-add_type_replacement"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_type_replacement</span></a> <span class="LPAREN">(</span><a href="#local_id_1205"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_type</span></a><span class="RPAREN">)</span> <a href="#local_r_texpr_1206"><span class="LIDENT">r_texpr</span></a> <a href="#local_r_eq_1207"><span class="LIDENT">r_eq</span></a> <a href="#local_sub_1202"><span class="LIDENT">sub</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="UIDENT">RModuleType</span> <span class="LPAREN">(</span><span id="local_id_1208"><span class="LIDENT">id</span></span><span class="COMMA">,</span> <span id="local_e_1209"><span class="LIDENT">e</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>        <a href="subst.ml.html#val-add_module_type_replacement"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module_type_replacement</span></a> <span class="LPAREN">(</span><a href="#local_id_1208"><span class="LIDENT">id</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-module_type"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a><span class="RPAREN">)</span> <a href="#local_e_1209"><span class="LIDENT">e</span></a> <a href="#local_sub_1202"><span class="LIDENT">sub</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_sub_1210"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span> <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_right</span> <a href="#local_sub_of_removed_1200"><span class="LIDENT">sub_of_removed</span></a> <a href="#local_removed_1199"><span class="LIDENT">removed</span></a> <a href="subst.ml.html#val-identity"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">identity</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Invalidate resolved paths containing substituted idents - See the `With11`
     test for an example of why this is necessary *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_sub_of_substituted_1211"><span class="LIDENT">sub_of_substituted</span></span> <span id="local_x_1212"><span class="LIDENT">x</span></span> <span id="local_sub_1213"><span class="LIDENT">sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="LET">let</span> <span id="local_x_1214"><span class="LIDENT">x</span></span> <span class="EQUAL">=</span> <span class="LPAREN">(</span><a href="#local_x_1212"><span class="LIDENT">x</span></a> <span class="COLONGREATER">:&gt;</span> <a href="ident.ml.html#type-path_module"><span class="UIDENT">Ident</span><span class="DOT">.</span><span class="LIDENT">path_module</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>    <span class="LPAREN">(</span><span class="IF">if</span> <a href="#local_mark_substituted_1075"><span class="LIDENT">mark_substituted</span></a> <span class="THEN">then</span> <a href="subst.ml.html#val-add_module_substitution"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">add_module_substitution</span></a> <a href="#local_x_1214"><span class="LIDENT">x</span></a> <a href="#local_sub_1213"><span class="LIDENT">sub</span></a> <span class="ELSE">else</span> <a href="#local_sub_1213"><span class="LIDENT">sub</span></a><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="subst.ml.html#val-path_invalidate_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">path_invalidate_module</span></a> <a href="#local_x_1214"><span class="LIDENT">x</span></a><span class="EOL">
</span>    <span class="INFIXOP0">|&gt;</span> <a href="subst.ml.html#val-mto_invalidate_module"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">mto_invalidate_module</span></a> <a href="#local_x_1214"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_substituted_sub_1215"><span class="LIDENT">substituted_sub</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="UIDENT">List</span><span class="DOT">.</span><span class="LIDENT">fold_right</span> <a href="#local_sub_of_substituted_1211"><span class="LIDENT">sub_of_substituted</span></a> <a href="#local_subbed_modules_1198"><span class="LIDENT">subbed_modules</span></a> <a href="subst.ml.html#val-identity"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">identity</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="COMMENT">(* Need to call `apply_sig_map_items` directly as we're substituting for an item
     that's declared within the signature *)</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_items_1216"><span class="LIDENT">items</span></span> <span class="EQUAL">=</span> <a href="subst.ml.html#val-apply_sig_map_items"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">apply_sig_map_items</span></a> <a href="#local_substituted_sub_1215"><span class="LIDENT">substituted_sub</span></a> <a href="#local_items_1196"><span class="LIDENT">items</span></a> <span class="IN">in</span><span class="EOL">
</span><span class="EOL">
</span>  <span class="LET">let</span> <span id="local_res_1217"><span class="LIDENT">res</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <a href="subst.ml.html#val-signature"><span class="UIDENT">Subst</span><span class="DOT">.</span><span class="LIDENT">signature</span></a> <a href="#local_sub_1210"><span class="LIDENT">sub</span></a><span class="EOL">
</span>      <span class="LBRACE">{</span><span class="EOL">
</span>        <a href="#local_items_1216"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">items</span></a><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">removed</span> <span class="EQUAL">=</span> <a href="#local_removed_1199"><span class="LIDENT">removed</span></a> <span class="INFIXOP1">@</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">removed</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">compiled</span> <span class="EQUAL">=</span> <span class="FALSE">false</span><span class="SEMI">;</span><span class="EOL">
</span>        <span class="LIDENT">doc</span> <span class="EQUAL">=</span> <a href="#local_sg_1078"><span class="LIDENT">sg</span></a><span class="DOT">.</span><span class="LIDENT">doc</span><span class="SEMI">;</span><span class="EOL">
</span>      <span class="RBRACE">}</span><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <span class="UIDENT">Ok</span> <a href="#local_res_1217"><span class="LIDENT">res</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-find_external_module_path"><span class="LIDENT">find_external_module_path</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_p_1218"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_1218"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_x_1219"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_1220"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_x_1219"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1221"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_y_1220"><span class="LIDENT">y</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_y_1222"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_x_1221"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_1222"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_p_1223"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_1224"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_parent_path</span> <a href="#local_p_1223"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_p_1225"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_p_1225"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_1224"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span id="local_x_1226"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <a href="#local_x_1226"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_1227"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_x_1227"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1228"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_x_1228"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><span id="local_x_1229"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_1230"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_x_1229"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1231"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Canonical</span> <span class="LPAREN">(</span><a href="#local_x_1231"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_1230"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span id="local_x_1232"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">find_external_module_path</span> <a href="#local_x_1232"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1233"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <a href="#local_x_1233"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><span id="local_x_1234"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_1235"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_x_1234"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1236"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_y_1235"><span class="LIDENT">y</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_y_1237"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Apply</span> <span class="LPAREN">(</span><a href="#local_x_1236"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_1237"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span id="local_x_1238"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <a href="#local_x_1238"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_1239"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_path</span> <a href="#local_m_1239"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1240"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <a href="#local_x_1240"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-find_external_module_type_path"><span class="LIDENT">find_external_module_type_path</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">module_type</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_p_1241"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_1241"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_p_1242"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_name_1243"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_parent_path</span> <a href="#local_p_1242"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_p_1244"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_p_1244"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_name_1243"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Local</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_p_1241"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><span id="local_x_1245"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_1246"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_x_1245"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1247"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_y_1246"><span class="LIDENT">y</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_y_1248"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstT</span> <span class="LPAREN">(</span><a href="#local_x_1247"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_1248"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">CanonicalModuleType</span> <span class="LPAREN">(</span><span id="local_x_1249"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <span id="local_x_1250"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_x_1250"><span class="LIDENT">x</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1251"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Substituted</span> <a href="#local_x_1251"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_p_1241"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><span id="local_x_1252"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span id="local_y_1253"><span class="LIDENT">y</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span><span class="EOL">
</span>        <span class="LPAREN">(</span><span class="LIDENT">find_external_module_type_path</span> <a href="#local_x_1252"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <span class="LIDENT">find_external_module_type_path</span> <a href="#local_y_1253"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_x_1254"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_y_1255"><span class="LIDENT">y</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">AliasModuleType</span> <span class="LPAREN">(</span><a href="#local_x_1254"><span class="LIDENT">x</span></a><span class="COMMA">,</span> <a href="#local_y_1255"><span class="LIDENT">y</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_x_1256"><span class="LIDENT">x</span></span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_x_1256"><span class="LIDENT">x</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span class="UIDENT">Some</span> <span id="local_x_1257"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_x_1257"><span class="LIDENT">x</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span><span class="COMMA">,</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <span id="local_m_1258"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_m_1258"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_x_1259"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <a href="#local_x_1259"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-find_external_parent_path"><span class="LIDENT">find_external_parent_path</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_p_1260"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_1260"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span id="local_m_1261"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">find_external_module_path</span> <a href="#local_m_1261"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_1262"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_m_1262"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span id="local_m_1263"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">find_external_module_type_path</span> <a href="#local_m_1263"><span class="LIDENT">m</span></a> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m_1264"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <a href="#local_m_1264"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FragmentRoot</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-fixup_module_cfrag"><span class="LIDENT">fixup_module_cfrag</span></span> <span class="LPAREN">(</span><span id="local_f_1265"><span class="LIDENT">f</span></span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_f_1265"><span class="LIDENT">f</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_path_1266"><span class="LIDENT">path</span></span><span class="COMMA">,</span> <span id="local_frag_1267"><span class="LIDENT">frag</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">find_external_module_type_path</span> <a href="#local_path_1266"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_p_1268"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p_1268"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_frag_1267"><span class="LIDENT">frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_frag_1267"><span class="LIDENT">frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_path_1269"><span class="LIDENT">path</span></span><span class="COMMA">,</span> <span id="local_frag_1270"><span class="LIDENT">frag</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">find_external_module_path</span> <a href="#local_path_1269"><span class="LIDENT">path</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Some</span> <span id="local_p_1271"><span class="LIDENT">p</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_p_1271"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_frag_1270"><span class="LIDENT">frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_frag_1270"><span class="LIDENT">frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_parent_1272"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1273"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_signature_cfrag</span> <a href="#local_parent_1272"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_1273"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_1274"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_module_cfrag</span> <a href="#local_m_1274"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-fixup_module_type_cfrag"><span class="LIDENT">fixup_module_type_cfrag</span></span> <span class="LPAREN">(</span><span id="local_f_1275"><span class="LIDENT">f</span></span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a><span class="RPAREN">)</span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-resolved_module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_f_1275"><span class="LIDENT">f</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_parent_1276"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1277"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_signature_cfrag</span> <a href="#local_parent_1276"><span class="LIDENT">parent</span></a><span class="COMMA">,</span> <a href="#local_name_1277"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-fixup_signature_cfrag"><span class="LIDENT">fixup_signature_cfrag</span></span> <span class="LPAREN">(</span><span id="local_f_1278"><span class="LIDENT">f</span></span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a><span class="RPAREN">)</span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_f_1278"><span class="LIDENT">f</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span id="local_x_1279"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <a href="#local_x_1279"><span class="LIDENT">x</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_f_1280"><span class="LIDENT">f</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">fixup_module_cfrag</span> <a href="#local_f_1280"><span class="LIDENT">f</span></a> <span class="COLONGREATER">:&gt;</span> <a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-fixup_type_cfrag"><span class="LIDENT">fixup_type_cfrag</span></span> <span class="LPAREN">(</span><span id="local_f_1281"><span class="LIDENT">f</span></span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a><span class="RPAREN">)</span> <span class="COLON">:</span> <a href="cfrag.ml.html#type-resolved_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_f_1281"><span class="LIDENT">f</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_p_1282"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_x_1283"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_signature_cfrag</span> <a href="#local_p_1282"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_x_1283"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_1284"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_x_1285"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_signature_cfrag</span> <a href="#local_p_1284"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_x_1285"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_1286"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_x_1287"><span class="LIDENT">x</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_signature_cfrag</span> <a href="#local_p_1286"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_x_1287"><span class="LIDENT">x</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-find_module_with_replacement"><span class="LIDENT">find_module_with_replacement</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Module</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_lookup_error"><span class="LIDENT">simple_module_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1288"><span class="LIDENT">env</span></span> <span id="local_sg_1289"><span class="LIDENT">sg</span></span> <span id="local_name_1290"><span class="LIDENT">name</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-careful_module_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_module_in_sig</span></a> <a href="#local_sg_1289"><span class="LIDENT">sg</span></a> <a href="#local_name_1290"><span class="LIDENT">name</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_1291"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_1291"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModule_removed</span> <span id="local_path_1292"><span class="LIDENT">path</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LIDENT">lookup_module</span> <span class="LABEL">~mark_substituted:</span><span class="FALSE">false</span> <a href="#local_env_1288"><span class="LIDENT">env</span></a> <a href="#local_path_1292"><span class="LIDENT">path</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-find_module_type_with_replacement"><span class="LIDENT">find_module_type_with_replacement</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LIDENT">string</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span> <a href="component.ml.html#module-Delayed.type-t"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ModuleType</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">t</span></a><span class="COMMA">,</span><span class="EOL">
</span>      <a href="errors.ml.html#module-Tools_error.type-simple_module_type_lookup_error"><span class="LIDENT">simple_module_type_lookup_error</span></a> <span class="RPAREN">)</span><span class="EOL">
</span>    <span class="UIDENT">Result</span><span class="DOT">.</span><span class="LIDENT">result</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local__env_1293"><span class="LIDENT">_env</span></span> <span id="local_sg_1294"><span class="LIDENT">sg</span></span> <span id="local_name_1295"><span class="LIDENT">name</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="find.ml.html#val-careful_module_type_in_sig"><span class="UIDENT">Find</span><span class="DOT">.</span><span class="LIDENT">careful_module_type_in_sig</span></a> <a href="#local_sg_1294"><span class="LIDENT">sg</span></a> <a href="#local_name_1295"><span class="LIDENT">name</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModuleType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_m_1296"><span class="LIDENT">m</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><a href="component.ml.html#module-Delayed.val-put_val"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">put_val</span></a> <a href="#local_m_1296"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FModuleType_removed</span> <span id="local__mty_1297"><span class="LIDENT">_mty</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Find_failure</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_signature_fragment"><span class="LIDENT">resolve_signature_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-root"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">root</span></a> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">signature</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <span class="LPAREN">(</span><a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a> <span class="STAR">*</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="UIDENT">Resolved</span><span class="DOT">.</span><span class="LIDENT">parent</span> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span><span class="RPAREN">)</span><span class="EOL">
</span>    <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1298"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_p_1299"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_sg_1300"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span id="local_frag_1301"><span class="LIDENT">frag</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_frag_1301"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_sg_1302"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span> <span class="LIDENT">prefix_signature</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">FragmentRoot</span><span class="COMMA">,</span> <a href="#local_sg_1300"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <a href="#local_p_1299"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FragmentRoot</span><span class="COMMA">,</span> <a href="#local_sg_1302"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local__r_1303"><span class="LIDENT">_r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_1304"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1305"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">resolve_signature_fragment</span> <a href="#local_env_1298"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_1299"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_sg_1300"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <a href="#local_parent_1304"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_pfrag_1306"><span class="LIDENT">pfrag</span></span><span class="COMMA">,</span> <span id="local_ppath_1307"><span class="LIDENT">ppath</span></span><span class="COMMA">,</span> <span id="local_sg_1308"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-of_result"><span class="LIDENT">of_result</span></a> <span class="LPAREN">(</span><span class="LIDENT">find_module_with_replacement</span> <a href="#local_env_1298"><span class="LIDENT">env</span></a> <a href="#local_sg_1308"><span class="LIDENT">sg</span></a> <a href="#local_name_1305"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m'_1309"><span class="LIDENT">m'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_mname_1310"><span class="LIDENT">mname</span></span> <span class="EQUAL">=</span> <a href="../model/names.ml.html#module-Name.val-make_std"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">make_std</span></a> <a href="#local_name_1305"><span class="LIDENT">name</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_new_path_1311"><span class="LIDENT">new_path</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_ppath_1307"><span class="LIDENT">ppath</span></a><span class="COMMA">,</span> <a href="#local_mname_1310"><span class="LIDENT">mname</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_new_frag_1312"><span class="LIDENT">new_frag</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_pfrag_1306"><span class="LIDENT">pfrag</span></a><span class="COMMA">,</span> <a href="#local_mname_1310"><span class="LIDENT">mname</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m'_1313"><span class="LIDENT">m'</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m'_1309"><span class="LIDENT">m'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_modifier_1314"><span class="LIDENT">modifier</span></span> <span class="EQUAL">=</span> <span class="LIDENT">get_module_path_modifiers</span> <a href="#local_env_1298"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_m'_1313"><span class="LIDENT">m'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_cp'_1315"><span class="LIDENT">cp'</span></span><span class="COMMA">,</span> <span id="local_f'_1316"><span class="LIDENT">f'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_modifier_1314"><span class="LIDENT">modifier</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><a href="#local_new_path_1311"><span class="LIDENT">new_path</span></a><span class="COMMA">,</span> <a href="#local_new_frag_1312"><span class="LIDENT">new_frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Aliased</span> <span id="local_p'_1317"><span class="LIDENT">p'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_p'_1317"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <a href="#local_new_path_1311"><span class="LIDENT">new_path</span></a><span class="COMMA">,</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_p'_1317"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_new_frag_1312"><span class="LIDENT">new_frag</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstMT</span> <span id="local_p'_1318"><span class="LIDENT">p'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p'_1318"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_new_path_1311"><span class="LIDENT">new_path</span></a><span class="RPAREN">)</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p'_1318"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_new_frag_1312"><span class="LIDENT">new_frag</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="COMMENT">(* Don't use the cached one - `FragmentRoot` is not unique *)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-of_result"><span class="LIDENT">of_result</span></a> <a href="utils.ml.html#module-ResultMonad"><span class="UIDENT">ResultMonad</span></a><span class="DOT">.</span><span class="LPAREN">(</span><span class="LIDENT">expansion_of_module</span> <a href="#local_env_1298"><span class="LIDENT">env</span></a> <a href="#local_m'_1313"><span class="LIDENT">m'</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="LIDENT">assert_not_functor</span><span class="RPAREN">)</span><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_parent_sg_1319"><span class="LIDENT">parent_sg</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_sg_1320"><span class="LIDENT">sg</span></span> <span class="EQUAL">=</span> <span class="LIDENT">prefix_signature</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_cp'_1315"><span class="LIDENT">cp'</span></a><span class="COMMA">,</span> <a href="#local_parent_sg_1319"><span class="LIDENT">parent_sg</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LPAREN">(</span><a href="#local_f'_1316"><span class="LIDENT">f'</span></a><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <a href="#local_cp'_1315"><span class="LIDENT">cp'</span></a><span class="COMMA">,</span> <a href="#local_sg_1320"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_module_fragment"><span class="LIDENT">resolve_module_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-root"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">root</span></a> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-module_"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-resolved_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1321"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_p_1322"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_sg_1323"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span id="local_frag_1324"><span class="LIDENT">frag</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_frag_1324"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_1325"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_r_1325"><span class="LIDENT">r</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_1326"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1327"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">resolve_signature_fragment</span> <a href="#local_env_1321"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_1322"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_sg_1323"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <a href="#local_parent_1326"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_pfrag_1328"><span class="LIDENT">pfrag</span></span><span class="COMMA">,</span> <span id="local__ppath_1329"><span class="LIDENT">_ppath</span></span><span class="COMMA">,</span> <span id="local_sg_1330"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-of_result"><span class="LIDENT">of_result</span></a> <span class="LPAREN">(</span><span class="LIDENT">find_module_with_replacement</span> <a href="#local_env_1321"><span class="LIDENT">env</span></a> <a href="#local_sg_1330"><span class="LIDENT">sg</span></a> <a href="#local_name_1327"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_m'_1331"><span class="LIDENT">m'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_mname_1332"><span class="LIDENT">mname</span></span> <span class="EQUAL">=</span> <a href="../model/names.ml.html#module-Name.val-make_std"><span class="UIDENT">ModuleName</span><span class="DOT">.</span><span class="LIDENT">make_std</span></a> <a href="#local_name_1327"><span class="LIDENT">name</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_new_frag_1333"><span class="LIDENT">new_frag</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><a href="#local_pfrag_1328"><span class="LIDENT">pfrag</span></a><span class="COMMA">,</span> <a href="#local_mname_1332"><span class="LIDENT">mname</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m'_1334"><span class="LIDENT">m'</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m'_1331"><span class="LIDENT">m'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_modifier_1335"><span class="LIDENT">modifier</span></span> <span class="EQUAL">=</span> <span class="LIDENT">get_module_path_modifiers</span> <a href="#local_env_1321"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="FALSE">false</span> <a href="#local_m'_1334"><span class="LIDENT">m'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_f'_1336"><span class="LIDENT">f'</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <a href="#local_modifier_1335"><span class="LIDENT">modifier</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">None</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_new_frag_1333"><span class="LIDENT">new_frag</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Aliased</span> <span id="local_p'_1337"><span class="LIDENT">p'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_p'_1337"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_new_frag_1333"><span class="LIDENT">new_frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">SubstMT</span> <span id="local_p'_1338"><span class="LIDENT">p'</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p'_1338"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <a href="#local_new_frag_1333"><span class="LIDENT">new_frag</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_f''_1339"><span class="LIDENT">f''</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <span class="LIDENT">expansion_of_module</span> <a href="#local_env_1321"><span class="LIDENT">env</span></a> <a href="#local_m'_1334"><span class="LIDENT">m'</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local__m_1340"><span class="LIDENT">_m</span></span> <span class="COLON">:</span> <span class="LIDENT">expansion</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_f'_1336"><span class="LIDENT">f'</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <a href="#local_f'_1336"><span class="LIDENT">f'</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_f'_1336"><span class="LIDENT">f'</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_f'_1336"><span class="LIDENT">f'</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_module_cfrag</span> <a href="#local_f''_1339"><span class="LIDENT">f''</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_module_type_fragment"><span class="LIDENT">resolve_module_type_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-root"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">root</span></a> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">module_type</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-resolved_module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1341"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_p_1342"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_sg_1343"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span id="local_frag_1344"><span class="LIDENT">frag</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_frag_1344"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_1345"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_r_1345"><span class="LIDENT">r</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_1346"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1347"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">resolve_signature_fragment</span> <a href="#local_env_1341"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_1342"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_sg_1343"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <a href="#local_parent_1346"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_pfrag_1348"><span class="LIDENT">pfrag</span></span><span class="COMMA">,</span> <span id="local__ppath_1349"><span class="LIDENT">_ppath</span></span><span class="COMMA">,</span> <span id="local_sg_1350"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-of_result"><span class="LIDENT">of_result</span></a> <span class="LPAREN">(</span><span class="LIDENT">find_module_type_with_replacement</span> <a href="#local_env_1341"><span class="LIDENT">env</span></a> <a href="#local_sg_1350"><span class="LIDENT">sg</span></a> <a href="#local_name_1347"><span class="LIDENT">name</span></a><span class="RPAREN">)</span> <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span id="local_mt'_1351"><span class="LIDENT">mt'</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_mtname_1352"><span class="LIDENT">mtname</span></span> <span class="EQUAL">=</span> <a href="../model/names.ml.html#module-Name.val-make_std"><span class="UIDENT">ModuleTypeName</span><span class="DOT">.</span><span class="LIDENT">make_std</span></a> <a href="#local_name_1347"><span class="LIDENT">name</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_f'_1353"><span class="LIDENT">f'</span></span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><a href="#local_pfrag_1348"><span class="LIDENT">pfrag</span></a><span class="COMMA">,</span> <a href="#local_mtname_1352"><span class="LIDENT">mtname</span></a><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m'_1354"><span class="LIDENT">m'</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_mt'_1351"><span class="LIDENT">mt'</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_f''_1355"><span class="LIDENT">f''</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>        <span class="MATCH">match</span> <span class="LIDENT">expansion_of_module_type</span> <a href="#local_env_1341"><span class="LIDENT">env</span></a> <a href="#local_m'_1354"><span class="LIDENT">m'</span></a> <span class="WITH">with</span><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span id="local__m_1356"><span class="LIDENT">_m</span></span> <span class="COLON">:</span> <span class="LIDENT">expansion</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_f'_1353"><span class="LIDENT">f'</span></a><span class="EOL">
</span>        <span class="BAR">|</span> <span class="UIDENT">Error</span><span class="EOL">
</span>            <span class="LPAREN">(</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span><span class="EOL">
</span>            <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <span class="UNDERSCORE">_</span> <span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>            <a href="#local_f'_1353"><span class="LIDENT">f'</span></a><span class="EOL">
</span>      <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <span class="LPAREN">(</span><span class="LIDENT">fixup_module_type_cfrag</span> <a href="#local_f''_1355"><span class="LIDENT">f''</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-resolve_type_fragment"><span class="LIDENT">resolve_type_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-root"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">root</span></a> <span class="STAR">*</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Signature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-type_"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">type_</span></a> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>    <a href="cfrag.ml.html#type-resolved_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1357"><span class="LIDENT">env</span></span> <span class="LPAREN">(</span><span id="local_p_1358"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_sg_1359"><span class="LIDENT">sg</span></span><span class="RPAREN">)</span> <span id="local_frag_1360"><span class="LIDENT">frag</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_frag_1360"><span class="LIDENT">frag</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Resolved</span> <span id="local_r_1361"><span class="LIDENT">r</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_r_1361"><span class="LIDENT">r</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Dot</span> <span class="LPAREN">(</span><span id="local_parent_1362"><span class="LIDENT">parent</span></span><span class="COMMA">,</span> <span id="local_name_1363"><span class="LIDENT">name</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span class="OPEN">open</span> <a href="utils.ml.html#module-OptionMonad"><span class="UIDENT">OptionMonad</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="LIDENT">resolve_signature_fragment</span> <a href="#local_env_1357"><span class="LIDENT">env</span></a> <span class="LPAREN">(</span><a href="#local_p_1358"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_sg_1359"><span class="LIDENT">sg</span></a><span class="RPAREN">)</span> <a href="#local_parent_1362"><span class="LIDENT">parent</span></a><span class="EOL">
</span>      <a href="utils.ml.html#module-OptionMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_pfrag_1364"><span class="LIDENT">pfrag</span></span><span class="COMMA">,</span> <span id="local__ppath_1365"><span class="LIDENT">_ppath</span></span><span class="COMMA">,</span> <span id="local__sg_1366"><span class="LIDENT">_sg</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_result_1367"><span class="LIDENT">result</span></span> <span class="EQUAL">=</span> <span class="LIDENT">fixup_type_cfrag</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><a href="#local_pfrag_1364"><span class="LIDENT">pfrag</span></a><span class="COMMA">,</span> <a href="../model/names.ml.html#module-Name.val-make_std"><span class="UIDENT">TypeName</span><span class="DOT">.</span><span class="LIDENT">make_std</span></a> <a href="#local_name_1363"><span class="LIDENT">name</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="IN">in</span><span class="EOL">
</span>      <span class="UIDENT">Some</span> <a href="#local_result_1367"><span class="LIDENT">result</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-reresolve_signature_fragment"><span class="LIDENT">reresolve_signature_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1368"><span class="LIDENT">env</span></span> <span id="local_m_1369"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1369"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span id="local_p_1370"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_type</span> <a href="#local_env_1368"><span class="LIDENT">env</span></a> <a href="#local_p_1370"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span id="local_p_1371"><span class="LIDENT">p</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module</span> <a href="#local_env_1368"><span class="LIDENT">env</span></a> <a href="#local_p_1371"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="UNDERSCORE">_</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="AS">as</span> <span id="local_x_1372"><span class="LIDENT">x</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_fragment</span> <a href="#local_env_1368"><span class="LIDENT">env</span></a> <a href="#local_x_1372"><span class="LIDENT">x</span></a> <span class="COLONGREATER">:&gt;</span> <a href="cfrag.ml.html#type-resolved_signature"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_signature</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module_fragment"><span class="LIDENT">reresolve_module_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_module"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1373"><span class="LIDENT">env</span></span> <span id="local_m_1374"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1374"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><span id="local_p_1375"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_f_1376"><span class="LIDENT">f</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p'_1377"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module_type</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_p_1375"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Subst</span> <span class="LPAREN">(</span><a href="#local_p'_1377"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_fragment</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_f_1376"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><span id="local_p_1378"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_f_1379"><span class="LIDENT">f</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_p'_1380"><span class="LIDENT">p'</span></span> <span class="EQUAL">=</span> <span class="LIDENT">reresolve_module</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_p_1378"><span class="LIDENT">p</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="BACKQUOTE">`</span><span class="UIDENT">Alias</span> <span class="LPAREN">(</span><a href="#local_p'_1380"><span class="LIDENT">p'</span></a><span class="COMMA">,</span> <span class="LIDENT">reresolve_module_fragment</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_f_1379"><span class="LIDENT">f</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span id="local_m_1381"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_module_fragment</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_m_1381"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span id="local_sg_1382"><span class="LIDENT">sg</span></span><span class="COMMA">,</span> <span id="local_m_1383"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Module</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_signature_fragment</span> <a href="#local_env_1373"><span class="LIDENT">env</span></a> <a href="#local_sg_1382"><span class="LIDENT">sg</span></a><span class="COMMA">,</span> <a href="#local_m_1383"><span class="LIDENT">m</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_type_fragment"><span class="LIDENT">reresolve_type_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_type</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1384"><span class="LIDENT">env</span></span> <span id="local_m_1385"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1385"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span id="local_p_1386"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_1387"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Type</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_signature_fragment</span> <a href="#local_env_1384"><span class="LIDENT">env</span></a> <a href="#local_p_1386"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_1387"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span id="local_p_1388"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_1389"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ClassType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_signature_fragment</span> <a href="#local_env_1384"><span class="LIDENT">env</span></a> <a href="#local_p_1388"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_1389"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span id="local_p_1390"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_1391"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Class</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_signature_fragment</span> <a href="#local_env_1384"><span class="LIDENT">env</span></a> <a href="#local_p_1390"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_1391"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-reresolve_module_type_fragment"><span class="LIDENT">reresolve_module_type_fragment</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="MINUSGREATER">-&gt;</span> <a href="cfrag.ml.html#type-resolved_module_type"><span class="UIDENT">Cfrag</span><span class="DOT">.</span><span class="LIDENT">resolved_module_type</span></a> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1392"><span class="LIDENT">env</span></span> <span id="local_m_1393"><span class="LIDENT">m</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_m_1393"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span id="local_p_1394"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_n_1395"><span class="LIDENT">n</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="BACKQUOTE">`</span><span class="UIDENT">ModuleType</span> <span class="LPAREN">(</span><span class="LIDENT">reresolve_signature_fragment</span> <a href="#local_env_1392"><span class="LIDENT">env</span></a> <a href="#local_p_1394"><span class="LIDENT">p</span></a><span class="COMMA">,</span> <a href="#local_n_1395"><span class="LIDENT">n</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span class="REC">rec</span> <span id="val-class_signature_of_class"><span class="LIDENT">class_signature_of_class</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Class</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ClassSignature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1396"><span class="LIDENT">env</span></span> <span id="local_c_1397"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="LET">let</span> <span class="REC">rec</span> <span id="local_inner_1398"><span class="LIDENT">inner</span></span> <span id="local_decl_1399"><span class="LIDENT">decl</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>    <span class="MATCH">match</span> <a href="#local_decl_1399"><span class="LIDENT">decl</span></a> <span class="WITH">with</span><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Class</span><span class="DOT">.</span><span class="UIDENT">ClassType</span> <span id="local_e_1400"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">class_signature_of_class_type_expr</span> <a href="#local_env_1396"><span class="LIDENT">env</span></a> <a href="#local_e_1400"><span class="LIDENT">e</span></a><span class="EOL">
</span>    <span class="BAR">|</span> <span class="UIDENT">Arrow</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_d_1401"><span class="LIDENT">d</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <a href="#local_inner_1398"><span class="LIDENT">inner</span></a> <a href="#local_d_1401"><span class="LIDENT">d</span></a><span class="EOL">
</span>  <span class="IN">in</span><span class="EOL">
</span>  <a href="#local_inner_1398"><span class="LIDENT">inner</span></a> <a href="#local_c_1397"><span class="LIDENT">c</span></a><span class="DOT">.</span><span class="LIDENT">type_</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-class_signature_of_class_type_expr"><span class="LIDENT">class_signature_of_class_type_expr</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ClassType</span><span class="DOT">.</span><span class="LIDENT">expr</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ClassSignature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1402"><span class="LIDENT">env</span></span> <span id="local_e_1403"><span class="LIDENT">e</span></span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_e_1403"><span class="LIDENT">e</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Signature</span> <span id="local_s_1404"><span class="LIDENT">s</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Some</span> <a href="#local_s_1404"><span class="LIDENT">s</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Constr</span> <span class="LPAREN">(</span><span id="local_p_1405"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">resolve_type</span> <a href="#local_env_1402"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <span class="LPAREN">(</span><a href="#local_p_1405"><span class="LIDENT">p</span></a> <span class="COLONGREATER">:&gt;</span> <span class="UIDENT">Cpath</span><span class="DOT">.</span><span class="LIDENT">type_</span><span class="RPAREN">)</span> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClass</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_c_1406"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">class_signature_of_class</span> <a href="#local_env_1402"><span class="LIDENT">env</span></a> <a href="#local_c_1406"><span class="LIDENT">c</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span class="BACKQUOTE">`</span><span class="UIDENT">FClassType</span> <span class="LPAREN">(</span><span class="UNDERSCORE">_</span><span class="COMMA">,</span> <span id="local_c_1407"><span class="LIDENT">c</span></span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">class_signature_of_class_type</span> <a href="#local_env_1402"><span class="LIDENT">env</span></a> <a href="#local_c_1407"><span class="LIDENT">c</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">None</span><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="AND">and</span> <span id="val-class_signature_of_class_type"><span class="LIDENT">class_signature_of_class_type</span></span> <span class="COLON">:</span><span class="EOL">
</span>    <a href="env.ml.html#type-t"><span class="UIDENT">Env</span><span class="DOT">.</span><span class="LIDENT">t</span></a> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ClassType</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">ClassSignature</span><span class="DOT">.</span><span class="LIDENT">t</span> <span class="LIDENT">option</span> <span class="EQUAL">=</span><span class="EOL">
</span> <span class="FUN">fun</span> <span id="local_env_1408"><span class="LIDENT">env</span></span> <span id="local_c_1409"><span class="LIDENT">c</span></span> <span class="MINUSGREATER">-&gt;</span> <span class="LIDENT">class_signature_of_class_type_expr</span> <a href="#local_env_1408"><span class="LIDENT">env</span></a> <a href="#local_c_1409"><span class="LIDENT">c</span></a><span class="DOT">.</span><span class="LIDENT">expr</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-resolve_module_path"><span class="LIDENT">resolve_module_path</span></span> <span id="local_env_1410"><span class="LIDENT">env</span></span> <span id="local_p_1411"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">resolve_module</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_1410"><span class="LIDENT">env</span></a> <a href="#local_p_1411"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_1412"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_m_1413"><span class="LIDENT">m</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Hidden</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Gpath</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">Identifier</span> <span class="LBRACE">{</span> <span class="LIDENT">iv</span> <span class="EQUAL">=</span> <span class="BACKQUOTE">`</span><span class="UIDENT">Root</span> <span class="UNDERSCORE">_</span><span class="SEMI">;</span> <span class="UNDERSCORE">_</span> <span class="RBRACE">}</span><span class="RPAREN">)</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="LPAREN">(</span><span class="EOL">
</span>      <span class="LET">let</span> <span id="local_m_1414"><span class="LIDENT">m</span></span> <span class="EQUAL">=</span> <a href="component.ml.html#module-Delayed.val-get"><span class="UIDENT">Component</span><span class="DOT">.</span><span class="UIDENT">Delayed</span><span class="DOT">.</span><span class="LIDENT">get</span></a> <a href="#local_m_1413"><span class="LIDENT">m</span></a> <span class="IN">in</span><span class="EOL">
</span>      <span class="MATCH">match</span> <span class="LIDENT">expansion_of_module_cached</span> <a href="#local_env_1410"><span class="LIDENT">env</span></a> <a href="#local_p_1412"><span class="LIDENT">p</span></a> <a href="#local_m_1414"><span class="LIDENT">m</span></a> <span class="WITH">with</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a><span class="EOL">
</span>      <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1412"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-resolve_module_type_path"><span class="LIDENT">resolve_module_type_path</span></span> <span id="local_env_1415"><span class="LIDENT">env</span></span> <span id="local_p_1416"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">resolve_module_type</span> <span class="LABEL">~mark_substituted:</span><span class="TRUE">true</span> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_env_1415"><span class="LIDENT">env</span></a> <a href="#local_p_1416"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_1417"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span id="local_mt_1418"><span class="LIDENT">mt</span></span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>  <span class="MATCH">match</span> <span class="LIDENT">expansion_of_module_type</span> <a href="#local_env_1415"><span class="LIDENT">env</span></a> <a href="#local_mt_1418"><span class="LIDENT">mt</span></a> <span class="WITH">with</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Ok</span> <span class="UNDERSCORE">_</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1417"><span class="LIDENT">p</span></a><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModule</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">OpaqueModuleType</span> <a href="#local_p_1417"><span class="LIDENT">p</span></a><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedForwardPath</span> <span class="BAR">|</span> <span class="BACKQUOTE">`</span><span class="UIDENT">UnresolvedPath</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span><span class="EOL">
</span>  <span class="BAR">|</span> <span class="UIDENT">Error</span> <span class="LPAREN">(</span><span class="BACKQUOTE">`</span><span class="UIDENT">UnexpandedTypeOf</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span><span class="EOL">
</span>      <span class="UIDENT">Ok</span> <a href="#local_p_1417"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-resolve_type_path"><span class="LIDENT">resolve_type_path</span></span> <span id="local_env_1419"><span class="LIDENT">env</span></span> <span id="local_p_1420"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">resolve_type</span> <a href="#local_env_1419"><span class="LIDENT">env</span></a> <span class="LABEL">~add_canonical:</span><span class="TRUE">true</span> <a href="#local_p_1420"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_1421"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1421"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-resolve_value_path"><span class="LIDENT">resolve_value_path</span></span> <span id="local_env_1422"><span class="LIDENT">env</span></span> <span id="local_p_1423"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span> <span class="LIDENT">resolve_value</span> <a href="#local_env_1422"><span class="LIDENT">env</span></a> <a href="#local_p_1423"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_1424"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1424"><span class="LIDENT">p</span></a><span class="EOL">
</span><span class="EOL">
</span><span class="LET">let</span> <span id="val-resolve_class_type_path"><span class="LIDENT">resolve_class_type_path</span></span> <span id="local_env_1425"><span class="LIDENT">env</span></span> <span id="local_p_1426"><span class="LIDENT">p</span></span> <span class="EQUAL">=</span><span class="EOL">
</span>  <span class="LIDENT">resolve_class_type</span> <a href="#local_env_1425"><span class="LIDENT">env</span></a> <a href="#local_p_1426"><span class="LIDENT">p</span></a> <a href="utils.ml.html#module-ResultMonad.val-(&gt;&gt;=)"><span class="INFIXOP0">&gt;&gt;=</span></a> <span class="FUN">fun</span> <span class="LPAREN">(</span><span id="local_p_1427"><span class="LIDENT">p</span></span><span class="COMMA">,</span> <span class="UNDERSCORE">_</span><span class="RPAREN">)</span> <span class="MINUSGREATER">-&gt;</span> <span class="UIDENT">Ok</span> <a href="#local_p_1427"><span class="LIDENT">p</span></a><span class="EOL">
</span></span></code></pre></body></html>
